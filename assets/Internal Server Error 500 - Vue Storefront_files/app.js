(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["app"],{

/***/ "./core/app.ts":
/*!*********************!*\
  !*** ./core/app.ts ***!
  \*********************/
/*! exports provided: router, createApp, baseRouter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "router", function() { return routerProxy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createApp", function() { return createApp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "baseRouter", function() { return router; });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var vue_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! vue-router */ "./node_modules/vue-router/dist/vue-router.esm.js");
/* harmony import */ var vue_lazyload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! vue-lazyload */ "./node_modules/vue-lazyload/vue-lazyload.esm.js");
/* harmony import */ var vuelidate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! vuelidate */ "./node_modules/vuelidate/lib/index.js");
/* harmony import */ var vuelidate__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(vuelidate__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var vue_meta__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! vue-meta */ "./node_modules/vue-meta/dist/vue-meta.esm.js");
/* harmony import */ var vuex_router_sync__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! vuex-router-sync */ "./node_modules/vuex-router-sync/index.js");
/* harmony import */ var vuex_router_sync__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(vuex_router_sync__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var vue_observe_visibility__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! vue-observe-visibility */ "./node_modules/vue-observe-visibility/dist/vue-observe-visibility.esm.js");
/* harmony import */ var _scripts_resolvers_resolveGraphQL__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./scripts/resolvers/resolveGraphQL */ "./core/scripts/resolvers/resolveGraphQL.js");
/* harmony import */ var _vue_storefront_core_lib_themes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @vue-storefront/core/lib/themes */ "./core/lib/themes.ts");
/* harmony import */ var theme_index_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! theme/index.js */ "./src/themes/default/index.js");
/* harmony import */ var _vue_storefront_core_lib_module__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @vue-storefront/core/lib/module */ "./core/lib/module/index.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_mixins__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @vue-storefront/core/mixins */ "./core/mixins/index.js");
/* harmony import */ var _vue_storefront_core_filters__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @vue-storefront/core/filters */ "./core/filters/index.js");
/* harmony import */ var _vue_storefront_core_compatibility_plugins__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins */ "./core/compatibility/plugins/index.js");
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _modules_entry__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./modules-entry */ "./core/modules-entry.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_20___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @vue-storefront/core/lib/modules */ "./core/lib/modules.ts");
/* harmony import */ var _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @vue-storefront/core/hooks */ "./core/hooks.ts");
/* harmony import */ var src_modules_client__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! src/modules/client */ "./src/modules/client.ts");
/* harmony import */ var _vue_storefront_core_helpers_initialStateFactory__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @vue-storefront/core/helpers/initialStateFactory */ "./core/helpers/initialStateFactory.ts");
/* harmony import */ var _vue_storefront_core_helpers_router__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @vue-storefront/core/helpers/router */ "./core/helpers/router.ts");
/* harmony import */ var _vue_storefront_i18n_intl__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @vue-storefront/i18n/intl */ "./core/i18n/intl.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};











// TODO simplify by removing global mixins, plugins and filters - it can be done in normal 'vue' way

















var stateFactory = Object(_vue_storefront_core_helpers_initialStateFactory__WEBPACK_IMPORTED_MODULE_24__["default"])(_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"].state);
var router = null;
var routerProxy = null;
Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["once"])('__VUE_EXTEND_RR__', function () {
    vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vue_router__WEBPACK_IMPORTED_MODULE_4__["default"]);
});
var createApp = function (ssrContext, config, storeCode) {
    if (storeCode === void 0) { storeCode = null; }
    return __awaiter(void 0, void 0, void 0, function () {
        var storeView, vueOptions, apolloProvider, app, appContext;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    router = Object(_vue_storefront_core_helpers_router__WEBPACK_IMPORTED_MODULE_25__["createRouter"])();
                    routerProxy = Object(_vue_storefront_core_helpers_router__WEBPACK_IMPORTED_MODULE_25__["createRouterProxy"])(router);
                    // sync router with vuex 'router' store
                    Object(vuex_router_sync__WEBPACK_IMPORTED_MODULE_8__["sync"])(_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"], routerProxy);
                    // TODO: Don't mutate the state directly, use mutation instead
                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"].state.version = process.env.APPVERSION;
                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"].state.config = config; // @deprecated
                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"].state.__DEMO_MODE__ = (config.demomode === true);
                    if (ssrContext) {
                        // @deprecated - we shouldn't share server context between requests
                        vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$ssrRequestContext = {
                            output: {
                                cacheTags: ssrContext.output.cacheTags
                            },
                            userAgent: ssrContext.server.request.headers['user-agent']
                        };
                        vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags = ssrContext.output.cacheTags;
                    }
                    if (!_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"].state.config)
                        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"].state.config = config__WEBPACK_IMPORTED_MODULE_20__; //  @deprecated - we should avoid the `config`
                    return [4 /*yield*/, Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_14__["prepareStoreView"])(storeCode)]; // prepare the default storeView
                case 1:
                    storeView = _a.sent() // prepare the default storeView
                    ;
                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"].state.storeView = storeView;
                    // @deprecated from 2.0
                    Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["once"])('__VUE_EXTEND__', function () {
                        vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vuelidate__WEBPACK_IMPORTED_MODULE_6___default.a);
                        vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vue_lazyload__WEBPACK_IMPORTED_MODULE_5__["default"], { attempt: 2, preLoad: 1.5 });
                        vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vue_meta__WEBPACK_IMPORTED_MODULE_7__["default"], {
                            ssrAppId: 1
                        });
                        vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vue_observe_visibility__WEBPACK_IMPORTED_MODULE_9__["default"]);
                        Object.keys(_vue_storefront_core_compatibility_plugins__WEBPACK_IMPORTED_MODULE_17__).forEach(function (key) {
                            vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(_vue_storefront_core_compatibility_plugins__WEBPACK_IMPORTED_MODULE_17__[key]);
                        });
                        Object.keys(_vue_storefront_core_mixins__WEBPACK_IMPORTED_MODULE_15__).forEach(function (key) {
                            vue__WEBPACK_IMPORTED_MODULE_0__["default"].mixin(_vue_storefront_core_mixins__WEBPACK_IMPORTED_MODULE_15__[key]);
                        });
                        Object.keys(_vue_storefront_core_filters__WEBPACK_IMPORTED_MODULE_16__).forEach(function (key) {
                            vue__WEBPACK_IMPORTED_MODULE_0__["default"].filter(key, _vue_storefront_core_filters__WEBPACK_IMPORTED_MODULE_16__[key]);
                        });
                    });
                    vueOptions = {
                        router: routerProxy,
                        store: _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"],
                        i18n: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_3__["default"],
                        render: function (h) { return h(theme_index_js__WEBPACK_IMPORTED_MODULE_12__["themeEntry"]); }
                    };
                    return [4 /*yield*/, Object(_scripts_resolvers_resolveGraphQL__WEBPACK_IMPORTED_MODULE_10__["getApolloProvider"])()];
                case 2:
                    apolloProvider = _a.sent();
                    if (apolloProvider)
                        Object.assign(vueOptions, { provider: apolloProvider });
                    app = new vue__WEBPACK_IMPORTED_MODULE_0__["default"](vueOptions);
                    appContext = {
                        isServer: _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"],
                        ssrContext: ssrContext
                    };
                    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_21__["injectReferences"])(app, _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"], routerProxy, config__WEBPACK_IMPORTED_MODULE_20__);
                    Object(src_modules_client__WEBPACK_IMPORTED_MODULE_23__["registerClientModules"])();
                    Object(_vue_storefront_core_lib_module__WEBPACK_IMPORTED_MODULE_13__["registerModules"])(_modules_entry__WEBPACK_IMPORTED_MODULE_19__["enabledModules"], appContext);
                    Object(_vue_storefront_core_lib_themes__WEBPACK_IMPORTED_MODULE_11__["registerTheme"])(config__WEBPACK_IMPORTED_MODULE_20__.theme, app, routerProxy, _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"], config__WEBPACK_IMPORTED_MODULE_20__, ssrContext);
                    return [4 /*yield*/, Object(_vue_storefront_i18n_intl__WEBPACK_IMPORTED_MODULE_26__["checkForIntlPolyfill"])(storeView)];
                case 3:
                    _a.sent();
                    _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_22__["coreHooksExecutors"].afterAppInit();
                    // @deprecated from 2.0
                    _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_2__["default"].$emit('application-after-init', app);
                    return [2 /*return*/, { app: app, router: routerProxy, store: _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"], initialState: stateFactory.createInitialState(_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_18__["default"].state) }];
            }
        });
    });
};


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../node_modules/process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./core/build/config.json":
/*!********************************!*\
  !*** ./core/build/config.json ***!
  \********************************/
/*! exports provided: server, initialResources, staticPages, seo, console, graphql, api, elasticsearch, ssr, queues, defaultStoreCode, storeViews, entities, cart, attributes, products, orders, localForage, reviews, users, stock, images, demomode, tax, shipping, syncTasks, i18n, newsletter, mailer, theme, analytics, googleTagManager, hotjar, cms, cms_block, cms_page, usePriceTiers, useZeroPriceProduct, query, urlModule, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"server\":{\"host\":\"localhost\",\"port\":3000,\"protocol\":\"http\",\"api\":\"api\",\"devServiceWorker\":false,\"useHtmlMinifier\":true,\"htmlMinifierOptions\":{\"minifyJS\":true,\"minifyCSS\":true},\"useOutputCacheTagging\":false,\"useOutputCache\":false,\"outputCacheDefaultTtl\":86400,\"availableCacheTags\":[\"attribute\",\"C\",\"category\",\"checkout\",\"compare\",\"error\",\"home\",\"my-account\",\"P\",\"page-not-found\",\"product\",\"taxrule\"],\"invalidateCacheForwarding\":false,\"dynamicConfigReload\":true,\"dynamicConfigContinueOnError\":false,\"dynamicConfigExclude\":[\"entities\",\"boost\",\"localForage\",\"query\",\"shipping\",\"ssr\",\"storeViews\"],\"dynamicConfigInclude\":[],\"elasticCacheQuota\":4096,\"ssrDisabledFor\":{\"extensions\":[\"css\",\"eot\",\"gif\",\"ico\",\"jpg\",\"jpeg\",\"js\",\"json\",\"png\",\"raw\",\"svg\",\"tiff\",\"tif\",\"ttf\",\"woff\",\"woff2\"]},\"helmet\":{\"enabled\":true}},\"initialResources\":[{\"filters\":[\"vsf-newsletter-modal\",\"vsf-languages-modal\",\"vsf-layout-empty\",\"vsf-layout-minimal\",\"vsf-order-confirmation\",\"vsf-search-panel\"],\"type\":\"script\",\"onload\":true,\"rel\":\"prefetch\"},{\"filters\":[\"vsf-category\",\"vsf-home\",\"vsf-not-found\",\"vsf-error\",\"vsf-product\",\"vsf-cms\",\"vsf-checkout\",\"vsf-compare\",\"vsf-my-account\",\"vsf-static\",\"vsf-reset-password\"],\"type\":\"script\",\"onload\":true,\"rel\":\"prefetch\"}],\"staticPages\":{\"updateOnRequest\":true,\"destPath\":\"static\"},\"seo\":{\"useUrlDispatcher\":true,\"disableUrlRoutesPersistentCache\":true,\"defaultTitle\":\"Vue Storefront\"},\"console\":{\"showErrorOnProduction\":false,\"verbosityLevel\":\"display-everything\"},\"graphql\":{\"host\":\"localhost\",\"port\":8080},\"api\":{\"url\":\"https://demo.vuestorefront.io\",\"saveBandwidthOverCache\":true},\"elasticsearch\":{\"httpAuth\":\"\",\"host\":\"/api/catalog\",\"index\":\"vue_storefront_catalog\",\"min_score\":0.02,\"csrTimeout\":5000,\"ssrTimeout\":1000,\"queryMethod\":\"GET\",\"disablePersistentQueriesCache\":true,\"searchScoring\":{\"attributes\":{\"attribute_code\":{\"scoreValues\":{\"attribute_value\":{\"weight\":1}}}},\"fuzziness\":2,\"cutoff_frequency\":0.01,\"max_expansions\":3,\"minimum_should_match\":\"75%\",\"prefix_length\":2,\"boost_mode\":\"multiply\",\"score_mode\":\"multiply\",\"max_boost\":100,\"function_min_score\":1},\"searchableAttributes\":{\"name\":{\"boost\":4},\"sku\":{\"boost\":2},\"category.name\":{\"boost\":1}}},\"ssr\":{\"templates\":{\"default\":\"dist/index.html\",\"minimal\":\"dist/index.minimal.html\",\"basic\":\"dist/index.basic.html\",\"amp\":\"dist/index.amp.html\"},\"lazyHydrateFor\":[\"category-next.products\",\"homepage.new_collection\"],\"executeMixedinAsyncData\":true,\"initialStateFilter\":[\"__DEMO_MODE__\",\"version\",\"storeView\",\"attribute.list_by_id\"],\"useInitialStateFilter\":true},\"queues\":{\"maxNetworkTaskAttempts\":1,\"maxCartBypassAttempts\":1},\"defaultStoreCode\":\"\",\"storeViews\":{\"multistore\":false,\"commonCache\":false,\"mapStoreUrlsFor\":[\"de\",\"it\"],\"de\":{\"storeCode\":\"de\",\"storeId\":3,\"name\":\"German Store\",\"url\":\"/de\",\"appendStoreCode\":true,\"elasticsearch\":{\"host\":\"/api/catalog\",\"index\":\"vue_storefront_catalog_de\"},\"tax\":{\"sourcePriceIncludesTax\":false,\"defaultCountry\":\"DE\",\"defaultRegion\":\"\",\"calculateServerSide\":true},\"i18n\":{\"fullCountryName\":\"Germany\",\"fullLanguageName\":\"German\",\"defaultLanguage\":\"DE\",\"defaultCountry\":\"DE\",\"defaultLocale\":\"de-DE\",\"currencyCode\":\"EUR\",\"currencySign\":\"EUR\",\"dateFormat\":\"HH:mm D-M-YYYY\"},\"seo\":{\"defaultTitle\":\"Vue Storefront\"}},\"it\":{\"extend\":\"de\",\"storeCode\":\"it\",\"storeId\":4,\"name\":\"Italian Store\",\"url\":\"/it\",\"appendStoreCode\":true,\"elasticsearch\":{\"host\":\"/api/catalog\",\"index\":\"vue_storefront_catalog_it\"},\"tax\":{\"defaultCountry\":\"IT\"},\"i18n\":{\"fullCountryName\":\"Italy\",\"fullLanguageName\":\"Italian\",\"defaultCountry\":\"IT\",\"defaultLanguage\":\"IT\",\"defaultLocale\":\"it-IT\"},\"seo\":{\"defaultTitle\":\"Vue Storefront\"}}},\"entities\":{\"optimize\":true,\"twoStageCaching\":true,\"optimizeShoppingCart\":true,\"optimizeShoppingCartOmitFields\":[\"category\",\"category_ids\",\"configurable_children\",\"configurable_options\",\"description\",\"media_gallery\",\"product_links\",\"stock\"],\"category\":{\"includeFields\":[\"children_count\",\"id\",\"is_active\",\"level\",\"name\",\"parent_id\",\"path\",\"position\",\"product_count\",\"sku\",\"url_key\",\"url_path\",\"*.children_data.id\",\"*.id\"],\"excludeFields\":[\"sgn\"],\"filterFields\":{},\"breadcrumbFilterFields\":{},\"categoriesRootCategorylId\":2,\"categoriesDynamicPrefetchLevel\":2,\"categoriesDynamicPrefetch\":true,\"validSearchOptionsFromRouteParams\":[\"url-key\",\"slug\",\"id\"]},\"attribute\":{\"includeFields\":[\"activity\",\"attribute_code\",\"attribute_id\",\"default_frontend_label\",\"default_value\",\"entity_type_id\",\"frontend_input\",\"frontend_label\",\"id\",\"is_user_defined\",\"is_visible_on_front\",\"is_visible\",\"is_comparable\",\"options\",\"tier_prices\"],\"loadByAttributeMetadata\":false},\"productList\":{\"sort\":\"updated_at:desc\",\"includeFields\":[\"activity\",\"configurable_children.attributes\",\"configurable_children.id\",\"configurable_children.final_price\",\"configurable_children.color\",\"configurable_children.original_price\",\"configurable_children.original_price_incl_tax\",\"configurable_children.price\",\"configurable_children.price_incl_tax\",\"configurable_children.size\",\"configurable_children.sku\",\"configurable_children.special_price\",\"configurable_children.special_price_incl_tax\",\"configurable_children.tier_prices\",\"final_price\",\"id\",\"image\",\"name\",\"new\",\"original_price_incl_tax\",\"original_price\",\"price\",\"price_incl_tax\",\"product_links\",\"sale\",\"special_price\",\"special_to_date\",\"special_from_date\",\"special_price_incl_tax\",\"status\",\"tax_class_id\",\"tier_prices\",\"type_id\",\"url_path\",\"url_key\",\"*image\",\"*sku\",\"*small_image\"],\"excludeFields\":[\"attribute_set_id\",\"configurable_options\",\"description\",\"sgn\",\"*.sgn\",\"msrp_display_actual_price_type\",\"*.msrp_display_actual_price_type\",\"required_options\",\"media_gallery\",\"stock.use_config_min_qty\",\"stock.use_config_notify_stock_qty\",\"stock.stock_id\",\"stock.use_config_backorders\",\"stock.use_config_enable_qty_inc\",\"stock.enable_qty_increments\",\"stock.use_config_manage_stock\",\"stock.use_config_min_sale_qty\",\"stock.notify_stock_qty\",\"stock.use_config_max_sale_qty\",\"stock.use_config_max_sale_qty\",\"stock.qty_increments\",\"stock.stock_status_changed_auto\",\"stock.show_default_notification_message\",\"stock.use_config_qty_increments\",\"stock.is_decimal_divided\"]},\"productListWithChildren\":{\"includeFields\":[\"activity\",\"configurable_children.attributes\",\"configurable_children.image\",\"configurable_children.sku\",\"configurable_children.price\",\"configurable_children.special_price\",\"configurable_children.price_incl_tax\",\"configurable_children.special_price_incl_tax\",\"configurable_children.original_price\",\"configurable_children.original_price_incl_tax\",\"configurable_children.color\",\"configurable_children.size\",\"configurable_children.id\",\"configurable_children.tier_prices\",\"configurable_children.special_to_date\",\"configurable_children.special_from_date\",\"configurable_children.regular_price\",\"configurable_children.final_price\",\"final_price\",\"id\",\"image\",\"name\",\"new\",\"original_price\",\"original_price_incl_tax\",\"price\",\"price_incl_tax\",\"product_links\",\"sale\",\"sku\",\"special_price\",\"special_price_incl_tax\",\"special_from_date\",\"special_to_date\",\"status\",\"tax_class_id\",\"tier_prices\",\"type_id\",\"url_path\",\"url_key\"],\"excludeFields\":[\"attribute_set_id\",\"description\",\"sgn\",\"*.sgn\",\"msrp_display_actual_price_type\",\"*.msrp_display_actual_price_type\",\"required_options\",\"media_gallery\",\"stock.use_config_min_qty\",\"stock.use_config_notify_stock_qty\",\"stock.stock_id\",\"stock.use_config_backorders\",\"stock.use_config_enable_qty_inc\",\"stock.enable_qty_increments\",\"stock.use_config_manage_stock\",\"stock.use_config_min_sale_qty\",\"stock.notify_stock_qty\",\"stock.use_config_max_sale_qty\",\"stock.use_config_max_sale_qty\",\"stock.qty_increments\",\"stock.stock_status_changed_auto\",\"stock.show_default_notification_message\",\"stock.use_config_qty_increments\",\"stock.is_decimal_divided\"]},\"review\":{\"excludeFields\":[\"review_entity\",\"review_status\"]},\"product\":{\"excludeFields\":[\"attribute_set_id\",\"created_at\",\"has_options\",\"msrp_display_actual_price_type\",\"*.msrp_display_actual_price_type\",\"options_container\",\"required_options\",\"small_image\",\"stock.enable_qty_increments\",\"stock.is_decimal_divided\",\"stock.manage_stock\",\"stock.notify_stock_qty\",\"stock.qty_increments\",\"stock.show_default_notification_message\",\"stock.stock_id\",\"stock.stock_status_changed_auto\",\"stock.use_config_qty_increments\",\"stock.use_config_min_qty\",\"stock.use_config_notify_stock_qty\",\"stock.use_config_backorders\",\"stock.use_config_enable_qty_inc\",\"stock.use_config_manage_stock\",\"stock.use_config_min_sale_qty\",\"stock.use_config_max_sale_qty\",\"sgn\",\"*.sgn\",\"updated_at\"],\"includeFields\":null,\"useDynamicAttributeLoader\":true,\"standardSystemFields\":[\"category\",\"category_ids\",\"color_options\",\"configurable_children\",\"configurable_options\",\"custom_attributes\",\"custom_design_from\",\"description\",\"erin_recommends\",\"errors\",\"final_price\",\"final_price_incl_tax\",\"final_price_tax\",\"gift_message_available\",\"id\",\"image\",\"info\",\"is_configured\",\"links\",\"max_price\",\"max_regular_price\",\"media_gallery\",\"minimal_regular_price\",\"minimal_price\",\"name\",\"news_from_date\",\"original_price\",\"original_price_incl_tax\",\"options\",\"parentSku\",\"priceTax\",\"priceInclTax\",\"product_option\",\"price\",\"price_incl_tax\",\"price_tax\",\"qty\",\"regular_price\",\"size_options\",\"sku\",\"slug\",\"specialPriceInclTax\",\"specialPriceTax\",\"special_price_tax\",\"special_price_incl_tax\",\"special_from_date\",\"special_price\",\"status\",\"stock\",\"_score\",\"tax_class_id\",\"thumbnail\",\"tsk\",\"type_id\",\"url_key\",\"url_path\",\"visibility\"]}},\"cart\":{\"thumbnails\":{\"width\":150,\"height\":150},\"serverMergeByDefault\":true,\"serverSyncCanRemoveLocalItems\":false,\"serverSyncCanModifyLocalItems\":false,\"synchronize\":true,\"synchronize_totals\":true,\"setCustomProductOptions\":true,\"setConfigurableProductOptions\":true,\"askBeforeRemoveProduct\":true,\"displayItemDiscounts\":true,\"productsAreReconfigurable\":true,\"minicartCountType\":\"quantities\",\"create_endpoint\":\"/api/cart/create?token={{token}}\",\"updateitem_endpoint\":\"/api/cart/update?token={{token}}&cartId={{cartId}}\",\"deleteitem_endpoint\":\"/api/cart/delete?token={{token}}&cartId={{cartId}}\",\"pull_endpoint\":\"/api/cart/pull?token={{token}}&cartId={{cartId}}\",\"totals_endpoint\":\"/api/cart/totals?token={{token}}&cartId={{cartId}}\",\"paymentmethods_endpoint\":\"/api/cart/payment-methods?token={{token}}&cartId={{cartId}}\",\"shippingmethods_endpoint\":\"/api/cart/shipping-methods?token={{token}}&cartId={{cartId}}\",\"shippinginfo_endpoint\":\"/api/cart/shipping-information?token={{token}}&cartId={{cartId}}\",\"collecttotals_endpoint\":\"/api/cart/collect-totals?token={{token}}&cartId={{cartId}}\",\"deletecoupon_endpoint\":\"/api/cart/delete-coupon?token={{token}}&cartId={{cartId}}\",\"applycoupon_endpoint\":\"/api/cart/apply-coupon?token={{token}}&cartId={{cartId}}&coupon={{coupon}}\"},\"attributes\":{\"disablePersistentAttributesCache\":false},\"products\":{\"fieldsToCompact\":{\"minimal_price\":\"mp\",\"has_options\":\"ho\",\"url_key\":\"u\",\"status\":\"s\",\"required_options\":\"ro\",\"name\":\"nm\",\"tax_class_id\":\"tci\",\"description\":\"desc\",\"minimal_regular_price\":\"mrp\",\"final_price\":\"fp\",\"price\":\"p\",\"special_price\":\"sp\",\"original_final_price\":\"ofp\",\"original_price\":\"op\",\"original_special_price\":\"osp\",\"final_price_incl_tax\":\"fpit\",\"original_price_incl_tax\":\"opit\",\"price_incl_tax\":\"pit\",\"special_price_incl_tax\":\"spit\",\"final_price_tax\":\"fpt\",\"price_tax\":\"pt\",\"special_price_tax\":\"spt\",\"original_price_tax\":\"opt\",\"image\":\"i\",\"small_image\":\"si\",\"thumbnail\":\"t\"},\"disablePersistentProductsCache\":true,\"useMagentoUrlKeys\":true,\"setFirstVarianAsDefaultInURL\":false,\"configurableChildrenStockPrefetchStatic\":false,\"configurableChildrenStockPrefetchDynamic\":true,\"configurableChildrenStockPrefetchStaticPrefetchCount\":8,\"filterUnavailableVariants\":false,\"listOutOfStockProducts\":true,\"preventConfigurableChildrenDirectAccess\":true,\"alwaysSyncPlatformPricesOver\":false,\"alwaysSyncPricesClientSide\":false,\"clearPricesBeforePlatformSync\":false,\"waitForPlatformSync\":false,\"setupVariantByAttributeCode\":true,\"calculateBundlePriceByOptions\":true,\"endpoint\":\"/api/product\",\"defaultFilters\":[\"color\",\"erin_recommends\",\"price\",\"size\"],\"systemFilterNames\":[\"sort\"],\"maxFiltersQuerySize\":999,\"routerFiltersSource\":\"query\",\"filterFieldMapping\":{\"category.name\":\"category.name.keyword\"},\"colorMappings\":{\"Melange graphite\":\"#eeeeee\"},\"defaultSortBy\":{\"attribute\":\"updated_at\",\"order\":\"desc\"},\"sortByAttributes\":{\"Latest\":\"updated_at:desc\",\"Price: Low to high\":\"final_price\",\"Price: High to low\":\"final_price:desc\"},\"gallery\":{\"mergeConfigurableChildren\":true,\"imageAttributes\":[\"image\",\"thumbnail\",\"small_image\"],\"width\":600,\"height\":744},\"thumbnails\":{\"width\":310,\"height\":300},\"filterAggregationSize\":{\"default\":10,\"size\":10,\"color\":10},\"priceFilterKey\":\"final_price\",\"priceFilters\":{\"ranges\":[{\"from\":0,\"to\":50},{\"from\":50,\"to\":100},{\"from\":100,\"to\":150},{\"from\":150}]}},\"orders\":{\"directBackendSync\":true,\"endpoint\":\"/api/order\",\"payment_methods_mapping\":{},\"offline_orders\":{\"automatic_transmission_enabled\":false,\"notification\":{\"enabled\":true,\"title\":\"Order waiting!\",\"message\":\"Click here to confirm the order that you made offline.\",\"icon\":\"/assets/logo.png\"}}},\"localForage\":{\"defaultDrivers\":{\"user\":\"LOCALSTORAGE\",\"cmspage\":\"LOCALSTORAGE\",\"cmsblock\":\"LOCALSTORAGE\",\"carts\":\"LOCALSTORAGE\",\"orders\":\"LOCALSTORAGE\",\"wishlist\":\"LOCALSTORAGE\",\"categories\":\"LOCALSTORAGE\",\"attributes\":\"LOCALSTORAGE\",\"elasticCache\":\"LOCALSTORAGE\",\"claims\":\"LOCALSTORAGE\",\"syncTasks\":\"LOCALSTORAGE\",\"ordersHistory\":\"LOCALSTORAGE\",\"checkout\":\"LOCALSTORAGE\"},\"preserveCollections\":[\"cart\",\"user\"]},\"reviews\":{\"create_endpoint\":\"/api/review/create\"},\"users\":{\"autoRefreshTokens\":true,\"loginAfterCreatePassword\":true,\"endpoint\":\"/api/user\",\"history_endpoint\":\"/api/user/order-history?token={{token}}&pageSize={{pageSize}}&currentPage={{currentPage}}\",\"resetPassword_endpoint\":\"/api/user/reset-password\",\"createPassword_endpoint\":\"https://demo.vuestorefront.io/api/user/create-password\",\"changePassword_endpoint\":\"/api/user/change-password?token={{token}}\",\"login_endpoint\":\"/api/user/login\",\"create_endpoint\":\"/api/user/create\",\"me_endpoint\":\"/api/user/me?token={{token}}\",\"refresh_endpoint\":\"/api/user/refresh\",\"allowModification\":[\"firstname\",\"lastname\",\"email\",\"addresses\"],\"tokenInHeader\":false},\"stock\":{\"synchronize\":true,\"allowOutOfStockInCart\":true,\"endpoint\":\"/api/stock\"},\"images\":{\"useExactUrlsNoProxy\":false,\"baseUrl\":\"https://demo.vuestorefront.io/img/\",\"useSpecificImagePaths\":false,\"paths\":{\"product\":\"/catalog/product\"},\"productPlaceholder\":\"/assets/placeholder.jpg\"},\"demomode\":false,\"tax\":{\"defaultCountry\":\"US\",\"defaultRegion\":\"\",\"sourcePriceIncludesTax\":false,\"calculateServerSide\":true,\"userGroupId\":null,\"useOnlyDefaultUserGroupId\":false,\"deprecatedPriceFieldsSupport\":true,\"finalPriceIncludesTax\":false},\"shipping\":{\"methods\":[{\"method_title\":\"DPD Courier\",\"method_code\":\"flatrate\",\"carrier_code\":\"flatrate\",\"amount\":4,\"price_incl_tax\":5,\"default\":true,\"offline\":true}]},\"syncTasks\":{\"disablePersistentTaskQueue\":true},\"i18n\":{\"defaultCountry\":\"US\",\"defaultLanguage\":\"EN\",\"availableLocale\":[\"en-US\"],\"defaultLocale\":\"en-US\",\"currencyCode\":\"USD\",\"currencySign\":\"$\",\"currencyDecimal\":\"\",\"currencyGroup\":\"\",\"fractionDigits\":2,\"priceFormat\":\"{sign}{amount}\",\"dateFormat\":\"HH:mm D/M/YYYY\",\"fullCountryName\":\"United States\",\"fullLanguageName\":\"English\",\"bundleAllStoreviewLanguages\":false},\"newsletter\":{\"endpoint\":\"/api/ext/mailchimp-subscribe/subscribe\"},\"mailer\":{\"endpoint\":{\"send\":\"/api/ext/mail-service/send-email\",\"token\":\"/api/ext/mail-service/get-token\"},\"contactAddress\":\"contributors@vuestorefront.io\",\"sendConfirmation\":true},\"theme\":\"@vue-storefront/theme-default\",\"analytics\":{\"id\":false},\"googleTagManager\":{\"id\":false,\"debug\":true,\"product_attributes\":[\"name\",\"id\",\"sku\",{\"priceInclTax\":\"price\"},{\"qty\":\"quantity\"}]},\"hotjar\":{\"id\":false},\"cms\":{\"endpoint\":\"/api/ext/cms-data/cms{{type}}/{{cmsId}}\",\"endpointIdentifier\":\"/api/ext/cms-data/cms{{type}}Identifier/{{cmsIdentifier}}/storeId/{{storeId}}\"},\"cms_block\":{\"max_count\":500},\"cms_page\":{\"max_count\":500},\"usePriceTiers\":false,\"useZeroPriceProduct\":true,\"query\":{\"inspirations\":{\"filter\":[{\"key\":\"category.name\",\"value\":{\"eq\":\"Performance Fabrics\"}}]},\"newProducts\":{\"filter\":[{\"key\":\"new\",\"value\":{\"eq\":1}}]},\"bestSellers\":{\"filter\":[{\"key\":\"category.name\",\"value\":{\"eq\":\"Tees\"}}]}},\"urlModule\":{\"enableMapFallbackUrl\":false,\"endpoint\":\"/api/url\",\"map_endpoint\":\"/api/url/map\"}}");

/***/ }),

/***/ "./core/client-entry.ts":
/*!******************************!*\
  !*** ./core/client-entry.ts ***!
  \******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var lodash_es_union__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/union */ "./node_modules/lodash-es/union.js");
/* harmony import */ var _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/app */ "./core/app.ts");
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_core_lib_sync_task__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/sync/task */ "./core/lib/sync/task.ts");
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var lodash_es_omit__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash-es/omit */ "./node_modules/lodash-es/omit.js");
/* harmony import */ var _vue_storefront_core_lib_storeCodeFromRoute__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/lib/storeCodeFromRoute */ "./core/lib/storeCodeFromRoute.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_modules_offline_order_helpers_onNetworkStatusChange__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @vue-storefront/core/modules/offline-order/helpers/onNetworkStatusChange */ "./core/modules/offline-order/helpers/onNetworkStatusChange.ts");
/* harmony import */ var _vue_storefront_core_service_worker_registration__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/service-worker/registration */ "./core/service-worker/registration.js");
/* harmony import */ var _lib_async_data_loader__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lib/async-data-loader */ "./core/lib/async-data-loader.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_13___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hooks */ "./core/hooks.ts");
/* harmony import */ var _lib_router_manager__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lib/router-manager */ "./core/lib/router-manager.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};










 // register the service worker





var invokeClientEntry = function () { return __awaiter(void 0, void 0, void 0, function () {
    function _commonErrorHandler(err, reject) {
        if (err.message.indexOf('query returned empty result') > 0) {
            _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_3__["default"].dispatch('notification/spawnNotification', {
                type: 'error',
                message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__["default"].t('The product, category or CMS page is not available in Offline mode. Redirecting to Home.'),
                action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__["default"].t('OK') }
            });
            router.push(Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_8__["localizedRoute"])('/', Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_8__["currentStoreView"])().storeCode));
        }
        else {
            _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_3__["default"].dispatch('notification/spawnNotification', {
                type: 'error',
                message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__["default"].t(err.message),
                action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__["default"].t('OK') }
            });
            reject();
        }
    }
    function _ssrHydrateSubcomponents(components, next, to) {
        Promise.all(components.map(function (SubComponent) {
            if (SubComponent.asyncData) {
                return SubComponent.asyncData({
                    store: store,
                    route: to
                });
            }
            else {
                return Promise.resolve(null);
            }
        })).then(function () {
            _lib_async_data_loader__WEBPACK_IMPORTED_MODULE_11__["AsyncDataLoader"].flush({ store: store, route: to, context: null }).then(next).catch(function (err) {
                _commonErrorHandler(err, next);
            });
        }).catch(function (err) {
            _commonErrorHandler(err, next);
        });
    }
    var dynamicRuntimeConfig, storeCode, _a, app, router, store, initialState;
    return __generator(this, function (_b) {
        switch (_b.label) {
            case 0:
                dynamicRuntimeConfig = window.__INITIAL_STATE__.config ? Object.assign(config__WEBPACK_IMPORTED_MODULE_13__, window.__INITIAL_STATE__.config) : config__WEBPACK_IMPORTED_MODULE_13__;
                storeCode = window.__INITIAL_STATE__.storeView.storeCode;
                return [4 /*yield*/, Object(_vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_2__["createApp"])(null, dynamicRuntimeConfig, storeCode)];
            case 1:
                _a = _b.sent(), app = _a.app, router = _a.router, store = _a.store;
                if (window.__INITIAL_STATE__) {
                    initialState = _hooks__WEBPACK_IMPORTED_MODULE_14__["coreHooksExecutors"].beforeHydrated(Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_6__["default"])(window.__INITIAL_STATE__, ['storeView', 'config', 'version', 'route']));
                    store.replaceState(Object.assign({}, store.state, initialState, { config: config__WEBPACK_IMPORTED_MODULE_13__ }));
                }
                return [4 /*yield*/, store.dispatch('url/registerDynamicRoutes')];
            case 2:
                _b.sent();
                _lib_router_manager__WEBPACK_IMPORTED_MODULE_15__["RouterManager"].flushRouteQueue();
                router.onReady(function () { return __awaiter(void 0, void 0, void 0, function () {
                    var canBeMounted;
                    return __generator(this, function (_a) {
                        canBeMounted = function () { return _lib_router_manager__WEBPACK_IMPORTED_MODULE_15__["RouterManager"].isRouteDispatched() && // route is dispatched
                            !router.history.pending && // there is no pending in router history
                            !app._isMounted; } // it's not mounted before
                        ;
                        if (canBeMounted()) {
                            app.$mount('#app');
                        }
                        router.beforeResolve(function (to, from, next) {
                            if (!from.name) {
                                next();
                                if (canBeMounted()) {
                                    app.$mount('#app');
                                }
                                return; // do not resolve asyncData on server render - already been done
                            }
                            if (!vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags)
                                vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags = new Set();
                            var matched = router.getMatchedComponents(to);
                            if (to) { // this is from url
                                if (config__WEBPACK_IMPORTED_MODULE_13__.storeViews.multistore === true) {
                                    var currentRoute = Object.assign({}, to, { host: window.location.host });
                                    var storeCode_1 = Object(_vue_storefront_core_lib_storeCodeFromRoute__WEBPACK_IMPORTED_MODULE_7__["default"])(currentRoute);
                                    var currentStore = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_8__["currentStoreView"])();
                                    if (storeCode_1 !== '' && storeCode_1 !== null) {
                                        if (storeCode_1 !== currentStore.storeCode) {
                                            document.location = to.path; // full reload
                                        }
                                    }
                                }
                            }
                            if (!matched.length || !matched[0]) {
                                return next();
                            }
                            store.dispatch('url/setCurrentRoute', { to: to, from: from });
                            Promise.all(matched.map(function (c) {
                                var components = c.mixins && config__WEBPACK_IMPORTED_MODULE_13__.ssr.executeMixedinAsyncData ? Array.from(c.mixins) : [];
                                Object(lodash_es_union__WEBPACK_IMPORTED_MODULE_1__["default"])(components, [c]).map(function (SubComponent) {
                                    if (SubComponent.preAsyncData) {
                                        SubComponent.preAsyncData({ store: store, route: to });
                                    }
                                });
                                if (c.asyncData) {
                                    c.asyncData({ store: store, route: to }).then(function (result) {
                                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_12__["Logger"].debug('Top-most asyncData executed')();
                                        _ssrHydrateSubcomponents(components, next, to);
                                    }).catch(next);
                                }
                                else {
                                    _ssrHydrateSubcomponents(components, next, to);
                                }
                            }));
                        });
                        return [2 /*return*/];
                    });
                }); });
                Object(_vue_storefront_core_lib_sync_task__WEBPACK_IMPORTED_MODULE_4__["registerSyncTaskProcessor"])();
                window.addEventListener('online', function () { Object(_vue_storefront_core_modules_offline_order_helpers_onNetworkStatusChange__WEBPACK_IMPORTED_MODULE_9__["onNetworkStatusChange"])(store); });
                return [2 /*return*/];
        }
    });
}); };
invokeClientEntry();


/***/ }),

/***/ "./core/compatibility/plugins/config/index.js":
/*!****************************************************!*\
  !*** ./core/compatibility/plugins/config/index.js ***!
  \****************************************************/
/*! exports provided: default, ConfigPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfigPlugin", function() { return ConfigPlugin; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony reexport (default from named exports) */ __webpack_require__.d(__webpack_exports__, "default", function() { return config__WEBPACK_IMPORTED_MODULE_0__; });
 // deprecated, use vuex store instead

var ConfigPlugin = {
  install: function install(Vue) {
    if (!Vue.prototype.$config) {
      Object.defineProperties(Vue.prototype, {
        $config: {
          get: function get() {
            return config__WEBPACK_IMPORTED_MODULE_0__;
          }
        }
      });
    }
  }
};


/***/ }),

/***/ "./core/compatibility/plugins/event-bus/index.js":
/*!*******************************************************!*\
  !*** ./core/compatibility/plugins/event-bus/index.js ***!
  \*******************************************************/
/*! exports provided: default, EventBusPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return EventBus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventBusPlugin", function() { return EventBusPlugin; });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
function _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

 // will be replaced with new mechanism with code-completion (via modules), don't use if you don't need to

/**
 * Filter extension is for running async data filters as event handlers
 * Example:
 * let product = {}
 * EventBus.$filter('after-product-changed', (product) => {
 *  return Promise ((resolve, reject) => {
 *    product.sku = 'abc'
 *    resolve (product)
 *  })
 * })
 * EventBus.$filter('after-product-changed', (product) => {
 *  return Promise ((resolve, reject) => {
 *    product.name = 'ABC'
 *    resolve (product)
 *  })
 * })
 * EventBus.$emitFilter('after-product-changed', product).then((resultsFromEventHanlders) => {
 *  // here you have data modified by extensions
 *  // resultsFromEventHanlders = [ { sku: abc, name: 'ABC' }, { sku: abc, name: 'ABC' } ]
 * })
 */

var filterExt = {
  $dataFilters: {
    value: [],
    writable: true
  },
  // data filters to be registered by extension developers
  $filter: {
    get: function get() {
      var _this = this;

      return function (eventName, callback) {
        if (!_this.$dataFilters[eventName]) {
          _this.$dataFilters[eventName] = [];
        }

        _this.$dataFilters[eventName].push(callback);
      };
    }
  },
  $emitFilter: {
    get: function get() {
      var _this2 = this;

      return function (eventName) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        if (args.length === 1) {
          args = args[0];
        }

        _this2.$emit(eventName, args);

        var promises = [];

        if (_this2.$dataFilters[eventName]) {
          var _iterator = _createForOfIteratorHelper(_this2.$dataFilters[eventName]),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var cb = _step.value;
              promises.push(cb(args));
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }
        }

        return Promise.all(promises);
      };
    }
  }
};
var EventBus = new vue__WEBPACK_IMPORTED_MODULE_0__["default"]();

if (!EventBus.$dataFilters) {
  Object.defineProperties(EventBus, filterExt);
}

var EventBusPlugin = {
  install: function install(Vue) {
    if (!Vue.prototype.$bus) {
      /** Vue.prototype.$bus is now @deprecated please do use `EventBus` instead */
      Object.defineProperties(Vue.prototype, {
        $bus: {
          get: function get() {
            return EventBus;
          }
        }
      });
    }
  }
};


/***/ }),

/***/ "./core/compatibility/plugins/index.js":
/*!*********************************************!*\
  !*** ./core/compatibility/plugins/index.js ***!
  \*********************************************/
/*! exports provided: EventBusPlugin, ConfigPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventBusPlugin", function() { return _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_0__["EventBusPlugin"]; });

/* harmony import */ var _vue_storefront_core_compatibility_plugins_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/config */ "./core/compatibility/plugins/config/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConfigPlugin", function() { return _vue_storefront_core_compatibility_plugins_config__WEBPACK_IMPORTED_MODULE_1__["ConfigPlugin"]; });


 // used in core entrys and themes.js, deprecated bc of redundancy and for simplification of a project



/***/ }),

/***/ "./core/data-resolver/CartService.ts":
/*!*******************************************!*\
  !*** ./core/data-resolver/CartService.ts ***!
  \*******************************************/
/*! exports provided: CartService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CartService", function() { return CartService; });
/* harmony import */ var _vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/helpers/getApiEndpointUrl */ "./core/helpers/getApiEndpointUrl.ts");
/* harmony import */ var _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/sync */ "./core/lib/sync/index.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};




var setShippingInfo = function (addressInformation) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'shippinginfo_endpoint')),
                payload: {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors',
                    body: JSON.stringify({ addressInformation: addressInformation })
                },
                silent: true
            })];
    });
}); };
var getTotals = function () { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'totals_endpoint')),
                payload: {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors'
                },
                silent: true
            })];
    });
}); };
var getCartToken = function (guestCart, forceClientState) {
    if (guestCart === void 0) { guestCart = false; }
    if (forceClientState === void 0) { forceClientState = false; }
    return __awaiter(void 0, void 0, void 0, function () {
        var url;
        return __generator(this, function (_a) {
            url = Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(guestCart
                ? Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'create_endpoint').replace('{{token}}', '')
                : Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'create_endpoint'));
            return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                    url: url,
                    payload: {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        mode: 'cors'
                    },
                    force_client_state: forceClientState,
                    silent: true
                })];
        });
    });
};
var updateItem = function (cartServerToken, cartItem) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'updateitem_endpoint')),
                payload: {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors',
                    body: JSON.stringify({
                        cartItem: __assign(__assign({}, cartItem), { quoteId: cartItem.quoteId || cartServerToken })
                    })
                }
            })];
    });
}); };
var deleteItem = function (cartServerToken, cartItem) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'deleteitem_endpoint')),
                payload: {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors',
                    body: JSON.stringify({
                        cartItem: __assign(__assign({}, cartItem), { quoteId: cartServerToken })
                    })
                },
                silent: true
            })];
    });
}); };
var getPaymentMethods = function () { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'paymentmethods_endpoint')),
                payload: {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors'
                },
                silent: true
            })];
    });
}); };
var getShippingMethods = function (address) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'shippingmethods_endpoint')),
                payload: {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors',
                    body: JSON.stringify({
                        address: address
                    })
                },
                silent: true
            })];
    });
}); };
var getItems = function () { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'pull_endpoint')),
                payload: {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors'
                },
                silent: true
            })];
    });
}); };
var applyCoupon = function (couponCode) { return __awaiter(void 0, void 0, void 0, function () {
    var url;
    return __generator(this, function (_a) {
        url = Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'applycoupon_endpoint').replace('{{coupon}}', couponCode));
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                url: url,
                payload: {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors'
                },
                silent: false
            })];
    });
}); };
var removeCoupon = function () { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_0__["default"])(config__WEBPACK_IMPORTED_MODULE_3__.cart, 'deletecoupon_endpoint')),
                payload: {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors'
                },
                silent: false
            })];
    });
}); };
var CartService = {
    setShippingInfo: setShippingInfo,
    getTotals: getTotals,
    getCartToken: getCartToken,
    updateItem: updateItem,
    deleteItem: deleteItem,
    getPaymentMethods: getPaymentMethods,
    getShippingMethods: getShippingMethods,
    getItems: getItems,
    applyCoupon: applyCoupon,
    removeCoupon: removeCoupon
};


/***/ }),

/***/ "./core/data-resolver/CategoryService.ts":
/*!***********************************************!*\
  !*** ./core/data-resolver/CategoryService.ts ***!
  \***********************************************/
/*! exports provided: CategoryService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CategoryService", function() { return CategoryService; });
/* harmony import */ var _vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/search */ "./core/lib/search.ts");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};



var getCategories = function (_a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.parentId, parentId = _c === void 0 ? null : _c, _d = _b.filters, filters = _d === void 0 ? {} : _d, _e = _b.level, level = _e === void 0 ? null : _e, _f = _b.onlyActive, onlyActive = _f === void 0 ? true : _f, _g = _b.onlyNotEmpty, onlyNotEmpty = _g === void 0 ? false : _g, _h = _b.size, size = _h === void 0 ? 4000 : _h, _j = _b.start, start = _j === void 0 ? 0 : _j, _k = _b.sort, sort = _k === void 0 ? 'position:asc' : _k, _l = _b.includeFields, includeFields = _l === void 0 ? config__WEBPACK_IMPORTED_MODULE_2__.entities.optimize ? config__WEBPACK_IMPORTED_MODULE_2__.entities.category.includeFields : null : _l, _m = _b.excludeFields, excludeFields = _m === void 0 ? config__WEBPACK_IMPORTED_MODULE_2__.entities.optimize ? config__WEBPACK_IMPORTED_MODULE_2__.entities.category.excludeFields : null : _m;
    return __awaiter(void 0, void 0, void 0, function () {
        var searchQuery, _o, _p, _q, key, value, response;
        var e_1, _r;
        return __generator(this, function (_s) {
            switch (_s.label) {
                case 0:
                    searchQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_1__["SearchQuery"]();
                    if (parentId) {
                        searchQuery = searchQuery.applyFilter({ key: 'parent_id', value: { 'eq': parentId } });
                    }
                    if (level) {
                        searchQuery = searchQuery.applyFilter({ key: 'level', value: { 'eq': level } });
                    }
                    try {
                        for (_o = __values(Object.entries(filters)), _p = _o.next(); !_p.done; _p = _o.next()) {
                            _q = __read(_p.value, 2), key = _q[0], value = _q[1];
                            if (value !== null) {
                                if (Array.isArray(value)) {
                                    searchQuery = searchQuery.applyFilter({ key: key, value: { 'in': value } });
                                }
                                else if (typeof value === 'object') {
                                    searchQuery = searchQuery.applyFilter({ key: key, value: value });
                                }
                                else {
                                    searchQuery = searchQuery.applyFilter({ key: key, value: { 'eq': value } });
                                }
                            }
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (_p && !_p.done && (_r = _o.return)) _r.call(_o);
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                    if (onlyActive === true) {
                        searchQuery = searchQuery.applyFilter({ key: 'is_active', value: { 'eq': true } });
                    }
                    if (onlyNotEmpty === true) {
                        searchQuery = searchQuery.applyFilter({ key: 'product_count', value: { 'gt': 0 } });
                    }
                    return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__["quickSearchByQuery"])({ entityType: 'category', query: searchQuery, sort: sort, size: size, start: start, includeFields: includeFields, excludeFields: excludeFields })];
                case 1:
                    response = _s.sent();
                    return [2 /*return*/, response.items];
            }
        });
    });
};
var CategoryService = {
    getCategories: getCategories
};


/***/ }),

/***/ "./core/data-resolver/NewsletterService.ts":
/*!*************************************************!*\
  !*** ./core/data-resolver/NewsletterService.ts ***!
  \*************************************************/
/*! exports provided: NewsletterService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NewsletterService", function() { return NewsletterService; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/sync */ "./core/lib/sync/index.ts");
/* harmony import */ var _vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers/getApiEndpointUrl */ "./core/helpers/getApiEndpointUrl.ts");




var isSubscribed = function (email) {
    return _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_2__["TaskQueue"].execute({
        url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_0__.newsletter, 'endpoint')) + '?email=' + encodeURIComponent(email),
        payload: {
            method: 'GET',
            headers: { 'Content-Type': 'application/json' },
            mode: 'cors'
        },
        silent: true
    }).then(function (_a) {
        var result = _a.result;
        return result === 'subscribed';
    });
};
var subscribe = function (email) {
    return _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_2__["TaskQueue"].execute({
        url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_0__.newsletter, 'endpoint')),
        payload: {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            mode: 'cors',
            body: JSON.stringify({ email: email })
        }
    }).then(function (_a) {
        var code = _a.code;
        return code === 200;
    });
};
var unsubscribe = function (email) {
    return _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_2__["TaskQueue"].execute({
        url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_0__.newsletter, 'endpoint')),
        payload: {
            method: 'DELETE',
            headers: { 'Content-Type': 'application/json' },
            mode: 'cors',
            body: JSON.stringify({ email: email })
        }
    }).then(function (_a) {
        var code = _a.code;
        return code === 200;
    });
};
var NewsletterService = {
    isSubscribed: isSubscribed,
    subscribe: subscribe,
    unsubscribe: unsubscribe
};


/***/ }),

/***/ "./core/data-resolver/OrderService.ts":
/*!********************************************!*\
  !*** ./core/data-resolver/OrderService.ts ***!
  \********************************************/
/*! exports provided: OrderService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrderService", function() { return OrderService; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/sync */ "./core/lib/sync/index.ts");
/* harmony import */ var _vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers/getApiEndpointUrl */ "./core/helpers/getApiEndpointUrl.ts");



var placeOrder = function (order) {
    return _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({ url: Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_2__["default"])(config__WEBPACK_IMPORTED_MODULE_0__.orders, 'endpoint'),
        payload: {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            mode: 'cors',
            body: JSON.stringify(order)
        }
    });
};
var OrderService = {
    placeOrder: placeOrder
};


/***/ }),

/***/ "./core/data-resolver/ProductService.ts":
/*!**********************************************!*\
  !*** ./core/data-resolver/ProductService.ts ***!
  \**********************************************/
/*! exports provided: ProductService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProductService", function() { return ProductService; });
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/search */ "./core/modules/catalog/helpers/search.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers */ "./core/modules/catalog/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/search */ "./core/lib/search.ts");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/helpers/getApiEndpointUrl */ "./core/helpers/getApiEndpointUrl.ts");
/* harmony import */ var _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/lib/sync */ "./core/lib/sync/index.ts");
/* harmony import */ var _vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @vue-storefront/core/lib/store/entities */ "./core/lib/store/entities.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_prepare__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/prepare */ "./core/modules/catalog/helpers/prepare/index.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_configure__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/configure */ "./core/modules/catalog/helpers/configure/index.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};















var getProducts = function (_a) {
    var query = _a.query, _b = _a.start, start = _b === void 0 ? 0 : _b, _c = _a.size, size = _c === void 0 ? 50 : _c, _d = _a.sort, sort = _d === void 0 ? '' : _d, _e = _a.excludeFields, excludeFields = _e === void 0 ? null : _e, _f = _a.includeFields, includeFields = _f === void 0 ? null : _f, _g = _a.configuration, configuration = _g === void 0 ? null : _g, _h = _a.options, _j = _h === void 0 ? {} : _h, _k = _j.prefetchGroupProducts, prefetchGroupProducts = _k === void 0 ? !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["isServer"] : _k, _l = _j.fallbackToDefaultWhenNoAvailable, fallbackToDefaultWhenNoAvailable = _l === void 0 ? true : _l, _m = _j.setProductErrors, setProductErrors = _m === void 0 ? false : _m, _o = _j.setConfigurableProductOptions, setConfigurableProductOptions = _o === void 0 ? config__WEBPACK_IMPORTED_MODULE_5__.cart.setConfigurableProductOptions : _o, _p = _j.filterUnavailableVariants, filterUnavailableVariants = _p === void 0 ? config__WEBPACK_IMPORTED_MODULE_5__.products.filterUnavailableVariants : _p, _q = _j.assignProductConfiguration, assignProductConfiguration = _q === void 0 ? false : _q, _r = _j.separateSelectedVariant, separateSelectedVariant = _r === void 0 ? false : _r;
    return __awaiter(void 0, void 0, void 0, function () {
        var isCacheable, _s, excluded, included, _t, _u, products, _v, attributeMetadata, _w, aggregations, total, perPage, products_1, products_1_1, product, configuredProducts;
        var e_1, _x;
        return __generator(this, function (_y) {
            switch (_y.label) {
                case 0:
                    isCacheable = Object(_vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_0__["canCache"])({ includeFields: includeFields, excludeFields: excludeFields });
                    _s = Object(_vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_0__["getOptimizedFields"])({ excludeFields: excludeFields, includeFields: includeFields }), excluded = _s.excluded, included = _s.included;
                    return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_3__["quickSearchByQuery"])({
                            query: query,
                            start: start,
                            size: size,
                            entityType: 'product',
                            sort: sort,
                            excludeFields: excluded,
                            includeFields: included
                        })];
                case 1:
                    _t = _y.sent(), _u = _t.items, products = _u === void 0 ? [] : _u, _v = _t.attributeMetadata, attributeMetadata = _v === void 0 ? [] : _v, _w = _t.aggregations, aggregations = _w === void 0 ? [] : _w, total = _t.total, perPage = _t.perPage;
                    products = Object(_vue_storefront_core_modules_catalog_helpers_prepare__WEBPACK_IMPORTED_MODULE_12__["prepareProducts"])(products);
                    try {
                        for (products_1 = __values(products), products_1_1 = products_1.next(); !products_1_1.done; products_1_1 = products_1.next()) { // we store each product separately in cache to have offline access to products/single method
                            product = products_1_1.value;
                            if (isCacheable) { // store cache only for full loads
                                Object(_vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_0__["storeProductToCache"])(product, 'sku');
                            }
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (products_1_1 && !products_1_1.done && (_x = products_1.return)) _x.call(products_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                    return [4 /*yield*/, Object(_vue_storefront_core_modules_catalog_helpers_configure__WEBPACK_IMPORTED_MODULE_13__["configureProducts"])({
                            products: products,
                            attributes_metadata: attributeMetadata,
                            configuration: configuration,
                            options: {
                                prefetchGroupProducts: prefetchGroupProducts,
                                fallbackToDefaultWhenNoAvailable: fallbackToDefaultWhenNoAvailable,
                                setProductErrors: setProductErrors,
                                setConfigurableProductOptions: setConfigurableProductOptions,
                                filterUnavailableVariants: filterUnavailableVariants,
                                assignProductConfiguration: assignProductConfiguration,
                                separateSelectedVariant: separateSelectedVariant
                            },
                            excludeFields: excluded,
                            includeFields: included
                        })];
                case 2:
                    configuredProducts = _y.sent();
                    return [2 /*return*/, {
                            items: configuredProducts,
                            perPage: perPage,
                            start: start,
                            total: total,
                            aggregations: aggregations,
                            attributeMetadata: attributeMetadata
                        }];
            }
        });
    });
};
var getProductRenderList = function (_a) {
    var skus = _a.skus, isUserGroupedTaxActive = _a.isUserGroupedTaxActive, userGroupId = _a.userGroupId, token = _a.token;
    return __awaiter(void 0, void 0, void 0, function () {
        var _b, i18n, storeId, url, task, err_1;
        return __generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    _b = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_6__["currentStoreView"])(), i18n = _b.i18n, storeId = _b.storeId;
                    url = [
                        Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_7__["default"])(config__WEBPACK_IMPORTED_MODULE_5__.products, 'endpoint') + "/render-list",
                        "?skus=" + encodeURIComponent(skus.join(',')),
                        "&currencyCode=" + encodeURIComponent(i18n.currencyCode),
                        "&storeId=" + encodeURIComponent(storeId)
                    ].join('');
                    if (isUserGroupedTaxActive) {
                        url = url + "&userGroupId=" + userGroupId;
                    }
                    if (token && !config__WEBPACK_IMPORTED_MODULE_5__.users.tokenInHeader) {
                        url = url + "&token=" + token;
                    }
                    _c.label = 1;
                case 1:
                    _c.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_8__["TaskQueue"].execute({ url: url,
                            payload: {
                                method: 'GET',
                                headers: __assign({ 'Content-Type': 'application/json' }, (token && config__WEBPACK_IMPORTED_MODULE_5__.users.tokenInHeader ? { authorization: "Bearer " + token } : {})),
                                mode: 'cors'
                            },
                            callback_event: 'prices-after-sync'
                        })];
                case 2:
                    task = _c.sent();
                    return [2 /*return*/, task.result];
                case 3:
                    err_1 = _c.sent();
                    console.error(err_1);
                    return [2 /*return*/, { items: [] }];
                case 4: return [2 /*return*/];
            }
        });
    });
};
var getProduct = function (options, key) { return __awaiter(void 0, void 0, void 0, function () {
    var searchQuery, _a, items;
    return __generator(this, function (_b) {
        switch (_b.label) {
            case 0:
                searchQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_4__["SearchQuery"]();
                searchQuery = searchQuery.applyFilter({ key: key, value: { 'eq': options[key] } });
                return [4 /*yield*/, getProducts({
                        query: searchQuery,
                        size: 1,
                        configuration: { sku: options.childSku },
                        options: {
                            prefetchGroupProducts: true,
                            assignProductConfiguration: true
                        }
                    })];
            case 1:
                _a = (_b.sent()).items, items = _a === void 0 ? [] : _a;
                return [2 /*return*/, items[0] || null];
        }
    });
}); };
var getProductFromCache = function (options, key) { return __awaiter(void 0, void 0, void 0, function () {
    var cacheKey, cache, result, _a, excluded, included, _b, product, err_2;
    var _c;
    return __generator(this, function (_d) {
        switch (_d.label) {
            case 0:
                _d.trys.push([0, 8, , 9]);
                cacheKey = Object(_vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_9__["entityKeyName"])(key, options[key]);
                cache = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_10__["StorageManager"].get('elasticCache');
                return [4 /*yield*/, cache.getItem(cacheKey)];
            case 1:
                result = _d.sent();
                if (!(result !== null)) return [3 /*break*/, 6];
                if (!config__WEBPACK_IMPORTED_MODULE_5__.products.alwaysSyncPlatformPricesOver) return [3 /*break*/, 4];
                if (!!config__WEBPACK_IMPORTED_MODULE_5__.products.waitForPlatformSync) return [3 /*break*/, 3];
                return [4 /*yield*/, Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_1__["doPlatformPricesSync"])([result])];
            case 2:
                _d.sent();
                return [3 /*break*/, 4];
            case 3:
                Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_1__["doPlatformPricesSync"])([result]);
                _d.label = 4;
            case 4:
                _a = Object(_vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_0__["getOptimizedFields"])({ excludeFields: null, includeFields: null }), excluded = _a.excluded, included = _a.included;
                return [4 /*yield*/, Object(_vue_storefront_core_modules_catalog_helpers_configure__WEBPACK_IMPORTED_MODULE_13__["configureProducts"])({
                        products: [result],
                        attributes_metadata: [],
                        configuration: (_c = {}, _c[key] = options.childSku || options.sku || options[key], _c),
                        options: {
                            prefetchGroupProducts: true,
                            setConfigurableProductOptions: config__WEBPACK_IMPORTED_MODULE_5__.cart.setConfigurableProductOptions,
                            filterUnavailableVariants: config__WEBPACK_IMPORTED_MODULE_5__.products.filterUnavailableVariants,
                            assignProductConfiguration: true
                        },
                        excludeFields: excluded,
                        includeFields: included
                    })];
            case 5:
                _b = __read.apply(void 0, [_d.sent(), 1]), product = _b[0];
                return [2 /*return*/, product];
            case 6: return [2 /*return*/, getProduct(options, key)];
            case 7: return [3 /*break*/, 9];
            case 8:
                err_2 = _d.sent();
                // report errors
                if (err_2) {
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].error(err_2, 'product')();
                }
                return [2 /*return*/, getProduct(options, key)];
            case 9: return [2 /*return*/];
        }
    });
}); };
var getProductByKey = function (_a) {
    var options = _a.options, key = _a.key, skipCache = _a.skipCache;
    return __awaiter(void 0, void 0, void 0, function () {
        var result, _b;
        return __generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    if (!Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_3__["isOnline"])()) {
                        return [2 /*return*/, getProductFromCache(options, key)];
                    }
                    if (!skipCache) return [3 /*break*/, 2];
                    return [4 /*yield*/, getProduct(options, key)];
                case 1:
                    _b = _c.sent();
                    return [3 /*break*/, 4];
                case 2: return [4 /*yield*/, getProductFromCache(options, key)];
                case 3:
                    _b = _c.sent();
                    _c.label = 4;
                case 4:
                    result = _b;
                    return [2 /*return*/, result];
            }
        });
    });
};
var ProductService = {
    getProducts: getProducts,
    getProductRenderList: getProductRenderList,
    getProductByKey: getProductByKey
};


/***/ }),

/***/ "./core/data-resolver/ReviewsService.ts":
/*!**********************************************!*\
  !*** ./core/data-resolver/ReviewsService.ts ***!
  \**********************************************/
/*! exports provided: ReviewsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReviewsService", function() { return ReviewsService; });
/* harmony import */ var _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/sync */ "./core/lib/sync/index.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers/getApiEndpointUrl */ "./core/helpers/getApiEndpointUrl.ts");




var createReview = function (review) {
    return _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__["TaskQueue"].execute({
        url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_2__.reviews, 'create_endpoint')),
        payload: {
            method: 'POST',
            mode: 'cors',
            headers: {
                'Accept': 'application/json, text/plain, */*',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ review: review })
        }
    }).then(function (_a) {
        var code = _a.code;
        return code === 200;
    });
};
var ReviewsService = {
    createReview: createReview
};


/***/ }),

/***/ "./core/data-resolver/StockService.ts":
/*!********************************************!*\
  !*** ./core/data-resolver/StockService.ts ***!
  \********************************************/
/*! exports provided: StockService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StockService", function() { return StockService; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/sync */ "./core/lib/sync/index.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers/getApiEndpointUrl */ "./core/helpers/getApiEndpointUrl.ts");




var queueCheck = function (sku, actionName) {
    return _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].queue({
        url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_0__.stock, 'endpoint') + "/check?sku=" + encodeURIComponent(sku)),
        payload: {
            method: 'GET',
            headers: { 'Content-Type': 'application/json' },
            mode: 'cors'
        },
        is_result_cacheable: true,
        product_sku: sku,
        callback_event: "store:" + actionName
    });
};
var check = function (sku) {
    return _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
        url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_0__.stock, 'endpoint') + "/check?sku=" + encodeURIComponent(sku)),
        payload: {
            method: 'GET',
            headers: { 'Content-Type': 'application/json' },
            mode: 'cors'
        },
        is_result_cacheable: true,
        product_sku: sku
    });
};
var list = function (skuList) {
    return _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_1__["TaskQueue"].execute({
        url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["processURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_0__.stock, 'endpoint') + "/list?skus=" + encodeURIComponent(skuList.join(','))),
        payload: {
            method: 'GET',
            headers: { 'Content-Type': 'application/json' },
            mode: 'cors'
        },
        skus: skuList
    });
};
var StockService = {
    check: check,
    list: list,
    queueCheck: queueCheck
};


/***/ }),

/***/ "./core/data-resolver/UserService.ts":
/*!*******************************************!*\
  !*** ./core/data-resolver/UserService.ts ***!
  \*******************************************/
/*! exports provided: UserService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserService", function() { return UserService; });
/* harmony import */ var _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/sync */ "./core/lib/sync/index.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers/getApiEndpointUrl */ "./core/helpers/getApiEndpointUrl.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};




var headers = {
    'Accept': 'application/json, text/plain, */*',
    'Content-Type': 'application/json'
};
var resetPassword = function (email) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_2__.users, 'resetPassword_endpoint')),
                payload: {
                    method: 'POST',
                    mode: 'cors',
                    headers: headers,
                    body: JSON.stringify({ email: email })
                }
            })];
    });
}); };
var createPassword = function (email, newPassword, resetToken) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(config__WEBPACK_IMPORTED_MODULE_2__.users.createPassword_endpoint),
                payload: {
                    method: 'POST',
                    mode: 'cors',
                    headers: headers,
                    body: JSON.stringify({ email: email, newPassword: newPassword, resetToken: resetToken })
                }
            })];
    });
}); };
var login = function (username, password) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_2__.users, 'login_endpoint')),
                payload: {
                    method: 'POST',
                    mode: 'cors',
                    headers: headers,
                    body: JSON.stringify({ username: username, password: password })
                }
            })];
    });
}); };
var register = function (customer, password) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_2__.users, 'create_endpoint')),
                payload: {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify({ customer: customer, password: password })
                }
            })];
    });
}); };
var updateProfile = function (userProfile, actionName) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__["TaskQueue"].queue({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_2__.users, 'me_endpoint')),
                payload: {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors',
                    body: JSON.stringify(userProfile)
                },
                callback_event: "store:" + actionName
            })];
    });
}); };
var getProfile = function () { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_2__.users, 'me_endpoint')),
                payload: {
                    method: 'GET',
                    mode: 'cors',
                    headers: headers
                }
            })];
    });
}); };
var getOrdersHistory = function (pageSize, currentPage) {
    if (pageSize === void 0) { pageSize = 20; }
    if (currentPage === void 0) { currentPage = 1; }
    return __awaiter(void 0, void 0, void 0, function () {
        return __generator(this, function (_a) {
            return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__["TaskQueue"].execute({
                    url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_2__.users, 'history_endpoint').replace('{{pageSize}}', pageSize + '').replace('{{currentPage}}', currentPage + '')),
                    payload: {
                        method: 'GET',
                        mode: 'cors',
                        headers: headers
                    }
                })];
        });
    });
};
var changePassword = function (passwordData) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_0__["TaskQueue"].execute({
                url: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_2__.users, 'changePassword_endpoint')),
                payload: {
                    method: 'POST',
                    mode: 'cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(passwordData)
                }
            })];
    });
}); };
var refreshToken = function (refreshToken) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, fetch(Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processLocalizedURLAddress"])(Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_2__.users, 'refresh_endpoint')), {
                method: 'POST',
                mode: 'cors',
                headers: headers,
                body: JSON.stringify({ refreshToken: refreshToken })
            }).then(function (resp) { return resp.json(); })
                .then(function (resp) { return resp.result; })];
    });
}); };
var UserService = {
    resetPassword: resetPassword,
    createPassword: createPassword,
    login: login,
    register: register,
    updateProfile: updateProfile,
    getProfile: getProfile,
    getOrdersHistory: getOrdersHistory,
    changePassword: changePassword,
    refreshToken: refreshToken
};


/***/ }),

/***/ "./core/data-resolver/index.ts":
/*!*************************************!*\
  !*** ./core/data-resolver/index.ts ***!
  \*************************************/
/*! exports provided: CategoryService, UserService, CartService, OrderService, StockService, ReviewsService, NewsletterService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _CategoryService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CategoryService */ "./core/data-resolver/CategoryService.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CategoryService", function() { return _CategoryService__WEBPACK_IMPORTED_MODULE_0__["CategoryService"]; });

/* harmony import */ var _UserService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UserService */ "./core/data-resolver/UserService.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UserService", function() { return _UserService__WEBPACK_IMPORTED_MODULE_1__["UserService"]; });

/* harmony import */ var _CartService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CartService */ "./core/data-resolver/CartService.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CartService", function() { return _CartService__WEBPACK_IMPORTED_MODULE_2__["CartService"]; });

/* harmony import */ var _OrderService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OrderService */ "./core/data-resolver/OrderService.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrderService", function() { return _OrderService__WEBPACK_IMPORTED_MODULE_3__["OrderService"]; });

/* harmony import */ var _StockService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./StockService */ "./core/data-resolver/StockService.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StockService", function() { return _StockService__WEBPACK_IMPORTED_MODULE_4__["StockService"]; });

/* harmony import */ var _ReviewsService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ReviewsService */ "./core/data-resolver/ReviewsService.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReviewsService", function() { return _ReviewsService__WEBPACK_IMPORTED_MODULE_5__["ReviewsService"]; });

/* harmony import */ var _NewsletterService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./NewsletterService */ "./core/data-resolver/NewsletterService.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NewsletterService", function() { return _NewsletterService__WEBPACK_IMPORTED_MODULE_6__["NewsletterService"]; });











/***/ }),

/***/ "./core/filters/capitalize.js":
/*!************************************!*\
  !*** ./core/filters/capitalize.js ***!
  \************************************/
/*! exports provided: capitalize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "capitalize", function() { return capitalize; });
/**
 * Capitalize first letter of provided text
 * @param {String} text
 */
function capitalize(text) {
  if (!text) return '';
  text = text.toString();
  return text.charAt(0).toUpperCase() + text.slice(1);
}

/***/ }),

/***/ "./core/filters/date.js":
/*!******************************!*\
  !*** ./core/filters/date.js ***!
  \******************************/
/*! exports provided: date */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "date", function() { return date; });
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ "./node_modules/dayjs/dayjs.min.js");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dayjs/plugin/localizedFormat */ "./node_modules/dayjs/plugin/localizedFormat.js");
/* harmony import */ var dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers */ "./core/helpers/index.ts");




Object(_helpers__WEBPACK_IMPORTED_MODULE_3__["once"])('__VUE_EXTEND_DAYJS_LOCALIZED_FORMAT__', function () {
  dayjs__WEBPACK_IMPORTED_MODULE_1___default.a.extend(dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_2___default.a);
});
/**
 * Converts date to format provided as an argument or defined in config file (if argument not provided)
 * @param {String} date
 * @param {String} format
 */

function date(date, format, storeView) {
  var _storeView = storeView || Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])();

  var displayFormat = format || _storeView.i18n.dateFormat;

  var storeLocale = _storeView.i18n.defaultLocale.toLocaleLowerCase();

  var separatorIndex = storeLocale.indexOf('-');
  var languageCode = separatorIndex > -1 ? storeLocale.substr(0, separatorIndex) : storeLocale;
  var isStoreLocale = dayjs__WEBPACK_IMPORTED_MODULE_1___default()().locale(storeLocale).locale();
  var isLanguageLocale = dayjs__WEBPACK_IMPORTED_MODULE_1___default()().locale(languageCode).locale();
  var locale = isStoreLocale || isLanguageLocale;
  if (locale) return dayjs__WEBPACK_IMPORTED_MODULE_1___default()(date).locale(languageCode).format(displayFormat);
  return dayjs__WEBPACK_IMPORTED_MODULE_1___default()(date).format(displayFormat);
}

/***/ }),

/***/ "./core/filters/html-decode.js":
/*!*************************************!*\
  !*** ./core/filters/html-decode.js ***!
  \*************************************/
/*! exports provided: htmlDecode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "htmlDecode", function() { return htmlDecode; });
/* harmony import */ var lean_he_decode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lean-he/decode */ "./node_modules/lean-he/decode.js");
/* harmony import */ var lean_he_decode__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lean_he_decode__WEBPACK_IMPORTED_MODULE_0__);

/**
 * Decodes any named and numerical character references in text
 * @param {String} value
 */

function htmlDecode(value) {
  return value ? lean_he_decode__WEBPACK_IMPORTED_MODULE_0___default()(value) : '';
}

/***/ }),

/***/ "./core/filters/index.js":
/*!*******************************!*\
  !*** ./core/filters/index.js ***!
  \*******************************/
/*! exports provided: price, htmlDecode, date, capitalize, formatProductMessages, stripHTML */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _price__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./price */ "./core/filters/price.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "price", function() { return _price__WEBPACK_IMPORTED_MODULE_0__["price"]; });

/* harmony import */ var _html_decode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./html-decode */ "./core/filters/html-decode.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "htmlDecode", function() { return _html_decode__WEBPACK_IMPORTED_MODULE_1__["htmlDecode"]; });

/* harmony import */ var _date__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./date */ "./core/filters/date.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "date", function() { return _date__WEBPACK_IMPORTED_MODULE_2__["date"]; });

/* harmony import */ var _capitalize__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./capitalize */ "./core/filters/capitalize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "capitalize", function() { return _capitalize__WEBPACK_IMPORTED_MODULE_3__["capitalize"]; });

/* harmony import */ var _product_messages__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./product-messages */ "./core/filters/product-messages.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatProductMessages", function() { return _product_messages__WEBPACK_IMPORTED_MODULE_4__["formatProductMessages"]; });

/* harmony import */ var _strip_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./strip-html */ "./core/filters/strip-html.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stripHTML", function() { return _strip_html__WEBPACK_IMPORTED_MODULE_5__["stripHTML"]; });









/***/ }),

/***/ "./core/filters/price.js":
/*!*******************************!*\
  !*** ./core/filters/price.js ***!
  \*******************************/
/*! exports provided: price */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "price", function() { return price; });
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");


var applyCurrencySign = function applyCurrencySign(formattedPrice, _ref) {
  var currencySign = _ref.currencySign,
      priceFormat = _ref.priceFormat;
  return priceFormat.replace('{sign}', currencySign).replace('{amount}', formattedPrice);
};

var getLocaleSeparators = function getLocaleSeparators(defaultLocale) {
  return {
    decimal: 0.01.toLocaleString(defaultLocale).replace(/[0-9]/g, ''),
    group: 1000 .toLocaleString(defaultLocale).replace(/[0-9]/g, '')
  };
};

var replaceSeparators = function replaceSeparators(formattedPrice, currencySeparators, separators) {
  if (currencySeparators.decimal) formattedPrice = formattedPrice.replace(separators.decimal, currencySeparators.decimal);
  if (currencySeparators.group) formattedPrice = formattedPrice.replace(separators.group, currencySeparators.group);
  return formattedPrice;
};
/**
 * Converts number to price string
 * @param {Number} value
 */


function price(value, storeView) {
  if (isNaN(value)) {
    return value;
  }

  var _storeView = storeView || Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])();

  if (!_storeView.i18n) {
    return Number(value).toFixed(2);
  }

  var _storeView$i18n = _storeView.i18n,
      defaultLocale = _storeView$i18n.defaultLocale,
      currencySign = _storeView$i18n.currencySign,
      currencyDecimal = _storeView$i18n.currencyDecimal,
      currencyGroup = _storeView$i18n.currencyGroup,
      fractionDigits = _storeView$i18n.fractionDigits,
      priceFormat = _storeView$i18n.priceFormat;
  var options = {
    minimumFractionDigits: fractionDigits,
    maximumFractionDigits: fractionDigits
  };
  var localePrice = Math.abs(value).toLocaleString(defaultLocale, options);

  if (currencyDecimal !== '' || currencyGroup !== '') {
    localePrice = replaceSeparators(localePrice, {
      decimal: currencyDecimal,
      group: currencyGroup
    }, getLocaleSeparators(defaultLocale));
  }

  var valueWithSign = applyCurrencySign(localePrice, {
    currencySign: currencySign,
    priceFormat: priceFormat
  });
  return value >= 0 ? valueWithSign : '-' + valueWithSign;
}

/***/ }),

/***/ "./core/filters/product-messages.ts":
/*!******************************************!*\
  !*** ./core/filters/product-messages.ts ***!
  \******************************************/
/*! exports provided: formatProductMessages */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatProductMessages", function() { return formatProductMessages; });
/**
 * Format message string for product validation messages object
 */
function formatProductMessages(messages) {
    var msgs = [];
    for (var infoKey in messages) {
        if (messages[infoKey]) {
            msgs.push(messages[infoKey]);
        }
    }
    return msgs.join(', ');
}


/***/ }),

/***/ "./core/filters/strip-html.js":
/*!************************************!*\
  !*** ./core/filters/strip-html.js ***!
  \************************************/
/*! exports provided: stripHTML */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stripHTML", function() { return stripHTML; });
/**
 * Strip HTML tags
 * @param {String} html
 */
function stripHTML(html) {
  if (!html) return '';
  return html.replace(/<[^>]+>/g, '').trim();
}

/***/ }),

/***/ "./core/helpers/getApiEndpointUrl.ts":
/*!*******************************************!*\
  !*** ./core/helpers/getApiEndpointUrl.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");

// object - parent object in the config, e.g. config.cart
// field - field inside the object, e.g. create_endpoint
// returns - object.[field]_ssr if it exists and it is a server,
//           object.field otherwise
/* harmony default export */ __webpack_exports__["default"] = (function (object, field) {
    return _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"] && object[field + "_ssr"] ? object[field + "_ssr"] : object[field];
});


/***/ }),

/***/ "./core/helpers/index.ts":
/*!*******************************!*\
  !*** ./core/helpers/index.ts ***!
  \*******************************/
/*! exports provided: processURLAddress, processLocalizedURLAddress, slugify, getThumbnailPath, formatBreadCrumbRoutes, productThumbnailPath, baseFilterProductsQuery, buildFilterProductsQuery, once, isServer, onlineHelper, routerHelper, serial, calcItemsHmac, extendStore, reviewJsonLd, productJsonLd */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "processURLAddress", function() { return processURLAddress; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "processLocalizedURLAddress", function() { return processLocalizedURLAddress; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "slugify", function() { return slugify; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getThumbnailPath", function() { return getThumbnailPath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatBreadCrumbRoutes", function() { return formatBreadCrumbRoutes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "productThumbnailPath", function() { return productThumbnailPath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "baseFilterProductsQuery", function() { return baseFilterProductsQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "buildFilterProductsQuery", function() { return buildFilterProductsQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "once", function() { return once; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isServer", function() { return isServer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onlineHelper", function() { return onlineHelper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "routerHelper", function() { return routerHelper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "serial", function() { return serial; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calcItemsHmac", function() { return calcItemsHmac; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extendStore", function() { return extendStore; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reviewJsonLd", function() { return reviewJsonLd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "productJsonLd", function() { return productJsonLd; });
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var remove_accents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! remove-accents */ "./node_modules/remove-accents/index.js");
/* harmony import */ var remove_accents__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(remove_accents__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _vue_storefront_core_modules_url_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/modules/url/helpers */ "./core/modules/url/helpers/index.ts");
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-sha3 */ "./node_modules/js-sha3/src/sha3.js");
/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(js_sha3__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/hooks */ "./core/hooks.ts");
/* harmony import */ var _vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @vue-storefront/core/helpers/getApiEndpointUrl */ "./core/helpers/getApiEndpointUrl.ts");
/* harmony import */ var lodash_es_omit__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lodash-es/omit */ "./node_modules/lodash-es/omit.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};











var processURLAddress = function (url) {
    if (url === void 0) { url = ''; }
    if (url.startsWith('/'))
        return "" + Object(_vue_storefront_core_helpers_getApiEndpointUrl__WEBPACK_IMPORTED_MODULE_9__["default"])(config__WEBPACK_IMPORTED_MODULE_4__.api, 'url') + url;
    return url;
};
var processLocalizedURLAddress = function (url) {
    if (url === void 0) { url = ''; }
    if (config__WEBPACK_IMPORTED_MODULE_4__.storeViews.multistore) {
        return processURLAddress(Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_7__["adjustMultistoreApiUrl"])(url));
    }
    return processURLAddress(url);
};
/**
 * Create slugify -> "create-slugify" permalink  of text
 * @param {String} text
 */
function slugify(text) {
    // remove regional characters
    text = Object(remove_accents__WEBPACK_IMPORTED_MODULE_1__["remove"])(text);
    return text
        .toString()
        .toLowerCase()
        .replace(/\s+/g, '-') // Replace spaces with -
        .replace(/&/g, '-and-') // Replace & with 'and'
        .replace(/[^\w-]+/g, '') // Remove all non-word chars
        .replace(/--+/g, '-'); // Replace multiple - with single -
}
/**
 * @param {string} relativeUrl
 * @param {number} width
 * @param {number} height
 * @param {string} pathType
 * @returns {string}
 */
function getThumbnailPath(relativeUrl, width, height, pathType) {
    if (width === void 0) { width = 0; }
    if (height === void 0) { height = 0; }
    if (pathType === void 0) { pathType = 'product'; }
    if (config__WEBPACK_IMPORTED_MODULE_4__.images.useSpecificImagePaths) {
        var path = config__WEBPACK_IMPORTED_MODULE_4__.images.paths[pathType] !== undefined ? config__WEBPACK_IMPORTED_MODULE_4__.images.paths[pathType] : '';
        relativeUrl = path + relativeUrl;
    }
    if (config__WEBPACK_IMPORTED_MODULE_4__.images.useExactUrlsNoProxy) {
        return _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_8__["coreHooksExecutors"].afterProductThumbnailPathGenerate({ path: relativeUrl, sizeX: width, sizeY: height, pathType: pathType }).path; // this is exact url mode
    }
    else {
        var resultUrl = void 0;
        if (relativeUrl && (relativeUrl.indexOf('://') > 0 || relativeUrl.indexOf('?') > 0 || relativeUrl.indexOf('&') > 0))
            relativeUrl = encodeURIComponent(relativeUrl);
        // proxyUrl is not a url base path but contains {{url}} parameters and so on to use the relativeUrl as a template value and then do the image proxy opertions
        var baseUrl = processURLAddress(config__WEBPACK_IMPORTED_MODULE_4__.images.proxyUrl ? config__WEBPACK_IMPORTED_MODULE_4__.images.proxyUrl : config__WEBPACK_IMPORTED_MODULE_4__.images.baseUrl);
        if (baseUrl.indexOf('{{') >= 0) {
            baseUrl = baseUrl.replace('{{url}}', relativeUrl);
            baseUrl = baseUrl.replace('{{width}}', width.toString());
            baseUrl = baseUrl.replace('{{height}}', height.toString());
            resultUrl = baseUrl;
        }
        else {
            resultUrl = "" + baseUrl + width.toString() + "/" + height.toString() + "/resize" + relativeUrl;
        }
        var path = relativeUrl && relativeUrl.indexOf('no_selection') < 0 ? resultUrl : config__WEBPACK_IMPORTED_MODULE_4__.images.productPlaceholder || '';
        return _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_8__["coreHooksExecutors"].afterProductThumbnailPathGenerate({ path: path, sizeX: width, sizeY: height, pathType: pathType }).path;
    }
}
/**
 * Re-format category path to be suitable for breadcrumb
 * @param {Array} categoryPath
 */
function formatBreadCrumbRoutes(categoryPath) {
    var e_1, _a;
    var breadCrumbRoutesArray = [];
    try {
        for (var categoryPath_1 = __values(categoryPath), categoryPath_1_1 = categoryPath_1.next(); !categoryPath_1_1.done; categoryPath_1_1 = categoryPath_1.next()) {
            var category = categoryPath_1_1.value;
            breadCrumbRoutesArray.push({
                name: category.name,
                route_link: Object(_vue_storefront_core_modules_url_helpers__WEBPACK_IMPORTED_MODULE_2__["formatCategoryLink"])(category)
            });
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (categoryPath_1_1 && !categoryPath_1_1.done && (_a = categoryPath_1.return)) _a.call(categoryPath_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return breadCrumbRoutesArray;
}
/**
 * Return configurable product thumbnail depending on the configurable_children
 * @param {object} product
 * @param {bool} ignoreConfig
 */
function productThumbnailPath(product, ignoreConfig) {
    if (ignoreConfig === void 0) { ignoreConfig = false; }
    var thumbnail = product.image;
    if ((!thumbnail && product.type_id && product.type_id === 'configurable') && product.hasOwnProperty('configurable_children') &&
        product.configurable_children.length && (ignoreConfig || !product.is_configured) &&
        ('image' in product.configurable_children[0])) {
        thumbnail = product.configurable_children[0].image;
        if (!thumbnail || thumbnail === 'no_selection') {
            var childWithImg = product.configurable_children.find(function (f) { return f.image && f.image !== 'no_selection'; });
            if (childWithImg) {
                thumbnail = childWithImg.image;
            }
            else {
                thumbnail = product.image;
            }
        }
    }
    return thumbnail;
}
function baseFilterProductsQuery(parentCategory, filters) {
    var e_2, _a;
    if (filters === void 0) { filters = []; }
    var searchProductQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"]();
    searchProductQuery = searchProductQuery
        .applyFilter({ key: 'visibility', value: { 'in': [2, 3, 4] } })
        .applyFilter({ key: 'status', value: { 'in': [0, 1] } }); /* 2 = disabled, 4 = out of stock */
    if (config__WEBPACK_IMPORTED_MODULE_4__.products.listOutOfStockProducts === false) {
        searchProductQuery = searchProductQuery.applyFilter({ key: 'stock.is_in_stock', value: { 'eq': true } });
    }
    try {
        // Add available catalog filters
        for (var filters_1 = __values(filters), filters_1_1 = filters_1.next(); !filters_1_1.done; filters_1_1 = filters_1.next()) {
            var attrToFilter = filters_1_1.value;
            searchProductQuery = searchProductQuery.addAvailableFilter({ field: attrToFilter, scope: 'catalog' });
        }
    }
    catch (e_2_1) { e_2 = { error: e_2_1 }; }
    finally {
        try {
            if (filters_1_1 && !filters_1_1.done && (_a = filters_1.return)) _a.call(filters_1);
        }
        finally { if (e_2) throw e_2.error; }
    }
    var childCats = [parentCategory.id];
    if (parentCategory.children_data) {
        var recurCatFinderBuilder_1 = function (category) {
            var e_3, _a;
            if (!category) {
                return;
            }
            if (!category.children_data) {
                return;
            }
            try {
                for (var _b = __values(category.children_data), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var sc = _c.value;
                    if (sc && sc.id) {
                        childCats.push(sc.id);
                    }
                    recurCatFinderBuilder_1(sc);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_3) throw e_3.error; }
            }
        };
        recurCatFinderBuilder_1(parentCategory);
    }
    searchProductQuery = searchProductQuery.applyFilter({ key: 'category_ids', value: { 'in': childCats } });
    return searchProductQuery;
}
function buildFilterProductsQuery(currentCategory, chosenFilters, defaultFilters) {
    var e_4, _a;
    if (chosenFilters === void 0) { chosenFilters = {}; }
    if (defaultFilters === void 0) { defaultFilters = null; }
    var filterQr = baseFilterProductsQuery(currentCategory, defaultFilters == null ? config__WEBPACK_IMPORTED_MODULE_4__.products.defaultFilters : defaultFilters);
    var _loop_1 = function (code) {
        var filter = chosenFilters[code];
        var attributeCode = Array.isArray(filter) ? filter[0].attribute_code : filter.attribute_code;
        if (Array.isArray(filter) && attributeCode !== 'price') {
            var values = filter.map(function (filter) { return filter.id; });
            filterQr = filterQr.applyFilter({ key: attributeCode, value: { 'in': values }, scope: 'catalog' });
        }
        else if (attributeCode !== 'price') {
            filterQr = filterQr.applyFilter({ key: attributeCode, value: { 'eq': filter.id }, scope: 'catalog' });
        }
        else { // multi should be possible filter here?
            var rangeqr_1 = {};
            var filterValues = Array.isArray(filter) ? filter : [filter];
            filterValues.forEach(function (singleFilter) {
                if (singleFilter.from)
                    rangeqr_1['gte'] = singleFilter.from;
                if (singleFilter.to)
                    rangeqr_1['lte'] = singleFilter.to;
            });
            filterQr = filterQr.applyFilter({ key: attributeCode, value: rangeqr_1, scope: 'catalog' });
        }
    };
    try {
        // add choosedn filters
        for (var _b = __values(Object.keys(chosenFilters)), _c = _b.next(); !_c.done; _c = _b.next()) {
            var code = _c.value;
            _loop_1(code);
        }
    }
    catch (e_4_1) { e_4 = { error: e_4_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_4) throw e_4.error; }
    }
    return filterQr;
}
function once(key, fn) {
    var _a = global.process, process = _a === void 0 ? {} : _a;
    var processKey = key + '__ONCE__';
    if (!process.hasOwnProperty(processKey)) {
        // Logger.debug(`Once ${key}`, 'helper')()
        process[processKey] = true;
        fn();
    }
}
var isServer = typeof window === 'undefined';
// Online/Offline helper
var onlineHelper = vue__WEBPACK_IMPORTED_MODULE_3__["default"].observable({
    isOnline: isServer || navigator.onLine
});
var routerHelper = vue__WEBPACK_IMPORTED_MODULE_3__["default"].observable({
    popStateDetected: false
});
!isServer && window.addEventListener('online', function () { onlineHelper.isOnline = true; });
!isServer && window.addEventListener('offline', function () { onlineHelper.isOnline = false; });
!isServer && window.addEventListener('popstate', function () { routerHelper.popStateDetected = true; });
if (!isServer && 'scrollRestoration' in history) {
    history.scrollRestoration = 'manual';
}
/*
  * serial executes Promises sequentially.
  * @param {funcs} An array of funcs that return promises.
  * @example
  * const urls = ['/url1', '/url2', '/url3']
  * serial(urls.map(url => () => $.ajax(url)))
  *     .then(Logger.log.bind(Logger))()
  */
var serial = function (promises) { return __awaiter(void 0, void 0, void 0, function () {
    var results, promises_1, promises_1_1, item, result, e_5_1;
    var e_5, _a;
    return __generator(this, function (_b) {
        switch (_b.label) {
            case 0:
                results = [];
                _b.label = 1;
            case 1:
                _b.trys.push([1, 6, 7, 8]);
                promises_1 = __values(promises), promises_1_1 = promises_1.next();
                _b.label = 2;
            case 2:
                if (!!promises_1_1.done) return [3 /*break*/, 5];
                item = promises_1_1.value;
                return [4 /*yield*/, item];
            case 3:
                result = _b.sent();
                results.push(result);
                _b.label = 4;
            case 4:
                promises_1_1 = promises_1.next();
                return [3 /*break*/, 2];
            case 5: return [3 /*break*/, 8];
            case 6:
                e_5_1 = _b.sent();
                e_5 = { error: e_5_1 };
                return [3 /*break*/, 8];
            case 7:
                try {
                    if (promises_1_1 && !promises_1_1.done && (_a = promises_1.return)) _a.call(promises_1);
                }
                finally { if (e_5) throw e_5.error; }
                return [7 /*endfinally*/];
            case 8: return [2 /*return*/, results];
        }
    });
}); };
// helper to calculate the hash of the shopping cart
var calcItemsHmac = function (items, token) {
    if (items === void 0) { items = []; }
    return Object(js_sha3__WEBPACK_IMPORTED_MODULE_5__["sha3_224"])(JSON.stringify({
        // we need to omit those properties because they are loaded async and added to product data
        // and they are not needed to compare products
        items: items.map(function (item) { return Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_10__["default"])(item, ['stock', 'totals']); }),
        token: token
    }));
};
function extendStore(moduleName, module) {
    var merge = function (object, source) {
        if (object === void 0) { object = {}; }
        for (var key in source) {
            if (Array.isArray(source[key])) {
                object[key] = merge([], source[key]);
            }
            else if (source[key] === null && !object[key]) {
                object[key] = null;
            }
            else if (typeof source[key] === 'object' && Object.keys(source[key]).length > 0) {
                object[key] = merge(object[key], source[key]);
            }
            else if (typeof source[key] === 'object' && object === null) {
                object = {};
                object[key] = source[key];
            }
            else {
                object[key] = source[key];
            }
        }
        return object;
    };
    moduleName = Array.isArray(moduleName) ? moduleName : [moduleName];
    var originalModule = moduleName.reduce(function (state, moduleName) { return state._children[moduleName]; }, _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_6__["default"]._modules.root);
    var rawModule = merge({}, originalModule._rawModule);
    var extendedModule = merge(rawModule, module);
    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_6__["default"].unregisterModule(moduleName);
    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_6__["default"].registerModule(moduleName, extendedModule);
}
function reviewJsonLd(reviews, _a, priceCurrency) {
    var name = _a.name, category = _a.category, mpn = _a.mpn, url_path = _a.url_path, price = _a.price, stock = _a.stock, is_in_stock = _a.is_in_stock, sku = _a.sku, image = _a.image, description = _a.description;
    return reviews.map(function (_a) {
        var title = _a.title, detail = _a.detail, nickname = _a.nickname, created_at = _a.created_at;
        return ({
            '@context': 'http://schema.org/',
            '@type': 'Review',
            reviewAspect: title,
            reviewBody: detail,
            datePublished: created_at,
            author: nickname,
            itemReviewed: {
                '@type': 'Product',
                name: name,
                sku: sku,
                image: image,
                description: description,
                offers: {
                    '@type': 'Offer',
                    category: category
                        ? category
                            .map(function (_a) {
                            var name = _a.name;
                            return name || null;
                        })
                            .filter(function (name) { return name !== null; })
                        : null,
                    mpn: mpn,
                    url: url_path,
                    priceCurrency: priceCurrency,
                    price: price,
                    itemCondition: 'https://schema.org/NewCondition',
                    availability: stock && is_in_stock ? 'InStock' : 'OutOfStock'
                }
            }
        });
    });
}
function getMaterials(material, customAttributes) {
    var materialsArr = [];
    if (customAttributes && customAttributes.length && customAttributes.length > 0 && material && material.length && material.length > 0) {
        var materialOptions_1 = customAttributes.find(function (_a) {
            var attribute_code = _a.attribute_code;
            return attribute_code === 'material';
        }).options;
        if (Array.isArray(material)) {
            var _loop_2 = function (key) {
                material.forEach(function (el) {
                    if (String(el) === materialOptions_1[key].value) {
                        materialsArr.push(materialOptions_1[key].label);
                    }
                });
            };
            for (var key in materialOptions_1) {
                _loop_2(key);
            }
        }
        else {
            for (var key in materialOptions_1) {
                if (material === materialOptions_1[key].value) {
                    materialsArr.push(materialOptions_1[key].label);
                }
            }
        }
    }
    return materialsArr;
}
function productJsonLd(_a, color, priceCurrency, customAttributes) {
    var category = _a.category, image = _a.image, name = _a.name, id = _a.id, sku = _a.sku, mpn = _a.mpn, description = _a.description, price = _a.price, url_path = _a.url_path, stock = _a.stock, is_in_stock = _a.is_in_stock, material = _a.material;
    return {
        '@context': 'http://schema.org',
        '@type': 'Product',
        category: category
            ? category
                .map(function (_a) {
                var name = _a.name;
                return name || null;
            })
                .filter(function (name) { return name !== null; })
            : null,
        color: color,
        description: description,
        image: image,
        itemCondition: 'http://schema.org/NewCondition',
        material: getMaterials(material, customAttributes),
        name: name,
        productID: id,
        sku: sku,
        mpn: mpn,
        offers: {
            '@type': 'Offer',
            category: category
                ? category
                    .map(function (_a) {
                    var name = _a.name;
                    return name || null;
                })
                    .filter(function (name) { return name !== null; })
                : null,
            mpn: mpn,
            url: url_path,
            priceCurrency: priceCurrency,
            price: price,
            itemCondition: 'https://schema.org/NewCondition',
            availability: stock && is_in_stock ? 'InStock' : 'OutOfStock',
            sku: sku
        }
    };
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./core/helpers/initialStateFactory.ts":
/*!*********************************************!*\
  !*** ./core/helpers/initialStateFactory.ts ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash-es/cloneDeep */ "./node_modules/lodash-es/cloneDeep.js");
/* harmony import */ var lodash_es_pick__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/pick */ "./node_modules/lodash-es/pick.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


var initialStateFactory = function (defaultState) {
    // storing default values for the fields that will be set in createApp
    var defaultFields = Object(lodash_es_pick__WEBPACK_IMPORTED_MODULE_1__["default"])(defaultState, ['version', 'config', '__DEMO_MODE__', 'storeView']);
    var createInitialState = function (currentState) { return (__assign(__assign(__assign({}, Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_0__["default"])(currentState)), defaultFields), { storeView: { storeCode: currentState.storeView.storeCode } })); };
    return { createInitialState: createInitialState };
};
/* harmony default export */ __webpack_exports__["default"] = (initialStateFactory);


/***/ }),

/***/ "./core/helpers/router.ts":
/*!********************************!*\
  !*** ./core/helpers/router.ts ***!
  \********************************/
/*! exports provided: createRouter, createRouterProxy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(__dirname) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRouter", function() { return createRouter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRouterProxy", function() { return createRouterProxy; });
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var vue_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vue-router */ "./node_modules/vue-router/dist/vue-router.esm.js");
/* harmony import */ var _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/router-manager */ "./core/lib/router-manager.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};




Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["once"])('__VUE_EXTEND_PUSH_RR__', function () {
    var originalPush = vue_router__WEBPACK_IMPORTED_MODULE_1__["default"].prototype.push;
    vue_router__WEBPACK_IMPORTED_MODULE_1__["default"].prototype.push = function push(location, onComplete, onAbort) {
        if (onComplete === void 0) { onComplete = function () { }; }
        if (onComplete || onAbort)
            return originalPush.call(this, location, onComplete, onAbort);
        return originalPush.call(this, location).catch(function (err) { return err; });
    };
});
var createRouter = function () {
    return new vue_router__WEBPACK_IMPORTED_MODULE_1__["default"]({
        mode: 'history',
        base: __dirname,
        scrollBehavior: function (to, from) {
            if (to.hash) {
                return {
                    selector: to.hash
                };
            }
            if (_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__["default"].getters['url/isBackRoute']) {
                var _a = _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__["default"].getters['url/getCurrentRoute'].scrollPosition, scrollPosition = _a === void 0 ? { x: 0, y: 0 } : _a;
                return scrollPosition;
            }
            else if (to.path !== from.path) { // do not change scroll position when navigating on the same page (ex. change filters)
                return { x: 0, y: 0 };
            }
        }
    });
};
var createRouterProxy = function (router) {
    var ProxyConstructor = Proxy || __webpack_require__(/*! proxy-polyfill/src/proxy */ "./node_modules/proxy-polyfill/src/proxy.js");
    return new ProxyConstructor(router, {
        get: function (target, propKey) {
            var origMethod = target[propKey];
            if (propKey === 'addRoutes') {
                return function (routes) {
                    var args = [];
                    for (var _i = 1; _i < arguments.length; _i++) {
                        args[_i - 1] = arguments[_i];
                    }
                    return _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_2__["RouterManager"].addRoutes.apply(_vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_2__["RouterManager"], __spread([routes], args));
                };
            }
            return origMethod;
        }
    });
};

/* WEBPACK VAR INJECTION */}.call(this, "/"))

/***/ }),

/***/ "./core/hooks.ts":
/*!***********************!*\
  !*** ./core/hooks.ts ***!
  \***********************/
/*! exports provided: coreHooks, coreHooksExecutors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "coreHooks", function() { return coreHooks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "coreHooksExecutors", function() { return coreHooksExecutors; });
/* harmony import */ var _vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/hooks */ "./core/lib/hooks.ts");

var _a = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createMutatorHook"])(), beforeStoreViewChangedHook = _a.hook, beforeStoreViewChangedExecutor = _a.executor;
var _b = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterStoreViewChangedHook = _b.hook, afterStoreViewChangedExecutor = _b.executor;
var _c = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterAppInitHook = _c.hook, afterAppInitExecutor = _c.executor;
var _d = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createMutatorHook"])(), beforeHydratedHook = _d.hook, beforeHydratedExecutor = _d.executor;
var _e = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createMutatorHook"])(), afterProductThumbnailPathGeneratedHook = _e.hook, afterProductThumbnailPathGeneratedExecutor = _e.executor;
var _f = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createMutatorHook"])(), beforeLogRenderedHook = _f.hook, beforeLogRenderedExecutor = _f.executor;
/** Only for internal usage in core */
var coreHooksExecutors = {
    afterAppInit: afterAppInitExecutor,
    beforeStoreViewChanged: beforeStoreViewChangedExecutor,
    afterStoreViewChanged: afterStoreViewChangedExecutor,
    beforeHydrated: beforeHydratedExecutor,
    afterProductThumbnailPathGenerate: afterProductThumbnailPathGeneratedExecutor,
    beforeLogRendered: beforeLogRenderedExecutor
};
var coreHooks = {
    /** Hook is fired right after whole application is initialized. Modules are registered and theme setted up */
    afterAppInit: afterAppInitHook,
    /** Hook is fired directly before changing current storeView (multistrore)
     * @param storeView Inside this function you have access to order object that you can access and modify. It should return order object.
    */
    beforeStoreViewChanged: beforeStoreViewChangedHook,
    /** Hook is fired right after storeView (multistore) is changed
     * @param storeView current storeView
    */
    afterStoreViewChanged: afterStoreViewChangedHook,
    beforeHydrated: beforeHydratedHook,
    afterProductThumbnailPathGenerate: afterProductThumbnailPathGeneratedHook,
    beforeLogRendered: beforeLogRenderedHook
};



/***/ }),

/***/ "./core/i18n/index.ts":
/*!****************************!*\
  !*** ./core/i18n/index.ts ***!
  \****************************/
/*! exports provided: loadLanguageAsync, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadLanguageAsync", function() { return loadLanguageAsync; });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var vue_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vue-i18n */ "./node_modules/vue-i18n/dist/vue-i18n.esm.js");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var _a;





Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["once"])('__VUE_EXTEND_I18N__', function () {
    vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vue_i18n__WEBPACK_IMPORTED_MODULE_1__["default"]);
});
var defaultLocale = config__WEBPACK_IMPORTED_MODULE_4__.i18n.defaultLocale || 'en-US';
var loadedLanguages = [defaultLocale];
var i18n = new vue_i18n__WEBPACK_IMPORTED_MODULE_1__["default"]({
    locale: defaultLocale,
    fallbackLocale: defaultLocale,
    messages: config__WEBPACK_IMPORTED_MODULE_4__.i18n.bundleAllStoreviewLanguages ? __webpack_require__(/*! ./resource/i18n/multistoreLanguages.json */ "./core/i18n/resource/i18n/multistoreLanguages.json") : (_a = {},
        _a[defaultLocale] = __webpack_require__("./core/i18n/resource/i18n sync recursive ^\\.\\/.*\\.json$")("./" + defaultLocale + ".json"),
        _a)
});
function setI18nLanguage(lang) {
    i18n.locale = lang;
    return lang;
}
/**
 * Lazy load date locales file for current switched language.
 */
var loadDateLocales = function (lang) {
    if (lang === void 0) { lang = 'en'; }
    return __awaiter(void 0, void 0, void 0, function () {
        var localeCode, e_1, separatorIndex, err_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    localeCode = lang.toLocaleLowerCase();
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 8]);
                    return [4 /*yield*/, __webpack_require__("./node_modules/dayjs/locale lazy recursive en$")("./" + localeCode)];
                case 2:
                    _a.sent();
                    return [3 /*break*/, 8];
                case 3:
                    e_1 = _a.sent();
                    separatorIndex = localeCode.indexOf('-');
                    if (!separatorIndex) return [3 /*break*/, 7];
                    localeCode = separatorIndex ? localeCode.substr(0, separatorIndex) : localeCode;
                    _a.label = 4;
                case 4:
                    _a.trys.push([4, 6, , 7]);
                    return [4 /*yield*/, __webpack_require__("./node_modules/dayjs/locale lazy recursive en$")("./" + localeCode)];
                case 5:
                    _a.sent();
                    return [3 /*break*/, 7];
                case 6:
                    err_1 = _a.sent();
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].debug('Unable to load translation from dayjs')();
                    return [3 /*break*/, 7];
                case 7: return [3 /*break*/, 8];
                case 8: return [2 /*return*/];
            }
        });
    });
};
function loadLanguageAsync(lang) {
    return __awaiter(this, void 0, void 0, function () {
        var msgs, e_2;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, loadDateLocales(lang)];
                case 1:
                    _a.sent();
                    if (!!config__WEBPACK_IMPORTED_MODULE_4__.i18n.bundleAllStoreviewLanguages) return [3 /*break*/, 7];
                    if (!(i18n.locale !== lang)) return [3 /*break*/, 6];
                    if (!!loadedLanguages.includes(lang)) return [3 /*break*/, 5];
                    _a.label = 2;
                case 2:
                    _a.trys.push([2, 4, , 5]);
                    return [4 /*yield*/, __webpack_require__("./core/i18n/resource/i18n lazy recursive ^\\.\\/.*\\.json$")("./" + lang + ".json")];
                case 3:
                    msgs = _a.sent();
                    i18n.setLocaleMessage(lang, msgs.default);
                    loadedLanguages.push(lang);
                    return [2 /*return*/, setI18nLanguage(lang)];
                case 4:
                    e_2 = _a.sent();
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].debug('Unable to load translation')();
                    return [2 /*return*/, ''];
                case 5: return [2 /*return*/, setI18nLanguage(lang)];
                case 6: return [3 /*break*/, 8];
                case 7:
                    loadedLanguages.push(lang);
                    return [2 /*return*/, setI18nLanguage(lang)];
                case 8: return [2 /*return*/, lang];
            }
        });
    });
}
/* harmony default export */ __webpack_exports__["default"] = (i18n);


/***/ }),

/***/ "./core/i18n/intl.ts":
/*!***************************!*\
  !*** ./core/i18n/intl.ts ***!
  \***************************/
/*! exports provided: importIntlPolyfill, checkForIntlPolyfill */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "importIntlPolyfill", function() { return importIntlPolyfill; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkForIntlPolyfill", function() { return checkForIntlPolyfill; });
/* harmony import */ var intl_locales_supported__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! intl-locales-supported */ "./node_modules/intl-locales-supported/lib/index.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

var importIntlPolyfill = function () { return __awaiter(void 0, void 0, void 0, function () {
    var IntlPolyfill;
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0: return [4 /*yield*/, Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(1)]).then(__webpack_require__.t.bind(null, /*! intl */ "./node_modules/intl/index.js", 7))];
            case 1:
                IntlPolyfill = _a.sent();
                global.Intl = IntlPolyfill.default;
                return [2 /*return*/];
        }
    });
}); };
var checkForIntlPolyfill = function (storeView) { return __awaiter(void 0, void 0, void 0, function () {
    var globDTO;
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0:
                globDTO = typeof window !== 'undefined' ? window : global;
                if (!(!globDTO.hasOwnProperty('Intl') || !Object(intl_locales_supported__WEBPACK_IMPORTED_MODULE_0__["default"])(storeView.i18n.defaultLocale))) return [3 /*break*/, 2];
                return [4 /*yield*/, importIntlPolyfill()];
            case 1:
                _a.sent();
                _a.label = 2;
            case 2: return [2 /*return*/];
        }
    });
}); };

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./core/i18n/resource/i18n lazy recursive ^\\.\\/.*\\.json$":
/*!**********************************************************************!*\
  !*** ./core/i18n/resource/i18n lazy ^\.\/.*\.json$ namespace object ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en-US.json": "./core/i18n/resource/i18n/en-US.json",
	"./multistoreLanguages.json": "./core/i18n/resource/i18n/multistoreLanguages.json"
};

function webpackAsyncContext(req) {
	return Promise.resolve().then(function() {
		if(!__webpack_require__.o(map, req)) {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		}

		var id = map[req];
		return __webpack_require__.t(id, 3);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./core/i18n/resource/i18n lazy recursive ^\\.\\/.*\\.json$";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./core/i18n/resource/i18n sync recursive ^\\.\\/.*\\.json$":
/*!*****************************************************!*\
  !*** ./core/i18n/resource/i18n sync ^\.\/.*\.json$ ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en-US.json": "./core/i18n/resource/i18n/en-US.json",
	"./multistoreLanguages.json": "./core/i18n/resource/i18n/multistoreLanguages.json"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./core/i18n/resource/i18n sync recursive ^\\.\\/.*\\.json$";

/***/ }),

/***/ "./core/i18n/resource/i18n/en-US.json":
/*!********************************************!*\
  !*** ./core/i18n/resource/i18n/en-US.json ***!
  \********************************************/
/*! exports provided:  is out of stock!, 404 Page Not Found, Account data has successfully been updated, Add review, Adding a review ..., Address provided in checkout contains invalid data. Please check if all required fields are filled in and also contact us on {email} to resolve this issue for future. Your order has been canceled., Allow notification about the order, Are you sure you would like to remove this item from the shopping cart?, Checkout, Columns, Compare Products, Compare products, Confirm your order, Error refreshing user token. User is not authorized to access the resource, Error with response - bad content-type!, Error: Error while adding products, Extension developers would like to thank you for placing an order!, Field is required, Field is required., Grand total, Home Page, In stock!, Internal Application error while refreshing the tokens. Please clear the storage and refresh page., Internal validation error. Please check if all required fields are filled in. Please contact us on {email}, Must be greater than 0, My Account, Newsletter preferences have successfully been updated, No available product variants, No products synchronized for this category. Please come back while online!, No such configuration for the product. Please do choose another combination of attributes., OK, Only {maxQuantity} products of this type are available!, Or if you will stay on "Order confirmation" page, the order will be placed automatically without confirmation, once the internet connection will be back., Out of stock!, Out of the stock!, Payment Information, Please configure product bundle options and fix the validation errors, Please configure product custom options and fix the validation errors, Please confirm order you placed when you was offline, Please fix the validation errors, Please select the field which You like to sort by, Please wait ..., Proceed to checkout, Processing order..., Product has been added to the cart!, Product price is unknown, product cannot be added to the cart!, Product quantity has been updated!, Product {productName} has been added to the compare!, Product {productName} has been added to wishlist!, Product {productName} has been removed from compare!, Product {productName} has been removed from wishlist!, Quantity available offline, Quantity available, Quantity must be above 0, Quantity must be below {quantity}, Quantity must be positive integer, Registering the account ..., Reset password feature does not work while offline!, Review, Reviews, Select 0, Select 1, Shopping cart is empty. Please add some products before entering Checkout, Some of the ordered products are not available!, Stock check in progress, please wait while available stock quantities are checked, Subtotal incl. tax, Summary, The product is out of stock and cannot be added to the cart!, The product, category or CMS page is not available in Offline mode. Redirecting to Home., The system is not sure about the stock quantity (volatile). Product has been added to the cart for pre-reservation., There is no Internet connection. You can still place your order. We will notify you if any of ordered products is not available because we cannot check it right now., This feature is not implemented yet! Please take a look at https://github.com/DivanteLtd/vue-storefront/issues for our Roadmap!, Thumbnail, Type what you are looking for..., Unexpected authorization error. Check your Network conection., Unhandled error, wrong response format!, Vue Storefront, You are going to pay for this order upon delivery., You are logged in!, You are to pay for this order upon delivery., You need to be logged in to see this page, You submitted your review for moderation., You're logged out, email, have as many, login, most you may purchase, not authorized, password, to account, A customer with the same email already exists in an associated website., About us (Magento CMS), About us, Accepts only alphabet characters., Add a discount code, Add discount code, Add to cart, Add to compare, Add to favorite, Are you sure you would like to remove all the items from the shopping cart?, Are you sure you would like to remove all the items from the wishlist?, Author, Authorization in progress ..., Back to login, Back, Billing address, Cancel, Cash on delivery, Change my password, Choose your country, City *, City, Clear cart, Clear filters, Clear wishlist, Clear, Close, Cms Page Sync, Company name *, Contact us, Continue to payment, Continue to shipping, Copy address data from shipping, Country *, Country, Create a new account, Current password *, Custom Cms Page, Customer service (Magento CMS), Customer service, DPD Courier, Date and time, Delivery, Departments, Discount code, Discount, Don't hesitate and, E-mail address *, E-mail us at <b>demo@vuestorefront.io</b> with any questions, suggestions how we could improve products or shopping experience, Edit newsletter preferences, Edit payment, Edit personal details, Edit shipping, Edit your profile, Edit your shipping details, Edit, Email address *, Email address, English, Enter your email to receive instructions on how to reset your password., Erin recommends, Error while sending reset password e-mail, Everything new, Filter by categories, Filter, Filters, First name *, First name, Forgot the password?, General agreement, German, Germany, Get inspired, Give a feedback, Go review the order, Go to Facebook, Go to Instagram, Go to Pinterest, Go to Youtube, Go to checkout, Help, Home, House/Apartment number *, House/Apartment number, I accept , I accept terms and conditions, I agree to, I have a company and want to receive an invoice for every order, I want to create an account, I want to create an account', I want to generate an invoice for the company, I want to receive a newsletter, and agree to its terms, If you need an assistance you can drop us a line on, Instant Checkout, Internal Server Error 500, Italian, Italy, Items ordered, Kidswear, Last name *, Last name, Latest, Legal notice, Load more, Log in to your account, Log in, Login to your account, Logout, Magazine, Men's fashion, My Recently viewed products, My account, My loyalty card, My newsletter, My orders, My product reviews, My profile, My shipping details, Name must have at least 2 letters., Name must have at least 3 letters., New Luma Yoga Collection, New password *, Newsletter, No orders yet, No products found!, No products yet, No results were found., No reviews have been posted yet. Please don't hesitate to share Your opinion and write the first review!, Open menu, Open microcart, Open my account, Open search panel, Open wishlist, Order #{id}, Order ID, Order Summary, Order confirmation, Order informations, Orders, Password *, Password must have at least 8 letters., Passwords must be identical, Passwords must be identical., Payment method, Payment, Personal Details, Phone Number, Phone number may be needed by carrier, Place the order, Please change Your search criteria and try again. If still not finding anything relevant, please visit the Home page and try out some of our bestsellers!, Please check if all data are correct, Please provide valid e-mail address., Price {variant}, Price, Price: High to low, Price: Low to high, Privacy policy, Product Name, Product details, Products, Provided email does not exist, Purchase, Qty, Quantity, Register an account, Register, Remake order, Remember me, Remove from compare, Remove, Repeat new password *, Repeat password *, Reset password, Resetting the password ... , Return policy, Return to shopping, Returns, Review order, SKU, SKU: {sku}, Safety, Sale, Search, Searched term should consist of at least 3 characters., See details, See our bestsellers, Select No, Select Yes, Select color , Select size {variant}, Ship to my default address, Shipping address, Shipping method, Shipping, Shopping cart, Shopping summary, Show subcategories, Sign up to our newsletter and receive a coupon for 10% off!, Similar products, Size guide, Something went wrong ..., Something went wrong. Try again in a few seconds., Sort By, State / Province, Status, Store locator, Street name *, Street name, Subscribe to the newsletter and receive a coupon for 10% off, Subscribe, Subtotal, Tax ID *, Tax ID must have at least 3 letters., Tax identification number *, Tax identification number must have at least 3 letters., Tax, Terms and conditions, The OrderNumber is {id}, The new account will be created with the purchase. You will receive details on e-mail., The order can not be transfered because of server error. Order has been queued, The server order id has been set to , This product is out of stock., To finish the order just come back to our store while online. Your order will be sent to the server as soon as you come back here while online and then confirmed regarding the stock quantities of selected items, Toggle password visibility, Track my order, Type your opinion, Type, Unfortunately we can't find the page you are looking for., United States, Update my preferences, Update my profile, Update my shipping details, Use my billing data, Use my company's address details, Value, View all, View order, Vuestore, We can't find the page, We found other products you might like, We use cookies to give you the best shopping experience., We will send you details regarding the order, We will send you the invoice to given e-mail address, We've noticed Internal Server Error while rendering this request., We've sent password reset instructions to your email. Check your inbox and follow the link., What we can improve?, Wishlist, Women fashion, You are logged in as {firstname}, You are offline, You are offline. Some features might not be available., You can allow us to remind you about the order via push notification after coming back online. You'll only need to click on it to confirm., You can also use, You can log to your account using e-mail and password defined earlier. On your account you can <b>edit your profile data,</b> check <b>history of transactions,</b> edit <b>subscription to newsletter.</b>, You have been successfully subscribed to our newsletter!, You have been successfully unsubscribed from our newsletter!, You have no items to compare., You have successfuly placed the order. You can check status of your order by using our <b>delivery status</b> feature. You will receive an order confirmation e-mail with details of your order and a link to track its progress., You must accept the terms and conditions., You will receive Push notification after coming back online. You can confirm the order by clicking on it, You've entered an incorrect coupon code. Please try again., Your Account, Your feedback is important for us. Let us know what we could improve., Your purchase, Your shopping cart is empty., Your wishlist is empty., Zip-code *, Zip-code must have at least 3 letters., Zip-code, a chat, a contact page, browse our catalog, color, color_filter, erin_recommends_filter, login to your account, or write to us through, or, price_filter, register an account, return to log in, search, size, size_filter, to find product you were looking for., to find something beautiful for You!, {count} items, default */
/***/ (function(module) {

module.exports = JSON.parse("{\" is out of stock!\":\" is out of stock!\",\"404 Page Not Found\":\"404 Page Not Found\",\"Account data has successfully been updated\":\"Account data has successfully been updated\",\"Add review\":\"Add review\",\"Adding a review ...\":\"Adding a review ...\",\"Address provided in checkout contains invalid data. Please check if all required fields are filled in and also contact us on {email} to resolve this issue for future. Your order has been canceled.\":\"Address provided in checkout contains invalid data. Please check if all required fields are filled in and also contact us on {email} to resolve this issue for future. Your order has been canceled.\",\"Allow notification about the order\":\"Allow notification about the order\",\"Are you sure you would like to remove this item from the shopping cart?\":\"Are you sure you would like to remove this item from the shopping cart?\",\"Checkout\":\"Checkout\",\"Columns\":\"Columns\",\"Compare Products\":\"Compare Products\",\"Compare products\":\"Compare products\",\"Confirm your order\":\"Confirm your order\",\"Error refreshing user token. User is not authorized to access the resource\":\"Error refreshing user token. User is not authorized to access the resource\",\"Error with response - bad content-type!\":\"Error with response - bad content-type!\",\"Error: Error while adding products\":\"Error: Error while adding products\",\"Extension developers would like to thank you for placing an order!\":\"Extension developers would like to thank you for placing an order!\",\"Field is required\":\"Field is required\",\"Field is required.\":\"Field is required.\",\"Grand total\":\"Grand total\",\"Home Page\":\"Home Page\",\"In stock!\":\"In stock!\",\"Internal Application error while refreshing the tokens. Please clear the storage and refresh page.\":\"Internal Application error while refreshing the tokens. Please clear the storage and refresh page.\",\"Internal validation error. Please check if all required fields are filled in. Please contact us on {email}\":\"Internal validation error. Please check if all required fields are filled in. Please contact us on {email}\",\"Must be greater than 0\":\"Must be greater than 0\",\"My Account\":\"My Account\",\"Newsletter preferences have successfully been updated\":\"Newsletter preferences have successfully been updated\",\"No available product variants\":\"No available product variants\",\"No products synchronized for this category. Please come back while online!\":\"No products synchronized for this category. Please come back while online!\",\"No such configuration for the product. Please do choose another combination of attributes.\":\"No such configuration for the product. Please do choose another combination of attributes.\",\"OK\":\"OK\",\"Only {maxQuantity} products of this type are available!\":\"Only {maxQuantity} products of this type are available!\",\"Or if you will stay on \\\"Order confirmation\\\" page, the order will be placed automatically without confirmation, once the internet connection will be back.\":\"Or if you will stay on \\\"Order confirmation\\\" page, the order will be placed automatically without confirmation, once the internet connection will be back.\",\"Out of stock!\":\"Out of stock!\",\"Out of the stock!\":\"Out of the stock!\",\"Payment Information\":\"Payment Information\",\"Please configure product bundle options and fix the validation errors\":\"Please configure product bundle options and fix the validation errors\",\"Please configure product custom options and fix the validation errors\":\"Please configure product custom options and fix the validation errors\",\"Please confirm order you placed when you was offline\":\"Please confirm order you placed when you was offline\",\"Please fix the validation errors\":\"Please fix the validation errors\",\"Please select the field which You like to sort by\":\"Please select the field which You like to sort by\",\"Please wait ...\":\"Please wait ...\",\"Proceed to checkout\":\"Proceed to checkout\",\"Processing order...\":\"Processing order...\",\"Product has been added to the cart!\":\"Product has been added to the cart!\",\"Product price is unknown, product cannot be added to the cart!\":\"Product price is unknown, product cannot be added to the cart!\",\"Product quantity has been updated!\":\"Product quantity has been updated!\",\"Product {productName} has been added to the compare!\":\"Product {productName} has been added to the compare!\",\"Product {productName} has been added to wishlist!\":\"Product {productName} has been added to wishlist!\",\"Product {productName} has been removed from compare!\":\"Product {productName} has been removed from compare!\",\"Product {productName} has been removed from wishlist!\":\"Product {productName} has been removed from wishlist!\",\"Quantity available offline\":\"Quantity (offline mode)\",\"Quantity available\":\"Quantity ({qty} available)\",\"Quantity must be above 0\":\"Quantity must be above 0\",\"Quantity must be below {quantity}\":\"Quantity must be below {quantity}\",\"Quantity must be positive integer\":\"Quantity must be positive integer\",\"Registering the account ...\":\"Registering the account ...\",\"Reset password feature does not work while offline!\":\"Reset password feature does not work while offline!\",\"Review\":\"Review\",\"Reviews\":\"Reviews\",\"Select 0\":\"Select 0\",\"Select 1\":\"Select 1\",\"Shopping cart is empty. Please add some products before entering Checkout\":\"Shopping cart is empty. Please add some products before entering Checkout\",\"Some of the ordered products are not available!\":\"Some of the ordered products are not available!\",\"Stock check in progress, please wait while available stock quantities are checked\":\"Stock check in progress, please wait while available stock quantities are checked\",\"Subtotal incl. tax\":\"Subtotal incl. tax\",\"Summary\":\"Summary\",\"The product is out of stock and cannot be added to the cart!\":\"The product is out of stock and cannot be added to the cart!\",\"The product, category or CMS page is not available in Offline mode. Redirecting to Home.\":\"The product, category or CMS page is not available in Offline mode. Redirecting to Home.\",\"The system is not sure about the stock quantity (volatile). Product has been added to the cart for pre-reservation.\":\"The system is not sure about the stock quantity (volatile). Product has been added to the cart for pre-reservation.\",\"There is no Internet connection. You can still place your order. We will notify you if any of ordered products is not available because we cannot check it right now.\":\"There is no Internet connection. You can still place your order. We will notify you if any of ordered products is not avaiable because we cannot check it right now.\",\"This feature is not implemented yet! Please take a look at https://github.com/DivanteLtd/vue-storefront/issues for our Roadmap!\":\"This feature is not implemented yet! Please take a look at https://github.com/DivanteLtd/vue-storefront/issues for our Roadmap!\",\"Thumbnail\":\"Thumbnail\",\"Type what you are looking for...\":\"Type what you are looking for...\",\"Unexpected authorization error. Check your Network conection.\":\"Unexpected authorization error. Check your Network conection.\",\"Unhandled error, wrong response format!\":\"Unhandled error, wrong response format!\",\"Vue Storefront\":\" \\\"Vue Storefront\\\"\",\"You are going to pay for this order upon delivery.\":\"You are going to pay for this order upon delivery.\",\"You are logged in!\":\"You are logged in!\",\"You are to pay for this order upon delivery.\":\"You are to pay for this order upon delivery.\",\"You need to be logged in to see this page\":\"You need to be logged in to see this page\",\"You submitted your review for moderation.\":\"You submitted your review for moderation.\",\"You're logged out\":\"You're logged out\",\"email\":\"email\",\"have as many\":\"have as many\",\"login\":\"login\",\"most you may purchase\":\"most you may purchase\",\"not authorized\":\"not authorized\",\"password\":\"password\",\"to account\":\"to account\",\"A customer with the same email already exists in an associated website.\":\"A customer with the same email already exists in an associated website.\",\"About us (Magento CMS)\":\"About us (Magento CMS)\",\"About us\":\"About us\",\"Accepts only alphabet characters.\":\"Accepts only alphabet characters.\",\"Add a discount code\":\"Add a discount code\",\"Add discount code\":\"Apply\",\"Add to cart\":\"Add to cart\",\"Add to compare\":\"Add to compare\",\"Add to favorite\":\"Add to favorite\",\"Are you sure you would like to remove all the items from the shopping cart?\":\"Are you sure you would like to remove all the items from the shopping cart?\",\"Are you sure you would like to remove all the items from the wishlist?\":\"Are you sure you would like to remove all the items from the wishlist?\",\"Author\":\"Author\",\"Authorization in progress ...\":\"Authorization in progress ...\",\"Back to login\":\"Back to login\",\"Back\":\"Back\",\"Billing address\":\"Billing address\",\"Cancel\":\"Cancel\",\"Cash on delivery\":\"Cash on delivery\",\"Change my password\":\"Change my password\",\"Choose your country\":\"Choose your country\",\"City *\":\"City *\",\"City\":\"City\",\"Clear cart\":\"Clear cart\",\"Clear filters\":\"Clear filters\",\"Clear wishlist\":\"Clear wishlist\",\"Clear\":\"Clear\",\"Close\":\"Close\",\"Cms Page Sync\":\"Cms Page Sync\",\"Company name *\":\"Company name *\",\"Contact us\":\"Contact us\",\"Continue to payment\":\"Continue to payment\",\"Continue to shipping\":\"Continue to shipping\",\"Copy address data from shipping\":\"Copy address data from shipping\",\"Country *\":\"Country *\",\"Country\":\"Country\",\"Create a new account\":\"Create a new account\",\"Current password *\":\"Current password *\",\"Custom Cms Page\":\"Custom Cms Page\",\"Customer service (Magento CMS)\":\"Customer service (Magento CMS)\",\"Customer service\":\"Customer service\",\"DPD Courier\":\"DPD Courier\",\"Date and time\":\"Date and time\",\"Delivery\":\"Delivery\",\"Departments\":\"Departments\",\"Discount code\":\"Discount code\",\"Discount\":\"Discount\",\"Don't hesitate and\":\"Don't hesitate and\",\"E-mail address *\":\"E-mail address *\",\"E-mail us at <b>demo@vuestorefront.io</b> with any questions, suggestions how we could improve products or shopping experience\":\"E-mail us at <b>demo@vuestorefront.io</b> with any questions, suggestions how we could improve products or shopping experience\",\"Edit newsletter preferences\":\"Edit newsletter preferences\",\"Edit payment\":\"Edit payment\",\"Edit personal details\":\"Edit personal details\",\"Edit shipping\":\"Edit shipping\",\"Edit your profile\":\"Edit your profile\",\"Edit your shipping details\":\"Edit your shipping details\",\"Edit\":\"Edit\",\"Email address *\":\"Email address *\",\"Email address\":\"Email address\",\"English\":\"English\",\"Enter your email to receive instructions on how to reset your password.\":\"Enter your email to receive instructions on how to reset your password.\",\"Erin recommends\":\"Erin recommends\",\"Error while sending reset password e-mail\":\"Error while sending reset password e-mail\",\"Everything new\":\"Everything new\",\"Filter by categories\":\"Filter by categories\",\"Filter\":\"Filter\",\"Filters\":\"Filters\",\"First name *\":\"First name *\",\"First name\":\"First name\",\"Forgot the password?\":\"Forgot the password?\",\"General agreement\":\"General agreement\",\"German\":\"German\",\"Germany\":\"Germany\",\"Get inspired\":\"Get inspired\",\"Give a feedback\":\"Give a feedback\",\"Go review the order\":\"Go review the order\",\"Go to Facebook\":\"Go to Facebook\",\"Go to Instagram\":\"Go to Instagram\",\"Go to Pinterest\":\"Go to Pinterest\",\"Go to Youtube\":\"Go to Youtube\",\"Go to checkout\":\"Go to checkout\",\"Help\":\"Help\",\"Home\":\"Home\",\"House/Apartment number *\":\"House/Apartment number *\",\"House/Apartment number\":\"House/Apartment number\",\"I accept \":\"I accept \",\"I accept terms and conditions\":\"I accept terms and conditions\",\"I agree to\":\"I agree to\",\"I have a company and want to receive an invoice for every order\":\"I have a company and want to receive an invoice for every order\",\"I want to create an account\":\"I want to create an account\",\"I want to create an account'\":\"I want to create an account'\",\"I want to generate an invoice for the company\":\"I want to generate an invoice for the company\",\"I want to receive a newsletter, and agree to its terms\":\"I want to receive a newsletter, and agree to its terms\",\"If you need an assistance you can drop us a line on\":\"If you need an assistance you can drop us a line on\",\"Instant Checkout\":\"Instant Checkout\",\"Internal Server Error 500\":\"Internal Server Error 500\",\"Italian\":\"Italian\",\"Italy\":\"Italy\",\"Items ordered\":\"Items ordered\",\"Kidswear\":\"Kidswear\",\"Last name *\":\"Last name *\",\"Last name\":\"Last name\",\"Latest\":\"Latest\",\"Legal notice\":\"Legal notice\",\"Load more\":\"Load more\",\"Log in to your account\":\"Log in to your account\",\"Log in\":\"Log in\",\"Login to your account\":\"Login to your account\",\"Logout\":\"Logout\",\"Magazine\":\"Magazine\",\"Men's fashion\":\"Men's fashion\",\"My Recently viewed products\":\"My Recently viewed products\",\"My account\":\"My account\",\"My loyalty card\":\"My loyalty card\",\"My newsletter\":\"My newsletter\",\"My orders\":\"My orders\",\"My product reviews\":\"My product reviews\",\"My profile\":\"My profile\",\"My shipping details\":\"My shipping details\",\"Name must have at least 2 letters.\":\"Name must have at least 2 letters.\",\"Name must have at least 3 letters.\":\"Name must have at least 3 letters.\",\"New Luma Yoga Collection\":\"New Luma Yoga Collection\",\"New password *\":\"New password *\",\"Newsletter\":\"Newsletter\",\"No orders yet\":\"No orders yet\",\"No products found!\":\"No products found!\",\"No products yet\":\"No products yet\",\"No results were found.\":\"No results were found.\",\"No reviews have been posted yet. Please don't hesitate to share Your opinion and write the first review!\":\"No reviews have been posted yet. Please don't hesitate to share Your opinion and write the first review!\",\"Open menu\":\"Open menu\",\"Open microcart\":\"Open microcart\",\"Open my account\":\"Open my account\",\"Open search panel\":\"Open search panel\",\"Open wishlist\":\"Open wishlist\",\"Order #{id}\":\"Order #{id}\",\"Order ID\":\"Order ID\",\"Order Summary\":\"Order Summary\",\"Order confirmation\":\"Order confirmation\",\"Order informations\":\"Order informations\",\"Orders\":\"Orders\",\"Password *\":\"Password *\",\"Password must have at least 8 letters.\":\"Password must have at least 8 letters.\",\"Passwords must be identical\":\"Passwords must be identical\",\"Passwords must be identical.\":\"Passwords must be identical.\",\"Payment method\":\"Payment method\",\"Payment\":\"Payment\",\"Personal Details\":\"Personal Details\",\"Phone Number\":\"Phone Number\",\"Phone number may be needed by carrier\":\"Phone number may be needed by carrier\",\"Place the order\":\"Place the order\",\"Please change Your search criteria and try again. If still not finding anything relevant, please visit the Home page and try out some of our bestsellers!\":\"Please change Your search criteria and try again. If still not finding anything relevant, please visit the Home page and try out some of our bestsellers!\",\"Please check if all data are correct\":\"Please check if all data are correct\",\"Please provide valid e-mail address.\":\"Please provide valid e-mail address.\",\"Price {variant}\":\"Price {variant}\",\"Price\":\"Price\",\"Price: High to low\":\"Price: High to low\",\"Price: Low to high\":\"Price: Low to high\",\"Privacy policy\":\"Privacy policy\",\"Product Name\":\"Product Name\",\"Product details\":\"Product details\",\"Products\":\"Products\",\"Provided email does not exist\":\"Provided email does not exist\",\"Purchase\":\"Purchase\",\"Qty\":\"Qty\",\"Quantity\":\"Quantity\",\"Register an account\":\"Register an account\",\"Register\":\"Register\",\"Remake order\":\"Remake order\",\"Remember me\":\"Remember me\",\"Remove from compare\":\"Remove from compare\",\"Remove\":\"Remove\",\"Repeat new password *\":\"Repeat new password *\",\"Repeat password *\":\"Repeat password *\",\"Reset password\":\"Reset password\",\"Resetting the password ... \":\"Resetting the password ... \",\"Return policy\":\"Return policy\",\"Return to shopping\":\"Return to shopping\",\"Returns\":\"Returns\",\"Review order\":\"Review order\",\"SKU\":\"SKU\",\"SKU: {sku}\":\"SKU: {sku}\",\"Safety\":\"Safety\",\"Sale\":\"Sale\",\"Search\":\"Search\",\"Searched term should consist of at least 3 characters.\":\"Searched term should consist of at least 3 characters.\",\"See details\":\"See details\",\"See our bestsellers\":\"See our bestsellers\",\"Select No\":\"Select No\",\"Select Yes\":\"Select Yes\",\"Select color \":\"Select color \",\"Select size {variant}\":\"Select size {variant}\",\"Ship to my default address\":\"Ship to my default address\",\"Shipping address\":\"Shipping address\",\"Shipping method\":\"Shipping method\",\"Shipping\":\"Shipping\",\"Shopping cart\":\"Shopping cart\",\"Shopping summary\":\"Shopping summary\",\"Show subcategories\":\"Show subcategories\",\"Sign up to our newsletter and receive a coupon for 10% off!\":\"Sign up to our newsletter and receive a coupon for 10% off!\",\"Similar products\":\"Similar products\",\"Size guide\":\"Size guide\",\"Something went wrong ...\":\"Something went wrong ...\",\"Something went wrong. Try again in a few seconds.\":\"Something went wrong. Try again in a few seconds.\",\"Sort By\":\"Sort By\",\"State / Province\":\"State / Province\",\"Status\":\"Status\",\"Store locator\":\"Store locator\",\"Street name *\":\"Street name *\",\"Street name\":\"Street name\",\"Subscribe to the newsletter and receive a coupon for 10% off\":\"Subscribe to the newsletter and receive a coupon for 10% off\",\"Subscribe\":\"Subscribe\",\"Subtotal\":\"Subtotal\",\"Tax ID *\":\"Tax ID *\",\"Tax ID must have at least 3 letters.\":\"Tax ID must have at least 3 letters.\",\"Tax identification number *\":\"Tax identification number *\",\"Tax identification number must have at least 3 letters.\":\"Tax identification number must have at least 3 letters.\",\"Tax\":\"Tax\",\"Terms and conditions\":\"Terms and conditions\",\"The OrderNumber is {id}\":\"The Order Number is {id}\",\"The new account will be created with the purchase. You will receive details on e-mail.\":\"The new account will be created with the purchase. You will receive details on e-mail.\",\"The order can not be transfered because of server error. Order has been queued\":\"The order can not be transfered because of server error. Order has been queued\",\"The server order id has been set to \":\"The server order id has been set to \",\"This product is out of stock.\":\"This product is out of stock.\",\"To finish the order just come back to our store while online. Your order will be sent to the server as soon as you come back here while online and then confirmed regarding the stock quantities of selected items\":\"To finish the order just come back to our store while online. Your order will be sent to the server as soon as you come back here while online and then confirmed regarding the stock quantities of selected items\",\"Toggle password visibility\":\"Toggle password visibility\",\"Track my order\":\"Track my order\",\"Type your opinion\":\"Type your opinion\",\"Type\":\"Type\",\"Unfortunately we can't find the page you are looking for.\":\"Unfortunately we can't find the page you are looking for.\",\"United States\":\"United States\",\"Update my preferences\":\"Update my preferences\",\"Update my profile\":\"Update my profile\",\"Update my shipping details\":\"Update my shipping details\",\"Use my billing data\":\"Use my billing data\",\"Use my company's address details\":\"Use my company's address details\",\"Value\":\"Value\",\"View all\":\"View all\",\"View order\":\"View order\",\"Vuestore\":\"Vuestore\",\"We can't find the page\":\"We can't find the page\",\"We found other products you might like\":\"We found other products you might like\",\"We use cookies to give you the best shopping experience.\":\"We use cookies to give you the best shopping experience.\",\"We will send you details regarding the order\":\"We will send you details regarding the order\",\"We will send you the invoice to given e-mail address\":\"We will send you the invoice to given e-mail address\",\"We've noticed Internal Server Error while rendering this request.\":\"We've noticed Internal Server Error while rendering this request.\",\"We've sent password reset instructions to your email. Check your inbox and follow the link.\":\"We've sent password reset instructions to your email. Check your inbox and follow the link.\",\"What we can improve?\":\"What we can improve?\",\"Wishlist\":\"Wishlist\",\"Women fashion\":\"Women fashion\",\"You are logged in as {firstname}\":\"You are logged in as {firstname}\",\"You are offline\":\"You are offline\",\"You are offline. Some features might not be available.\":\"You are offline. Some features might not be available.\",\"You can allow us to remind you about the order via push notification after coming back online. You'll only need to click on it to confirm.\":\"You can allow us to remind you about the order via push notification after coming back online. You'll only need to click on it to confirm.\",\"You can also use\":\"You can also use\",\"You can log to your account using e-mail and password defined earlier. On your account you can <b>edit your profile data,</b> check <b>history of transactions,</b> edit <b>subscription to newsletter.</b>\":\"You can log to your account using e-mail and password defined earlier. On your account you can <b>edit your profile data,</b> check <b>history of transactions,</b> edit <b>subscription to newsletter.</b>\",\"You have been successfully subscribed to our newsletter!\":\"You have been successfully subscribed to our newsletter!\",\"You have been successfully unsubscribed from our newsletter!\":\"You have been successfully unsubscribed from our newsletter!\",\"You have no items to compare.\":\"You have no items to compare.\",\"You have successfuly placed the order. You can check status of your order by using our <b>delivery status</b> feature. You will receive an order confirmation e-mail with details of your order and a link to track its progress.\":\"You have successfuly placed the order. You can check status of your order by using our <b>delivery status</b> feature. You will receive an order confirmation e-mail with details of your order and a link to track its progress.\",\"You must accept the terms and conditions.\":\"You must accept the terms and conditions.\",\"You will receive Push notification after coming back online. You can confirm the order by clicking on it\":\"You will receive Push notification after coming back online. You can confirm the order by clicking on it\",\"You've entered an incorrect coupon code. Please try again.\":\"You've entered an incorrect coupon code. Please try again.\",\"Your Account\":\"Your Account\",\"Your feedback is important for us. Let us know what we could improve.\":\"Your feedback is important for us. Let us know what we could improve.\",\"Your purchase\":\"Your purchase\",\"Your shopping cart is empty.\":\"Your shopping cart is empty.\",\"Your wishlist is empty.\":\"Your wishlist is empty.\",\"Zip-code *\":\"Zip-code *\",\"Zip-code must have at least 3 letters.\":\"Zip-code must have at least 3 letters.\",\"Zip-code\":\"Zip-code\",\"a chat\":\"a chat\",\"a contact page\":\"a contact page\",\"browse our catalog\":\"browse our catalog\",\"color\":\"color\",\"color_filter\":\"Color\",\"erin_recommends_filter\":\"Erin Recommends\",\"login to your account\":\"login to your account\",\"or write to us through\":\"or write to us through\",\"or\":\"or\",\"price_filter\":\"Price\",\"register an account\":\"register an account\",\"return to log in\":\"return to log in\",\"search\":\"search\",\"size\":\"size\",\"size_filter\":\"Size\",\"to find product you were looking for.\":\"to find product you were looking for.\",\"to find something beautiful for You!\":\"to find something beautiful for You!\",\"{count} items\":\"{count} items\"}");

/***/ }),

/***/ "./core/i18n/resource/i18n/multistoreLanguages.json":
/*!**********************************************************!*\
  !*** ./core/i18n/resource/i18n/multistoreLanguages.json ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module) {

module.exports = JSON.parse("{}");

/***/ }),

/***/ "./core/lib/async-data-loader.ts":
/*!***************************************!*\
  !*** ./core/lib/async-data-loader.ts ***!
  \***************************************/
/*! exports provided: AsyncDataLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AsyncDataLoader", function() { return AsyncDataLoader; });
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");

var DEFAULT_ACTION_CATEGORY = 'asyncData';
/** AsyncDataLoader helper for queueing the data fetching operations. The main purpose is to decentralize the `asyncData()` SSR method */
var AsyncDataLoader = {
    queue: new Array(),
    push: function (action) {
        if (!action.category)
            action.category = DEFAULT_ACTION_CATEGORY;
        action.scheduledAt = new Date();
        this.queue.push(action);
    },
    flush: function (actionContext) {
        if (!actionContext.category)
            actionContext.category = DEFAULT_ACTION_CATEGORY;
        var actionsToExecute = this.queue.filter(function (ac) { return (!ac.category || !actionContext.category) || (ac.category === actionContext.category && (!ac.executedAt)); }).map(function (ac) {
            ac.executedAt = new Date();
            return ac.execute(actionContext); // function must return Promise
        });
        if (actionsToExecute.length > 0) {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].info('Executing data loader actions(' + actionsToExecute.length + ')', 'dataloader')();
        }
        return Promise.all(actionsToExecute).then(function (results) {
            return results;
        });
    }
};


/***/ }),

/***/ "./core/lib/hooks.ts":
/*!***************************!*\
  !*** ./core/lib/hooks.ts ***!
  \***************************/
/*! exports provided: createListenerHook, createMutatorHook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createListenerHook", function() { return createListenerHook; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMutatorHook", function() { return createMutatorHook; });
/**
  Listener hook just fires functions passed to hook function when executor is invoked.
  e. g. We want to listen for onAppInit event in various places of the application.
  Functions passed to this hook will be invoked only when executor function is executed.
  Usually we want to use hook in app/modules and executor in core.
  @return hook:  a hook function to use in modules
  @return executor: a function that will run all the collected hooks
 */
function createListenerHook() {
    var functionsToRun = [];
    function hook(fn) {
        functionsToRun.push(fn);
    }
    function executor(args) {
        if (args === void 0) { args = null; }
        functionsToRun.forEach(function (fn) { return fn(args); });
    }
    return {
        hook: hook,
        executor: executor
    };
}
/**
  Mutators work like listeners except they can modify passed value in hooks.
  e.g we can apply the hook mutator to object order that is returned before placing order
  now you can access and modify this value from hook returned by this function
  @return hook: a hook function to use in modules
  @return executor: a function that will apply all hooks on a given value
 */
function createMutatorHook() {
    var mutators = [];
    function hook(mutator) {
        mutators.push(mutator);
    }
    function executor(rawOutput) {
        if (mutators.length > 0) {
            var modifiedOutput_1 = null;
            mutators.forEach(function (fn) {
                modifiedOutput_1 = fn(rawOutput);
            });
            return modifiedOutput_1;
        }
        else {
            return rawOutput;
        }
    }
    return {
        hook: hook,
        executor: executor
    };
}

// TODO: Hooks for Client entry, replaceState (can be part of client entry), shopping cart loaded, user logged


/***/ }),

/***/ "./core/lib/logger.ts":
/*!****************************!*\
  !*** ./core/lib/logger.ts ***!
  \****************************/
/*! exports provided: Logger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Logger", function() { return logger; });
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/hooks */ "./core/hooks.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};



var bgColorStyle = function (color) { return "color: white; background: " + color + "; padding: 4px; font-weight: bold; font-size: 0.8em'"; };
/** VS message logger. By default works only on dev mode */
var Logger = /** @class */ (function () {
    /**
     * Logger constructor
     *
     * @param verbosityLevel
     * @param showErrorOnProduction
     */
    function Logger(verbosityLevel, showErrorOnProduction) {
        if (verbosityLevel === void 0) { verbosityLevel = 'display-everything'; }
        if (showErrorOnProduction === void 0) { showErrorOnProduction = false; }
        this.verbosityLevel = verbosityLevel;
        this.showErrorOnProduction = showErrorOnProduction;
        this.isProduction = "development" === 'production';
    }
    /**
     * Convert message to string - as it may be object, array either primitive
     * @param payload
     */
    Logger.prototype.convertToString = function (payload) {
        if (typeof payload === 'string' || typeof payload === 'boolean' || typeof payload === 'number')
            return payload;
        if (payload && payload.message)
            return payload.message;
        return JSON.stringify(payload);
    };
    /**
     * Check if method can print into console
     *
     * @param {string} method
     */
    Logger.prototype.canPrint = function (method) {
        var allowedMethods = [];
        if (this.verbosityLevel === 'display-everything' && this.isProduction === false) {
            allowedMethods.push.apply(allowedMethods, __spread(['info', 'warn', 'error', 'debug']));
        }
        else if (this.verbosityLevel === 'only-errors' && (this.isProduction === false || this.showErrorOnProduction === true)) {
            allowedMethods.push('error');
        }
        return allowedMethods.indexOf(method) !== -1;
    };
    /**
     * Inform about debug events happening in the app
     * Don't forget to invoke created function after passing arguments to keep context
     * `Logger.debug(...args)()`
     * @param message
     * @param tag short tag specifying area where message was spawned (eg. cart, sync, module)
     * @param context meaningful data related to this message
     */
    Logger.prototype.debug = function (message, tag, context) {
        var _a;
        if (tag === void 0) { tag = null; }
        if (context === void 0) { context = null; }
        if (!this.canPrint('debug')) {
            return function () { };
        }
        var noDefaultOutput;
        (_a = _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_1__["coreHooksExecutors"].beforeLogRendered({ type: 'debug', message: message, tag: tag, context: context }), message = _a.message, tag = _a.tag, context = _a.context, noDefaultOutput = _a.noDefaultOutput);
        if (noDefaultOutput === true) {
            return function () { };
        }
        if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"]) {
            return console.debug.bind(console, (tag ? "[" + tag + "] " : '') + this.convertToString(message), context);
        }
        if (tag) {
            return console.debug.bind(window.console, '%cVSF%c %c' + tag + '%c ' + this.convertToString(message), bgColorStyle('grey'), 'color: inherit', bgColorStyle('gray'), 'font-weight: normal', context);
        }
        else {
            return console.debug.bind(window.console, '%cVSF%c ' + this.convertToString(message), bgColorStyle('grey'), 'font-weight: normal', context);
        }
    };
    /**
     * Inform about log events happening in the app
     * Don't forget to invoke created function after passing arguments to keep context
     * `Logger.log(...args)()`
     * @param message
     * @param tag short tag specifying area where message was spawned (eg. cart, sync, module)
     * @param context meaningful data related to this message
     */
    Logger.prototype.log = function (message, tag, context) {
        if (tag === void 0) { tag = null; }
        if (context === void 0) { context = null; }
        return this.info(message, tag, context);
    };
    /**
     * Inform about succesful events happening in the app
     * Don't forget to invoke created function after passing arguments to keep context
     * `Logger.info(...args)()`
     * @param message
     * @param tag short tag specifying area where message was spawned (eg. cart, sync, module)
     * @param context meaningful data related to this message
     */
    Logger.prototype.info = function (message, tag, context) {
        var _a;
        if (tag === void 0) { tag = null; }
        if (context === void 0) { context = null; }
        if (!this.canPrint('info')) {
            return function () { };
        }
        var noDefaultOutput;
        (_a = _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_1__["coreHooksExecutors"].beforeLogRendered({ type: 'info', message: message, tag: tag, context: context }), message = _a.message, tag = _a.tag, context = _a.context, noDefaultOutput = _a.noDefaultOutput);
        if (noDefaultOutput === true) {
            return function () { };
        }
        if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"]) {
            return console.log.bind(console, (tag ? "[" + tag + "] " : '') + this.convertToString(message), context);
        }
        if (tag) {
            return console.log.bind(window.console, '%cVSF%c %c' + tag + '%c ' + this.convertToString(message), bgColorStyle('green'), 'color: inherit', bgColorStyle('gray'), 'font-weight: bold', context);
        }
        else {
            return console.log.bind(window.console, '%cVSF%c ' + this.convertToString(message), bgColorStyle('green'), 'font-weight: bold', context);
        }
    };
    /**
     * Inform about potential problems that may be a cause of app break
     * Don't forget to invoke created function after passing arguments to keep context
     * `Logger.warn(...args)()`
     * @param message
     * @param tag short tag specifying area where message was spawned (eg. cart, sync, module)
     * @param context meaningful data related to this message
     */
    Logger.prototype.warn = function (message, tag, context) {
        var _a;
        if (tag === void 0) { tag = null; }
        if (context === void 0) { context = null; }
        if (!this.canPrint('warn')) {
            return function () { };
        }
        var noDefaultOutput;
        (_a = _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_1__["coreHooksExecutors"].beforeLogRendered({ type: 'warn', message: message, tag: tag, context: context }), message = _a.message, tag = _a.tag, context = _a.context, noDefaultOutput = _a.noDefaultOutput);
        if (noDefaultOutput === true) {
            return function () { };
        }
        if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"]) {
            return console.warn.bind(console, (tag ? "[" + tag + "] " : '') + this.convertToString(message), context);
        }
        if (tag) {
            return console.warn.bind(window.console, '%cVSF%c %c' + tag + '%c ' + this.convertToString(message), bgColorStyle('orange'), 'color: inherit', bgColorStyle('gray'), 'font-weight: bold', context);
        }
        else {
            return console.warn.bind(window.console, '%cVSF%c ' + this.convertToString(message), bgColorStyle('orange'), 'font-weight: bold', context);
        }
    };
    /**
     * Inform about errors that will break the app
     * Don't forget to invoke created function after passing arguments to keep context
     * `Logger.error(...args)()`
     * @param message
     * @param tag short tag specifying area where message was spawned (eg. cart, sync, module)
     * @param context meaningful data related to this message
     */
    Logger.prototype.error = function (message, tag, context) {
        var _a;
        if (tag === void 0) { tag = null; }
        if (context === void 0) { context = null; }
        var noDefaultOutput;
        (_a = _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_1__["coreHooksExecutors"].beforeLogRendered({ type: 'error', message: message, tag: tag, context: context }), message = _a.message, tag = _a.tag, context = _a.context, noDefaultOutput = _a.noDefaultOutput);
        if (noDefaultOutput === true) {
            return function () { };
        }
        if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"]) { // always show errors in SSR
            return console.error.bind(console, (tag ? "[" + tag + "] " : '') + this.convertToString(message), context);
        }
        if (this.canPrint('error')) {
            if (tag) {
                return console.error.bind(window.console, '%cVSF%c %c' + tag + '%c ' + this.convertToString(message), bgColorStyle('red'), 'color: inherit', bgColorStyle('gray'), 'font-weight: bold', context);
            }
            else {
                return console.error.bind(window.console, '%cVSF%c ' + this.convertToString(message), bgColorStyle('red'), 'font-weight: bold', context);
            }
        }
        return function () { };
    };
    return Logger;
}());
var logger = new Logger(config__WEBPACK_IMPORTED_MODULE_2__.console.verbosityLevel, config__WEBPACK_IMPORTED_MODULE_2__.console.showErrorOnProduction);



/***/ }),

/***/ "./core/lib/module/helpers.ts":
/*!************************************!*\
  !*** ./core/lib/module/helpers.ts ***!
  \************************************/
/*! exports provided: doesStoreAlreadyExists, mergeStores */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "doesStoreAlreadyExists", function() { return doesStoreAlreadyExists; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeStores", function() { return mergeStores; });
/* harmony import */ var lodash_es_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash-es/merge */ "./node_modules/lodash-es/merge.js");
/* harmony import */ var lodash_es_some__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/some */ "./node_modules/lodash-es/some.js");
/* harmony import */ var lodash_es_find__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es/find */ "./node_modules/lodash-es/find.js");



function doesStoreAlreadyExists(key, registeredModules) {
    registeredModules.forEach(function (m) {
        if (m.store) {
            if (m.store.modules.some(function (m) { return m.key === key; }))
                return true;
        }
    });
    return false;
}
function mergeStores(originalStore, extendedStore) {
    var mergedArray = [];
    originalStore.modules.map(function (item) {
        mergedArray.push(Object(lodash_es_merge__WEBPACK_IMPORTED_MODULE_0__["default"])(item, Object(lodash_es_find__WEBPACK_IMPORTED_MODULE_2__["default"])(extendedStore.modules, { 'key': item.key })));
    });
    extendedStore.modules.map(function (extendedStoreItem) {
        if (Object(lodash_es_some__WEBPACK_IMPORTED_MODULE_1__["default"])(originalStore.modules, null, { 'key': extendedStoreItem.key }) === false) {
            mergedArray.push(extendedStoreItem);
        }
    });
    return mergedArray;
}



/***/ }),

/***/ "./core/lib/module/index.ts":
/*!**********************************!*\
  !*** ./core/lib/module/index.ts ***!
  \**********************************/
/*! exports provided: extendModule, VueStorefrontModule, registerModules, createModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extendModule", function() { return extendModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VueStorefrontModule", function() { return VueStorefrontModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerModules", function() { return registerModules; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createModule", function() { return createModule; });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var lodash_es_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/merge */ "./node_modules/lodash-es/merge.js");
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _multistore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/app */ "./core/app.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./helpers */ "./core/lib/module/helpers.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_8___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);









var moduleExtendings = [];
var registeredModules = [];
function registerModules(modules, context) {
    modules.forEach(function (m) { return m.register(); });
    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].info('VS Modules registration finished.', 'module', {
        succesfulyRegistered: registeredModules.length + ' / ' + modules.length,
        registrationOrder: registeredModules
    })();
}
function extendModule(moduleConfig) {
    moduleExtendings.push(moduleConfig);
}
var VueStorefrontModule = /** @class */ (function () {
    function VueStorefrontModule(_c) {
        this._isRegistered = false;
        this._c = _c;
    }
    VueStorefrontModule._extendStore = function (storeInstance, modules, plugin) {
        if (modules)
            modules.forEach(function (store) { return storeInstance.registerModule(store.key, store.module); });
        if (plugin)
            storeInstance.subscribe(plugin);
    };
    VueStorefrontModule._extendRouter = function (routerInstance, routes, beforeEach, afterEach) {
        if (routes) {
            Object(_multistore__WEBPACK_IMPORTED_MODULE_4__["setupMultistoreRoutes"])(config__WEBPACK_IMPORTED_MODULE_8__, routerInstance, routes);
        }
        if (beforeEach)
            routerInstance.beforeEach(beforeEach);
        if (afterEach)
            routerInstance.afterEach(afterEach);
    };
    VueStorefrontModule.prototype._extendModule = function (extendedConfig) {
        var mergedStore = { modules: [], plugin: null };
        var key = this._c.key;
        var originalStore = this._c.store;
        var extendedStore = extendedConfig.store;
        delete this._c.store;
        delete extendedConfig.store;
        this._c = Object(lodash_es_merge__WEBPACK_IMPORTED_MODULE_1__["default"])(this._c, extendedConfig);
        mergedStore.modules = Object(_helpers__WEBPACK_IMPORTED_MODULE_7__["mergeStores"])(originalStore, extendedStore);
        mergedStore.plugin = extendedStore.plugin || originalStore.plugin || null;
        this._c.store = mergedStore;
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].info('Module "' + key + '" has been succesfully extended.', 'module')();
    };
    Object.defineProperty(VueStorefrontModule.prototype, "config", {
        get: function () {
            return this._c;
        },
        /** Use only if you want to explicitly modify module config. Otherwise it's much easier to use `extendModule` */
        set: function (config) {
            this._c = config;
        },
        enumerable: true,
        configurable: true
    });
    VueStorefrontModule.prototype.register = function () {
        var _this = this;
        if (!this._isRegistered) {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].warn('The module you are registering is using outdated API that will soon be depreciated. Please check https://docs.vuestorefront.io to learn more.', 'module', this._c.key)();
            var areStoresUnique_1 = true;
            var VSF = {
                Vue: vue__WEBPACK_IMPORTED_MODULE_0__["default"],
                config: config__WEBPACK_IMPORTED_MODULE_8__,
                store: _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__["default"],
                isServer: _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_6__["isServer"]
            };
            moduleExtendings.forEach(function (extending) {
                if (extending.key === _this._c.key)
                    _this._extendModule(extending);
            });
            if (this._c.store) {
                this._c.store.modules.forEach(function (store) {
                    if (Object(_helpers__WEBPACK_IMPORTED_MODULE_7__["doesStoreAlreadyExists"])(store.key, registeredModules)) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].warn('Error during "' + _this._c.key + '" module registration! Store with key "' + store.key + '" already exists!', 'module')();
                        areStoresUnique_1 = false;
                    }
                });
            }
            if (areStoresUnique_1) {
                if (this._c.beforeRegistration) {
                    if (this._c.beforeRegistration.length === 1) {
                        this._c.beforeRegistration(VSF);
                    }
                    else {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].warn('You are using outdated signature for beforeRegistration hook that soon will be deprecated and module will stop working properly. Please update to the new signature that can be found in our docs: https://docs.vuestorefront.io/guide/modules/introduction.html#beforeregistration', 'module', this._c.key)();
                        this._c.beforeRegistration(vue__WEBPACK_IMPORTED_MODULE_0__["default"], config__WEBPACK_IMPORTED_MODULE_8__, _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__["default"], _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_6__["isServer"]);
                    }
                }
                if (this._c.store)
                    VueStorefrontModule._extendStore(_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__["default"], this._c.store.modules, this._c.store.plugin);
                if (this._c.router)
                    VueStorefrontModule._extendRouter(_vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_5__["router"], this._c.router.routes, this._c.router.beforeEach, this._c.router.afterEach);
                registeredModules.push(this._c);
                this._isRegistered = true;
                if (this._c.afterRegistration) {
                    if (this._c.afterRegistration.length === 1) {
                        this._c.afterRegistration(VSF);
                    }
                    else {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].warn('You are using outdated signature for afterRegistration hook that soon will be deprecated and module will stop working properly. Please update to the new signature that can be found in our docs: https://docs.vuestorefront.io/guide/modules/introduction.html#afterregistration', 'module', this._c.key)();
                        this._c.afterRegistration(vue__WEBPACK_IMPORTED_MODULE_0__["default"], config__WEBPACK_IMPORTED_MODULE_8__, _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__["default"], _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_6__["isServer"]);
                    }
                }
                return this._c;
            }
        }
    };
    return VueStorefrontModule;
}());
function createModule(config) {
    return new VueStorefrontModule(config);
}



/***/ }),

/***/ "./core/lib/modules.ts":
/*!*****************************!*\
  !*** ./core/lib/modules.ts ***!
  \*****************************/
/*! exports provided: refs, injectReferences, registerModule, isModuleRegistered */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "refs", function() { return refs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "injectReferences", function() { return injectReferences; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerModule", function() { return registerModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isModuleRegistered", function() { return isModuleRegistered; });
var refs = {};
var registeredModules = [];
function injectReferences(app, store, router, config) {
    refs.app = app;
    refs.store = store;
    refs.router = router;
    refs.config = config;
}
function registerModule(module, config) {
    if (!registeredModules.includes(module)) {
        module({
            app: refs.app,
            store: refs.store,
            router: refs.router,
            appConfig: refs.config,
            moduleConfig: config
        });
        registeredModules.push(module);
    }
}
function isModuleRegistered(name) {
    return registeredModules.some(function (m) { return m.name === name; });
}



/***/ }),

/***/ "./core/lib/multistore.ts":
/*!********************************!*\
  !*** ./core/lib/multistore.ts ***!
  \********************************/
/*! exports provided: currentStoreView, prepareStoreView, removeStoreCodeFromRoute, adjustMultistoreApiUrl, localizedDispatcherRoute, localizedDispatcherRouteName, localizedRoutePath, localizedRouteConfig, localizedRoute, setupMultistoreRoutes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "currentStoreView", function() { return currentStoreView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prepareStoreView", function() { return prepareStoreView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeStoreCodeFromRoute", function() { return removeStoreCodeFromRoute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adjustMultistoreApiUrl", function() { return adjustMultistoreApiUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localizedDispatcherRoute", function() { return localizedDispatcherRoute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localizedDispatcherRouteName", function() { return localizedDispatcherRouteName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localizedRoutePath", function() { return localizedRoutePath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localizedRouteConfig", function() { return localizedRouteConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localizedRoute", function() { return localizedRoute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupMultistoreRoutes", function() { return setupMultistoreRoutes; });
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var _sync_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sync/task */ "./core/lib/sync/task.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! query-string */ "./node_modules/query-string/index.js");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_es_merge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash-es/merge */ "./node_modules/lodash-es/merge.js");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_6___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/hooks */ "./core/hooks.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _storeCodeFromRoute__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./storeCodeFromRoute */ "./core/lib/storeCodeFromRoute.ts");
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lodash-es/cloneDeep */ "./node_modules/lodash-es/cloneDeep.js");
/* harmony import */ var lodash_es_get__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash-es/get */ "./node_modules/lodash-es/get.js");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};













function getExtendedStoreviewConfig(storeView) {
    if (storeView.extend) {
        var originalParent = storeView.extend;
        if (!config__WEBPACK_IMPORTED_MODULE_6__.storeViews[originalParent]) {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].error("Storeview \"" + storeView.extend + "\" doesn't exist!")();
        }
        else {
            storeView = Object(lodash_es_merge__WEBPACK_IMPORTED_MODULE_5__["default"])({}, getExtendedStoreviewConfig(config__WEBPACK_IMPORTED_MODULE_6__.storeViews[originalParent]), storeView);
        }
    }
    return storeView;
}
/**
 * Returns base storeView object that can be created without storeCode
 */
function buildBaseStoreView() {
    return Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_10__["default"])({
        tax: config__WEBPACK_IMPORTED_MODULE_6__.tax,
        i18n: config__WEBPACK_IMPORTED_MODULE_6__.i18n,
        elasticsearch: config__WEBPACK_IMPORTED_MODULE_6__.elasticsearch,
        storeCode: null,
        storeId: config__WEBPACK_IMPORTED_MODULE_6__.defaultStoreCode && config__WEBPACK_IMPORTED_MODULE_6__.defaultStoreCode !== '' ? config__WEBPACK_IMPORTED_MODULE_6__.storeViews[config__WEBPACK_IMPORTED_MODULE_6__.defaultStoreCode].storeId : 1,
        seo: config__WEBPACK_IMPORTED_MODULE_6__.seo
    });
}
function currentStoreView() {
    var serverStoreView = Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_11__["default"])(global, 'process.storeView', undefined);
    var clientStoreView = Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_11__["default"])(_store__WEBPACK_IMPORTED_MODULE_0__["default"], 'state.storeView', undefined);
    return (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_12__["isServer"] ? serverStoreView : clientStoreView) || buildBaseStoreView();
}
function prepareStoreView(storeCode) {
    return __awaiter(this, void 0, void 0, function () {
        var storeView, storeViewHasChanged;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    storeView = buildBaseStoreView() // current, default store
                    ;
                    if (config__WEBPACK_IMPORTED_MODULE_6__.storeViews.multistore === true) {
                        storeView.storeCode = storeCode || config__WEBPACK_IMPORTED_MODULE_6__.defaultStoreCode || '';
                    }
                    else {
                        storeView.storeCode = storeCode || '';
                    }
                    storeViewHasChanged = !_store__WEBPACK_IMPORTED_MODULE_0__["default"].state.storeView || _store__WEBPACK_IMPORTED_MODULE_0__["default"].state.storeView.storeCode !== storeCode;
                    if (storeView.storeCode && config__WEBPACK_IMPORTED_MODULE_6__.storeViews.multistore === true && config__WEBPACK_IMPORTED_MODULE_6__.storeViews[storeView.storeCode]) {
                        storeView = Object(lodash_es_merge__WEBPACK_IMPORTED_MODULE_5__["default"])(storeView, getExtendedStoreviewConfig(config__WEBPACK_IMPORTED_MODULE_6__.storeViews[storeView.storeCode]));
                    }
                    if (_store__WEBPACK_IMPORTED_MODULE_0__["default"].state.user) {
                        _store__WEBPACK_IMPORTED_MODULE_0__["default"].state.user.current_storecode = storeView.storeCode;
                    }
                    if (!storeViewHasChanged) return [3 /*break*/, 2];
                    storeView = _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_7__["coreHooksExecutors"].beforeStoreViewChanged(storeView);
                    _store__WEBPACK_IMPORTED_MODULE_0__["default"].state.storeView = storeView;
                    if (global && _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_12__["isServer"]) {
                        global.process.storeView = storeView;
                    }
                    return [4 /*yield*/, Object(_vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["loadLanguageAsync"])(storeView.i18n.defaultLocale)];
                case 1:
                    _a.sent();
                    _a.label = 2;
                case 2:
                    if (storeViewHasChanged || _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_8__["StorageManager"].currentStoreCode !== storeCode) {
                        Object(_sync_task__WEBPACK_IMPORTED_MODULE_2__["initializeSyncTaskStorage"])();
                        _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_8__["StorageManager"].currentStoreCode = storeView.storeCode;
                    }
                    _vue_storefront_core_hooks__WEBPACK_IMPORTED_MODULE_7__["coreHooksExecutors"].afterStoreViewChanged(storeView);
                    return [2 /*return*/, storeView];
            }
        });
    });
}
function removeStoreCodeFromRoute(matchedRouteOrUrl) {
    var storeCodeInRoute = Object(_storeCodeFromRoute__WEBPACK_IMPORTED_MODULE_9__["default"])(matchedRouteOrUrl);
    if (storeCodeInRoute !== '') {
        var urlPath = typeof matchedRouteOrUrl === 'object' ? matchedRouteOrUrl.path : matchedRouteOrUrl;
        return urlPath.replace(storeCodeInRoute + '/', '');
    }
    else {
        return matchedRouteOrUrl;
    }
}
function removeURLQueryParameter(url, parameter) {
    // prefer to use l.search if you have a location/link object
    var urlparts = url.split('?');
    if (urlparts.length >= 2) {
        var prefix = encodeURIComponent(parameter) + '=';
        var pars = urlparts[1].split(/[&;]/g);
        // reverse iteration as may be destructive
        for (var i = pars.length; i-- > 0;) {
            // idiom for string.startsWith
            if (pars[i].lastIndexOf(prefix, 0) !== -1) {
                pars.splice(i, 1);
            }
        }
        return urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : '');
    }
    return url;
}
function adjustMultistoreApiUrl(url) {
    var storeCode = currentStoreView().storeCode;
    if (storeCode) {
        url = removeURLQueryParameter(url, 'storeCode');
        var urlSep = (url.indexOf('?') > 0) ? '&' : '?';
        url += urlSep + "storeCode=" + storeCode;
    }
    return url;
}
function localizedDispatcherRoute(routeObj, storeCode) {
    var _a = currentStoreView(), currentStoreCode = _a.storeCode, appendStoreCode = _a.appendStoreCode;
    if (!storeCode || !config__WEBPACK_IMPORTED_MODULE_6__.storeViews[storeCode]) {
        storeCode = currentStoreCode;
    }
    var appendStoreCodePrefix = storeCode && appendStoreCode;
    if (typeof routeObj === 'string') {
        if (routeObj[0] !== '/')
            routeObj = "/" + routeObj;
        return appendStoreCodePrefix ? "/" + storeCode + routeObj : routeObj;
    }
    if (routeObj) {
        if (routeObj.fullPath && !routeObj.path) { // support both path and fullPath
            routeObj['path'] = routeObj.fullPath;
        }
        if (routeObj.path) { // case of using dispatcher
            var routeCodePrefix = appendStoreCodePrefix ? "/" + storeCode : '';
            var qrStr = query_string__WEBPACK_IMPORTED_MODULE_4___default.a.stringify(routeObj.params);
            var normalizedPath = routeObj.path[0] !== '/' ? "/" + routeObj.path : routeObj.path;
            return "" + routeCodePrefix + normalizedPath + (qrStr ? "?" + qrStr : '');
        }
    }
    return routeObj;
}
function localizedDispatcherRouteName(routeName, storeCode, appendStoreCode) {
    if (appendStoreCode === void 0) { appendStoreCode = false; }
    if (appendStoreCode) {
        return storeCode + "-" + routeName;
    }
    return routeName;
}
/**
 * Returns route path with proper language prefix
 * @param path - route path
 * @param storeCode - language prefix specified in global config
 */
function localizedRoutePath(path, storeCode) {
    var _path = path.startsWith('/') ? path.slice(1) : path;
    return "/" + storeCode + "/" + _path;
}
/**
 * Returns transformed route config with language
 * @param route - route config object
 * @param storeCode - language prefix specified in global config
 * @param isChildRoute - determines if route config is for child route
 */
function localizedRouteConfig(route, storeCode, isChildRoute) {
    if (isChildRoute === void 0) { isChildRoute = false; }
    // note: we need shallow copy to prevent modifications in provided route object
    var _route = __assign({}, route);
    if (_route.name && storeCode) {
        _route.name = storeCode + "-" + _route.name;
    }
    if (_route.path && !isChildRoute) {
        _route.path = localizedRoutePath(_route.path, storeCode);
    }
    if (_route.children) {
        _route.children = _route.children.map(function (childRoute) { return localizedRouteConfig(childRoute, storeCode, true); });
    }
    return _route;
}
function localizedRoute(routeObj, storeCode) {
    if (storeCode === void 0) { storeCode = null; }
    if (!storeCode) {
        storeCode = currentStoreView().storeCode;
    }
    if (!routeObj) {
        return routeObj;
    }
    if ((typeof routeObj === 'object') && routeObj) {
        if (routeObj.fullPath && !routeObj.path) { // support both path and fullPath
            routeObj['path'] = routeObj.fullPath;
        }
    }
    if (storeCode && config__WEBPACK_IMPORTED_MODULE_6__.defaultStoreCode !== storeCode && config__WEBPACK_IMPORTED_MODULE_6__.storeViews[storeCode] && config__WEBPACK_IMPORTED_MODULE_6__.storeViews[storeCode].appendStoreCode) {
        if (typeof routeObj !== 'object') {
            return localizedRoutePath(routeObj, storeCode);
        }
        return localizedRouteConfig(routeObj, storeCode);
    }
    return routeObj;
}
function setupMultistoreRoutes(config, router, routes, priority) {
    if (priority === void 0) { priority = 0; }
    var allRoutes = [];
    var _a = currentStoreView(), storeCode = _a.storeCode, appendStoreCode = _a.appendStoreCode;
    if (storeCode && appendStoreCode) {
        allRoutes.push.apply(allRoutes, __spread(routes.map(function (route) { return localizedRouteConfig(route, storeCode); })));
    }
    else {
        allRoutes.push.apply(allRoutes, __spread(routes));
    }
    router.addRoutes(allRoutes, true, priority);
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./core/lib/passive-listeners.js":
/*!***************************************!*\
  !*** ./core/lib/passive-listeners.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

var eventListenerOptionsSupported = function eventListenerOptionsSupported() {
  var supported = false;

  try {
    var opts = Object.defineProperty({}, 'passive', {
      get: function get() {
        supported = true;
      }
    });
    window.addEventListener('test', null, opts);
    window.removeEventListener('test', null, opts);
  } catch (e) {}

  return supported;
};

var defaultOptions = {
  passive: true,
  capture: false
};
var supportedPassiveTypes = ['scroll', 'wheel', 'touchstart', 'touchmove', 'touchenter', 'touchend', 'touchleave', 'mouseout', 'mouseleave', 'mouseup', 'mousedown', 'mousemove', 'mouseenter', 'mousewheel', 'mouseover'];

var getDefaultPassiveOption = function getDefaultPassiveOption(passive, eventName) {
  if (passive !== undefined) return passive;
  return supportedPassiveTypes.indexOf(eventName) === -1 ? false : defaultOptions.passive;
};

var getWritableOptions = function getWritableOptions(options) {
  var passiveDescriptor = Object.getOwnPropertyDescriptor(options, 'passive');
  return passiveDescriptor && passiveDescriptor.writable !== true && passiveDescriptor.set === undefined ? Object.assign({}, options) : options;
};

var overwriteAddEvent = function overwriteAddEvent(superMethod) {
  EventTarget.prototype.addEventListener = function (type, listener, options) {
    var usesListenerOptions = _typeof(options) === 'object' && options !== null;
    var useCapture = usesListenerOptions ? options.capture : options;
    options = usesListenerOptions ? getWritableOptions(options) : {};
    options.passive = getDefaultPassiveOption(options.passive, type);
    options.capture = useCapture === undefined ? defaultOptions.capture : useCapture;
    superMethod.call(this, type, listener, options);
  };

  EventTarget.prototype.addEventListener._original = superMethod;
};

var supportsPassive = eventListenerOptionsSupported();

if (supportsPassive) {
  var addEvent = EventTarget.prototype.addEventListener;
  overwriteAddEvent(addEvent);
}

/***/ }),

/***/ "./core/lib/router-manager.ts":
/*!************************************!*\
  !*** ./core/lib/router-manager.ts ***!
  \************************************/
/*! exports provided: RouterManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RouterManager", function() { return RouterManager; });
/* harmony import */ var _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/app */ "./core/app.ts");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};

var RouterManager = {
    _registeredRoutes: new Array(),
    _routeQueue: new Array(),
    _routeQueueFlushed: false,
    _routeLock: null,
    _routeDispatched: false,
    _callbacks: [],
    addRoutes: function (routes, useRouteQueue, priority) {
        var _a, _b;
        var _this = this;
        if (useRouteQueue === void 0) { useRouteQueue = false; }
        if (priority === void 0) { priority = 0; }
        if (useRouteQueue && !this._routeQueueFlushed) {
            (_a = this._routeQueue).push.apply(_a, __spread(routes.map(function (route) { return { route: route, priority: priority }; })));
        }
        else {
            var uniqueRoutes = routes.filter(function (route) {
                return _this._registeredRoutes.findIndex(function (registeredRoute) { return registeredRoute.route.name === route.name && registeredRoute.route.path === route.path; }) < 0;
            });
            if (uniqueRoutes.length > 0) {
                (_b = this._registeredRoutes).push.apply(_b, __spread(uniqueRoutes.map(function (route) { return { route: route, priority: priority }; })));
                _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_0__["baseRouter"].addRoutes(uniqueRoutes);
            }
        }
    },
    flushRouteQueue: function () {
        if (!this._routeQueueFlushed) {
            this.addRoutesByPriority(this._routeQueue);
            this._routeQueueFlushed = true;
            this._routeQueue = [];
        }
    },
    addRoutesByPriority: function (routesData) {
        var e_1, _a, _b;
        var routesToAdd = [];
        var _loop_1 = function (routeData) {
            var exisitingIndex = routesToAdd.findIndex(function (r) { return r.route.name === routeData.route.name && r.route.path === routeData.route.path; });
            if ((exisitingIndex >= 0) && (routesToAdd[exisitingIndex].priority < routeData.priority)) { // same priority doesn't override exisiting
                routesToAdd.splice(exisitingIndex, 1);
                exisitingIndex = -1;
            }
            if (exisitingIndex < 0) {
                routesToAdd.push(routeData);
            }
        };
        try {
            for (var routesData_1 = __values(routesData), routesData_1_1 = routesData_1.next(); !routesData_1_1.done; routesData_1_1 = routesData_1.next()) {
                var routeData = routesData_1_1.value;
                _loop_1(routeData);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (routesData_1_1 && !routesData_1_1.done && (_a = routesData_1.return)) _a.call(routesData_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        (_b = this._registeredRoutes).push.apply(_b, __spread(routesToAdd));
        _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_0__["baseRouter"].addRoutes(routesToAdd.map(function (r) { return r.route; }));
    },
    isRouteAdded: function (addedRoutes, route) {
        return addedRoutes.findIndex(function (addedRoute) { return addedRoute.route.name === route.name && addedRoute.route.path === route.path; }) >= 0;
    },
    addDispatchCallback: function (callback) {
        this._callbacks.push(callback);
    },
    findByName: function (name) {
        return this.findByProperty('name', name);
    },
    findByPath: function (path) {
        return this.findByProperty('path', path);
    },
    findByProperty: function (property, value) {
        var registeredRoute = this._registeredRoutes.find(function (r) { return r.route[property] === value; });
        if (registeredRoute)
            return registeredRoute.route;
        if (this._routeQueueFlushed)
            return null;
        var queuedRoute = this._routeQueue.find(function (queueItem) { return queueItem.route[property] === value; });
        return queuedRoute ? queuedRoute.route : null;
    },
    lockRoute: function () {
        var resolver;
        this._routeLock = {
            lockPromise: new Promise(function (resolve) { resolver = resolve; }),
            resolver: resolver
        };
    },
    isRouteProcessing: function () {
        return !!this._routeLock;
    },
    isRouteDispatched: function () {
        return !!this._routeDispatched;
    },
    getRouteLockPromise: function () {
        if (this._routeLock)
            return this._routeLock.lockPromise;
        return Promise.resolve();
    },
    unlockRoute: function () {
        if (this._routeLock) {
            this._routeLock.resolver();
            this._routeLock = null;
        }
        this._routeDispatched = true;
        this._callbacks.forEach(function (callback) {
            callback();
        });
    }
};



/***/ }),

/***/ "./core/lib/search.ts":
/*!****************************!*\
  !*** ./core/lib/search.ts ***!
  \****************************/
/*! exports provided: isOnline, quickSearchByQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isOnline", function() { return isOnline; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quickSearchByQuery", function() { return quickSearchByQuery; });
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js-sha3 */ "./node_modules/js-sha3/src/sha3.js");
/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(js_sha3__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _search_adapter_searchAdapterFactory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./search/adapter/searchAdapterFactory */ "./core/lib/search/adapter/searchAdapterFactory.js");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};








// TODO - use one from helpers instead
function isOnline() {
    if (typeof navigator !== 'undefined') {
        return navigator.onLine;
    }
    else {
        return true; // SSR
    }
}
/**
 * Search ElasticSearch catalog of products using simple text query
 * Use bodybuilder to build the query, aggregations etc: http://bodybuilder.js.org/
 * @param {Object} query is the object of searchQuery class
 * @param {Int} start start index
 * @param {Int} size page size
 * @return {Promise}
 */
var quickSearchByQuery = function (_a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.query, query = _c === void 0 ? {} : _c, _d = _b.start, start = _d === void 0 ? 0 : _d, _e = _b.size, size = _e === void 0 ? 50 : _e, _f = _b.entityType, entityType = _f === void 0 ? 'product' : _f, _g = _b.sort, sort = _g === void 0 ? '' : _g, _h = _b.storeCode, storeCode = _h === void 0 ? null : _h, _j = _b.excludeFields, excludeFields = _j === void 0 ? null : _j, _k = _b.includeFields, includeFields = _k === void 0 ? null : _k;
    return __awaiter(void 0, void 0, void 0, function () {
        var searchAdapter;
        return __generator(this, function (_l) {
            switch (_l.label) {
                case 0: return [4 /*yield*/, Object(_search_adapter_searchAdapterFactory__WEBPACK_IMPORTED_MODULE_3__["getSearchAdapter"])()];
                case 1:
                    searchAdapter = _l.sent();
                    if (size <= 0)
                        size = 50;
                    if (start < 0)
                        start = 0;
                    return [2 /*return*/, new Promise(function (resolve, reject) { return __awaiter(void 0, void 0, void 0, function () {
                            var storeView, Request, cache, servedFromCache, cacheKey, benchmarkTime, res, err_1;
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        storeView = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])();
                                        Request = {
                                            store: storeCode || storeView.storeCode,
                                            type: entityType,
                                            searchQuery: query,
                                            groupToken: null,
                                            groupId: null,
                                            size: size,
                                            from: start,
                                            sort: sort
                                        };
                                        if (excludeFields)
                                            Request._sourceExclude = excludeFields;
                                        if (includeFields)
                                            Request._sourceInclude = includeFields;
                                        if (config__WEBPACK_IMPORTED_MODULE_5__.usePriceTiers && (entityType === 'product') && _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__["default"].state.user.groupId) {
                                            Request.groupId = _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__["default"].state.user.groupId;
                                        }
                                        cache = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_7__["StorageManager"].get('elasticCache') // switch to appcache?
                                        ;
                                        servedFromCache = false;
                                        cacheKey = Object(js_sha3__WEBPACK_IMPORTED_MODULE_1__["sha3_224"])(JSON.stringify(Request));
                                        benchmarkTime = new Date();
                                        _a.label = 1;
                                    case 1:
                                        _a.trys.push([1, 3, , 4]);
                                        return [4 /*yield*/, cache.getItem(cacheKey)];
                                    case 2:
                                        res = _a.sent();
                                        if (res !== null) {
                                            res.cache = true;
                                            res.noresults = false;
                                            res.offline = !isOnline(); // TODO: refactor it to checking ES heartbit
                                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].debug('Result from cache for ' + cacheKey + ' (' + entityType + '), ms=' + (new Date().getTime() - benchmarkTime.getTime()))();
                                            servedFromCache = true;
                                            resolve(res);
                                            return [2 /*return*/];
                                        }
                                        return [3 /*break*/, 4];
                                    case 3:
                                        err_1 = _a.sent();
                                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error('Cannot read cache for ' + cacheKey + ', ' + err_1)();
                                        return [3 /*break*/, 4];
                                    case 4:
                                        /* use only for cache */
                                        if (Request.groupId) {
                                            delete Request.groupId;
                                        }
                                        if (_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__["default"].state.user.groupToken) {
                                            Request.groupToken = _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_2__["default"].state.user.groupToken;
                                        }
                                        if (!searchAdapter.entities[Request.type]) {
                                            throw new Error('No entity type registered for ' + Request.type);
                                        }
                                        searchAdapter.search(Request).then(function (resp) {
                                            var res = searchAdapter.entities[Request.type].resultProcessor(resp, start, size);
                                            if (res) { // otherwise it can be just a offline mode
                                                cache.setItem(cacheKey, res, null, config__WEBPACK_IMPORTED_MODULE_5__.elasticsearch.disablePersistentQueriesCache).catch(function (err) { _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error('Cannot store cache for ' + cacheKey + ', ' + err)(); });
                                                if (!servedFromCache) { // if navigator onLine == false means ES is unreachable and probably this will return false; sometimes returned false faster than indexedDb cache returns result ...
                                                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].debug('Result from ES for ' + cacheKey + ' (' + entityType + '),  ms=' + (new Date().getTime() - benchmarkTime.getTime()))();
                                                    res.cache = false;
                                                    res.noresults = false;
                                                    res.offline = false;
                                                    resolve(res);
                                                }
                                            }
                                        }).catch(function (err) {
                                            if (!servedFromCache) {
                                                if (!_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_6__["isServer"]) {
                                                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].debug('No results and offline ' + cacheKey + ' (' + entityType + '), ms=' + (new Date().getTime() - benchmarkTime.getTime()))();
                                                    var res = {
                                                        items: [],
                                                        total: 0,
                                                        start: 0,
                                                        perPage: 0,
                                                        aggregations: {},
                                                        offline: true,
                                                        cache: true,
                                                        noresults: true,
                                                        suggestions: {}
                                                    };
                                                    resolve(res);
                                                }
                                                else {
                                                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error('Can not connect the vue-storefront-api / ElasticSearch instance!', 'search', err)();
                                                    reject(err);
                                                }
                                            }
                                            reject(err);
                                        });
                                        return [2 /*return*/];
                                }
                            });
                        }); })];
            }
        });
    });
};


/***/ }),

/***/ "./core/lib/search/adapter lazy recursive ^\\.\\/.*\\/searchAdapter$":
/*!*******************************************************************************!*\
  !*** ./core/lib/search/adapter lazy ^\.\/.*\/searchAdapter$ namespace object ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./api-search-query/searchAdapter": [
		"./core/lib/search/adapter/api-search-query/searchAdapter.ts",
		"vsf-search-adapter-api-search-query-searchAdapter"
	],
	"./api/searchAdapter": [
		"./core/lib/search/adapter/api/searchAdapter.ts",
		"vsf-search-adapter-api-searchAdapter"
	]
};
function webpackAsyncContext(req) {
	if(!__webpack_require__.o(map, req)) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}

	var ids = map[req], id = ids[0];
	return __webpack_require__.e(ids[1]).then(function() {
		return __webpack_require__(id);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./core/lib/search/adapter lazy recursive ^\\.\\/.*\\/searchAdapter$";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./core/lib/search/adapter/searchAdapterFactory.js":
/*!*********************************************************!*\
  !*** ./core/lib/search/adapter/searchAdapterFactory.js ***!
  \*********************************************************/
/*! exports provided: getSearchAdapter, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSearchAdapter", function() { return getSearchAdapter; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }


var instances = {};

var isImplementingSearchAdapterInterface = function isImplementingSearchAdapterInterface(obj) {
  return typeof obj.search === 'function' && typeof obj.registerEntityType === 'function';
};

var getSearchAdapter = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
    var adapterName,
        SearchAdapterModule,
        SearchAdapter,
        searchAdapter,
        _args = arguments;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            adapterName = _args.length > 0 && _args[0] !== undefined ? _args[0] : config__WEBPACK_IMPORTED_MODULE_0__["server"].api;
            _context.prev = 1;
            _context.next = 4;
            return __webpack_require__("./src/search/adapter lazy recursive ^\\.\\/.*\\/searchAdapter$")("./".concat(adapterName, "/searchAdapter"));

          case 4:
            SearchAdapterModule = _context.sent;
            _context.next = 9;
            break;

          case 7:
            _context.prev = 7;
            _context.t0 = _context["catch"](1);

          case 9:
            if (SearchAdapterModule) {
              _context.next = 18;
              break;
            }

            _context.prev = 10;
            _context.next = 13;
            return __webpack_require__("./core/lib/search/adapter lazy recursive ^\\.\\/.*\\/searchAdapter$")("./".concat(adapterName, "/searchAdapter"));

          case 13:
            SearchAdapterModule = _context.sent;
            _context.next = 18;
            break;

          case 16:
            _context.prev = 16;
            _context.t1 = _context["catch"](10);

          case 18:
            if (SearchAdapterModule) {
              _context.next = 20;
              break;
            }

            throw new Error('Search adapter module was not found in `src/search/adapter` neither in the `core/lib/search/adapter` folders');

          case 20:
            SearchAdapter = SearchAdapterModule.SearchAdapter;

            if (SearchAdapter) {
              _context.next = 23;
              break;
            }

            throw new Error('Search adapter class is not provided');

          case 23:
            if (!instances[adapterName]) {
              _context.next = 25;
              break;
            }

            return _context.abrupt("return", instances[adapterName]);

          case 25:
            searchAdapter = new SearchAdapter();

            if (isImplementingSearchAdapterInterface(searchAdapter)) {
              _context.next = 28;
              break;
            }

            throw new Error('Not valid search adapter class provided. Search Adapter must implements SearchAdapterInterfaces');

          case 28:
            instances[adapterName] = searchAdapter;
            return _context.abrupt("return", instances[adapterName]);

          case 30:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, null, [[1, 7], [10, 16]]);
  }));

  return function getSearchAdapter() {
    return _ref.apply(this, arguments);
  };
}();
/* harmony default export */ __webpack_exports__["default"] = ({
  getSearchAdapter: getSearchAdapter
});

/***/ }),

/***/ "./core/lib/storage-manager.ts":
/*!*************************************!*\
  !*** ./core/lib/storage-manager.ts ***!
  \*************************************/
/*! exports provided: StorageManager, initCacheStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StorageManager", function() { return StorageManager; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initCacheStorage", function() { return initCacheStorage; });
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! localforage */ "./node_modules/localforage/dist/localforage.js");
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(localforage__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _vue_storefront_core_lib_store_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/store/storage */ "./core/lib/store/storage.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);





function _prepareCacheStorage(key, localized, storageQuota) {
    if (localized === void 0) { localized = !config__WEBPACK_IMPORTED_MODULE_4__.storeViews.commonCache; }
    if (storageQuota === void 0) { storageQuota = 0; }
    var storeView = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_3__["currentStoreView"])();
    var dbNamePrefix = storeView && storeView.storeCode ? storeView.storeCode + '-' : '';
    var cacheDriver = config__WEBPACK_IMPORTED_MODULE_4__.localForage && config__WEBPACK_IMPORTED_MODULE_4__.localForage.defaultDrivers[key]
        ? config__WEBPACK_IMPORTED_MODULE_4__.localForage.defaultDrivers[key]
        : 'LOCALSTORAGE';
    return new _vue_storefront_core_lib_store_storage__WEBPACK_IMPORTED_MODULE_2__["default"](localforage__WEBPACK_IMPORTED_MODULE_1__["createInstance"]({
        name: localized ? dbNamePrefix + "shop" : 'shop',
        storeName: key,
        driver: localforage__WEBPACK_IMPORTED_MODULE_1__[cacheDriver]
    }), true, storageQuota);
}
var StorageManager = {
    currentStoreCode: '',
    storageMap: {},
    /**
     * Register the cache storage index that can be later accessed and modified - this is required prior to accessing the collection
     * @param collectionName name of the cache collection to create
     * @param isLocalized if set to `false` data will be shared between storeViews (default `true`)
     * @param storageQuota max size of storage, 0 if unlimited (default `0`)
     */
    init: function (collectionName, isLocalized, storageQuota) {
        if (isLocalized === void 0) { isLocalized = !config__WEBPACK_IMPORTED_MODULE_4__.storeViews.commonCache; }
        if (storageQuota === void 0) { storageQuota = 0; }
        this.storageMap[collectionName] = _prepareCacheStorage(collectionName, isLocalized, storageQuota);
        return this.storageMap[collectionName];
    },
    /**
     * Override or register the cache storage - this is required prior to accessing the collection
     * @param collectionName { string} string name of the cache collection to register
     * @param item UniversalStorage driver
     */
    set: function (collectionName, collectionInstance) {
        this.storageMap[collectionName] = collectionInstance;
        return collectionInstance;
    },
    /**
     * Check if the specified collection is already registered
     * @param collectionName string collection name to check
     */
    exists: function (collectionName) {
        return !!this.storageMap[collectionName];
    },
    /**
     * Returns the UniversalStorage driver for specific key.
     * If it doesnt exist it creates it with defaults for `init`
     * @returns UniversalStorage
     */
    get: function (collectionName) {
        if (!this.exists(collectionName)) {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].warn('Called cache collection ' + collectionName + ' does not exist. Initializing.', 'cache');
            return this.set(collectionName, initCacheStorage(collectionName, true)); // eslint-disable-line @typescript-eslint/no-use-before-define
        }
        else {
            return this.storageMap[collectionName];
        }
    },
    clear: function () {
        var _this = this;
        var promiseArray = Object.keys(this.storageMap).map(function (collectionName) {
            return (config__WEBPACK_IMPORTED_MODULE_4__.localForage.preserveCollections || []).every(function (collectionToKeep) { return collectionName !== collectionToKeep; }) && _this.storageMap[collectionName].clear().then(function () {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].warn("storeManager cleared: " + collectionName, "storeManager cleared: " + collectionName, "storeManager cleared: " + collectionName)();
            });
        });
        return Promise.all(promiseArray);
    }
};
/**
 * @deprecated to be removed in 2.0 in favor to `StorageManager`
 * */
function initCacheStorage(key, localised, registerStorgeManager) {
    if (localised === void 0) { localised = true; }
    if (registerStorgeManager === void 0) { registerStorgeManager = true; }
    if (registerStorgeManager) {
        if (!StorageManager.exists(key)) {
            return StorageManager.set(key, _prepareCacheStorage(key, localised));
        }
        else {
            return StorageManager.get(key);
        }
    }
    else {
        return _prepareCacheStorage(key, localised);
    }
}



/***/ }),

/***/ "./core/lib/store/entities.ts":
/*!************************************!*\
  !*** ./core/lib/store/entities.ts ***!
  \************************************/
/*! exports provided: guid, uniqueEntityId, entityKeyName */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "guid", function() { return guid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uniqueEntityId", function() { return uniqueEntityId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "entityKeyName", function() { return entityKeyName; });
/**
 * @returns {string}
 */
function guid() {
    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000)
            .toString(16)
            .substring(1);
    }
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
        s4() + '-' + s4() + s4() + s4();
}
/**
   * Return unique entity.id
   * @param {Object} entity
   */
function uniqueEntityId(entity) {
    return new Date().getTime() + '-' + guid();
}
/**
   * Return unique entity key name for specified key value
   * @param {String} key
   * @param {String} value
   */
function entityKeyName() {
    var values = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        values[_i] = arguments[_i];
    }
    return values.join('$$');
}


/***/ }),

/***/ "./core/lib/store/storage.ts":
/*!***********************************!*\
  !*** ./core/lib/store/storage.ts ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! localforage */ "./node_modules/localforage/dist/localforage.js");
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(localforage__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash-es/cloneDeep */ "./node_modules/lodash-es/cloneDeep.js");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};





var CACHE_TIMEOUT = 800;
var CACHE_TIMEOUT_ITERATE = 2000;
var DISABLE_PERSISTANCE_AFTER = 1;
var DISABLE_PERSISTANCE_AFTER_SAVE = 30;
var _globalCache = {};
function roughSizeOfObject(object) {
    var objectList = [];
    var stack = [object];
    var bytes = 0;
    while (stack.length) {
        var value = stack.pop();
        if (typeof value === 'boolean') {
            bytes += 4;
        }
        else if (typeof value === 'string') {
            bytes += value.length * 2;
        }
        else if (typeof value === 'number') {
            bytes += 8;
        }
        else if (typeof value === 'object' &&
            objectList.indexOf(value) === -1) {
            objectList.push(value);
            for (var i in value) {
                stack.push(value[i]);
            }
        }
    }
    return bytes;
}
var LocalForageCacheDriver = /** @class */ (function () {
    function LocalForageCacheDriver(collection, useLocalCacheByDefault, storageQuota) {
        var _this = this;
        if (useLocalCacheByDefault === void 0) { useLocalCacheByDefault = true; }
        if (storageQuota === void 0) { storageQuota = 0; }
        this._cacheTimeouts = {
            getItem: null,
            iterate: null,
            setItem: null,
            base: null
        };
        var collectionName = collection._config.storeName;
        var dbName = collection._config.name;
        this._storageQuota = storageQuota;
        if (this._storageQuota && !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["isServer"]) {
            var storageQuota_1 = this._storageQuota;
            var iterateFnc_1 = this.iterate.bind(this);
            var removeItemFnc_1 = this.removeItem.bind(this);
            clearInterval(this._cacheTimeouts.base);
            this._cacheTimeouts.base = setInterval(function () {
                var storageSize = 0;
                _this.iterate(function (item, id, number) {
                    storageSize += roughSizeOfObject(item);
                }, function (err, result) {
                    if ((storageSize / 1024) > storageQuota_1) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Clearing out the storage ', 'cache', { storageSizeKB: Math.round(storageSize / 1024), storageQuotaKB: storageQuota_1 })();
                        var howManyItemsToRemove_1 = 100;
                        var keysPurged_1 = [];
                        iterateFnc_1(function (item, id, number) {
                            if (number < howManyItemsToRemove_1) {
                                removeItemFnc_1(id);
                                keysPurged_1.push(id);
                            }
                        }, function (err, result) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Cache purged', 'cache', { keysPurged: keysPurged_1 })();
                        });
                    }
                    else {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Storage size', 'cache', { storageSizeKB: Math.round(storageSize / 1024) })();
                    }
                });
            }, 30000);
        }
        if (typeof this.cacheErrorsCount === 'undefined') {
            this.cacheErrorsCount = {};
        }
        if (typeof this.cacheErrorsCount[collectionName] === 'undefined') {
            this.cacheErrorsCount[collectionName] = 0;
        }
        if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["isServer"]) {
            this._localCache = {};
        }
        else {
            if (typeof _globalCache[dbName] === 'undefined') {
                _globalCache[dbName] = {};
            }
            if (typeof _globalCache[dbName][collectionName] === 'undefined') {
                _globalCache[dbName][collectionName] = {};
            }
            this._localCache = _globalCache[dbName][collectionName];
        }
        this._collectionName = collectionName;
        this._dbName = dbName;
        this._useLocalCacheByDefault = useLocalCacheByDefault;
        this._localForageCollection = collection;
        this._lastError = null;
        this._persistenceErrorNotified = false;
    }
    LocalForageCacheDriver.prototype.getLastError = function () {
        return this._lastError;
    };
    LocalForageCacheDriver.prototype.getDbName = function () {
        return this._dbName;
    };
    // Remove all keys from the datastore, effectively destroying all data in
    // the app's key/value store!
    LocalForageCacheDriver.prototype.clear = function (callback) {
        return this._localForageCollection.clear(callback);
    };
    // Increment the database version number and recreate the context
    LocalForageCacheDriver.prototype.recreateDb = function () {
        if (this._localForageCollection._config) {
            var existingConfig = Object.assign({}, this._localForageCollection._config);
            if (existingConfig.storeName) {
                // localForage.dropInstance(existingConfig) // drop the store and create the new one
                var destVersionNumber = this._localForageCollection && this._localForageCollection._dbInfo ? this._localForageCollection._dbInfo.version + 1 : 0;
                if (destVersionNumber > 0) {
                    this._localForageCollection = localforage__WEBPACK_IMPORTED_MODULE_0__["createInstance"](__assign(__assign({}, existingConfig), { version: destVersionNumber }));
                }
                else {
                    this._localForageCollection = localforage__WEBPACK_IMPORTED_MODULE_0__["createInstance"](existingConfig);
                }
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].log('DB recreated with', existingConfig, destVersionNumber)();
            }
        }
    };
    LocalForageCacheDriver.prototype.getLocalCache = function (key) {
        return typeof this._localCache[key] !== 'undefined' ? Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_3__["default"])(this._localCache[key]) : null;
    };
    // Retrieve an item from the store. Unlike the original async_storage
    // library in Gaia, we don't modify return values at all. If a key's value
    // is `undefined`, we pass that value to the callback function.
    LocalForageCacheDriver.prototype.getItem = function (key, callback) {
        var _this = this;
        var isCallbackCallable = (typeof callback !== 'undefined' && callback);
        var isResolved = false;
        if (this._useLocalCacheByDefault && this._localCache[key]) {
            // Logger.debug('Local cache fallback for GET', key)()
            return new Promise(function (resolve, reject) {
                var value = _this.getLocalCache(key);
                if (isCallbackCallable)
                    callback(null, value);
                resolve(value);
            });
        }
        if (!_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["isServer"]) {
            if (this.cacheErrorsCount[this._collectionName] >= DISABLE_PERSISTANCE_AFTER && this._useLocalCacheByDefault) {
                if (!this._persistenceErrorNotified) {
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('Persistent cache disabled becasue of previous errors [get]', key)();
                    this._persistenceErrorNotified = true;
                }
                return new Promise(function (resolve, reject) {
                    if (isCallbackCallable)
                        callback(null, null);
                    resolve(null);
                });
            }
            else {
                var startTime_1 = new Date().getTime();
                // Logger.debug('No local cache fallback for GET', key)()
                var promise = this._localForageCollection.ready().then(function () { return _this._localForageCollection.getItem(key).then(function (result) {
                    var endTime = new Date().getTime();
                    var clonedResult = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_3__["default"])(result);
                    if ((endTime - startTime_1) >= CACHE_TIMEOUT) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('Cache promise resolved after [ms]' + key + (endTime - startTime_1))();
                    }
                    if (!_this._localCache[key] && clonedResult) {
                        _this._localCache[key] = clonedResult; // populate the local cache for the next call
                    }
                    if (!isResolved) {
                        if (isCallbackCallable) {
                            callback(null, clonedResult);
                        }
                        isResolved = true;
                    }
                    else {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].debug('Skipping return value as it was previously resolved')();
                    }
                    return clonedResult;
                }).catch(function (err) {
                    _this._lastError = err;
                    if (!isResolved) {
                        var value = _this.getLocalCache(key);
                        if (isCallbackCallable)
                            callback(null, value);
                    }
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(err)();
                    isResolved = true;
                }); });
                clearTimeout(this._cacheTimeouts.getItem);
                this._cacheTimeouts.getItem = setTimeout(function () {
                    if (!isResolved) { // this is cache time out check
                        if (!_this._persistenceErrorNotified) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('Cache not responding for ' + key + '.', 'cache', { timeout: CACHE_TIMEOUT, errorsCount: _this.cacheErrorsCount[_this._collectionName] })();
                            _this._persistenceErrorNotified = true;
                            _this.recreateDb();
                        }
                        _this.cacheErrorsCount[_this._collectionName] = _this.cacheErrorsCount[_this._collectionName] ? _this.cacheErrorsCount[_this._collectionName] + 1 : 1;
                        var value = _this.getLocalCache(key);
                        if (isCallbackCallable)
                            callback(null, value);
                    }
                }, CACHE_TIMEOUT);
                return promise;
            }
        }
        else {
            return new Promise(function (resolve, reject) {
                var value = _this.getLocalCache(key);
                if (isCallbackCallable)
                    callback(null, value);
                resolve(value);
            });
        }
    };
    // Iterate over all items in the store.
    LocalForageCacheDriver.prototype.iterate = function (iterator, callback) {
        var _this = this;
        var isIteratorCallable = (typeof iterator !== 'undefined' && iterator);
        var isCallbackCallable = (typeof callback !== 'undefined' && callback);
        var globalIterationNumber = 1;
        if (this._useLocalCacheByDefault) {
            // Logger.debug('Local cache iteration')()
            for (var localKey in this._localCache) {
                if (isIteratorCallable) {
                    iterator(this._localCache[localKey], localKey, globalIterationNumber);
                    globalIterationNumber++;
                }
            }
        }
        var isResolved = false;
        var promise = this._localForageCollection.ready().then(function () { return _this._localForageCollection.iterate(function (value, key, iterationNumber) {
            isResolved = true;
            if (isIteratorCallable) {
                if (_this._useLocalCacheByDefault) {
                    if (typeof _this._localCache[key] === 'undefined') {
                        iterator(value, key, globalIterationNumber);
                        globalIterationNumber++;
                    }
                    else {
                        // Logger.debug('Skipping iteration key because local cache executed', key)()
                    }
                }
                else {
                    iterator(value, key, iterationNumber);
                }
            }
        }, function (err, result) {
            if (isCallbackCallable)
                callback(err, result);
            isResolved = true;
        }); }).catch(function (err) {
            _this._lastError = err;
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(err)();
            if (!isResolved) {
                isResolved = true;
                if (isCallbackCallable)
                    callback(err, null);
            }
        });
        clearTimeout(this._cacheTimeouts.iterate);
        this._cacheTimeouts.iterate = setTimeout(function () {
            if (!isResolved) { // this is cache time out check
                if (!_this._persistenceErrorNotified) {
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('Cache not responding. (iterate)', 'cache', { timeout: CACHE_TIMEOUT, errorsCount: _this.cacheErrorsCount[_this._collectionName] })();
                    _this._persistenceErrorNotified = true;
                    _this.recreateDb();
                }
                _this.cacheErrorsCount[_this._collectionName] = _this.cacheErrorsCount[_this._collectionName] ? _this.cacheErrorsCount[_this._collectionName] + 1 : 1;
                if (isCallbackCallable)
                    callback(null, null);
            }
        }, CACHE_TIMEOUT_ITERATE);
        return promise;
    };
    // Same as localStorage's key() method, except takes a callback.
    LocalForageCacheDriver.prototype.key = function (n, callback) {
        return this._localForageCollection.key(n, callback);
    };
    LocalForageCacheDriver.prototype.keys = function (callback) {
        return this._localForageCollection.keys(callback);
    };
    // Supply the number of keys in the datastore to the callback function.
    LocalForageCacheDriver.prototype.length = function (callback) {
        return this._localForageCollection.length(callback);
    };
    // Remove an item from the store, nice and simple.
    LocalForageCacheDriver.prototype.removeItem = function (key, callback) {
        if (typeof this._localCache[key] !== 'undefined') {
            delete this._localCache[key];
        }
        return this._localForageCollection.removeItem(key, callback);
    };
    // Set a key's value and run an optional callback once the value is set.
    // Unlike Gaia's implementation, the callback function is passed the value,
    // in case you want to operate on that value only after you're sure it
    // saved, or something like that.
    LocalForageCacheDriver.prototype.setItem = function (key, value, callback, memoryOnly) {
        var _this = this;
        if (memoryOnly === void 0) { memoryOnly = false; }
        var isCallbackCallable = (typeof callback !== 'undefined' && callback);
        var copiedValue = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_3__["default"])(value);
        this._localCache[key] = copiedValue;
        if (memoryOnly) {
            return new Promise(function (resolve, reject) {
                if (isCallbackCallable)
                    callback(null, null);
                resolve(null);
            });
        }
        if (!_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["isServer"]) {
            if (this.cacheErrorsCount[this._collectionName] >= DISABLE_PERSISTANCE_AFTER_SAVE && this._useLocalCacheByDefault) {
                if (!this._persistenceErrorNotified) {
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('Persistent cache disabled becasue of previous errors [set]', key)();
                    this._persistenceErrorNotified = true;
                }
                return new Promise(function (resolve, reject) {
                    if (isCallbackCallable)
                        callback(null, null);
                    resolve(null);
                });
            }
            else {
                var isResolved_1 = false;
                var handleSetItem_1 = function () { return _this._localForageCollection.setItem(key, copiedValue)
                    .then(function (result) {
                    if (isCallbackCallable) {
                        callback(null, result);
                    }
                    isResolved_1 = true;
                })
                    .catch(function (err) { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                if (!(err.name === 'QuotaExceededError' || err.name === 'NS_ERROR_DOM_QUOTA_REACHED')) return [3 /*break*/, 2];
                                return [4 /*yield*/, _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__["StorageManager"].clear()];
                            case 1:
                                _a.sent();
                                handleSetItem_1();
                                _a.label = 2;
                            case 2:
                                isResolved_1 = true;
                                this._lastError = err;
                                throw err;
                        }
                    });
                }); }); };
                var promise = this._localForageCollection.ready().then(handleSetItem_1);
                clearTimeout(this._cacheTimeouts.iterate);
                this._cacheTimeouts.setItem = setTimeout(function () {
                    if (!isResolved_1) { // this is cache time out check
                        if (!_this._persistenceErrorNotified) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('Cache not responding for ' + key + '.', 'cache', { timeout: CACHE_TIMEOUT, errorsCount: _this.cacheErrorsCount[_this._collectionName] })();
                            _this._persistenceErrorNotified = true;
                            _this.recreateDb();
                        }
                        _this.cacheErrorsCount[_this._collectionName] = _this.cacheErrorsCount[_this._collectionName] ? _this.cacheErrorsCount[_this._collectionName] + 1 : 1;
                        if (isCallbackCallable)
                            callback(null, null);
                    }
                }, CACHE_TIMEOUT);
                return promise;
            }
        }
        else {
            return new Promise(function (resolve, reject) { return resolve(); });
        }
    };
    return LocalForageCacheDriver;
}());
// The actual localForage object that we expose as a module. It's extended by pulling in one of our other libraries.
/* harmony default export */ __webpack_exports__["default"] = (LocalForageCacheDriver);


/***/ }),

/***/ "./core/lib/storeCodeFromRoute.ts":
/*!****************************************!*\
  !*** ./core/lib/storeCodeFromRoute.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};

var getNormalizedPath = function (matchedRouteOrUrl) {
    var matchingPath = matchedRouteOrUrl && (matchedRouteOrUrl.path || matchedRouteOrUrl);
    return matchingPath && (matchingPath.length > 0 && matchingPath[0] !== '/') ? "/" + matchingPath : matchingPath;
};
var getUrl = function (matchedRouteOrUrl) {
    var normalizedPath = getNormalizedPath(matchedRouteOrUrl);
    if (matchedRouteOrUrl && typeof matchedRouteOrUrl === 'object') {
        if (matchedRouteOrUrl['host']) {
            return matchedRouteOrUrl['host'] + normalizedPath;
        }
        return '';
    }
    return matchedRouteOrUrl;
};
var isMatchingByPath = function (matchedRouteOrUrl, store) {
    var normalizedPath = getNormalizedPath(matchedRouteOrUrl);
    return normalizedPath.startsWith(store.url + "/") || normalizedPath === store.url;
};
var isMatchingByDomainAndPath = function (matchedRouteOrUrl, store) {
    var url = getUrl(matchedRouteOrUrl);
    return url.startsWith(store.url + "/") || url === store.url;
};
var storeCodeFromRoute = function (matchedRouteOrUrl) {
    var e_1, _a;
    if (!matchedRouteOrUrl)
        return '';
    try {
        for (var _b = __values(config__WEBPACK_IMPORTED_MODULE_0__.storeViews.mapStoreUrlsFor), _c = _b.next(); !_c.done; _c = _b.next()) {
            var storeCode = _c.value;
            var store = config__WEBPACK_IMPORTED_MODULE_0__.storeViews[storeCode];
            if (isMatchingByPath(matchedRouteOrUrl, store) || isMatchingByDomainAndPath(matchedRouteOrUrl, store)) {
                return storeCode;
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return '';
};
/* harmony default export */ __webpack_exports__["default"] = (storeCodeFromRoute);


/***/ }),

/***/ "./core/lib/sync/helpers/index.ts":
/*!****************************************!*\
  !*** ./core/lib/sync/helpers/index.ts ***!
  \****************************************/
/*! exports provided: hasResponseError, getResponseMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasResponseError", function() { return hasResponseError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getResponseMessage", function() { return getResponseMessage; });
var hasResponseError = function (jsonResponse) {
    if (typeof jsonResponse.result === 'string') {
        return true;
    }
    var hasMessage = jsonResponse.result.result || jsonResponse.result.message;
    return Boolean(hasMessage) && jsonResponse.result.code !== 'ENOTFOUND';
};
var getResponseMessage = function (jsonResponse) {
    if (typeof jsonResponse.result === 'string') {
        return jsonResponse.result;
    }
    if (typeof jsonResponse.result.result === 'string') {
        return jsonResponse.result.result;
    }
    return jsonResponse.result.message;
};


/***/ }),

/***/ "./core/lib/sync/index.ts":
/*!********************************!*\
  !*** ./core/lib/sync/index.ts ***!
  \********************************/
/*! exports provided: TaskQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskQueue", function() { return TaskQueue; });
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task */ "./core/lib/sync/task.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};







/** Syncs given task. If user is offline request will be sent to the server after restored connection */
function queue(task) {
    return __awaiter(this, void 0, void 0, function () {
        var tasksCollection;
        return __generator(this, function (_a) {
            tasksCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__["StorageManager"].get('syncTasks');
            task = Object(_task__WEBPACK_IMPORTED_MODULE_2__["_prepareTask"])(task);
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Sync task queued ' + task.url, 'sync', { task: task })();
            return [2 /*return*/, new Promise(function (resolve, reject) {
                    tasksCollection.setItem(task.task_id.toString(), task, function (err, resp) {
                        if (err)
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(err, 'sync')();
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__["default"].$emit('sync/PROCESS_QUEUE', { config: config__WEBPACK_IMPORTED_MODULE_4__ }); // process checkout queue
                        resolve(task);
                    }, config__WEBPACK_IMPORTED_MODULE_4__.syncTasks.disablePersistentTaskQueue).catch(function (reason) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(reason, 'sync')(); // it doesn't work on SSR
                        reject(reason);
                    });
                })];
        });
    });
}
/** Runs given task. If user is offline request will fail */
function execute(task) {
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            task = Object(_task__WEBPACK_IMPORTED_MODULE_2__["_prepareTask"])(task);
            return [2 /*return*/, new Promise(function (resolve, reject) {
                    if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["isServer"]) {
                        Object(_task__WEBPACK_IMPORTED_MODULE_2__["execute"])(task, null, null).then(function (result) {
                            resolve(result);
                        }).catch(function (err) {
                            reject(err);
                        });
                    }
                    else {
                        var currentUserToken = _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__["default"].getters['user/getUserToken'];
                        var currentCartToken = _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__["default"].getters['cart/getCartToken'];
                        Object(_task__WEBPACK_IMPORTED_MODULE_2__["execute"])(task, currentUserToken, currentCartToken).then(function (result) {
                            resolve(result);
                        }).catch(function (err) {
                            reject(err);
                        });
                    }
                })];
        });
    });
}
/** Clear sync tasks that were not transmitted yet */
function clearNotTransmited() {
    var syncTaskCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__["StorageManager"].get('syncTasks');
    syncTaskCollection.iterate(function (task, id, iterationNumber) {
        if (!task.transmited) {
            syncTaskCollection.removeItem(id);
        }
    });
}
var TaskQueue = {
    queue: queue,
    execute: execute,
    clearNotTransmited: clearNotTransmited
};


/***/ }),

/***/ "./core/lib/sync/task.ts":
/*!*******************************!*\
  !*** ./core/lib/sync/task.ts ***!
  \*******************************/
/*! exports provided: _prepareTask, execute, initializeSyncTaskStorage, registerSyncTaskProcessor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_prepareTask", function() { return _prepareTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "execute", function() { return execute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initializeSyncTaskStorage", function() { return initializeSyncTaskStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerSyncTaskProcessor", function() { return registerSyncTaskProcessor; });
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var lodash_es_isNaN__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/isNaN */ "./node_modules/lodash-es/isNaN.js");
/* harmony import */ var lodash_es_isUndefined__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es/isUndefined */ "./node_modules/lodash-es/isUndefined.js");
/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! isomorphic-fetch */ "./node_modules/isomorphic-fetch/fetch-npm-browserify.js");
/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(isomorphic_fetch__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/lib/sync */ "./core/lib/sync/index.ts");
/* harmony import */ var _vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @vue-storefront/core/lib/store/entities */ "./core/lib/store/entities.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_12___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_sync_helpers__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @vue-storefront/core/lib/sync/helpers */ "./core/lib/sync/helpers/index.ts");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! query-string */ "./node_modules/query-string/index.js");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_14__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

















function _prepareTask(task) {
    var taskId = _vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_9__["uniqueEntityId"](task); // timestamp as a order id is not the best we can do but it's enough
    task.task_id = taskId.toString();
    task.transmited = false;
    task.created_at = new Date();
    task.updated_at = new Date();
    return task;
}
function _sleep(time) {
    return new Promise(function (resolve) { return setTimeout(resolve, time); });
}
function getUrl(task, currentToken, currentCartId) {
    var url = task.url
        .replace('{{token}}', (currentToken == null) ? '' : currentToken)
        .replace('{{cartId}}', (currentCartId == null) ? '' : currentCartId);
    url = Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_11__["processURLAddress"])(url); // use relative url paths
    if (config__WEBPACK_IMPORTED_MODULE_12__.storeViews.multistore) {
        url = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_5__["adjustMultistoreApiUrl"])(url);
    }
    if (config__WEBPACK_IMPORTED_MODULE_12__.users.tokenInHeader) {
        var parsedUrl = query_string__WEBPACK_IMPORTED_MODULE_14___default.a.parseUrl(url);
        delete parsedUrl['query']['token'];
        url = query_string__WEBPACK_IMPORTED_MODULE_14___default.a.stringifyUrl(parsedUrl);
    }
    return url;
}
function getPayload(task, currentToken) {
    var payload = __assign(__assign({}, task.payload), { headers: __assign(__assign({}, task.payload.headers), (config__WEBPACK_IMPORTED_MODULE_12__.users.tokenInHeader ? { authorization: "Bearer " + currentToken } : {})) });
    return payload;
}
function _internalExecute(resolve, reject, task, currentToken, currentCartId) {
    if (currentToken && _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock > 0) { // invalidate lock set
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].log('Waiting for rootStore.state.userTokenInvalidateLock to release for ' + task.url, 'sync')();
        _sleep(1000).then(function () {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].log('Another try for rootStore.state.userTokenInvalidateLock for ' + task.url, 'sync')();
            _internalExecute(resolve, reject, task, currentToken, currentCartId);
        });
        return; // return but not resolve
    }
    else if (_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock < 0) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error('Aborting the network task' + task.url + _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock, 'sync')();
        resolve({ code: 401, result: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t('Error refreshing user token. User is not authorized to access the resource') })();
        return;
    }
    else {
        if (_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidated) {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].log('Using new user token' + _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidated, 'sync')();
            currentToken = _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidated;
        }
    }
    var isCartIdRequired = task.url.includes('{{cartId}}'); // this is bypass for #2592
    if (isCartIdRequired && !currentCartId) { // by some reason we does't have the  cart id yet
        reject('Error executing sync task ' + task.url + ' the required cartId  argument is null. Re-creating shopping cart synchro.');
        return;
    }
    var url = getUrl(task, currentToken, currentCartId);
    var payload = getPayload(task, currentToken);
    var silentMode = false;
    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].info('Executing sync task ' + url, 'sync', task)();
    return isomorphic_fetch__WEBPACK_IMPORTED_MODULE_3___default()(url, payload).then(function (response) {
        var contentType = response.headers.get('content-type');
        if (contentType && contentType.includes('application/json')) {
            return response.json();
        }
        else {
            var msg = _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t('Error with response - bad content-type!');
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error(msg.toString(), 'sync')();
            reject(msg);
        }
    }).then(function (jsonResponse) {
        if (jsonResponse) {
            var responseCode = parseInt(jsonResponse.code);
            if (responseCode !== 200) {
                if (responseCode === 401 /** unauthorized */ && currentToken) { // the token is no longer valid, try to invalidate it
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error('Invalid token - need to be revalidated' + currentToken + task.url + _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock, 'sync')();
                    if (Object(lodash_es_isNaN__WEBPACK_IMPORTED_MODULE_1__["default"])(_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateAttemptsCount) || Object(lodash_es_isUndefined__WEBPACK_IMPORTED_MODULE_2__["default"])(_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateAttemptsCount))
                        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateAttemptsCount = 0;
                    if (Object(lodash_es_isNaN__WEBPACK_IMPORTED_MODULE_1__["default"])(_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock) || Object(lodash_es_isUndefined__WEBPACK_IMPORTED_MODULE_2__["default"])(_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock))
                        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock = 0;
                    silentMode = true;
                    if (config__WEBPACK_IMPORTED_MODULE_12__.users.autoRefreshTokens) {
                        if (!_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock) {
                            _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock++;
                            if (_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateAttemptsCount >= config__WEBPACK_IMPORTED_MODULE_12__.queues.maxNetworkTaskAttempts) {
                                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error('Internal Application error while refreshing the tokens. Please clear the storage and refresh page.', 'sync')();
                                _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock = -1;
                                _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('user/logout', { silent: true });
                                _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_8__["TaskQueue"].clearNotTransmited();
                                _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_6__["default"].$emit('modal-show', 'modal-signup');
                                _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('notification/spawnNotification', {
                                    type: 'error',
                                    message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t('Internal Application error while refreshing the tokens. Please clear the storage and refresh page.'),
                                    action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t('OK') }
                                });
                                _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateAttemptsCount = 0;
                            }
                            else {
                                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].info('Invalidation process in progress (autoRefreshTokens is set to true)' + _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateAttemptsCount + _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock, 'sync')();
                                _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateAttemptsCount++;
                                _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('user/refresh').then(function (token) {
                                    if (token) {
                                        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock = 0;
                                        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidated = token;
                                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].info('User token refreshed successfully' + token, 'sync')();
                                    }
                                    else {
                                        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock = -1;
                                        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('user/logout', { silent: true });
                                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_6__["default"].$emit('modal-show', 'modal-signup');
                                        _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_8__["TaskQueue"].clearNotTransmited();
                                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error('Error refreshing user token' + token, 'sync')();
                                    }
                                }).catch(function (excp) {
                                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock = -1;
                                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('user/logout', { silent: true });
                                    _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_6__["default"].$emit('modal-show', 'modal-signup');
                                    _vue_storefront_core_lib_sync__WEBPACK_IMPORTED_MODULE_8__["TaskQueue"].clearNotTransmited();
                                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error('Error refreshing user token' + excp, 'sync')();
                                });
                            }
                        }
                        if (_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateAttemptsCount <= config__WEBPACK_IMPORTED_MODULE_12__.queues.maxNetworkTaskAttempts)
                            _internalExecute(resolve, reject, task, currentToken, currentCartId); // retry
                    }
                    else {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].info('Invalidation process is disabled (autoRefreshTokens is set to false)', 'sync')();
                        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('user/logout', { silent: true });
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_6__["default"].$emit('modal-show', 'modal-signup');
                    }
                }
                if (!task.silent && jsonResponse.result && Object(_vue_storefront_core_lib_sync_helpers__WEBPACK_IMPORTED_MODULE_13__["hasResponseError"])(jsonResponse) && !silentMode) {
                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('notification/spawnNotification', {
                        type: 'error',
                        message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t(Object(_vue_storefront_core_lib_sync_helpers__WEBPACK_IMPORTED_MODULE_13__["getResponseMessage"])(jsonResponse)),
                        action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t('OK') }
                    });
                }
            }
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].debug('Response for: ' + task.task_id + ' = ' + JSON.stringify(jsonResponse.result), 'sync')();
            task.transmited = true;
            task.transmited_at = new Date();
            task.result = jsonResponse.result;
            task.resultCode = jsonResponse.code;
            task.code = jsonResponse.code; // backward compatibility to fetch()
            task.acknowledged = false;
            task.meta = jsonResponse.meta;
            if (task.callback_event) {
                if (task.callback_event.startsWith('store:')) {
                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch(task.callback_event.split(':')[1], task);
                }
                else {
                    _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_6__["default"].$emit(task.callback_event, task);
                }
            }
            if (!_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.userTokenInvalidateLock) { // in case we're revalidaing the token - user must wait for it
                resolve(task);
            }
        }
        else {
            var msg = _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t('Unhandled error, wrong response format!');
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error(msg.toString(), 'sync')();
            reject(msg);
        }
    }).catch(function (err) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error(err, 'sync')();
        reject(err);
    });
}
function execute(task, currentToken, currentCartId) {
    if (currentToken === void 0) { currentToken = null; }
    if (currentCartId === void 0) { currentCartId = null; }
    var taskId = task.task_id;
    return new Promise(function (resolve, reject) {
        _internalExecute(resolve, reject, task, currentToken, currentCartId);
    });
}
function initializeSyncTaskStorage() {
    var storeView = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_5__["currentStoreView"])();
    var dbNamePrefix = storeView.storeCode ? storeView.storeCode + '-' : '';
    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_10__["StorageManager"].init('syncTasks');
}
function registerSyncTaskProcessor() {
    var _this = this;
    var mutex = {};
    _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_6__["default"].$on('sync/PROCESS_QUEUE', function (data) { return __awaiter(_this, void 0, void 0, function () {
        var syncTaskCollection_1, currentUserToken_1, currentCartToken_1, fetchQueue_1;
        return __generator(this, function (_a) {
            if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_11__["onlineHelper"].isOnline) {
                syncTaskCollection_1 = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_10__["StorageManager"].get('syncTasks');
                currentUserToken_1 = _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].getters['user/getUserToken'];
                currentCartToken_1 = _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].getters['cart/getCartToken'];
                fetchQueue_1 = [];
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].debug('Current User token = ' + currentUserToken_1)();
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].debug('Current Cart token = ' + currentCartToken_1)();
                syncTaskCollection_1.iterate(function (task, id) {
                    if (task && !task.transmited && !mutex[id]) { // not sent to the server yet
                        mutex[id] = true; // mark this task as being processed
                        fetchQueue_1.push(execute(task, currentUserToken_1, currentCartToken_1).then(function (executedTask) {
                            if (!executedTask.is_result_cacheable) {
                                syncTaskCollection_1.removeItem(id); // remove successfully executed task from the queue
                            }
                            else {
                                syncTaskCollection_1.setItem(id, executedTask); // update the 'transmitted' field
                            }
                            mutex[id] = false;
                        }).catch(function (err) {
                            mutex[id] = false;
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error(err)();
                        }));
                    }
                }, function (err) {
                    if (err)
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error(err)();
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].debug('Iteration has completed')();
                    // execute them serially
                    Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_11__["serial"])(fetchQueue_1);
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].debug('Processing sync tasks queue has finished')();
                });
            }
            return [2 /*return*/];
        });
    }); });
}


/***/ }),

/***/ "./core/lib/themes.ts":
/*!****************************!*\
  !*** ./core/lib/themes.ts ***!
  \****************************/
/*! exports provided: registerTheme */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerTheme", function() { return registerTheme; });
function registerTheme(themeName, app, routes, store, config, ssrContext) {
    var themeEntryPoint = __webpack_require__(/*! theme/index.js */ "./src/themes/default/index.js");
    if (themeEntryPoint != null && themeEntryPoint.initTheme) {
        themeEntryPoint.initTheme(app, routes, store, config, ssrContext); // register theme
    }
    else {
        throw new Error('Wrong theme name: ' + themeName);
    }
}


/***/ }),

/***/ "./core/mixins/index.js":
/*!******************************!*\
  !*** ./core/mixins/index.js ***!
  \******************************/
/*! exports provided: thumbnail, multistore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _thumbnail_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./thumbnail.js */ "./core/mixins/thumbnail.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "thumbnail", function() { return _thumbnail_js__WEBPACK_IMPORTED_MODULE_0__["thumbnail"]; });

/* harmony import */ var _multistore_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./multistore.js */ "./core/mixins/multistore.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "multistore", function() { return _multistore_js__WEBPACK_IMPORTED_MODULE_1__["multistore"]; });





/***/ }),

/***/ "./core/mixins/multistore.js":
/*!***********************************!*\
  !*** ./core/mixins/multistore.js ***!
  \***********************************/
/*! exports provided: multistore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multistore", function() { return multistore; });
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers */ "./core/helpers/index.ts");


var multistore = {
  methods: {
    /**
     * Return localized route params
     * @param {String} relativeUrl
     * @param {Int} width
     * @param {Int} height
     */
    localizedRoute: function localizedRoute(routeObj) {
      var storeView = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])();
      return Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["localizedRoute"])(routeObj, storeView.storeCode);
    },

    /**
     * Return localized route params for URL Dispatcher
     * @param {String} relativeUrl
     * @param {Int} width
     * @param {Int} height
     */
    localizedDispatcherRoute: function localizedDispatcherRoute(routeObj) {
      var storeView = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])();
      return Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["localizedDispatcherRoute"])(routeObj, storeView.storeCode);
    }
  }
};

/***/ }),

/***/ "./core/mixins/thumbnail.js":
/*!**********************************!*\
  !*** ./core/mixins/thumbnail.js ***!
  \**********************************/
/*! exports provided: thumbnail */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "thumbnail", function() { return thumbnail; });
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");

var thumbnail = {
  methods: {
    /**
     * Return thumbnail URL for specific base url and path
     * @param {string} relativeUrl
     * @param {number} width
     * @param {number} height
     * @param {string} pathType
     * @returns {string}
     */
    getThumbnail: function getThumbnail(relativeUrl, width, height, pathType) {
      return Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["getThumbnailPath"])(relativeUrl, width, height, pathType);
    },

    /**
     * Return thumbnail URL for specific base url using media path
     * @param {string} relativeUrl
     * @param {number} width
     * @param {number} height
     * @returns {string}
     */
    getMediaThumbnail: function getMediaThumbnail(relativeUrl, width, height) {
      return Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["getThumbnailPath"])(relativeUrl, width, height, 'media');
    }
  }
};

/***/ }),

/***/ "./core/modules-entry.ts":
/*!*******************************!*\
  !*** ./core/modules-entry.ts ***!
  \*******************************/
/*! exports provided: enabledModules */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "enabledModules", function() { return enabledModules; });
/* harmony import */ var src_modules_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/modules/client */ "./src/modules/client.ts");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};

// @deprecated from 2.0,  use registerModule instead
var enabledModules = __spread(src_modules_client__WEBPACK_IMPORTED_MODULE_0__["registerModules"]);


/***/ }),

/***/ "./core/modules/breadcrumbs/helpers/index.ts":
/*!***************************************************!*\
  !*** ./core/modules/breadcrumbs/helpers/index.ts ***!
  \***************************************************/
/*! exports provided: parseCategoryPath */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseCategoryPath", function() { return parseCategoryPath; });
/* harmony import */ var _vue_storefront_core_modules_url_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/url/helpers */ "./core/modules/url/helpers/index.ts");
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};

// Duplicate of breadCrumbRoutes, to repalce it soon.
/** Parse category path for product/category  */
function parseCategoryPath(categoryPath) {
    var e_1, _a;
    var routesArray = [];
    try {
        for (var categoryPath_1 = __values(categoryPath), categoryPath_1_1 = categoryPath_1.next(); !categoryPath_1_1.done; categoryPath_1_1 = categoryPath_1.next()) {
            var category = categoryPath_1_1.value;
            if (category.url_path === undefined || category.url_path === null)
                continue;
            routesArray.push({
                name: category.name,
                route_link: Object(_vue_storefront_core_modules_url_helpers__WEBPACK_IMPORTED_MODULE_0__["formatCategoryLink"])(category)
            });
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (categoryPath_1_1 && !categoryPath_1_1.done && (_a = categoryPath_1.return)) _a.call(categoryPath_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return routesArray;
}


/***/ }),

/***/ "./core/modules/breadcrumbs/index.ts":
/*!*******************************************!*\
  !*** ./core/modules/breadcrumbs/index.ts ***!
  \*******************************************/
/*! exports provided: BreadcrumbsModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BreadcrumbsModule", function() { return BreadcrumbsModule; });
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store */ "./core/modules/breadcrumbs/store/index.ts");

var BreadcrumbsModule = function (_a) {
    var store = _a.store;
    store.registerModule('breadcrumbs', _store__WEBPACK_IMPORTED_MODULE_0__["breadcrumbsStore"]);
};


/***/ }),

/***/ "./core/modules/breadcrumbs/store/index.ts":
/*!*************************************************!*\
  !*** ./core/modules/breadcrumbs/store/index.ts ***!
  \*************************************************/
/*! exports provided: breadcrumbsStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "breadcrumbsStore", function() { return breadcrumbsStore; });
var breadcrumbsStore = {
    namespaced: true,
    state: {
        routes: [],
        current: null
    },
    mutations: {
        set: function (state, payload) {
            state.routes = payload.routes;
            state.current = payload.current;
        }
    },
    actions: {
        set: function (_a, payload) {
            var commit = _a.commit;
            commit('set', payload);
        }
    },
    getters: {
        getBreadcrumbsRoutes: function (state) { return state.routes; },
        getBreadcrumbsCurrent: function (state) { return state.current; }
    }
};


/***/ }),

/***/ "./core/modules/cart/helpers/calculateTotals.ts":
/*!******************************************************!*\
  !*** ./core/modules/cart/helpers/calculateTotals.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var lodash_es_sumBy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/sumBy */ "./node_modules/lodash-es/sumBy.js");


var calculateTotals = function (shippingMethod, paymentMethod, cartItems) {
    var shippingTax = shippingMethod ? shippingMethod.price_incl_tax : 0;
    var totalsArray = [
        {
            code: 'subtotal_incl_tax',
            title: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t('Subtotal incl. tax'),
            value: Object(lodash_es_sumBy__WEBPACK_IMPORTED_MODULE_1__["default"])(cartItems, function (p) { return p.qty * p.price_incl_tax; })
        },
        {
            code: 'grand_total',
            title: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t('Grand total'),
            value: Object(lodash_es_sumBy__WEBPACK_IMPORTED_MODULE_1__["default"])(cartItems, function (p) { return p.qty * p.price_incl_tax + shippingTax; })
        }
    ];
    if (paymentMethod) {
        totalsArray.push({
            code: 'payment',
            title: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t(paymentMethod.title),
            value: paymentMethod.cost_incl_tax
        });
    }
    if (shippingMethod) {
        totalsArray.push({
            code: 'shipping',
            title: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_0__["default"].t(shippingMethod.method_title),
            value: shippingMethod.price_incl_tax
        });
    }
    return totalsArray;
};
/* harmony default export */ __webpack_exports__["default"] = (calculateTotals);


/***/ }),

/***/ "./core/modules/cart/helpers/cartCacheHandler.ts":
/*!*******************************************************!*\
  !*** ./core/modules/cart/helpers/cartCacheHandler.ts ***!
  \*******************************************************/
/*! exports provided: cartCacheHandlerFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cartCacheHandlerFactory", function() { return cartCacheHandlerFactory; });
/* harmony import */ var _store_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store/mutation-types */ "./core/modules/cart/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");



function cartCacheHandlerFactory(Vue) {
    return function (mutation, state) {
        var type = mutation.type;
        if (type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_LOAD_CART"]) ||
            type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_ADD_ITEM"]) ||
            type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_DEL_ITEM"]) ||
            type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPD_ITEM"]) ||
            type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_DEL_NON_CONFIRMED_ITEM"]) ||
            type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPD_ITEM_PROPS"])) {
            return _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].get('cart').setItem('current-cart', state.cart.cartItems).catch(function (reason) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(reason)(); // it doesn't work on SSR
            }); // populate cache
        }
        else if (type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_LOAD_CART_SERVER_TOKEN"])) {
            return _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].get('cart').setItem('current-cart-token', state.cart.cartServerToken).catch(function (reason) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(reason)();
            });
        }
        else if (type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_SET_ITEMS_HASH"])) {
            return _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].get('cart').setItem('current-cart-hash', state.cart.cartItemsHash).catch(function (reason) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(reason)();
            });
        }
    };
}


/***/ }),

/***/ "./core/modules/cart/helpers/createCartItemForUpdate.ts":
/*!**************************************************************!*\
  !*** ./core/modules/cart/helpers/createCartItemForUpdate.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var createCartItemForUpdate = function (clientItem, serverItem, updateIds, mergeQty) {
    if (updateIds === void 0) { updateIds = false; }
    if (mergeQty === void 0) { mergeQty = false; }
    var sku = clientItem.parentSku && config__WEBPACK_IMPORTED_MODULE_0__.cart.setConfigurableProductOptions ? clientItem.parentSku : clientItem.sku;
    var cartItem = __assign(__assign({ sku: sku }, ((serverItem && serverItem.item_id) ? { item_id: serverItem.item_id } : {})), { qty: mergeQty ? (clientItem.qty + serverItem.qty) : clientItem.qty, product_option: clientItem.product_option });
    if (updateIds && serverItem.quote_id && serverItem.item_id) {
        return __assign(__assign({}, cartItem), { quoteId: serverItem.quote_id, item_id: serverItem.item_id });
    }
    return cartItem;
};
/* harmony default export */ __webpack_exports__["default"] = (createCartItemForUpdate);


/***/ }),

/***/ "./core/modules/cart/helpers/createDiffLog.ts":
/*!****************************************************!*\
  !*** ./core/modules/cart/helpers/createDiffLog.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var DiffLog = /** @class */ (function () {
    function DiffLog() {
        this.items = [];
        this.serverResponses = [];
        this.clientNotifications = [];
    }
    DiffLog.prototype.pushParty = function (party) {
        this.items.push(party);
        return this;
    };
    DiffLog.prototype.pushClientParty = function (party) {
        this.pushParty(__assign({ party: 'client' }, party));
        return this;
    };
    DiffLog.prototype.pushServerParty = function (party) {
        this.pushParty(__assign({ party: 'server' }, party));
        return this;
    };
    DiffLog.prototype.pushServerResponse = function (response) {
        this.serverResponses.push(response);
        return this;
    };
    DiffLog.prototype.pushNotification = function (notification) {
        this.clientNotifications.push(notification);
        return this;
    };
    DiffLog.prototype.pushNotifications = function (notifications) {
        this.clientNotifications = this.clientNotifications.concat(notifications);
        return this;
    };
    DiffLog.prototype.merge = function (diffLog) {
        this.items = this.items.concat(diffLog.items);
        this.serverResponses = this.serverResponses.concat(diffLog.serverResponses);
        this.clientNotifications = this.clientNotifications.concat(diffLog.clientNotifications);
        return this;
    };
    DiffLog.prototype.hasClientNotifications = function () {
        return this.clientNotifications.length > 0;
    };
    DiffLog.prototype.hasServerResponses = function () {
        return this.serverResponses.length > 0;
    };
    DiffLog.prototype.hasParties = function () {
        return this.items.length > 0;
    };
    DiffLog.prototype.isEmpty = function () {
        return !this.hasParties &&
            !this.hasClientNotifications() &&
            !this.hasServerResponses();
    };
    return DiffLog;
}());
var createDiffLog = function () { return new DiffLog(); };
/* harmony default export */ __webpack_exports__["default"] = (createDiffLog);


/***/ }),

/***/ "./core/modules/cart/helpers/createOrderData.ts":
/*!******************************************************!*\
  !*** ./core/modules/cart/helpers/createOrderData.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");

var getDefaultShippingMethod = function (shippingMethods) {
    if (shippingMethods === void 0) { shippingMethods = []; }
    var onlineShippingMethods = shippingMethods.filter(function (shippingMethod) { return !shippingMethod.offline; });
    if (!onlineShippingMethods.length)
        return;
    return onlineShippingMethods.find(function (shippingMethod) { return !!shippingMethod.default; }) || onlineShippingMethods[0];
};
var getDefaultPaymentMethod = function (paymentMethods) {
    if (paymentMethods === void 0) { paymentMethods = []; }
    if (!paymentMethods || !paymentMethods.length)
        return;
    return paymentMethods.find(function (item) { return item.default; }) || paymentMethods[0];
};
var createOrderData = function (_a) {
    var shippingDetails = _a.shippingDetails, shippingMethods = _a.shippingMethods, paymentMethods = _a.paymentMethods, paymentDetails = _a.paymentDetails, _b = _a.taxCountry, taxCountry = _b === void 0 ? Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])().tax.defaultCountry : _b;
    var country = shippingDetails.country ? shippingDetails.country : taxCountry;
    var shipping = getDefaultShippingMethod(shippingMethods);
    var payment = getDefaultPaymentMethod(paymentMethods);
    return {
        country: country,
        shippingAddress: {
            firstname: shippingDetails.firstName,
            lastname: shippingDetails.lastName,
            city: shippingDetails.city,
            postcode: shippingDetails.zipCode,
            street: [shippingDetails.streetAddress]
        },
        billingAddress: {
            firstname: paymentDetails.firstName,
            lastname: paymentDetails.lastName,
            city: paymentDetails.city,
            postcode: paymentDetails.zipCode,
            street: [paymentDetails.streetAddress],
            countryId: paymentDetails.country
        },
        method_code: shipping && shipping.method_code ? shipping.method_code : null,
        carrier_code: shipping && shipping.carrier_code ? shipping.carrier_code : null,
        payment_method: payment && payment.code ? payment.code : null
    };
};
/* harmony default export */ __webpack_exports__["default"] = (createOrderData);


/***/ }),

/***/ "./core/modules/cart/helpers/createShippingInfoData.ts":
/*!*************************************************************!*\
  !*** ./core/modules/cart/helpers/createShippingInfoData.ts ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var createShippingInfoData = function (methodsData) { return (__assign(__assign({ shippingAddress: __assign({ countryId: methodsData.country }, (methodsData.shippingAddress ? methodsData.shippingAddress : {})), billingAddress: __assign({}, (methodsData.billingAddress ? methodsData.billingAddress : {})) }, (methodsData.carrier_code ? { shippingCarrierCode: methodsData.carrier_code } : {})), (methodsData.method_code ? { shippingMethodCode: methodsData.method_code } : {}))); };
/* harmony default export */ __webpack_exports__["default"] = (createShippingInfoData);


/***/ }),

/***/ "./core/modules/cart/helpers/getProductConfiguration.ts":
/*!**************************************************************!*\
  !*** ./core/modules/cart/helpers/getProductConfiguration.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _getProductOptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getProductOptions */ "./core/modules/cart/helpers/getProductOptions.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var ATTRIBUTES = ['color', 'size'];
var getProductConfiguration = function (product) {
    var options = Object(_getProductOptions__WEBPACK_IMPORTED_MODULE_0__["default"])(product);
    var getAttributesFields = function (attributeCode) {
        return (options[attributeCode] || []).find(function (c) { return String(c.id) === String(product[attributeCode]); });
    };
    if (!options) {
        return null;
    }
    return ATTRIBUTES.reduce(function (prev, curr) {
        var _a;
        return (__assign(__assign({}, prev), (_a = {}, _a[curr] = __assign({ attribute_code: curr }, getAttributesFields(curr)), _a)));
    }, {});
};
/* harmony default export */ __webpack_exports__["default"] = (getProductConfiguration);


/***/ }),

/***/ "./core/modules/cart/helpers/getProductOptions.ts":
/*!********************************************************!*\
  !*** ./core/modules/cart/helpers/getProductOptions.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var mapValues = function (current) { return function (val) { return ({
    id: val.value_index,
    label: val.label,
    attribute_code: current.attribute_code,
    type: current.attribute_code
}); }; };
var reduceOptions = function (prev, curr) {
    var _a;
    return (__assign(__assign({}, prev), (_a = {}, _a[curr.attribute_code] = curr.values.map(mapValues(curr)), _a)));
};
var getProductOptions = function (product) {
    if (!product.configurable_options) {
        return null;
    }
    return product.configurable_options
        .reduce(reduceOptions, {});
};
/* harmony default export */ __webpack_exports__["default"] = (getProductOptions);


/***/ }),

/***/ "./core/modules/cart/helpers/getThumbnailForProduct.ts":
/*!*************************************************************!*\
  !*** ./core/modules/cart/helpers/getThumbnailForProduct.ts ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");



var getThumbnailForProduct = function (product) {
    var thumbnail = Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["productThumbnailPath"])(product);
    if (typeof navigator !== 'undefined' && !navigator.onLine) {
        return Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["getThumbnailPath"])(thumbnail, config__WEBPACK_IMPORTED_MODULE_0__.products.thumbnails.width, config__WEBPACK_IMPORTED_MODULE_0__.products.thumbnails.height);
    }
    return Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["getThumbnailPath"])(thumbnail, config__WEBPACK_IMPORTED_MODULE_0__.cart.thumbnails.width, config__WEBPACK_IMPORTED_MODULE_0__.cart.thumbnails.height);
};
/* harmony default export */ __webpack_exports__["default"] = (getThumbnailForProduct);


/***/ }),

/***/ "./core/modules/cart/helpers/index.ts":
/*!********************************************!*\
  !*** ./core/modules/cart/helpers/index.ts ***!
  \********************************************/
/*! exports provided: cartCacheHandlerFactory, optimizeProduct, prepareProductsToAdd, productChecksum, productsEquals, calculateTotals, preparePaymentMethodsToSync, validateProduct, notifications, createDiffLog, createCartItemForUpdate, prepareShippingInfoForUpdateTotals, getThumbnailForProduct, getProductOptions, getProductConfiguration, createOrderData, createShippingInfoData, syncCartWhenLocalStorageChange */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _cartCacheHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cartCacheHandler */ "./core/modules/cart/helpers/cartCacheHandler.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cartCacheHandlerFactory", function() { return _cartCacheHandler__WEBPACK_IMPORTED_MODULE_0__["cartCacheHandlerFactory"]; });

/* harmony import */ var _optimizeProduct__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./optimizeProduct */ "./core/modules/cart/helpers/optimizeProduct.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "optimizeProduct", function() { return _optimizeProduct__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _prepareProductsToAdd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./prepareProductsToAdd */ "./core/modules/cart/helpers/prepareProductsToAdd.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "prepareProductsToAdd", function() { return _prepareProductsToAdd__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _productChecksum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./productChecksum */ "./core/modules/cart/helpers/productChecksum.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "productChecksum", function() { return _productChecksum__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _productsEquals__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./productsEquals */ "./core/modules/cart/helpers/productsEquals.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "productsEquals", function() { return _productsEquals__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _calculateTotals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./calculateTotals */ "./core/modules/cart/helpers/calculateTotals.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "calculateTotals", function() { return _calculateTotals__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _preparePaymentMethodsToSync__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./preparePaymentMethodsToSync */ "./core/modules/cart/helpers/preparePaymentMethodsToSync.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "preparePaymentMethodsToSync", function() { return _preparePaymentMethodsToSync__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _validateProduct__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./validateProduct */ "./core/modules/cart/helpers/validateProduct.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "validateProduct", function() { return _validateProduct__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _createDiffLog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./createDiffLog */ "./core/modules/cart/helpers/createDiffLog.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createDiffLog", function() { return _createDiffLog__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _notifications__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./notifications */ "./core/modules/cart/helpers/notifications.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "notifications", function() { return _notifications__WEBPACK_IMPORTED_MODULE_9__; });
/* harmony import */ var _createCartItemForUpdate__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./createCartItemForUpdate */ "./core/modules/cart/helpers/createCartItemForUpdate.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createCartItemForUpdate", function() { return _createCartItemForUpdate__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _prepareShippingInfoForUpdateTotals__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./prepareShippingInfoForUpdateTotals */ "./core/modules/cart/helpers/prepareShippingInfoForUpdateTotals.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "prepareShippingInfoForUpdateTotals", function() { return _prepareShippingInfoForUpdateTotals__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _getThumbnailForProduct__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./getThumbnailForProduct */ "./core/modules/cart/helpers/getThumbnailForProduct.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getThumbnailForProduct", function() { return _getThumbnailForProduct__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _getProductOptions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./getProductOptions */ "./core/modules/cart/helpers/getProductOptions.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getProductOptions", function() { return _getProductOptions__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony import */ var _getProductConfiguration__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./getProductConfiguration */ "./core/modules/cart/helpers/getProductConfiguration.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getProductConfiguration", function() { return _getProductConfiguration__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony import */ var _createOrderData__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./createOrderData */ "./core/modules/cart/helpers/createOrderData.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createOrderData", function() { return _createOrderData__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _createShippingInfoData__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./createShippingInfoData */ "./core/modules/cart/helpers/createShippingInfoData.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createShippingInfoData", function() { return _createShippingInfoData__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony import */ var _syncCartWhenLocalStorageChange__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./syncCartWhenLocalStorageChange */ "./core/modules/cart/helpers/syncCartWhenLocalStorageChange.ts");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "syncCartWhenLocalStorageChange", function() { return _syncCartWhenLocalStorageChange__WEBPACK_IMPORTED_MODULE_17__; });





















/***/ }),

/***/ "./core/modules/cart/helpers/notifications.ts":
/*!****************************************************!*\
  !*** ./core/modules/cart/helpers/notifications.ts ***!
  \****************************************************/
/*! exports provided: createNotification, createNotifications, productAddedToCart, productQuantityUpdated, unsafeQuantity, outOfStock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createNotification", function() { return createNotification; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createNotifications", function() { return createNotifications; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "productAddedToCart", function() { return productAddedToCart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "productQuantityUpdated", function() { return productQuantityUpdated; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unsafeQuantity", function() { return unsafeQuantity; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "outOfStock", function() { return outOfStock; });
/* harmony import */ var _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/app */ "./core/app.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);




var proceedToCheckoutAction = function () { return ({
    label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('Proceed to checkout'),
    action: function () { return _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_0__["router"].push(Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_1__["localizedRoute"])('/checkout', Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_1__["currentStoreView"])().storeCode)); }
}); };
var checkoutAction = function () { return !config__WEBPACK_IMPORTED_MODULE_3__.externalCheckout ? proceedToCheckoutAction() : null; };
var productAddedToCart = function () { return ({
    type: 'success',
    message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('Product has been added to the cart!'),
    action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('OK') },
    action2: checkoutAction()
}); };
var productQuantityUpdated = function () { return ({
    type: 'success',
    message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('Product quantity has been updated!'),
    action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('OK') },
    action2: checkoutAction()
}); };
var unsafeQuantity = function () { return ({
    type: 'warning',
    message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('The system is not sure about the stock quantity (volatile). Product has been added to the cart for pre-reservation.'),
    action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('OK') }
}); };
var outOfStock = function () { return ({
    type: 'error',
    message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('The product is out of stock and cannot be added to the cart!'),
    action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('OK') }
}); };
var createNotification = function (_a) {
    var type = _a.type, message = _a.message;
    return ({ type: type, message: message, action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_2__["default"].t('OK') } });
};
var createNotifications = function (_a) {
    var type = _a.type, messages = _a.messages;
    return messages.map(function (message) { return createNotification({ type: type, message: message }); });
};



/***/ }),

/***/ "./core/modules/cart/helpers/optimizeProduct.ts":
/*!******************************************************!*\
  !*** ./core/modules/cart/helpers/optimizeProduct.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var lodash_es_omit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/omit */ "./node_modules/lodash-es/omit.js");
/* harmony import */ var lodash_es_pullAll__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es/pullAll */ "./node_modules/lodash-es/pullAll.js");



var optimizeProduct = function (product) {
    if (!config__WEBPACK_IMPORTED_MODULE_0__.entities.optimizeShoppingCart) {
        return product;
    }
    var fieldsToOmit = config__WEBPACK_IMPORTED_MODULE_0__.entities.optimizeShoppingCartOmitFields;
    if (config__WEBPACK_IMPORTED_MODULE_0__.cart.productsAreReconfigurable) {
        fieldsToOmit = Object(lodash_es_pullAll__WEBPACK_IMPORTED_MODULE_2__["default"])(fieldsToOmit, ['configurable_children', 'configurable_options']);
    }
    return Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_1__["default"])(product, fieldsToOmit);
};
/* harmony default export */ __webpack_exports__["default"] = (optimizeProduct);


/***/ }),

/***/ "./core/modules/cart/helpers/preparePaymentMethodsToSync.ts":
/*!******************************************************************!*\
  !*** ./core/modules/cart/helpers/preparePaymentMethodsToSync.ts ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var isPaymentMethodNotExist = function (backendPaymentMethod, paymentMethods) {
    return typeof backendPaymentMethod === 'object' && !paymentMethods.find(function (item) { return item.code === backendPaymentMethod.code; });
};
var preparePaymentMethodsToSync = function (backendPaymentMethods, currentPaymentMethods) {
    var e_1, _a;
    var paymentMethods = __spread(currentPaymentMethods);
    var uniqueBackendMethods = [];
    try {
        for (var backendPaymentMethods_1 = __values(backendPaymentMethods), backendPaymentMethods_1_1 = backendPaymentMethods_1.next(); !backendPaymentMethods_1_1.done; backendPaymentMethods_1_1 = backendPaymentMethods_1.next()) {
            var backendPaymentMethod = backendPaymentMethods_1_1.value;
            if (isPaymentMethodNotExist(backendPaymentMethod, currentPaymentMethods)) {
                var backendMethod = __assign(__assign({}, backendPaymentMethod), { is_server_method: true });
                paymentMethods.push(backendMethod);
                uniqueBackendMethods.push(backendMethod);
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (backendPaymentMethods_1_1 && !backendPaymentMethods_1_1.done && (_a = backendPaymentMethods_1.return)) _a.call(backendPaymentMethods_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return { uniqueBackendMethods: uniqueBackendMethods, paymentMethods: paymentMethods };
};
/* harmony default export */ __webpack_exports__["default"] = (preparePaymentMethodsToSync);


/***/ }),

/***/ "./core/modules/cart/helpers/prepareProductsToAdd.ts":
/*!***********************************************************!*\
  !*** ./core/modules/cart/helpers/prepareProductsToAdd.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _productChecksum__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./productChecksum */ "./core/modules/cart/helpers/productChecksum.ts");
/* harmony import */ var _optimizeProduct__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./optimizeProduct */ "./core/modules/cart/helpers/optimizeProduct.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


var readAssociated = function (product) {
    return product.product_links.filter(function (p) { return p.link_type === 'associated'; }).map(function (p) { return p.product; });
};
var isDefined = function (product) { return typeof product !== 'undefined' || product !== null; };
var applyQty = function (product) { return (__assign(__assign({}, product), { qty: product.qty && typeof product.qty !== 'number' ? parseInt(product.qty) : product.qty })); };
var applyChecksum = function (product) { return (__assign(__assign({}, product), { checksum: Object(_productChecksum__WEBPACK_IMPORTED_MODULE_0__["default"])(product) })); };
var prepareProductsToAdd = function (product) {
    var products = product.type_id === 'grouped' ? readAssociated(product) : [product];
    return products
        .filter(isDefined)
        .map(applyQty)
        .map(function (p) { return Object(_optimizeProduct__WEBPACK_IMPORTED_MODULE_1__["default"])(p); })
        .map(applyChecksum);
};
/* harmony default export */ __webpack_exports__["default"] = (prepareProductsToAdd);


/***/ }),

/***/ "./core/modules/cart/helpers/prepareShippingInfoForUpdateTotals.ts":
/*!*************************************************************************!*\
  !*** ./core/modules/cart/helpers/prepareShippingInfoForUpdateTotals.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_isString__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash-es/isString */ "./node_modules/lodash-es/isString.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var applyOptions = function (item) {
    if (item.options && Object(lodash_es_isString__WEBPACK_IMPORTED_MODULE_0__["default"])(item.options)) {
        return __assign(__assign({}, item), { options: JSON.parse(item.options) });
    }
    return item;
};
var reduceToObject = function (previousValue, currentValue) {
    var _a;
    return (__assign(__assign({}, previousValue), (_a = {}, _a[currentValue.item_id] = currentValue, _a)));
};
var prepareShippingInfoForUpdateTotals = function (totals) {
    return totals
        .map(applyOptions)
        .reduce(reduceToObject, {});
};
/* harmony default export */ __webpack_exports__["default"] = (prepareShippingInfoForUpdateTotals);


/***/ }),

/***/ "./core/modules/cart/helpers/productChecksum.ts":
/*!******************************************************!*\
  !*** ./core/modules/cart/helpers/productChecksum.ts ***!
  \******************************************************/
/*! exports provided: getProductOptions, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getProductOptions", function() { return getProductOptions; });
/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-sha3 */ "./node_modules/js-sha3/src/sha3.js");
/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(js_sha3__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_es_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/get */ "./node_modules/lodash-es/get.js");
/* harmony import */ var lodash_es_flow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es/flow */ "./node_modules/lodash-es/flow.js");
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash-es/cloneDeep */ "./node_modules/lodash-es/cloneDeep.js");
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};




var replaceNumberToString = function (obj) {
    Object.keys(obj).forEach(function (key) {
        if (obj[key] !== null && typeof obj[key] === 'object') {
            return replaceNumberToString(obj[key]);
        }
        else if (typeof obj[key] === 'number') {
            obj[key] = String(obj[key]);
        }
    });
    return obj;
};
var transformToArray = function (value) { return Array.isArray(value) ? value : Object.values(value); };
var getProductOptions = function (product, optionsName) {
    return Object(lodash_es_flow__WEBPACK_IMPORTED_MODULE_2__["default"])([
        lodash_es_get__WEBPACK_IMPORTED_MODULE_1__["default"],
        lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_3__["default"],
        transformToArray,
        replaceNumberToString
    ])(product, "product_option.extension_attributes." + optionsName, []);
};
var getDataToHash = function (product) {
    var e_1, _a;
    if (!product.product_option) {
        return null;
    }
    var supportedProductOptions = ['bundle_options', 'custom_options', 'configurable_item_options'];
    try {
        // returns first options that has array with options
        for (var supportedProductOptions_1 = __values(supportedProductOptions), supportedProductOptions_1_1 = supportedProductOptions_1.next(); !supportedProductOptions_1_1.done; supportedProductOptions_1_1 = supportedProductOptions_1.next()) {
            var optionName = supportedProductOptions_1_1.value;
            var options = getProductOptions(product, optionName);
            if (options.length) {
                return options;
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (supportedProductOptions_1_1 && !supportedProductOptions_1_1.done && (_a = supportedProductOptions_1.return)) _a.call(supportedProductOptions_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    // if there are options that are not supported then just return all options
    return product.product_option;
};
var productChecksum = function (product) { return Object(js_sha3__WEBPACK_IMPORTED_MODULE_0__["sha3_224"])(JSON.stringify(getDataToHash(product))); };
/* harmony default export */ __webpack_exports__["default"] = (productChecksum);


/***/ }),

/***/ "./core/modules/cart/helpers/productsEquals.ts":
/*!*****************************************************!*\
  !*** ./core/modules/cart/helpers/productsEquals.ts ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _productChecksum__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./productChecksum */ "./core/modules/cart/helpers/productChecksum.ts");
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};

// 'id' check
var getServerItemId = function (product) {
    return product.server_item_id || product.item_id;
};
var isServerIdsEquals = function (product1, product2) {
    var product1ItemId = getServerItemId(product1);
    var product2ItemId = getServerItemId(product2);
    var areItemIdsDefined = product1ItemId !== undefined && product2ItemId !== undefined;
    return areItemIdsDefined && product1ItemId === product2ItemId;
};
// 'checksum' check
var getChecksum = function (product) {
    if (product.checksum) {
        return product.checksum;
    }
    return Object(_productChecksum__WEBPACK_IMPORTED_MODULE_0__["default"])(product);
};
var isChecksumEquals = function (product1, product2) {
    return getChecksum(product1) === getChecksum(product2);
};
// 'sku' check
var isSkuEqual = function (product1, product2) {
    return String(product1.sku) === String(product2.sku);
};
/**
 * Returns product equality check function
 * @param checkName - determines what type of check we want to do
 */
var getCheckFn = function (checkName) {
    switch (checkName) {
        case 'id': {
            return isServerIdsEquals;
        }
        case 'checksum': {
            return isChecksumEquals;
        }
        case 'sku': {
            return isSkuEqual;
        }
        default: {
            return isSkuEqual;
        }
    }
};
/**
 * It passes all types of checks and returns the first passed. The order of checks matters!
 */
var makeCheck = function (product1, product2, checks) {
    var e_1, _a;
    try {
        for (var checks_1 = __values(checks), checks_1_1 = checks_1.next(); !checks_1_1.done; checks_1_1 = checks_1.next()) {
            var checkName = checks_1_1.value;
            var fn = getCheckFn(checkName);
            if (fn(product1, product2)) {
                return true;
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (checks_1_1 && !checks_1_1.done && (_a = checks_1.return)) _a.call(checks_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return false;
};
var productsEquals = function (product1, product2) {
    if (!product1 || !product2) {
        return false;
    }
    var check = makeCheck.bind(null, product1, product2);
    if (Object(_productChecksum__WEBPACK_IMPORTED_MODULE_0__["getProductOptions"])(product1, 'bundle_options').length || Object(_productChecksum__WEBPACK_IMPORTED_MODULE_0__["getProductOptions"])(product2, 'bundle_options').length) {
        // bundle options skus are merged into one sku so we can't rely on 'sku'
        // by default we want to check server_item_id ('id'), we can also use 'checksum'
        return check(['id', 'checksum']);
    }
    if (Object(_productChecksum__WEBPACK_IMPORTED_MODULE_0__["getProductOptions"])(product1, 'custom_options').length || Object(_productChecksum__WEBPACK_IMPORTED_MODULE_0__["getProductOptions"])(product2, 'custom_options').length) {
        // in admin panel we can add different sku for specific custom option so we can't rely on 'sku'
        // by default we want to check server_item_id ('id'), we can also use 'checksum'
        return check(['id', 'checksum']);
    }
    if (Object(_productChecksum__WEBPACK_IMPORTED_MODULE_0__["getProductOptions"])(product1, 'configurable_item_options').length || Object(_productChecksum__WEBPACK_IMPORTED_MODULE_0__["getProductOptions"])(product2, 'configurable_item_options').length) {
        // 'sku' should be uniq for configurable products
        // we can't check 'id' because it is the same when user edit product in microcart, so it can give wrong result
        return check(['sku']);
    }
    // by default we want to check if server_item_id is equal and check sku as fallback
    // this is for 'simple' and 'group' products
    return check(['id', 'sku']);
};
/* harmony default export */ __webpack_exports__["default"] = (productsEquals);


/***/ }),

/***/ "./core/modules/cart/helpers/syncCartWhenLocalStorageChange.ts":
/*!*********************************************************************!*\
  !*** ./core/modules/cart/helpers/syncCartWhenLocalStorageChange.ts ***!
  \*********************************************************************/
/*! exports provided: addEventListener, removeEventListener */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addEventListener", function() { return addEventListener; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeEventListener", function() { return removeEventListener; });
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");

function getItemsFromStorage(_a) {
    var key = _a.key;
    if (key === 'shop/cart/current-cart') {
        var storedItems = JSON.parse(localStorage[key]);
        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__["default"].dispatch('cart/syncCartWhenLocalStorageChange', { items: storedItems });
    }
}
function addEventListener() {
    window.addEventListener('storage', getItemsFromStorage);
}
function removeEventListener() {
    window.removeEventListener('storage', getItemsFromStorage);
}



/***/ }),

/***/ "./core/modules/cart/helpers/validateProduct.ts":
/*!******************************************************!*\
  !*** ./core/modules/cart/helpers/validateProduct.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");


var validateProduct = function (product) {
    var errors = [];
    if (config__WEBPACK_IMPORTED_MODULE_0__.useZeroPriceProduct ? product.price_incl_tax < 0 : product.price_incl_tax <= 0) {
        errors.push(_vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t('Product price is unknown, product cannot be added to the cart!'));
    }
    if (product.errors !== null && typeof product.errors !== 'undefined') {
        for (var errKey in product.errors) {
            if (product.errors[errKey]) {
                errors.push(product.errors[errKey]);
            }
        }
    }
    return errors;
};
/* harmony default export */ __webpack_exports__["default"] = (validateProduct);


/***/ }),

/***/ "./core/modules/cart/hooks/index.ts":
/*!******************************************!*\
  !*** ./core/modules/cart/hooks/index.ts ***!
  \******************************************/
/*! exports provided: cartHooks, cartHooksExecutors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cartHooks", function() { return cartHooks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cartHooksExecutors", function() { return cartHooksExecutors; });
/* harmony import */ var _vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/hooks */ "./core/lib/hooks.ts");

var _a = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createMutatorHook"])(), beforeSyncHook = _a.hook, beforeSyncExecutor = _a.executor;
var _b = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterSyncHook = _b.hook, afterSyncExecutor = _b.executor;
var _c = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createMutatorHook"])(), beforeAddToCartHook = _c.hook, beforeAddToCartExecutor = _c.executor;
var _d = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterAddToCartHook = _d.hook, afterAddToCartExecutor = _d.executor;
var _e = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createMutatorHook"])(), beforeRemoveFromCartHook = _e.hook, beforeRemoveFromCartExecutor = _e.executor;
var _f = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterRemoveFromCartHook = _f.hook, afterRemoveFromCartExecutor = _f.executor;
var _g = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createMutatorHook"])(), beforeMergeHook = _g.hook, beforeMergeExecutor = _g.executor;
var _h = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterLoadHook = _h.hook, afterLoadExecutor = _h.executor;
var cartHooksExecutors = {
    beforeSync: beforeSyncExecutor,
    afterSync: afterSyncExecutor,
    beforeAddToCart: beforeAddToCartExecutor,
    afterAddToCart: afterAddToCartExecutor,
    beforeRemoveFromCart: beforeRemoveFromCartExecutor,
    afterRemoveFromCart: afterRemoveFromCartExecutor,
    beforeMerge: beforeMergeExecutor,
    afterLoad: afterLoadExecutor
};
var cartHooks = {
    beforeSync: beforeSyncHook,
    afterSync: afterSyncHook,
    beforeAddToCart: beforeAddToCartHook,
    afterAddToCart: afterAddToCartHook,
    beforeRemoveFromCart: beforeRemoveFromCartHook,
    afterRemoveFromCart: afterRemoveFromCartHook,
    beforeMerge: beforeMergeHook,
    afterLoad: afterLoadHook
};



/***/ }),

/***/ "./core/modules/cart/index.ts":
/*!************************************!*\
  !*** ./core/modules/cart/index.ts ***!
  \************************************/
/*! exports provided: CartModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CartModule", function() { return CartModule; });
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store */ "./core/modules/cart/store/index.ts");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers */ "./core/modules/cart/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");





var CartModule = function (_a) {
    var store = _a.store;
    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__["StorageManager"].init('cart');
    store.registerModule('cart', _store__WEBPACK_IMPORTED_MODULE_0__["cartStore"]);
    if (!_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["isServer"])
        store.dispatch('cart/load');
    store.subscribe(Object(_helpers__WEBPACK_IMPORTED_MODULE_1__["cartCacheHandlerFactory"])(vue__WEBPACK_IMPORTED_MODULE_3__["default"]));
};


/***/ }),

/***/ "./core/modules/cart/store/actions/connectActions.ts":
/*!***********************************************************!*\
  !*** ./core/modules/cart/store/actions/connectActions.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/store/mutation-types */ "./core/modules/cart/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/helpers */ "./core/modules/cart/helpers/index.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};





var connectActions = {
    toggleMicrocart: function (_a) {
        var commit = _a.commit;
        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_TOGGLE_MICROCART"]);
    },
    /**
     * It will always clear cart items on frontend.
     * Options:
     * sync - if you want to sync it with backend.
     * disconnect - if you want to clear cart token.
     */
    clear: function (_a, _b) {
        var commit = _a.commit, dispatch = _a.dispatch;
        var _c = _b === void 0 ? {} : _b, _d = _c.disconnect, disconnect = _d === void 0 ? true : _d, _e = _c.sync, sync = _e === void 0 ? true : _e;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0: return [4 /*yield*/, commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_LOAD_CART"], [])];
                    case 1:
                        _f.sent();
                        if (!sync) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('sync', { forceClientState: true, forceSync: true })];
                    case 2:
                        _f.sent();
                        _f.label = 3;
                    case 3:
                        if (!disconnect) return [3 /*break*/, 6];
                        return [4 /*yield*/, commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_SET_ITEMS_HASH"], null)];
                    case 4:
                        _f.sent();
                        return [4 /*yield*/, dispatch('disconnect')];
                    case 5:
                        _f.sent();
                        _f.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    },
    disconnect: function (_a) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_LOAD_CART_SERVER_TOKEN"], null);
                return [2 /*return*/];
            });
        });
    },
    authorize: function (_a) {
        var dispatch = _a.dispatch, getters = _a.getters;
        return __awaiter(this, void 0, void 0, function () {
            var coupon;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        coupon = getters.getCoupon.code;
                        if (!coupon) return [3 /*break*/, 2];
                        return [4 /*yield*/, dispatch('removeCoupon', { sync: false })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, dispatch('connect', { guestCart: false, mergeQty: true })];
                    case 3:
                        _b.sent();
                        if (!coupon) return [3 /*break*/, 5];
                        return [4 /*yield*/, dispatch('applyCoupon', coupon)];
                    case 4:
                        _b.sent();
                        _b.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    },
    connect: function (_a, _b) {
        var getters = _a.getters, dispatch = _a.dispatch, commit = _a.commit;
        var _c = _b.guestCart, guestCart = _c === void 0 ? false : _c, _d = _b.forceClientState, forceClientState = _d === void 0 ? false : _d, _e = _b.mergeQty, mergeQty = _e === void 0 ? false : _e;
        return __awaiter(this, void 0, void 0, function () {
            var _f, result, resultCode;
            return __generator(this, function (_g) {
                switch (_g.label) {
                    case 0:
                        if (!getters.isCartSyncEnabled)
                            return [2 /*return*/];
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_3__["CartService"].getCartToken(guestCart, forceClientState)];
                    case 1:
                        _f = _g.sent(), result = _f.result, resultCode = _f.resultCode;
                        if (resultCode === 200) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Server cart token created.', 'cart', result)();
                            commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_LOAD_CART_SERVER_TOKEN"], result);
                            return [2 /*return*/, dispatch('sync', { forceClientState: forceClientState, dryRun: !config__WEBPACK_IMPORTED_MODULE_2__.cart.serverMergeByDefault, mergeQty: mergeQty })];
                        }
                        if (resultCode === 401 && getters.bypassCounter < config__WEBPACK_IMPORTED_MODULE_2__.queues.maxCartBypassAttempts) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].log('Bypassing with guest cart' + getters.bypassCounter, 'cart')();
                            commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPDATE_BYPASS_COUNTER"], { counter: 1 });
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(result, 'cart')();
                            return [2 /*return*/, dispatch('connect', { guestCart: true })];
                        }
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].warn('Cart sync is disabled by the config', 'cart')();
                        return [2 /*return*/, Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_4__["createDiffLog"])()];
                }
            });
        });
    },
    /**
     * Create cart token when there are products in cart and we don't have token already
     */
    create: function (_a) {
        var dispatch = _a.dispatch, getters = _a.getters;
        return __awaiter(this, void 0, void 0, function () {
            var storedItems, cartToken;
            return __generator(this, function (_b) {
                storedItems = getters['getCartItems'] || [];
                cartToken = getters['getCartToken'];
                if (storedItems.length && !cartToken) {
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Creating server cart token', 'cart')();
                    return [2 /*return*/, dispatch('connect', { guestCart: false })];
                }
                return [2 /*return*/];
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (connectActions);


/***/ }),

/***/ "./core/modules/cart/store/actions/couponActions.ts":
/*!**********************************************************!*\
  !*** ./core/modules/cart/store/actions/couponActions.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/store/mutation-types */ "./core/modules/cart/store/mutation-types.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


var couponActions = {
    removeCoupon: function (_a, _b) {
        var getters = _a.getters, dispatch = _a.dispatch, commit = _a.commit;
        var _c = (_b === void 0 ? {} : _b).sync, sync = _c === void 0 ? true : _c;
        return __awaiter(this, void 0, void 0, function () {
            var result;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (!getters.canSyncTotals) return [3 /*break*/, 3];
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_0__["CartService"].removeCoupon()];
                    case 1:
                        result = (_d.sent()).result;
                        if (!(result && sync)) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('syncTotals', { forceServerSync: true })
                            // 'getCurrentCartHash' has been changed (it's based on cart items data)
                            // so we need to update it in vuex and StorageManager
                        ];
                    case 2:
                        _d.sent();
                        // 'getCurrentCartHash' has been changed (it's based on cart items data)
                        // so we need to update it in vuex and StorageManager
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_SET_ITEMS_HASH"], getters.getCurrentCartHash);
                        return [2 /*return*/, result];
                    case 3: return [2 /*return*/];
                }
            });
        });
    },
    applyCoupon: function (_a, couponCode) {
        var getters = _a.getters, dispatch = _a.dispatch, commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            var result;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!(couponCode && getters.canSyncTotals)) return [3 /*break*/, 4];
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_0__["CartService"].applyCoupon(couponCode)];
                    case 1:
                        result = (_b.sent()).result;
                        if (!result) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('syncTotals', { forceServerSync: true })
                            // 'getCurrentCartHash' has been changed (it's based on cart items data)
                            // so we need to update it in vuex and StorageManager
                        ];
                    case 2:
                        _b.sent();
                        // 'getCurrentCartHash' has been changed (it's based on cart items data)
                        // so we need to update it in vuex and StorageManager
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_SET_ITEMS_HASH"], getters.getCurrentCartHash);
                        _b.label = 3;
                    case 3: return [2 /*return*/, result];
                    case 4: return [2 /*return*/];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (couponActions);


/***/ }),

/***/ "./core/modules/cart/store/actions/index.ts":
/*!**************************************************!*\
  !*** ./core/modules/cart/store/actions/index.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _connectActions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./connectActions */ "./core/modules/cart/store/actions/connectActions.ts");
/* harmony import */ var _couponActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./couponActions */ "./core/modules/cart/store/actions/couponActions.ts");
/* harmony import */ var _itemActions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./itemActions */ "./core/modules/cart/store/actions/itemActions.ts");
/* harmony import */ var _mergeActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mergeActions */ "./core/modules/cart/store/actions/mergeActions.ts");
/* harmony import */ var _methodsActions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./methodsActions */ "./core/modules/cart/store/actions/methodsActions.ts");
/* harmony import */ var _productActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./productActions */ "./core/modules/cart/store/actions/productActions.ts");
/* harmony import */ var _quantityActions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./quantityActions */ "./core/modules/cart/store/actions/quantityActions.ts");
/* harmony import */ var _synchronizeActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./synchronizeActions */ "./core/modules/cart/store/actions/synchronizeActions.ts");
/* harmony import */ var _totalsActions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./totalsActions */ "./core/modules/cart/store/actions/totalsActions.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};









var actions = __assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({}, _connectActions__WEBPACK_IMPORTED_MODULE_0__["default"]), _itemActions__WEBPACK_IMPORTED_MODULE_2__["default"]), _couponActions__WEBPACK_IMPORTED_MODULE_1__["default"]), _mergeActions__WEBPACK_IMPORTED_MODULE_3__["default"]), _methodsActions__WEBPACK_IMPORTED_MODULE_4__["default"]), _productActions__WEBPACK_IMPORTED_MODULE_5__["default"]), _quantityActions__WEBPACK_IMPORTED_MODULE_6__["default"]), _synchronizeActions__WEBPACK_IMPORTED_MODULE_7__["default"]), _totalsActions__WEBPACK_IMPORTED_MODULE_8__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/cart/store/actions/itemActions.ts":
/*!********************************************************!*\
  !*** ./core/modules/cart/store/actions/itemActions.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/store/mutation-types */ "./core/modules/cart/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/helpers */ "./core/modules/cart/helpers/index.ts");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../hooks */ "./core/modules/cart/hooks/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};





var itemActions = {
    configureItem: function (context, _a) {
        var product = _a.product, configuration = _a.configuration;
        return __awaiter(this, void 0, void 0, function () {
            var commit, dispatch, getters, variant, itemWithSameSku;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        commit = context.commit, dispatch = context.dispatch, getters = context.getters;
                        return [4 /*yield*/, dispatch('product/getProductVariant', {
                                product: product,
                                configuration: configuration
                            }, { root: true })];
                    case 1:
                        variant = _b.sent();
                        itemWithSameSku = getters.getCartItems.find(function (item) { return item.sku === variant.sku; });
                        if (itemWithSameSku && product.sku !== variant.sku) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].debug('Item with the same sku detected', 'cart', { sku: itemWithSameSku.sku })();
                            commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_DEL_ITEM"], { product: itemWithSameSku });
                            product.qty = parseInt(product.qty) + parseInt(itemWithSameSku.qty);
                        }
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPD_ITEM_PROPS"], { product: __assign(__assign({}, product), variant) });
                        if (!(getters.isCartSyncEnabled && product.server_item_id)) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('sync', { forceClientState: true })];
                    case 2:
                        _b.sent();
                        _b.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    },
    updateItem: function (_a, _b) {
        var commit = _a.commit;
        var product = _b.product;
        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPD_ITEM_PROPS"], { product: product });
    },
    getItem: function (_a, _b) {
        var getters = _a.getters;
        var product = _b.product;
        return getters.getCartItems.find(function (p) { return Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["productsEquals"])(p, product); });
    },
    addItem: function (_a, _b) {
        var dispatch = _a.dispatch, commit = _a.commit;
        var productToAdd = _b.productToAdd, _c = _b.forceServerSilence, forceServerSilence = _c === void 0 ? false : _c;
        return __awaiter(this, void 0, void 0, function () {
            var cartItem, result;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        cartItem = _hooks__WEBPACK_IMPORTED_MODULE_3__["cartHooksExecutors"].beforeAddToCart({ cartItem: productToAdd }).cartItem;
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_ADDING_ITEM"], { isAdding: true });
                        return [4 /*yield*/, dispatch('addItems', { productsToAdd: Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["prepareProductsToAdd"])(cartItem), forceServerSilence: forceServerSilence })];
                    case 1:
                        result = _d.sent();
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_ADDING_ITEM"], { isAdding: false });
                        _hooks__WEBPACK_IMPORTED_MODULE_3__["cartHooksExecutors"].afterAddToCart(result);
                        return [2 /*return*/, result];
                }
            });
        });
    },
    checkProductStatus: function (_a, _b) {
        var dispatch = _a.dispatch, getters = _a.getters;
        var product = _b.product;
        return __awaiter(this, void 0, void 0, function () {
            var record, qty;
            return __generator(this, function (_c) {
                record = getters.getCartItems.find(function (p) { return Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["productsEquals"])(p, product); });
                qty = record ? record.qty + 1 : (product.qty ? product.qty : 1);
                return [2 /*return*/, dispatch('stock/queueCheck', { product: product, qty: qty }, { root: true })];
            });
        });
    },
    addItems: function (_a, _b) {
        var commit = _a.commit, dispatch = _a.dispatch, getters = _a.getters;
        var productsToAdd = _b.productsToAdd, _c = _b.forceServerSilence, forceServerSilence = _c === void 0 ? false : _c;
        return __awaiter(this, void 0, void 0, function () {
            var productIndex, diffLog, productsToAdd_1, productsToAdd_1_1, product, errors, _d, status_1, onlineCheckTaskId, e_1_1, newDiffLog, syncDiffLog;
            var e_1, _e;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        productIndex = 0;
                        diffLog = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["createDiffLog"])();
                        _f.label = 1;
                    case 1:
                        _f.trys.push([1, 6, 7, 8]);
                        productsToAdd_1 = __values(productsToAdd), productsToAdd_1_1 = productsToAdd_1.next();
                        _f.label = 2;
                    case 2:
                        if (!!productsToAdd_1_1.done) return [3 /*break*/, 5];
                        product = productsToAdd_1_1.value;
                        errors = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["validateProduct"])(product);
                        diffLog.pushNotifications(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["notifications"].createNotifications({ type: 'error', messages: errors }));
                        if (!(errors.length === 0)) return [3 /*break*/, 4];
                        return [4 /*yield*/, dispatch('checkProductStatus', { product: product })];
                    case 3:
                        _d = _f.sent(), status_1 = _d.status, onlineCheckTaskId = _d.onlineCheckTaskId;
                        if (status_1 === 'volatile' && !config__WEBPACK_IMPORTED_MODULE_4__.stock.allowOutOfStockInCart) {
                            diffLog.pushNotification(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["notifications"].unsafeQuantity());
                        }
                        if (status_1 === 'out_of_stock') {
                            diffLog.pushNotification(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["notifications"].outOfStock());
                        }
                        if (status_1 === 'ok' || status_1 === 'volatile') {
                            commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_ADD_ITEM"], {
                                product: __assign(__assign({}, product), { onlineStockCheckid: onlineCheckTaskId })
                            });
                        }
                        if (productIndex === (productsToAdd.length - 1) && (!getters.isCartSyncEnabled || forceServerSilence)) {
                            diffLog.pushNotification(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["notifications"].productAddedToCart());
                        }
                        productIndex++;
                        _f.label = 4;
                    case 4:
                        productsToAdd_1_1 = productsToAdd_1.next();
                        return [3 /*break*/, 2];
                    case 5: return [3 /*break*/, 8];
                    case 6:
                        e_1_1 = _f.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 8];
                    case 7:
                        try {
                            if (productsToAdd_1_1 && !productsToAdd_1_1.done && (_e = productsToAdd_1.return)) _e.call(productsToAdd_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 8: return [4 /*yield*/, dispatch('create')];
                    case 9:
                        newDiffLog = _f.sent();
                        if (newDiffLog !== undefined) {
                            diffLog.merge(newDiffLog);
                        }
                        if (!(getters.isCartSyncEnabled && getters.isCartConnected && !forceServerSilence)) return [3 /*break*/, 11];
                        return [4 /*yield*/, dispatch('sync', { forceClientState: true })];
                    case 10:
                        syncDiffLog = _f.sent();
                        if (!syncDiffLog.isEmpty()) {
                            diffLog.merge(syncDiffLog);
                        }
                        _f.label = 11;
                    case 11: return [2 /*return*/, diffLog];
                }
            });
        });
    },
    removeItem: function (_a, payload) {
        var commit = _a.commit, dispatch = _a.dispatch, getters = _a.getters;
        return __awaiter(this, void 0, void 0, function () {
            var removeByParentSku, product, cartItem, diffLog_1, diffLog;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        removeByParentSku = payload.product ? !!payload.removeByParentSku && payload.product.type_id !== 'bundle' : true;
                        product = payload.product || payload;
                        cartItem = _hooks__WEBPACK_IMPORTED_MODULE_3__["cartHooksExecutors"].beforeRemoveFromCart({ cartItem: product }).cartItem;
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_DEL_ITEM"], { product: cartItem, removeByParentSku: removeByParentSku });
                        if (!(getters.isCartSyncEnabled && cartItem.server_item_id)) return [3 /*break*/, 2];
                        return [4 /*yield*/, dispatch('sync', { forceClientState: true })];
                    case 1:
                        diffLog_1 = _b.sent();
                        _hooks__WEBPACK_IMPORTED_MODULE_3__["cartHooksExecutors"].afterRemoveFromCart(diffLog_1);
                        return [2 /*return*/, diffLog_1];
                    case 2:
                        diffLog = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["createDiffLog"])()
                            .pushClientParty({ status: 'no-item', sku: product.sku });
                        _hooks__WEBPACK_IMPORTED_MODULE_3__["cartHooksExecutors"].afterRemoveFromCart(diffLog);
                        return [2 /*return*/, diffLog];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (itemActions);


/***/ }),

/***/ "./core/modules/cart/store/actions/mergeActions.ts":
/*!*********************************************************!*\
  !*** ./core/modules/cart/store/actions/mergeActions.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/store/mutation-types */ "./core/modules/cart/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/helpers */ "./core/modules/cart/helpers/index.ts");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../../hooks */ "./core/modules/cart/hooks/index.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};







var mergeActions = {
    updateClientItem: function (_a, _b) {
        var dispatch = _a.dispatch;
        var clientItem = _b.clientItem, serverItem = _b.serverItem;
        return __awaiter(this, void 0, void 0, function () {
            var cartItem, _c, product;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (!(clientItem === null)) return [3 /*break*/, 2];
                        return [4 /*yield*/, dispatch('getItem', serverItem)];
                    case 1:
                        _c = _d.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        _c = clientItem;
                        _d.label = 3;
                    case 3:
                        cartItem = _c;
                        if (!cartItem || typeof serverItem.item_id === 'undefined')
                            return [2 /*return*/];
                        product = {
                            server_item_id: serverItem.item_id,
                            sku: cartItem.sku,
                            server_cart_id: serverItem.quote_id,
                            prev_qty: cartItem.qty,
                            product_option: serverItem.product_option,
                            type_id: serverItem.product_type
                        };
                        return [4 /*yield*/, dispatch('updateItem', { product: product })];
                    case 4:
                        _d.sent();
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-after-itemchanged', { item: cartItem });
                        return [2 /*return*/];
                }
            });
        });
    },
    updateServerItem: function (_a, _b) {
        var getters = _a.getters, rootGetters = _a.rootGetters, commit = _a.commit, dispatch = _a.dispatch;
        var clientItem = _b.clientItem, serverItem = _b.serverItem, updateIds = _b.updateIds, mergeQty = _b.mergeQty;
        return __awaiter(this, void 0, void 0, function () {
            var diffLog, cartItem, event, wasUpdatedSuccessfully, isThisNewItemAddedToTheCart;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        diffLog = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["createDiffLog"])();
                        cartItem = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["createCartItemForUpdate"])(clientItem, serverItem, updateIds, mergeQty);
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["CartService"].updateItem(getters.getCartToken, cartItem)];
                    case 1:
                        event = _c.sent();
                        wasUpdatedSuccessfully = event.resultCode === 200;
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].debug('Cart item server sync' + event, 'cart')();
                        diffLog.pushServerResponse({ status: event.resultCode, sku: clientItem.sku, result: event });
                        if (!wasUpdatedSuccessfully && !serverItem) {
                            commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_DEL_ITEM"], { product: clientItem, removeByParentSku: false });
                            return [2 /*return*/, diffLog];
                        }
                        if (!(!wasUpdatedSuccessfully && (clientItem.server_item_id || clientItem.item_id))) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('restoreQuantity', { product: clientItem })];
                    case 2:
                        _c.sent();
                        return [2 /*return*/, diffLog];
                    case 3:
                        if (!wasUpdatedSuccessfully) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].warn('Removing product from cart', 'cart', clientItem)();
                            commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_DEL_NON_CONFIRMED_ITEM"], { product: clientItem });
                            return [2 /*return*/, diffLog];
                        }
                        if (!rootGetters['checkout/isUserInCheckout']) {
                            isThisNewItemAddedToTheCart = (!clientItem || !clientItem.server_item_id);
                            diffLog.pushNotification(isThisNewItemAddedToTheCart ? _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["notifications"].productAddedToCart() : _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["notifications"].productQuantityUpdated());
                        }
                        return [4 /*yield*/, dispatch('updateClientItem', { clientItem: clientItem, serverItem: event.result })];
                    case 4:
                        _c.sent();
                        return [2 /*return*/, diffLog];
                }
            });
        });
    },
    synchronizeServerItem: function (_a, _b) {
        var dispatch = _a.dispatch;
        var serverItem = _b.serverItem, clientItem = _b.clientItem, forceClientState = _b.forceClientState, dryRun = _b.dryRun, mergeQty = _b.mergeQty;
        return __awaiter(this, void 0, void 0, function () {
            var diffLog, updateServerItemDiffLog, updateServerItemDiffLog;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        diffLog = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["createDiffLog"])();
                        if (!!serverItem) return [3 /*break*/, 4];
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].warn('No server item with sku ' + clientItem.sku + ' on stock.', 'cart')();
                        diffLog.pushServerParty({ sku: clientItem.sku, status: 'no-item' });
                        if (dryRun)
                            return [2 /*return*/, diffLog];
                        if (!(forceClientState || !config__WEBPACK_IMPORTED_MODULE_2__.cart.serverSyncCanRemoveLocalItems)) return [3 /*break*/, 2];
                        return [4 /*yield*/, dispatch('updateServerItem', { clientItem: clientItem, serverItem: serverItem, updateIds: false })];
                    case 1:
                        updateServerItemDiffLog = _c.sent();
                        return [2 /*return*/, diffLog.merge(updateServerItemDiffLog)];
                    case 2: return [4 /*yield*/, dispatch('removeItem', { product: clientItem })];
                    case 3:
                        _c.sent();
                        return [2 /*return*/, diffLog];
                    case 4:
                        if (!(serverItem.qty !== clientItem.qty || mergeQty)) return [3 /*break*/, 8];
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].log('Wrong qty for ' + clientItem.sku, clientItem.qty, serverItem.qty)();
                        diffLog.pushServerParty({ sku: clientItem.sku, status: 'wrong-qty', 'client-qty': clientItem.qty, 'server-qty': serverItem.qty });
                        if (dryRun)
                            return [2 /*return*/, diffLog];
                        if (!(forceClientState || !config__WEBPACK_IMPORTED_MODULE_2__.cart.serverSyncCanModifyLocalItems)) return [3 /*break*/, 6];
                        return [4 /*yield*/, dispatch('updateServerItem', { clientItem: clientItem, serverItem: serverItem, updateIds: true, mergeQty: mergeQty })];
                    case 5:
                        updateServerItemDiffLog = _c.sent();
                        return [2 /*return*/, diffLog.merge(updateServerItemDiffLog)];
                    case 6: return [4 /*yield*/, dispatch('updateItem', { product: serverItem })];
                    case 7:
                        _c.sent();
                        _c.label = 8;
                    case 8: return [2 /*return*/, diffLog];
                }
            });
        });
    },
    mergeClientItem: function (_a, _b) {
        var dispatch = _a.dispatch;
        var clientItem = _b.clientItem, serverItems = _b.serverItems, forceClientState = _b.forceClientState, dryRun = _b.dryRun, mergeQty = _b.mergeQty;
        return __awaiter(this, void 0, void 0, function () {
            var serverItem, diffLog, product;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        serverItem = serverItems.find(function (itm) { return Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["productsEquals"])(itm, clientItem); });
                        return [4 /*yield*/, dispatch('synchronizeServerItem', { serverItem: serverItem, clientItem: clientItem, forceClientState: forceClientState, dryRun: dryRun, mergeQty: mergeQty })];
                    case 1:
                        diffLog = _c.sent();
                        if (!diffLog.isEmpty())
                            return [2 /*return*/, diffLog];
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Server and client item with SKU ' + clientItem.sku + ' synced. Updating cart.', 'cart', 'cart')();
                        if (!!dryRun) return [3 /*break*/, 3];
                        product = {
                            sku: clientItem.sku,
                            server_cart_id: serverItem.quote_id,
                            server_item_id: serverItem.item_id,
                            product_option: serverItem.product_option,
                            type_id: serverItem.product_type
                        };
                        return [4 /*yield*/, dispatch('updateItem', { product: product })];
                    case 2:
                        _c.sent();
                        _c.label = 3;
                    case 3: return [2 /*return*/, diffLog];
                }
            });
        });
    },
    mergeClientItems: function (_a, _b) {
        var dispatch = _a.dispatch;
        var clientItems = _b.clientItems, serverItems = _b.serverItems, forceClientState = _b.forceClientState, dryRun = _b.dryRun, mergeQty = _b.mergeQty;
        return __awaiter(this, void 0, void 0, function () {
            var diffLog, clientItems_1, clientItems_1_1, clientItem, mergeClientItemDiffLog, e_1, e_2_1;
            var e_2, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        diffLog = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["createDiffLog"])();
                        _d.label = 1;
                    case 1:
                        _d.trys.push([1, 8, 9, 10]);
                        clientItems_1 = __values(clientItems), clientItems_1_1 = clientItems_1.next();
                        _d.label = 2;
                    case 2:
                        if (!!clientItems_1_1.done) return [3 /*break*/, 7];
                        clientItem = clientItems_1_1.value;
                        _d.label = 3;
                    case 3:
                        _d.trys.push([3, 5, , 6]);
                        return [4 /*yield*/, dispatch('mergeClientItem', { clientItem: clientItem, serverItems: serverItems, forceClientState: forceClientState, dryRun: dryRun, mergeQty: mergeQty })];
                    case 4:
                        mergeClientItemDiffLog = _d.sent();
                        diffLog.merge(mergeClientItemDiffLog);
                        return [3 /*break*/, 6];
                    case 5:
                        e_1 = _d.sent();
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].debug('Problem syncing clientItem', 'cart', clientItem)();
                        return [3 /*break*/, 6];
                    case 6:
                        clientItems_1_1 = clientItems_1.next();
                        return [3 /*break*/, 2];
                    case 7: return [3 /*break*/, 10];
                    case 8:
                        e_2_1 = _d.sent();
                        e_2 = { error: e_2_1 };
                        return [3 /*break*/, 10];
                    case 9:
                        try {
                            if (clientItems_1_1 && !clientItems_1_1.done && (_c = clientItems_1.return)) _c.call(clientItems_1);
                        }
                        finally { if (e_2) throw e_2.error; }
                        return [7 /*endfinally*/];
                    case 10: return [2 /*return*/, diffLog];
                }
            });
        });
    },
    mergeServerItem: function (_a, _b) {
        var dispatch = _a.dispatch, getters = _a.getters;
        var clientItems = _b.clientItems, serverItem = _b.serverItem, forceClientState = _b.forceClientState, dryRun = _b.dryRun;
        return __awaiter(this, void 0, void 0, function () {
            var diffLog, clientItem, cartItem, resp, productToAdd;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        diffLog = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["createDiffLog"])();
                        clientItem = clientItems.find(function (itm) { return Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["productsEquals"])(itm, serverItem); });
                        if (clientItem)
                            return [2 /*return*/, diffLog];
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('No client item for' + serverItem.sku, 'cart')();
                        diffLog.pushClientParty({ sku: serverItem.sku, status: 'no-item' });
                        if (dryRun)
                            return [2 /*return*/, diffLog];
                        if (!forceClientState) return [3 /*break*/, 2];
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Removing product from cart', 'cart', serverItem)();
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].log('Removing item' + serverItem.sku + serverItem.item_id, 'cart')();
                        cartItem = {
                            sku: serverItem.sku,
                            item_id: serverItem.item_id,
                            quoteId: serverItem.quote_id
                        };
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["CartService"].deleteItem(getters.getCartToken, cartItem)];
                    case 1:
                        resp = _c.sent();
                        return [2 /*return*/, diffLog.pushServerResponse({ status: resp.resultCode, sku: serverItem.sku, result: resp })];
                    case 2: return [4 /*yield*/, dispatch('getProductVariant', { serverItem: serverItem })];
                    case 3:
                        productToAdd = _c.sent();
                        if (productToAdd) {
                            dispatch('addItem', { productToAdd: productToAdd, forceServerSilence: true });
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].debug('Product variant for given serverItem has not found', 'cart', serverItem)();
                        }
                        return [2 /*return*/, diffLog];
                }
            });
        });
    },
    mergeServerItems: function (_a, _b) {
        var dispatch = _a.dispatch;
        var serverItems = _b.serverItems, clientItems = _b.clientItems, forceClientState = _b.forceClientState, dryRun = _b.dryRun;
        return __awaiter(this, void 0, void 0, function () {
            var diffLog, definedServerItems, definedServerItems_1, definedServerItems_1_1, serverItem, mergeServerItemDiffLog, e_3, e_4_1;
            var e_4, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        diffLog = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["createDiffLog"])();
                        definedServerItems = serverItems.filter(function (serverItem) { return serverItem; });
                        _d.label = 1;
                    case 1:
                        _d.trys.push([1, 8, 9, 10]);
                        definedServerItems_1 = __values(definedServerItems), definedServerItems_1_1 = definedServerItems_1.next();
                        _d.label = 2;
                    case 2:
                        if (!!definedServerItems_1_1.done) return [3 /*break*/, 7];
                        serverItem = definedServerItems_1_1.value;
                        _d.label = 3;
                    case 3:
                        _d.trys.push([3, 5, , 6]);
                        return [4 /*yield*/, dispatch('mergeServerItem', { clientItems: clientItems, serverItem: serverItem, forceClientState: forceClientState, dryRun: dryRun })];
                    case 4:
                        mergeServerItemDiffLog = _d.sent();
                        diffLog.merge(mergeServerItemDiffLog);
                        return [3 /*break*/, 6];
                    case 5:
                        e_3 = _d.sent();
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].debug('Problem syncing serverItem', 'cart', serverItem)();
                        return [3 /*break*/, 6];
                    case 6:
                        definedServerItems_1_1 = definedServerItems_1.next();
                        return [3 /*break*/, 2];
                    case 7: return [3 /*break*/, 10];
                    case 8:
                        e_4_1 = _d.sent();
                        e_4 = { error: e_4_1 };
                        return [3 /*break*/, 10];
                    case 9:
                        try {
                            if (definedServerItems_1_1 && !definedServerItems_1_1.done && (_c = definedServerItems_1.return)) _c.call(definedServerItems_1);
                        }
                        finally { if (e_4) throw e_4.error; }
                        return [7 /*endfinally*/];
                    case 10: return [2 /*return*/, diffLog];
                }
            });
        });
    },
    updateTotalsAfterMerge: function (_a, _b) {
        var dispatch = _a.dispatch, getters = _a.getters, commit = _a.commit;
        var clientItems = _b.clientItems, dryRun = _b.dryRun;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (dryRun)
                            return [2 /*return*/];
                        if (!(getters.isTotalsSyncRequired && clientItems.length > 0)) return [3 /*break*/, 2];
                        return [4 /*yield*/, dispatch('syncTotals')];
                    case 1:
                        _c.sent();
                        _c.label = 2;
                    case 2:
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_SET_ITEMS_HASH"], getters.getCurrentCartHash);
                        return [2 /*return*/];
                }
            });
        });
    },
    merge: function (_a, _b) {
        var getters = _a.getters, dispatch = _a.dispatch;
        var serverItems = _b.serverItems, clientItems = _b.clientItems, _c = _b.dryRun, dryRun = _c === void 0 ? false : _c, _d = _b.forceClientState, forceClientState = _d === void 0 ? false : _d, _e = _b.mergeQty, mergeQty = _e === void 0 ? false : _e;
        return __awaiter(this, void 0, void 0, function () {
            var hookResult, diffLog, mergeParameters, mergeClientItemsDiffLog, mergeServerItemsDiffLog;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        hookResult = _hooks__WEBPACK_IMPORTED_MODULE_6__["cartHooksExecutors"].beforeSync({ clientItems: clientItems, serverItems: serverItems });
                        diffLog = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["createDiffLog"])();
                        mergeParameters = {
                            clientItems: hookResult.clientItems,
                            serverItems: hookResult.serverItems,
                            forceClientState: forceClientState,
                            dryRun: dryRun,
                            mergeQty: mergeQty
                        };
                        return [4 /*yield*/, dispatch('mergeClientItems', mergeParameters)];
                    case 1:
                        mergeClientItemsDiffLog = _f.sent();
                        return [4 /*yield*/, dispatch('mergeServerItems', mergeParameters)];
                    case 2:
                        mergeServerItemsDiffLog = _f.sent();
                        return [4 /*yield*/, dispatch('updateTotalsAfterMerge', { clientItems: clientItems, dryRun: dryRun })];
                    case 3:
                        _f.sent();
                        diffLog
                            .merge(mergeClientItemsDiffLog)
                            .merge(mergeServerItemsDiffLog)
                            .pushClientParty({ status: getters.isCartHashChanged ? 'update-required' : 'no-changes' })
                            .pushServerParty({ status: getters.isTotalsSyncRequired ? 'update-required' : 'no-changes' });
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('servercart-after-diff', { diffLog: diffLog, serverItems: hookResult.serverItem, clientItems: hookResult.clientItems, dryRun: dryRun });
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Client/Server cart synchronised ', 'cart', diffLog)();
                        return [2 /*return*/, diffLog];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (mergeActions);


/***/ }),

/***/ "./core/modules/cart/store/actions/methodsActions.ts":
/*!***********************************************************!*\
  !*** ./core/modules/cart/store/actions/methodsActions.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/store/mutation-types */ "./core/modules/cart/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/helpers */ "./core/modules/cart/helpers/index.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};






var methodsActions = {
    pullMethods: function (_a, _b) {
        var getters = _a.getters, dispatch = _a.dispatch;
        var forceServerSync = _b.forceServerSync;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!(getters.isTotalsSyncRequired || forceServerSync)) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('syncShippingMethods', { forceServerSync: forceServerSync })];
                    case 1:
                        _c.sent();
                        return [4 /*yield*/, dispatch('syncPaymentMethods', { forceServerSync: forceServerSync })];
                    case 2:
                        _c.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].debug('Skipping payment & shipping methods update as cart has not been changed', 'cart')();
                        _c.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    },
    setDefaultCheckoutMethods: function (_a) {
        var getters = _a.getters, rootGetters = _a.rootGetters, commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                if (!getters.getShippingMethodCode) {
                    commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPD_SHIPPING"], rootGetters['checkout/getDefaultShippingMethod']);
                }
                if (!getters.getPaymentMethodCode) {
                    commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPD_PAYMENT"], rootGetters['checkout/getDefaultPaymentMethod']);
                }
                return [2 /*return*/];
            });
        });
    },
    syncPaymentMethods: function (_a, _b) {
        var getters = _a.getters, rootGetters = _a.rootGetters, dispatch = _a.dispatch;
        var _c = _b.forceServerSync, forceServerSync = _c === void 0 ? false : _c;
        return __awaiter(this, void 0, void 0, function () {
            var backendPaymentMethods, paymentDetails, shippingMethodsData, result, result, _d, uniqueBackendMethods, paymentMethods;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        if (!(getters.canUpdateMethods && (getters.isTotalsSyncRequired || forceServerSync))) return [3 /*break*/, 6];
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].debug('Refreshing payment methods', 'cart')();
                        backendPaymentMethods = void 0;
                        paymentDetails = rootGetters['checkout/getPaymentDetails'];
                        if (!paymentDetails.country) return [3 /*break*/, 2];
                        shippingMethodsData = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["createOrderData"])({
                            shippingDetails: rootGetters['checkout/getShippingDetails'],
                            shippingMethods: rootGetters['checkout/getShippingMethods'],
                            paymentMethods: rootGetters['checkout/getPaymentMethods'],
                            paymentDetails: paymentDetails
                        });
                        if (!shippingMethodsData.country) return [3 /*break*/, 2];
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["CartService"].setShippingInfo(Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["createShippingInfoData"])(shippingMethodsData))];
                    case 1:
                        result = (_e.sent()).result;
                        backendPaymentMethods = result.payment_methods || [];
                        _e.label = 2;
                    case 2:
                        if (!(!backendPaymentMethods || backendPaymentMethods.length === 0)) return [3 /*break*/, 4];
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["CartService"].getPaymentMethods()];
                    case 3:
                        result = (_e.sent()).result;
                        backendPaymentMethods = result;
                        _e.label = 4;
                    case 4:
                        _d = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_5__["preparePaymentMethodsToSync"])(backendPaymentMethods, rootGetters['checkout/getNotServerPaymentMethods']), uniqueBackendMethods = _d.uniqueBackendMethods, paymentMethods = _d.paymentMethods;
                        return [4 /*yield*/, dispatch('checkout/replacePaymentMethods', paymentMethods, { root: true })];
                    case 5:
                        _e.sent();
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('set-unique-payment-methods', uniqueBackendMethods);
                        return [3 /*break*/, 7];
                    case 6:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].debug('Payment methods does not need to be updated', 'cart')();
                        _e.label = 7;
                    case 7: return [2 /*return*/];
                }
            });
        });
    },
    updateShippingMethods: function (_a, _b) {
        var dispatch = _a.dispatch;
        var shippingMethods = _b.shippingMethods;
        return __awaiter(this, void 0, void 0, function () {
            var newShippingMethods;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        newShippingMethods = shippingMethods
                            .map(function (method) { return (__assign(__assign({}, method), { is_server_method: true })); })
                            .filter(function (method) { return !method.hasOwnProperty('available') || method.available; });
                        return [4 /*yield*/, dispatch('checkout/replaceShippingMethods', newShippingMethods, { root: true })];
                    case 1:
                        _c.sent();
                        return [2 /*return*/];
                }
            });
        });
    },
    syncShippingMethods: function (_a, _b) {
        var getters = _a.getters, rootGetters = _a.rootGetters, dispatch = _a.dispatch;
        var _c = _b.forceServerSync, forceServerSync = _c === void 0 ? false : _c;
        return __awaiter(this, void 0, void 0, function () {
            var storeView, shippingDetails, address, result;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (!(getters.canUpdateMethods && (getters.isTotalsSyncRequired || forceServerSync))) return [3 /*break*/, 3];
                        storeView = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_1__["currentStoreView"])();
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].debug('Refreshing shipping methods', 'cart')();
                        shippingDetails = rootGetters['checkout/getShippingDetails'];
                        address = (shippingDetails) ? {
                            region: shippingDetails.state,
                            region_id: shippingDetails.region_id ? shippingDetails.region_id : 0,
                            country_id: shippingDetails.country,
                            street: [shippingDetails.streetAddress1, shippingDetails.streetAddress2],
                            postcode: shippingDetails.zipCode,
                            city: shippingDetails.city,
                            region_code: shippingDetails.region_code ? shippingDetails.region_code : ''
                        } : { country_id: storeView.tax.defaultCountry };
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["CartService"].getShippingMethods(address)];
                    case 1:
                        result = (_d.sent()).result;
                        return [4 /*yield*/, dispatch('updateShippingMethods', { shippingMethods: result })];
                    case 2:
                        _d.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].debug('Shipping methods does not need to be updated', 'cart')();
                        _d.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (methodsActions);


/***/ }),

/***/ "./core/modules/cart/store/actions/productActions.ts":
/*!***********************************************************!*\
  !*** ./core/modules/cart/store/actions/productActions.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

var productActions = {
    findProductOption: function (_a, _b) {
        var dispatch = _a.dispatch;
        var serverItem = _b.serverItem;
        return __awaiter(this, void 0, void 0, function () {
            var query, items;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!(serverItem.product_type === 'configurable')) return [3 /*break*/, 2];
                        query = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"]();
                        query = query.applyFilter({ key: 'configurable_children.sku', value: { 'eq': serverItem.sku } });
                        return [4 /*yield*/, dispatch('product/findProducts', {
                                query: query,
                                start: 0,
                                size: 1,
                                options: {
                                    populateRequestCacheTags: false,
                                    prefetchGroupProducts: false,
                                    separateSelectedVariant: true
                                }
                            }, { root: true })];
                    case 1:
                        items = (_c.sent()).items;
                        return [2 /*return*/, items.length >= 1 ? { sku: items[0].sku, childSku: serverItem.sku } : null];
                    case 2: return [2 /*return*/, { sku: serverItem.sku }];
                }
            });
        });
    },
    getProductVariant: function (_a, _b) {
        var dispatch = _a.dispatch;
        var serverItem = _b.serverItem;
        return __awaiter(this, void 0, void 0, function () {
            var options, singleProduct, e_1;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 3, , 4]);
                        return [4 /*yield*/, dispatch('findProductOption', { serverItem: serverItem })];
                    case 1:
                        options = _c.sent();
                        return [4 /*yield*/, dispatch('product/single', { options: options }, { root: true })];
                    case 2:
                        singleProduct = _c.sent();
                        return [2 /*return*/, __assign(__assign({}, singleProduct), { server_item_id: serverItem.item_id, qty: serverItem.qty, server_cart_id: serverItem.quote_id, product_option: serverItem.product_option || singleProduct.product_option })];
                    case 3:
                        e_1 = _c.sent();
                        return [2 /*return*/, null];
                    case 4: return [2 /*return*/];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (productActions);


/***/ }),

/***/ "./core/modules/cart/store/actions/quantityActions.ts":
/*!************************************************************!*\
  !*** ./core/modules/cart/store/actions/quantityActions.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/store/mutation-types */ "./core/modules/cart/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/helpers */ "./core/modules/cart/helpers/index.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};




var quantityActions = {
    restoreQuantity: function (_a, _b) {
        var dispatch = _a.dispatch;
        var product = _b.product;
        return __awaiter(this, void 0, void 0, function () {
            var currentCartItem;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, dispatch('getItem', { product: product })];
                    case 1:
                        currentCartItem = _c.sent();
                        if (!currentCartItem) return [3 /*break*/, 5];
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].log('Restoring qty after error' + product.sku + currentCartItem.prev_qty, 'cart')();
                        if (!(currentCartItem.prev_qty > 0)) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('updateItem', {
                                product: __assign(__assign({}, product), { qty: currentCartItem.prev_qty })
                            })];
                    case 2:
                        _c.sent();
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_1__["default"].$emit('cart-after-itemchanged', { item: currentCartItem });
                        return [3 /*break*/, 5];
                    case 3: return [4 /*yield*/, dispatch('removeItem', { product: currentCartItem, removeByParentSku: false })];
                    case 4:
                        _c.sent();
                        _c.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    },
    updateQuantity: function (_a, _b) {
        var commit = _a.commit, dispatch = _a.dispatch, getters = _a.getters;
        var product = _b.product, qty = _b.qty, _c = _b.forceServerSilence, forceServerSilence = _c === void 0 ? false : _c;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_d) {
                commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPD_ITEM"], { product: product, qty: qty });
                if (getters.isCartSyncEnabled && product.server_item_id && !forceServerSilence) {
                    return [2 /*return*/, dispatch('sync', { forceClientState: true })];
                }
                return [2 /*return*/, Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_3__["createDiffLog"])()
                        .pushClientParty({ status: 'wrong-qty', sku: product.sku, 'client-qty': qty })];
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (quantityActions);


/***/ }),

/***/ "./core/modules/cart/store/actions/synchronizeActions.ts":
/*!***************************************************************!*\
  !*** ./core/modules/cart/store/actions/synchronizeActions.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/store/mutation-types */ "./core/modules/cart/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/helpers */ "./core/modules/cart/helpers/index.ts");
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../hooks */ "./core/modules/cart/hooks/index.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};










var synchronizeActions = {
    load: function (_a, _b) {
        var commit = _a.commit, dispatch = _a.dispatch;
        var _c = (_b === void 0 ? {} : _b).forceClientState, forceClientState = _c === void 0 ? false : _c;
        return __awaiter(this, void 0, void 0, function () {
            var storedItems;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["isServer"])
                            return [2 /*return*/];
                        dispatch('setDefaultCheckoutMethods');
                        return [4 /*yield*/, _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__["StorageManager"].get('cart').getItem('current-cart')];
                    case 1:
                        storedItems = _d.sent();
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_LOAD_CART"], storedItems);
                        dispatch('synchronizeCart', { forceClientState: forceClientState });
                        _hooks__WEBPACK_IMPORTED_MODULE_9__["cartHooksExecutors"].afterLoad(storedItems);
                        return [2 /*return*/];
                }
            });
        });
    },
    syncCartWhenLocalStorageChange: function (_a, _b) {
        var commit = _a.commit;
        var items = _b.items;
        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_LOAD_CART"], items);
    },
    synchronizeCart: function (_a, _b) {
        var commit = _a.commit, dispatch = _a.dispatch;
        var forceClientState = _b.forceClientState;
        return __awaiter(this, void 0, void 0, function () {
            var _c, synchronize, serverMergeByDefault, cartStorage, token, hash;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        _c = config__WEBPACK_IMPORTED_MODULE_3__.cart, synchronize = _c.synchronize, serverMergeByDefault = _c.serverMergeByDefault;
                        if (!synchronize)
                            return [2 /*return*/];
                        cartStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__["StorageManager"].get('cart');
                        return [4 /*yield*/, cartStorage.getItem('current-cart-token')];
                    case 1:
                        token = _d.sent();
                        return [4 /*yield*/, cartStorage.getItem('current-cart-hash')];
                    case 2:
                        hash = _d.sent();
                        if (hash) {
                            commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_SET_ITEMS_HASH"], hash);
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Cart hash received from cache.', 'cache', hash)();
                        }
                        if (token) {
                            commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_LOAD_CART_SERVER_TOKEN"], token);
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Cart token received from cache.', 'cache', token)();
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Syncing cart with the server.', 'cart')();
                            dispatch('sync', { forceClientState: forceClientState, dryRun: !serverMergeByDefault });
                        }
                        return [4 /*yield*/, dispatch('create')];
                    case 3:
                        _d.sent();
                        return [2 /*return*/];
                }
            });
        });
    },
    /** @deprecated backward compatibility only */
    serverPull: function (_a, _b) {
        var dispatch = _a.dispatch;
        var _c = _b.forceClientState, forceClientState = _c === void 0 ? false : _c, _d = _b.dryRun, dryRun = _d === void 0 ? false : _d;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_e) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].warn('The "cart/serverPull" action is deprecated and will not be supported with the Vue Storefront 1.11', 'cart')();
                return [2 /*return*/, dispatch('sync', { forceClientState: forceClientState, dryRun: dryRun })];
            });
        });
    },
    sync: function (_a, _b) {
        var getters = _a.getters, rootGetters = _a.rootGetters, commit = _a.commit, dispatch = _a.dispatch, state = _a.state;
        var _c = _b.forceClientState, forceClientState = _c === void 0 ? false : _c, _d = _b.dryRun, dryRun = _d === void 0 ? false : _d, _e = _b.mergeQty, mergeQty = _e === void 0 ? false : _e, _f = _b.forceSync, forceSync = _f === void 0 ? false : _f;
        return __awaiter(this, void 0, void 0, function () {
            var shouldUpdateClientState, getCartItems, canUpdateMethods, isSyncRequired, bypassCounter, _g, result, resultCode, _h, serverItems, clientItems, diffLog;
            return __generator(this, function (_j) {
                switch (_j.label) {
                    case 0:
                        shouldUpdateClientState = rootGetters['checkout/isUserInCheckout'] || forceClientState;
                        getCartItems = getters.getCartItems, canUpdateMethods = getters.canUpdateMethods, isSyncRequired = getters.isSyncRequired, bypassCounter = getters.bypassCounter;
                        if ((!canUpdateMethods || !isSyncRequired) && !forceSync)
                            return [2 /*return*/, Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_6__["createDiffLog"])()];
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_SET_SYNC"]);
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_5__["CartService"].getItems()];
                    case 1:
                        _g = _j.sent(), result = _g.result, resultCode = _g.resultCode;
                        _h = _hooks__WEBPACK_IMPORTED_MODULE_9__["cartHooksExecutors"].beforeSync({ clientItems: getCartItems, serverItems: result }), serverItems = _h.serverItems, clientItems = _h.clientItems;
                        if (!(resultCode === 200)) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('merge', {
                                dryRun: dryRun,
                                serverItems: serverItems,
                                clientItems: clientItems,
                                forceClientState: shouldUpdateClientState,
                                mergeQty: mergeQty
                            })];
                    case 2:
                        diffLog = _j.sent();
                        _hooks__WEBPACK_IMPORTED_MODULE_9__["cartHooksExecutors"].afterSync(diffLog);
                        return [2 /*return*/, diffLog];
                    case 3:
                        if (!(bypassCounter < config__WEBPACK_IMPORTED_MODULE_3__.queues.maxCartBypassAttempts)) return [3 /*break*/, 5];
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].log('Bypassing with guest cart' + bypassCounter, 'cart')();
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPDATE_BYPASS_COUNTER"], { counter: 1 });
                        return [4 /*yield*/, dispatch('connect', { guestCart: true })];
                    case 4:
                        _j.sent();
                        _j.label = 5;
                    case 5:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(result, 'cart');
                        _hooks__WEBPACK_IMPORTED_MODULE_9__["cartHooksExecutors"].afterSync(result);
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_SET_ITEMS_HASH"], getters.getCurrentCartHash);
                        return [2 /*return*/, Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_6__["createDiffLog"])()];
                }
            });
        });
    },
    stockSync: function (_a, stockTask) {
        var dispatch = _a.dispatch, commit = _a.commit, getters = _a.getters;
        return __awaiter(this, void 0, void 0, function () {
            var product, cartItem;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        product = { sku: stockTask.product_sku };
                        return [4 /*yield*/, dispatch('getItem', { product: product })];
                    case 1:
                        cartItem = _b.sent();
                        if (!cartItem || stockTask.result.code === 'ENOTFOUND')
                            return [2 /*return*/];
                        if (!stockTask.result.is_in_stock) {
                            if (!config__WEBPACK_IMPORTED_MODULE_3__.stock.allowOutOfStockInCart && !config__WEBPACK_IMPORTED_MODULE_3__.cart.synchronize) {
                                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].log('Removing product from cart' + stockTask.product_sku, 'stock')();
                                commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_DEL_ITEM"], { product: { sku: stockTask.product_sku } }, { root: true });
                                return [2 /*return*/];
                            }
                            dispatch('updateItem', {
                                product: { errors: { stock: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_7__["default"].t('Out of the stock!') }, sku: stockTask.product_sku, is_in_stock: false }
                            });
                            return [2 /*return*/];
                        }
                        dispatch('updateItem', {
                            product: { info: { stock: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_7__["default"].t('In stock!') }, sku: stockTask.product_sku, is_in_stock: true }
                        });
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_8__["default"].$emit('cart-after-itemchanged', { item: cartItem });
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_SET_ITEMS_HASH"], getters.getCurrentCartHash);
                        return [2 /*return*/];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (synchronizeActions);


/***/ }),

/***/ "./core/modules/cart/store/actions/totalsActions.ts":
/*!**********************************************************!*\
  !*** ./core/modules/cart/store/actions/totalsActions.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/store/mutation-types */ "./core/modules/cart/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/helpers */ "./core/modules/cart/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};





var totalsActions = {
    getTotals: function (context, _a) {
        var addressInformation = _a.addressInformation, hasShippingInformation = _a.hasShippingInformation;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                if (hasShippingInformation) {
                    return [2 /*return*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__["CartService"].setShippingInfo(addressInformation)];
                }
                return [2 /*return*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__["CartService"].getTotals()];
            });
        });
    },
    overrideServerTotals: function (_a, _b) {
        var commit = _a.commit, getters = _a.getters, rootGetters = _a.rootGetters, dispatch = _a.dispatch;
        var addressInformation = _b.addressInformation, hasShippingInformation = _b.hasShippingInformation;
        return __awaiter(this, void 0, void 0, function () {
            var _c, resultCode, result, totals, itemsAfterTotal, _d, _e, key, item, product, e_1_1, _f, uniqueBackendMethods, paymentMethods;
            var e_1, _g;
            return __generator(this, function (_h) {
                switch (_h.label) {
                    case 0: return [4 /*yield*/, dispatch('getTotals', { addressInformation: addressInformation, hasShippingInformation: hasShippingInformation })];
                    case 1:
                        _c = _h.sent(), resultCode = _c.resultCode, result = _c.result;
                        if (!(resultCode === 200)) return [3 /*break*/, 10];
                        totals = result.totals || result;
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].info('Overriding server totals. ', 'cart', totals)();
                        itemsAfterTotal = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_3__["prepareShippingInfoForUpdateTotals"])(totals.items);
                        _h.label = 2;
                    case 2:
                        _h.trys.push([2, 7, 8, 9]);
                        _d = __values(Object.keys(itemsAfterTotal)), _e = _d.next();
                        _h.label = 3;
                    case 3:
                        if (!!_e.done) return [3 /*break*/, 6];
                        key = _e.value;
                        item = itemsAfterTotal[key];
                        product = { server_item_id: item.item_id, totals: item, qty: item.qty };
                        return [4 /*yield*/, dispatch('updateItem', { product: product })];
                    case 4:
                        _h.sent();
                        _h.label = 5;
                    case 5:
                        _e = _d.next();
                        return [3 /*break*/, 3];
                    case 6: return [3 /*break*/, 9];
                    case 7:
                        e_1_1 = _h.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 9];
                    case 8:
                        try {
                            if (_e && !_e.done && (_g = _d.return)) _g.call(_d);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 9:
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_UPD_TOTALS"], { itemsAfterTotal: itemsAfterTotal, totals: totals, platformTotalSegments: totals.total_segments });
                        commit(_vue_storefront_core_modules_cart_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_SET_TOTALS_SYNC"]);
                        // we received payment methods as a result of this call, updating state
                        if (result.payment_methods && getters.canUpdateMethods) {
                            _f = Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_3__["preparePaymentMethodsToSync"])(result.payment_methods.map(function (method) { return (__assign(__assign({}, method), { is_server_method: true })); }), rootGetters['checkout/getNotServerPaymentMethods']), uniqueBackendMethods = _f.uniqueBackendMethods, paymentMethods = _f.paymentMethods;
                            dispatch('checkout/replacePaymentMethods', paymentMethods, { root: true });
                            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_4__["default"].$emit('set-unique-payment-methods', uniqueBackendMethods);
                        }
                        return [2 /*return*/];
                    case 10:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(result, 'cart')();
                        return [2 /*return*/];
                }
            });
        });
    },
    syncTotals: function (_a, payload) {
        var dispatch = _a.dispatch, getters = _a.getters, rootGetters = _a.rootGetters;
        if (payload === void 0) { payload = { forceServerSync: false, methodsData: null }; }
        return __awaiter(this, void 0, void 0, function () {
            var methodsData, shippingMethodsData;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        methodsData = payload ? payload.methodsData : null;
                        return [4 /*yield*/, dispatch('pullMethods', { forceServerSync: payload.forceServerSync })];
                    case 1:
                        _b.sent();
                        if (!(getters.canSyncTotals && (getters.isTotalsSyncRequired || payload.forceServerSync))) return [3 /*break*/, 4];
                        shippingMethodsData = methodsData || Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_3__["createOrderData"])({
                            shippingDetails: rootGetters['checkout/getShippingDetails'],
                            shippingMethods: rootGetters['checkout/getShippingMethods'],
                            paymentMethods: rootGetters['checkout/getPaymentMethods'],
                            paymentDetails: rootGetters['checkout/getPaymentDetails']
                        });
                        if (!shippingMethodsData.country) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('overrideServerTotals', {
                                hasShippingInformation: shippingMethodsData.method_code || shippingMethodsData.carrier_code,
                                addressInformation: Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_3__["createShippingInfoData"])(shippingMethodsData)
                            })];
                    case 2:
                        _b.sent();
                        return [2 /*return*/];
                    case 3:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('Please do set the tax.defaultCountry in order to calculate totals', 'cart')();
                        _b.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    },
    refreshTotals: function (_a, payload) {
        var dispatch = _a.dispatch;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].warn('The "cart/refreshTotals" action is deprecated and will not be supported with the Vue Storefront 1.11', 'cart')();
                        return [4 /*yield*/, dispatch('syncTotals', payload)];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (totalsActions);


/***/ }),

/***/ "./core/modules/cart/store/getters.ts":
/*!********************************************!*\
  !*** ./core/modules/cart/store/getters.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_sumBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash-es/sumBy */ "./node_modules/lodash-es/sumBy.js");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/modules/cart/helpers */ "./core/modules/cart/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);




var getters = {
    getCartToken: function (state) { return state.cartServerToken; },
    getLastSyncDate: function (state) { return state.cartServerLastSyncDate; },
    getLastTotalsSyncDate: function (state) { return state.cartServerLastTotalsSyncDate; },
    getShippingMethod: function (state) { return state.shipping; },
    getPaymentMethod: function (state) { return state.payment; },
    getLastCartHash: function (state) { return state.cartItemsHash; },
    getCurrentCartHash: function (state) { return Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["calcItemsHmac"])(state.cartItems, state.cartServerToken); },
    isCartHashChanged: function (state, getters) { return getters.getCurrentCartHash !== state.cartItemsHash; },
    isSyncRequired: function (state, getters) { return getters.isCartHashEmptyOrChanged || !state.cartServerLastSyncDate; },
    isTotalsSyncRequired: function (state, getters) { return getters.isCartHashEmptyOrChanged || !state.cartServerLastTotalsSyncDate; },
    isCartHashEmptyOrChanged: function (state, getters) { return !state.cartItemsHash || getters.isCartHashChanged; },
    getCartItems: function (state) { return state.cartItems; },
    isTotalsSyncEnabled: function () { return config__WEBPACK_IMPORTED_MODULE_3__.cart.synchronize_totals && _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["onlineHelper"].isOnline && !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"]; },
    isCartConnected: function (state) { return !!state.cartServerToken; },
    isCartSyncEnabled: function () { return config__WEBPACK_IMPORTED_MODULE_3__.cart.synchronize && _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["onlineHelper"].isOnline && !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"]; },
    getFirstShippingMethod: function (state) { return state.shipping instanceof Array ? state.shipping[0] : state.shipping; },
    getFirstPaymentMethod: function (state) { return state.payment instanceof Array ? state.payment[0] : state.payment; },
    getTotals: function (_a, getters) {
        var cartItems = _a.cartItems, platformTotalSegments = _a.platformTotalSegments;
        return (platformTotalSegments && _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["onlineHelper"].isOnline) ? platformTotalSegments : Object(_vue_storefront_core_modules_cart_helpers__WEBPACK_IMPORTED_MODULE_2__["calculateTotals"])(getters.getFirstShippingMethod, getters.getFirstPaymentMethod, cartItems);
    },
    getItemsTotalQuantity: function (_a) {
        var cartItems = _a.cartItems;
        return config__WEBPACK_IMPORTED_MODULE_3__.cart.minicartCountType === 'items' ? cartItems.length : Object(lodash_es_sumBy__WEBPACK_IMPORTED_MODULE_0__["default"])(cartItems, function (p) { return p.qty; });
    },
    getCoupon: function (_a) {
        var platformTotals = _a.platformTotals;
        return !(platformTotals && platformTotals.hasOwnProperty('coupon_code')) ? false : { code: platformTotals.coupon_code, discount: platformTotals.discount_amount };
    },
    isVirtualCart: function (_a) {
        var cartItems = _a.cartItems;
        return cartItems.length ? cartItems.every(function (itm) { return itm.type_id === 'downloadable' || itm.type_id === 'virtual'; }) : false;
    },
    canUpdateMethods: function (state, getters) { return getters.isCartSyncEnabled && getters.isCartConnected; },
    canSyncTotals: function (state, getters) { return getters.isTotalsSyncEnabled && getters.isCartConnected; },
    isCartEmpty: function (state) { return state.cartItems.length === 0; },
    bypassCounter: function (state) { return state.connectBypassCount; },
    getShippingMethodCode: function (state) { return state.shipping && state.shipping.method_code; },
    getPaymentMethodCode: function (state) { return state.payment && state.payment.code; },
    getIsAdding: function (state) { return state.isAddingToCart; },
    getIsMicroCartOpen: function (state) { return state.isMicrocartOpen; }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/cart/store/index.ts":
/*!******************************************!*\
  !*** ./core/modules/cart/store/index.ts ***!
  \******************************************/
/*! exports provided: cartStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cartStore", function() { return cartStore; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/cart/store/actions/index.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/cart/store/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/cart/store/mutations.ts");



var cartStore = {
    namespaced: true,
    state: {
        isMicrocartOpen: false,
        itemsAfterPlatformTotals: {},
        platformTotals: null,
        platformTotalSegments: null,
        cartIsLoaded: false,
        cartServerToken: '',
        shipping: [],
        payment: [],
        cartItemsHash: '',
        cartServerLastSyncDate: 0,
        cartServerLastTotalsSyncDate: 0,
        cartItems: [],
        connectBypassCount: 0,
        isAddingToCart: false
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/cart/store/mutation-types.ts":
/*!***************************************************!*\
  !*** ./core/modules/cart/store/mutation-types.ts ***!
  \***************************************************/
/*! exports provided: SN_CART, CART_ADD_ITEM, CART_DEL_ITEM, CART_DEL_NON_CONFIRMED_ITEM, CART_UPD_ITEM, CART_LOAD_CART, CART_UPD_SHIPPING, CART_SAVE, CART_SET_ITEMS_HASH, CART_SET_SYNC, CART_SET_TOTALS_SYNC, CART_UPD_ITEM_PROPS, CART_UPD_TOTALS, CART_LOAD_CART_SERVER_TOKEN, CART_UPD_PAYMENT, CART_TOGGLE_MICROCART, CART_UPDATE_BYPASS_COUNTER, CART_ADDING_ITEM */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_CART", function() { return SN_CART; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_ADD_ITEM", function() { return CART_ADD_ITEM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_DEL_ITEM", function() { return CART_DEL_ITEM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_DEL_NON_CONFIRMED_ITEM", function() { return CART_DEL_NON_CONFIRMED_ITEM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_UPD_ITEM", function() { return CART_UPD_ITEM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_LOAD_CART", function() { return CART_LOAD_CART; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_UPD_SHIPPING", function() { return CART_UPD_SHIPPING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_SAVE", function() { return CART_SAVE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_SET_ITEMS_HASH", function() { return CART_SET_ITEMS_HASH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_SET_SYNC", function() { return CART_SET_SYNC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_SET_TOTALS_SYNC", function() { return CART_SET_TOTALS_SYNC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_UPD_ITEM_PROPS", function() { return CART_UPD_ITEM_PROPS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_UPD_TOTALS", function() { return CART_UPD_TOTALS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_LOAD_CART_SERVER_TOKEN", function() { return CART_LOAD_CART_SERVER_TOKEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_UPD_PAYMENT", function() { return CART_UPD_PAYMENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_TOGGLE_MICROCART", function() { return CART_TOGGLE_MICROCART; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_UPDATE_BYPASS_COUNTER", function() { return CART_UPDATE_BYPASS_COUNTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_ADDING_ITEM", function() { return CART_ADDING_ITEM; });
var SN_CART = 'cart';
var CART_ADD_ITEM = SN_CART + '/ADD';
var CART_DEL_ITEM = SN_CART + '/DEL';
var CART_DEL_NON_CONFIRMED_ITEM = SN_CART + '/DEL_NONCONFIRMED';
var CART_UPD_ITEM = SN_CART + '/UPD';
var CART_LOAD_CART = SN_CART + '/LOAD';
var CART_UPD_SHIPPING = SN_CART + '/SHIPPING';
var CART_SAVE = SN_CART + '/SAVE';
var CART_SET_ITEMS_HASH = SN_CART + '/SAVE_HASH';
var CART_SET_SYNC = SN_CART + '/MARK_SYNC';
var CART_SET_TOTALS_SYNC = SN_CART + '/MARK_TOTALS_SYNC';
var CART_UPD_ITEM_PROPS = SN_CART + '/UPD_PROPS';
var CART_UPD_TOTALS = SN_CART + '/UPD_TOTALS';
var CART_LOAD_CART_SERVER_TOKEN = SN_CART + '/SRV_TOKEN';
var CART_UPD_PAYMENT = SN_CART + '/UPD_PAYMENT';
var CART_TOGGLE_MICROCART = SN_CART + '/TOGGLE_MICROCART';
var CART_UPDATE_BYPASS_COUNTER = SN_CART + '/UPD_BYPASS_COUNTER';
var CART_ADDING_ITEM = SN_CART + '/UPD_ADDING_ITEM';


/***/ }),

/***/ "./core/modules/cart/store/mutations.ts":
/*!**********************************************!*\
  !*** ./core/modules/cart/store/mutations.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/cart/store/mutation-types.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _helpers_productsEquals__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../helpers/productsEquals */ "./core/modules/cart/helpers/productsEquals.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var _a;





var mutations = (_a = {},
    /**
     * Add product to cart
     * @param {Object} product data format for products is described in /doc/ElasticSearch data formats.md
     */
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_ADD_ITEM"]] = function (state, _a) {
        var product = _a.product;
        var record = state.cartItems.find(function (p) { return Object(_helpers_productsEquals__WEBPACK_IMPORTED_MODULE_4__["default"])(p, product); });
        if (!record) {
            var item = __assign(__assign({}, product), { qty: parseInt(product.qty ? product.qty : 1) });
            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-before-add', { product: item });
            state.cartItems.push(item);
        }
        else {
            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-before-update', { product: record });
            record.qty += parseInt((product.qty ? product.qty : 1));
        }
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_SET_ITEMS_HASH"]] = function (state, hash) {
        if (hash === void 0) { hash = null; }
        state.cartItemsHash = hash;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_SET_SYNC"]] = function (state) {
        state.cartServerLastSyncDate = new Date().getTime();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_SET_TOTALS_SYNC"]] = function (state) {
        state.cartServerLastTotalsSyncDate = new Date().getTime();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_DEL_ITEM"]] = function (state, _a) {
        var product = _a.product, _b = _a.removeByParentSku, removeByParentSku = _b === void 0 ? true : _b;
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-before-delete', { items: state.cartItems });
        state.cartItems = state.cartItems.filter(function (p) { return !Object(_helpers_productsEquals__WEBPACK_IMPORTED_MODULE_4__["default"])(p, product) && (p.parentSku !== product.sku || removeByParentSku === false); });
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-after-delete', { items: state.cartItems });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_DEL_NON_CONFIRMED_ITEM"]] = function (state, _a) {
        var product = _a.product, _b = _a.removeByParentSku, removeByParentSku = _b === void 0 ? true : _b;
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-before-delete', { items: state.cartItems });
        state.cartItems = state.cartItems.filter(function (p) { return (!Object(_helpers_productsEquals__WEBPACK_IMPORTED_MODULE_4__["default"])(p, product) && (p.parentSku !== product.sku || removeByParentSku === false)) || p.server_item_id; } /* it's confirmed if server_item_id is set */);
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-after-delete', { items: state.cartItems });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_UPD_ITEM"]] = function (state, _a) {
        var product = _a.product, qty = _a.qty;
        var record = state.cartItems.find(function (p) { return Object(_helpers_productsEquals__WEBPACK_IMPORTED_MODULE_4__["default"])(p, product); });
        if (record) {
            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-before-update', { product: record });
            record.qty = parseInt(qty);
            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-after-update', { product: record });
        }
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_UPD_ITEM_PROPS"]] = function (state, _a) {
        var product = _a.product;
        var record = state.cartItems.find(function (p) { return (Object(_helpers_productsEquals__WEBPACK_IMPORTED_MODULE_4__["default"])(p, product) || (p.server_item_id && p.server_item_id === product.server_item_id)); });
        if (record) {
            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-before-itemchanged', { item: record });
            Object.entries(product).forEach(function (_a) {
                var _b = __read(_a, 2), key = _b[0], value = _b[1];
                return vue__WEBPACK_IMPORTED_MODULE_0__["default"].set(record, key, value);
            });
            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-after-itemchanged', { item: record });
        }
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_UPD_SHIPPING"]] = function (state, shippingMethod) {
        state.shipping = shippingMethod;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_LOAD_CART"]] = function (state, storedItems) {
        state.cartItems = storedItems || [];
        state.cartIsLoaded = true;
        // EventBus.$emit('order/PROCESS_QUEUE', { config: config }) // process checkout queue
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('sync/PROCESS_QUEUE', { config: config__WEBPACK_IMPORTED_MODULE_2__ }); // process checkout queue
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('application-after-loaded');
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-after-loaded');
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_LOAD_CART_SERVER_TOKEN"]] = function (state, token) {
        state.cartServerToken = token;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_UPD_TOTALS"]] = function (state, _a) {
        var itemsAfterTotals = _a.itemsAfterTotals, totals = _a.totals, platformTotalSegments = _a.platformTotalSegments;
        state.itemsAfterPlatformTotals = itemsAfterTotals;
        state.platformTotals = totals;
        state.platformTotalSegments = platformTotalSegments;
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('cart-after-updatetotals', { platformTotals: totals, platformTotalSegments: platformTotalSegments });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_UPD_PAYMENT"]] = function (state, paymentMethod) {
        state.payment = paymentMethod;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_TOGGLE_MICROCART"]] = function (state) {
        state.isMicrocartOpen = !state.isMicrocartOpen;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_UPDATE_BYPASS_COUNTER"]] = function (state, _a) {
        var counter = _a.counter;
        state.connectBypassCount = state.connectBypassCount + counter;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CART_ADDING_ITEM"]] = function (state, _a) {
        var isAdding = _a.isAdding;
        state.isAddingToCart = isAdding;
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/catalog-next/helpers/cacheProductsHelper.ts":
/*!******************************************************************!*\
  !*** ./core/modules/catalog-next/helpers/cacheProductsHelper.ts ***!
  \******************************************************************/
/*! exports provided: prefetchStockItems */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prefetchStockItems", function() { return prefetchStockItems; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};

var prefetchStockItems = function (cachedProductsResponse, cache) {
    if (cache === void 0) { cache = {}; }
    var skus = [];
    var prefetchIndex = 0;
    cachedProductsResponse.items.map(function (i) {
        var e_1, _a;
        if (config__WEBPACK_IMPORTED_MODULE_0__["products"].configurableChildrenStockPrefetchStatic &&
            config__WEBPACK_IMPORTED_MODULE_0__["products"].configurableChildrenStockPrefetchStaticPrefetchCount > 0) {
            if (prefetchIndex > config__WEBPACK_IMPORTED_MODULE_0__["products"].configurableChildrenStockPrefetchStaticPrefetchCount)
                return;
        }
        skus.push(i.sku); // main product sku to be checked anyway
        if (i.type_id === 'configurable' && i.configurable_children && i.configurable_children.length > 0) {
            try {
                for (var _b = __values(i.configurable_children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var confChild = _c.value;
                    var cachedItem = cache[confChild.id];
                    if (typeof cachedItem === 'undefined' || cachedItem === null) {
                        skus.push(confChild.sku);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            prefetchIndex++;
        }
    });
    return skus;
};


/***/ }),

/***/ "./core/modules/catalog-next/helpers/categoryHelpers.ts":
/*!**************************************************************!*\
  !*** ./core/modules/catalog-next/helpers/categoryHelpers.ts ***!
  \**************************************************************/
/*! exports provided: compareByLabel, _prepareCategoryPathIds, getSearchOptionsFromRouteParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareByLabel", function() { return compareByLabel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_prepareCategoryPathIds", function() { return _prepareCategoryPathIds; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSearchOptionsFromRouteParams", function() { return getSearchOptionsFromRouteParams; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);

var compareByLabel = function (a, b) {
    if (a.label < b.label) {
        return -1;
    }
    if (a.label > b.label) {
        return 1;
    }
    return 0;
};
var _prepareCategoryPathIds = function (category) {
    if (!category || !category.path)
        return [];
    return category.path.split('/');
};
var getSearchOptionsFromRouteParams = function (params) {
    if (params === void 0) { params = {}; }
    var filterableKeys = config__WEBPACK_IMPORTED_MODULE_0__["entities"].category.validSearchOptionsFromRouteParams;
    var filters = {};
    Object.keys(params)
        .filter(function (key) { return filterableKeys.includes(key); })
        .forEach(function (key) { filters[key] = params[key]; });
    return filters;
};


/***/ }),

/***/ "./core/modules/catalog-next/helpers/filterHelpers.ts":
/*!************************************************************!*\
  !*** ./core/modules/catalog-next/helpers/filterHelpers.ts ***!
  \************************************************************/
/*! exports provided: getSystemFilterNames, changeFilterQuery, getFiltersFromQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSystemFilterNames", function() { return getSystemFilterNames; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "changeFilterQuery", function() { return changeFilterQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFiltersFromQuery", function() { return getFiltersFromQuery; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var getSystemFilterNames = config__WEBPACK_IMPORTED_MODULE_0__.products.systemFilterNames;
/**
 * Creates new filtersQuery (based on currentQuery) by modifying specific filter variant.
 */
var changeFilterQuery = function (_a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.currentQuery, currentQuery = _c === void 0 ? {} : _c, filterVariant = _b.filterVariant;
    var newQuery = JSON.parse(JSON.stringify(currentQuery));
    if (!filterVariant)
        return newQuery;
    if (getSystemFilterNames.includes(filterVariant.type)) {
        if (newQuery[filterVariant.type] && newQuery[filterVariant.type] === filterVariant.id) {
            delete newQuery[filterVariant.type];
        }
        else {
            newQuery[filterVariant.type] = filterVariant.id;
        }
    }
    else {
        var queryFilter = newQuery[filterVariant.type] || [];
        if (!Array.isArray(queryFilter))
            queryFilter = [queryFilter];
        if (queryFilter.includes(filterVariant.id)) {
            queryFilter = queryFilter.filter(function (value) { return value !== filterVariant.id; });
        }
        else if (filterVariant.single) {
            queryFilter = [filterVariant.id];
        }
        else {
            queryFilter.push(filterVariant.id);
        }
        // delete or add filter variant to query
        if (!queryFilter.length)
            delete newQuery[filterVariant.type];
        else
            newQuery[filterVariant.type] = queryFilter;
    }
    return newQuery;
};
var getFiltersFromQuery = function (_a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.filtersQuery, filtersQuery = _c === void 0 ? {} : _c, _d = _b.availableFilters, availableFilters = _d === void 0 ? {} : _d;
    var searchQuery = {
        filters: {}
    };
    Object.keys(filtersQuery).forEach(function (filterKey) {
        var filter = availableFilters[filterKey];
        var queryValue = filtersQuery[filterKey];
        if (!filter)
            return;
        // keep original value for system filters - for example sort
        if (getSystemFilterNames.includes(filterKey)) {
            searchQuery[filterKey] = queryValue;
        }
        else {
            queryValue = [].concat(filtersQuery[filterKey]);
            queryValue.map(function (singleValue) {
                var variant = filter.find(function (filterVariant) { return filterVariant.id === singleValue; });
                if (!variant)
                    return;
                if (!Array.isArray(searchQuery.filters[filterKey]))
                    searchQuery.filters[filterKey] = [];
                searchQuery.filters[filterKey].push(__assign(__assign({}, variant), { attribute_code: filterKey }));
            });
        }
    });
    return searchQuery;
};


/***/ }),

/***/ "./core/modules/catalog-next/index.ts":
/*!********************************************!*\
  !*** ./core/modules/catalog-next/index.ts ***!
  \********************************************/
/*! exports provided: CatalogNextModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CatalogNextModule", function() { return CatalogNextModule; });
/* harmony import */ var _store_category__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store/category */ "./core/modules/catalog-next/store/category/index.ts");

var CatalogNextModule = function (_a) {
    var store = _a.store;
    store.registerModule('category-next', _store_category__WEBPACK_IMPORTED_MODULE_0__["categoryModule"]);
};


/***/ }),

/***/ "./core/modules/catalog-next/store/category/actions.ts":
/*!*************************************************************!*\
  !*** ./core/modules/catalog-next/store/category/actions.ts ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog-next/store/category/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/search */ "./core/lib/search.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/app */ "./core/app.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var _helpers_filterHelpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../helpers/filterHelpers */ "./core/modules/catalog-next/helpers/filterHelpers.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_8___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _helpers_categoryHelpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../helpers/categoryHelpers */ "./core/modules/catalog-next/helpers/categoryHelpers.ts");
/* harmony import */ var _helpers_cacheProductsHelper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../helpers/cacheProductsHelper */ "./core/modules/catalog-next/helpers/cacheProductsHelper.ts");
/* harmony import */ var lodash_es_chunk__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash-es/chunk */ "./node_modules/lodash-es/chunk.js");
/* harmony import */ var lodash_es_omit__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! lodash-es/omit */ "./node_modules/lodash-es/omit.js");
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! lodash-es/cloneDeep */ "./node_modules/lodash-es/cloneDeep.js");
/* harmony import */ var _vue_storefront_core_modules_breadcrumbs_helpers__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @vue-storefront/core/modules/breadcrumbs/helpers */ "./core/modules/breadcrumbs/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_createCategoryListQuery__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/createCategoryListQuery */ "./core/modules/catalog/helpers/createCategoryListQuery.ts");
/* harmony import */ var _vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @vue-storefront/core/modules/url/helpers/transformUrl */ "./core/modules/url/helpers/transformUrl.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};


















var actions = __assign({ loadCategoryProducts: function (_a, _b) {
        var commit = _a.commit, getters = _a.getters, dispatch = _a.dispatch, rootState = _a.rootState;
        var _c = _b === void 0 ? {} : _b, route = _c.route, category = _c.category, _d = _c.pageSize, pageSize = _d === void 0 ? 50 : _d;
        return __awaiter(this, void 0, void 0, function () {
            var searchCategory, categoryMappedFilters, areFiltersInQuery, searchQuery, filterQr, _e, items, perPage, start, total, aggregations, attributeMetadata;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        searchCategory = category || getters.getCategoryFrom(route.path) || {};
                        categoryMappedFilters = getters.getFiltersMap[searchCategory.id];
                        areFiltersInQuery = !!Object.keys(route[config__WEBPACK_IMPORTED_MODULE_8__["products"].routerFiltersSource]).length;
                        if (!(!categoryMappedFilters && areFiltersInQuery)) return [3 /*break*/, 2];
                        return [4 /*yield*/, dispatch('loadCategoryFilters', searchCategory)];
                    case 1:
                        _f.sent();
                        _f.label = 2;
                    case 2:
                        searchQuery = getters.getCurrentFiltersFrom(route[config__WEBPACK_IMPORTED_MODULE_8__["products"].routerFiltersSource], categoryMappedFilters);
                        filterQr = Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["buildFilterProductsQuery"])(searchCategory, searchQuery.filters);
                        return [4 /*yield*/, dispatch('product/findProducts', {
                                query: filterQr,
                                sort: searchQuery.sort || config__WEBPACK_IMPORTED_MODULE_8__["products"].defaultSortBy.attribute + ":" + config__WEBPACK_IMPORTED_MODULE_8__["products"].defaultSortBy.order,
                                includeFields: config__WEBPACK_IMPORTED_MODULE_8__["entities"].productList.includeFields,
                                excludeFields: config__WEBPACK_IMPORTED_MODULE_8__["entities"].productList.excludeFields,
                                size: pageSize,
                                configuration: searchQuery.filters,
                                options: {
                                    populateRequestCacheTags: true,
                                    prefetchGroupProducts: false,
                                    setProductErrors: false,
                                    fallbackToDefaultWhenNoAvailable: true,
                                    assignProductConfiguration: false,
                                    separateSelectedVariant: false
                                }
                            }, { root: true })];
                    case 3:
                        _e = _f.sent(), items = _e.items, perPage = _e.perPage, start = _e.start, total = _e.total, aggregations = _e.aggregations, attributeMetadata = _e.attributeMetadata;
                        return [4 /*yield*/, dispatch('loadAvailableFiltersFrom', {
                                aggregations: aggregations,
                                attributeMetadata: attributeMetadata,
                                category: searchCategory,
                                filters: searchQuery.filters
                            })];
                    case 4:
                        _f.sent();
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_SET_SEARCH_PRODUCTS_STATS"], { perPage: perPage, start: start, total: total });
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_SET_PRODUCTS"], items);
                        return [2 /*return*/, items];
                }
            });
        });
    },
    loadMoreCategoryProducts: function (_a) {
        var commit = _a.commit, getters = _a.getters, rootState = _a.rootState, dispatch = _a.dispatch;
        return __awaiter(this, void 0, void 0, function () {
            var _b, perPage, start, total, totalValue, searchQuery, filterQr, searchResult;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _b = getters.getCategorySearchProductsStats, perPage = _b.perPage, start = _b.start, total = _b.total;
                        totalValue = typeof total === 'object' ? total.value : total;
                        if (start >= totalValue || totalValue < perPage)
                            return [2 /*return*/];
                        searchQuery = getters.getCurrentSearchQuery;
                        filterQr = Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["buildFilterProductsQuery"])(getters.getCurrentCategory, searchQuery.filters);
                        return [4 /*yield*/, dispatch('product/findProducts', {
                                query: filterQr,
                                sort: searchQuery.sort || config__WEBPACK_IMPORTED_MODULE_8__["products"].defaultSortBy.attribute + ":" + config__WEBPACK_IMPORTED_MODULE_8__["products"].defaultSortBy.order,
                                start: start + perPage,
                                size: perPage,
                                includeFields: config__WEBPACK_IMPORTED_MODULE_8__["entities"].productList.includeFields,
                                excludeFields: config__WEBPACK_IMPORTED_MODULE_8__["entities"].productList.excludeFields,
                                configuration: searchQuery.filters,
                                options: {
                                    populateRequestCacheTags: true,
                                    prefetchGroupProducts: false,
                                    setProductErrors: false,
                                    fallbackToDefaultWhenNoAvailable: true,
                                    assignProductConfiguration: false,
                                    separateSelectedVariant: false
                                }
                            }, { root: true })];
                    case 1:
                        searchResult = _c.sent();
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_SET_SEARCH_PRODUCTS_STATS"], {
                            perPage: searchResult.perPage,
                            start: searchResult.start,
                            total: searchResult.total
                        });
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_ADD_PRODUCTS"], searchResult.items);
                        return [2 /*return*/, searchResult.items];
                }
            });
        });
    },
    cacheProducts: function (_a, _b) {
        var commit = _a.commit, getters = _a.getters, dispatch = _a.dispatch, rootState = _a.rootState;
        var route = (_b === void 0 ? {} : _b).route;
        return __awaiter(this, void 0, void 0, function () {
            var searchCategory, searchQuery, filterQr, cachedProductsResponse, skus, _c, _d, chunkItem;
            var e_1, _e;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        if (config__WEBPACK_IMPORTED_MODULE_8__.api.saveBandwidthOverCache) {
                            return [2 /*return*/];
                        }
                        searchCategory = getters.getCategoryFrom(route.path) || {};
                        searchQuery = getters.getCurrentFiltersFrom(route[config__WEBPACK_IMPORTED_MODULE_8__["products"].routerFiltersSource]);
                        filterQr = Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["buildFilterProductsQuery"])(searchCategory, searchQuery.filters);
                        return [4 /*yield*/, dispatch('product/findProducts', {
                                query: filterQr,
                                sort: searchQuery.sort,
                                options: {
                                    populateRequestCacheTags: false,
                                    prefetchGroupProducts: false
                                }
                            }, { root: true })];
                    case 1:
                        cachedProductsResponse = _f.sent();
                        if (config__WEBPACK_IMPORTED_MODULE_8__["products"].filterUnavailableVariants) { // prefetch the stock items
                            skus = Object(_helpers_cacheProductsHelper__WEBPACK_IMPORTED_MODULE_10__["prefetchStockItems"])(cachedProductsResponse, rootState.stock.cache);
                            try {
                                for (_c = __values(Object(lodash_es_chunk__WEBPACK_IMPORTED_MODULE_11__["default"])(skus, 15)), _d = _c.next(); !_d.done; _d = _c.next()) {
                                    chunkItem = _d.value;
                                    dispatch('stock/list', { skus: chunkItem }, { root: true }); // store it in the cache
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (_d && !_d.done && (_e = _c.return)) _e.call(_c);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        }
                        return [2 /*return*/];
                }
            });
        });
    },
    findCategories: function (context, categorySearchOptions) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_6__["CategoryService"].getCategories(categorySearchOptions)];
            });
        });
    },
    loadCategories: function (_a, categorySearchOptions) {
        var commit = _a.commit, getters = _a.getters;
        return __awaiter(this, void 0, void 0, function () {
            var searchingByIds, searchedIds, loadedCategories, _b, _c, _d, categoryId, category, categories_1, notFoundCategories;
            var e_2, _e;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        searchingByIds = !(!categorySearchOptions || !categorySearchOptions.filters || !categorySearchOptions.filters.id);
                        searchedIds = searchingByIds ? __spread(categorySearchOptions.filters.id).map(String) : [];
                        loadedCategories = [];
                        if (searchingByIds && !categorySearchOptions.reloadAll) { // removing from search query already loaded categories, they are added to returned results
                            try {
                                for (_b = __values(Object.entries(getters.getCategoriesMap)), _c = _b.next(); !_c.done; _c = _b.next()) {
                                    _d = __read(_c.value, 2), categoryId = _d[0], category = _d[1];
                                    if (searchedIds.includes(categoryId)) {
                                        loadedCategories.push(category);
                                    }
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (_c && !_c.done && (_e = _b.return)) _e.call(_b);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                            categorySearchOptions.filters.id = searchedIds.filter(function (categoryId) { return !getters.getCategoriesMap[categoryId] && !getters.getNotFoundCategoryIds.includes(categoryId); });
                        }
                        if (!(!searchingByIds || categorySearchOptions.filters.id.length)) return [3 /*break*/, 2];
                        categorySearchOptions.filters = Object.assign(Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_13__["default"])(config__WEBPACK_IMPORTED_MODULE_8__.entities.category.filterFields), categorySearchOptions.filters ? Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_13__["default"])(categorySearchOptions.filters) : {});
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_6__["CategoryService"].getCategories(categorySearchOptions)];
                    case 1:
                        categories_1 = _f.sent();
                        if (vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags) {
                            categories_1.forEach(function (category) {
                                vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags.add("C" + category.id);
                            });
                        }
                        notFoundCategories = searchedIds.filter(function (categoryId) { return !categories_1.some(function (cat) { return cat.id === parseInt(categoryId) || cat.id === categoryId; }); });
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_ADD_CATEGORIES"], categories_1);
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_ADD_NOT_FOUND_CATEGORY_IDS"], notFoundCategories);
                        return [2 /*return*/, __spread(loadedCategories, categories_1)];
                    case 2: return [2 /*return*/, loadedCategories];
                }
            });
        });
    },
    loadCategory: function (_a, categorySearchOptions) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            var categories, category;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_6__["CategoryService"].getCategories(categorySearchOptions)];
                    case 1:
                        categories = _b.sent();
                        category = categories && categories.length ? categories[0] : null;
                        if (vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags) {
                            vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags.add("C" + category.id);
                        }
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_ADD_CATEGORY"], category);
                        return [2 /*return*/, category];
                }
            });
        });
    },
    /**
     * Fetch and process filters from current category and sets them in available filters.
     */
    loadCategoryFilters: function (_a, category) {
        var dispatch = _a.dispatch, getters = _a.getters;
        return __awaiter(this, void 0, void 0, function () {
            var searchCategory, filterQr, _b, aggregations, attributeMetadata;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        searchCategory = category || getters.getCurrentCategory;
                        filterQr = Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["buildFilterProductsQuery"])(searchCategory);
                        return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_2__["quickSearchByQuery"])({
                                query: filterQr,
                                size: config__WEBPACK_IMPORTED_MODULE_8__.products.maxFiltersQuerySize,
                                excludeFields: ['*']
                            })];
                    case 1:
                        _b = _c.sent(), aggregations = _b.aggregations, attributeMetadata = _b.attributeMetadata;
                        return [4 /*yield*/, dispatch('loadAvailableFiltersFrom', { aggregations: aggregations, attributeMetadata: attributeMetadata, category: category })];
                    case 2:
                        _c.sent();
                        return [2 /*return*/];
                }
            });
        });
    },
    loadAvailableFiltersFrom: function (_a, _b) {
        var commit = _a.commit, getters = _a.getters, dispatch = _a.dispatch;
        var aggregations = _b.aggregations, attributeMetadata = _b.attributeMetadata, category = _b.category, _c = _b.filters, filters = _c === void 0 ? {} : _c;
        return __awaiter(this, void 0, void 0, function () {
            var aggregationFilters, currentCategory, categoryMappedFilters, resultFilters, filtersKeys;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (!config__WEBPACK_IMPORTED_MODULE_8__.entities.attribute.loadByAttributeMetadata) return [3 /*break*/, 2];
                        return [4 /*yield*/, dispatch('attribute/loadCategoryAttributes', { attributeMetadata: attributeMetadata }, { root: true })];
                    case 1:
                        _d.sent();
                        _d.label = 2;
                    case 2:
                        aggregationFilters = getters.getAvailableFiltersFrom(aggregations);
                        currentCategory = category || getters.getCurrentCategory;
                        categoryMappedFilters = getters.getFiltersMap[currentCategory.id];
                        resultFilters = aggregationFilters;
                        filtersKeys = Object.keys(filters);
                        if (categoryMappedFilters && filtersKeys.length) {
                            resultFilters = Object.assign(Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_13__["default"])(categoryMappedFilters), Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_13__["default"])(Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_12__["default"])(aggregationFilters, filtersKeys)));
                        }
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_SET_CATEGORY_FILTERS"], { category: category, filters: resultFilters });
                        return [2 /*return*/];
                }
            });
        });
    },
    switchSearchFilters: function (_a, filterVariants) {
        var dispatch = _a.dispatch;
        if (filterVariants === void 0) { filterVariants = []; }
        return __awaiter(this, void 0, void 0, function () {
            var currentQuery;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        currentQuery = _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_4__["router"].currentRoute[config__WEBPACK_IMPORTED_MODULE_8__["products"].routerFiltersSource];
                        filterVariants.forEach(function (filterVariant) {
                            currentQuery = Object(_helpers_filterHelpers__WEBPACK_IMPORTED_MODULE_7__["changeFilterQuery"])({ currentQuery: currentQuery, filterVariant: filterVariant });
                        });
                        return [4 /*yield*/, dispatch('changeRouterFilterParameters', currentQuery)];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    },
    resetSearchFilters: function (_a) {
        var dispatch = _a.dispatch;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, dispatch('changeRouterFilterParameters', {})];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    },
    changeRouterFilterParameters: function (context, query) {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_4__["router"].push((_a = {}, _a[config__WEBPACK_IMPORTED_MODULE_8__["products"].routerFiltersSource] = query, _a));
                return [2 /*return*/];
            });
        });
    },
    loadCategoryBreadcrumbs: function (_a, _b) {
        var dispatch = _a.dispatch, getters = _a.getters;
        var category = _b.category, currentRouteName = _b.currentRouteName, _c = _b.omitCurrent, omitCurrent = _c === void 0 ? false : _c;
        return __awaiter(this, void 0, void 0, function () {
            var categoryHierarchyIds, categoryFilters, categories, sorted, _loop_1, categoryHierarchyIds_1, categoryHierarchyIds_1_1, id;
            var e_3, _d;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        if (!category)
                            return [2 /*return*/];
                        categoryHierarchyIds = category.parent_ids ? __spread(category.parent_ids, [category.id]) : Object(_helpers_categoryHelpers__WEBPACK_IMPORTED_MODULE_9__["_prepareCategoryPathIds"])(category) // getters.getCategoriesHierarchyMap.find(categoryMapping => categoryMapping.includes(category.id))
                        ;
                        categoryFilters = Object.assign({ 'id': categoryHierarchyIds }, Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_13__["default"])(config__WEBPACK_IMPORTED_MODULE_8__.entities.category.breadcrumbFilterFields));
                        return [4 /*yield*/, dispatch('loadCategories', { filters: categoryFilters, reloadAll: Object.keys(config__WEBPACK_IMPORTED_MODULE_8__.entities.category.breadcrumbFilterFields).length > 0 })];
                    case 1:
                        categories = _e.sent();
                        sorted = [];
                        _loop_1 = function (id) {
                            var index = categories.findIndex(function (cat) { return cat.id.toString() === id; });
                            if (index >= 0 && (!omitCurrent || categories[index].id !== category.id)) {
                                sorted.push(categories[index]);
                            }
                        };
                        try {
                            for (categoryHierarchyIds_1 = __values(categoryHierarchyIds), categoryHierarchyIds_1_1 = categoryHierarchyIds_1.next(); !categoryHierarchyIds_1_1.done; categoryHierarchyIds_1_1 = categoryHierarchyIds_1.next()) {
                                id = categoryHierarchyIds_1_1.value;
                                _loop_1(id);
                            }
                        }
                        catch (e_3_1) { e_3 = { error: e_3_1 }; }
                        finally {
                            try {
                                if (categoryHierarchyIds_1_1 && !categoryHierarchyIds_1_1.done && (_d = categoryHierarchyIds_1.return)) _d.call(categoryHierarchyIds_1);
                            }
                            finally { if (e_3) throw e_3.error; }
                        }
                        return [4 /*yield*/, dispatch('breadcrumbs/set', { current: currentRouteName, routes: Object(_vue_storefront_core_modules_breadcrumbs_helpers__WEBPACK_IMPORTED_MODULE_14__["parseCategoryPath"])(sorted) }, { root: true })];
                    case 2:
                        _e.sent();
                        return [2 /*return*/, sorted];
                }
            });
        });
    },
    /**
     * Load categories within specified parent
     * @param {Object} commit promise
     * @param {Object} parent parent category
     */
    fetchMenuCategories: function (_a, _b) {
        var commit = _a.commit, getters = _a.getters, dispatch = _a.dispatch;
        var _c = _b.parent, parent = _c === void 0 ? null : _c, _d = _b.key, key = _d === void 0 ? null : _d, _e = _b.value, value = _e === void 0 ? null : _e, _f = _b.level, level = _f === void 0 ? null : _f, _g = _b.onlyActive, onlyActive = _g === void 0 ? true : _g, _h = _b.onlyNotEmpty, onlyNotEmpty = _h === void 0 ? false : _h, _j = _b.size, size = _j === void 0 ? 4000 : _j, _k = _b.start, start = _k === void 0 ? 0 : _k, _l = _b.sort, sort = _l === void 0 ? 'position:asc' : _l, _m = _b.includeFields, includeFields = _m === void 0 ? (config__WEBPACK_IMPORTED_MODULE_8__.entities.optimize ? config__WEBPACK_IMPORTED_MODULE_8__.entities.category.includeFields : null) : _m, _o = _b.excludeFields, excludeFields = _o === void 0 ? (config__WEBPACK_IMPORTED_MODULE_8__.entities.optimize ? config__WEBPACK_IMPORTED_MODULE_8__.entities.category.excludeFields : null) : _o, _p = _b.skipCache, skipCache = _p === void 0 ? false : _p;
        return __awaiter(this, void 0, void 0, function () {
            var _q, searchQuery, isCustomizedQuery, shouldLoadCategories, resp, list;
            return __generator(this, function (_r) {
                switch (_r.label) {
                    case 0:
                        _q = Object(_vue_storefront_core_modules_catalog_helpers_createCategoryListQuery__WEBPACK_IMPORTED_MODULE_15__["default"])({ parent: parent, level: level, key: key, value: value, onlyActive: onlyActive, onlyNotEmpty: onlyNotEmpty }), searchQuery = _q.searchQuery, isCustomizedQuery = _q.isCustomizedQuery;
                        shouldLoadCategories = skipCache || isCustomizedQuery;
                        if (!shouldLoadCategories) return [3 /*break*/, 3];
                        return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_2__["quickSearchByQuery"])({ entityType: 'category', query: searchQuery, sort: sort, size: size, start: start, includeFields: includeFields, excludeFields: excludeFields })];
                    case 1:
                        resp = _r.sent();
                        return [4 /*yield*/, dispatch('registerCategoryMapping', { categories: resp.items })];
                    case 2:
                        _r.sent();
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_MENU_CATEGORIES"], { items: resp.items });
                        return [2 /*return*/, resp];
                    case 3:
                        list = { items: getters.getMenuCategories, total: getters.getMenuCategories.length };
                        return [2 /*return*/, list];
                }
            });
        });
    },
    registerCategoryMapping: function (_a, _b) {
        var dispatch = _a.dispatch;
        var categories = _b.categories;
        return __awaiter(this, void 0, void 0, function () {
            var categories_2, categories_2_1, category, e_4_1;
            var e_4, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        _d.trys.push([0, 5, 6, 7]);
                        categories_2 = __values(categories), categories_2_1 = categories_2.next();
                        _d.label = 1;
                    case 1:
                        if (!!categories_2_1.done) return [3 /*break*/, 4];
                        category = categories_2_1.value;
                        if (!category.url_path) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('url/registerMapping', {
                                url: Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_5__["localizedDispatcherRoute"])(category.url_path),
                                routeData: Object(_vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_16__["transformCategoryUrl"])(category)
                            }, { root: true })];
                    case 2:
                        _d.sent();
                        _d.label = 3;
                    case 3:
                        categories_2_1 = categories_2.next();
                        return [3 /*break*/, 1];
                    case 4: return [3 /*break*/, 7];
                    case 5:
                        e_4_1 = _d.sent();
                        e_4 = { error: e_4_1 };
                        return [3 /*break*/, 7];
                    case 6:
                        try {
                            if (categories_2_1 && !categories_2_1.done && (_c = categories_2.return)) _c.call(categories_2);
                        }
                        finally { if (e_4) throw e_4.error; }
                        return [7 /*endfinally*/];
                    case 7: return [2 /*return*/];
                }
            });
        });
    } }, __webpack_require__(/*! ./deprecatedActions */ "./core/modules/catalog-next/store/category/deprecatedActions.ts").default);
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/catalog-next/store/category/deprecatedActions.ts":
/*!***********************************************************************!*\
  !*** ./core/modules/catalog-next/store/category/deprecatedActions.ts ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/search */ "./core/modules/catalog/helpers/search.ts");
/* harmony import */ var lodash_es_omit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es/omit */ "./node_modules/lodash-es/omit.js");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};




var configureProductAsync = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers */ "./core/modules/catalog/helpers/index.ts").configureProductAsync;
var actions = {
    /**
     * Calculates products taxes
     * Registers URLs
     * Configures products
     */
    processCategoryProducts: function (_a, _b) {
        var dispatch = _a.dispatch, rootState = _a.rootState;
        var _c = _b === void 0 ? {} : _b, _d = _c.products, products = _d === void 0 ? [] : _d, _e = _c.filters, filters = _e === void 0 ? {} : _e;
        return __awaiter(this, void 0, void 0, function () {
            var configuredProducts;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        dispatch('registerCategoryProductsMapping', products); // we don't need to wait for this
                        return [4 /*yield*/, dispatch('configureProducts', { products: products, filters: filters })];
                    case 1:
                        configuredProducts = _f.sent();
                        return [2 /*return*/, dispatch('tax/calculateTaxes', { products: configuredProducts }, { root: true })];
                }
            });
        });
    },
    /**
     * Configure configurable products to have first available options selected
     * so they can be added to cart/wishlist/compare without manual configuring
     */
    configureProducts: function (_a, _b) {
        var rootState = _a.rootState;
        var _c = _b === void 0 ? {} : _b, _d = _c.products, products = _d === void 0 ? [] : _d, _e = _c.filters, filters = _e === void 0 ? {} : _e, _f = _c.populateRequestCacheTags, populateRequestCacheTags = _f === void 0 ? config__WEBPACK_IMPORTED_MODULE_3__.server.useOutputCacheTagging : _f;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_g) {
                return [2 /*return*/, products.map(function (product) {
                        product = Object.assign({}, Object(_vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_1__["preConfigureProduct"])({ product: product, populateRequestCacheTags: populateRequestCacheTags }));
                        var configuredProductVariant = configureProductAsync({ rootState: rootState, state: { current_configuration: {} } }, { product: product, configuration: filters, selectDefaultVariant: false, fallbackToDefaultWhenNoAvailable: true, setProductErorrs: false });
                        return Object.assign(product, Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_2__["default"])(configuredProductVariant, ['visibility']));
                    })];
            });
        });
    },
    registerCategoryProductsMapping: function (_a, products) {
        var dispatch = _a.dispatch;
        if (products === void 0) { products = []; }
        return __awaiter(this, void 0, void 0, function () {
            var _b, storeCode, appendStoreCode;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _b = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])(), storeCode = _b.storeCode, appendStoreCode = _b.appendStoreCode;
                        return [4 /*yield*/, Promise.all(products.map(function (product) {
                                var url_path = product.url_path, sku = product.sku, slug = product.slug, type_id = product.type_id;
                                return dispatch('url/registerMapping', {
                                    url: Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["localizedDispatcherRoute"])(url_path, storeCode),
                                    routeData: {
                                        params: {
                                            parentSku: product.parentSku || product.sku,
                                            slug: slug
                                        },
                                        'name': Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["localizedDispatcherRouteName"])(type_id + '-product', storeCode, appendStoreCode)
                                    }
                                }, { root: true });
                            }))];
                    case 1:
                        _c.sent();
                        return [2 /*return*/];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/catalog-next/store/category/getters.ts":
/*!*************************************************************!*\
  !*** ./core/modules/catalog-next/store/category/getters.ts ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./core/modules/catalog-next/store/category/index.ts");
/* harmony import */ var _helpers_categoryHelpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helpers/categoryHelpers */ "./core/modules/catalog-next/helpers/categoryHelpers.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers */ "./core/modules/catalog/helpers/index.ts");
/* harmony import */ var lodash_es_trim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash-es/trim */ "./node_modules/lodash-es/trim.js");
/* harmony import */ var lodash_es_toString__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash-es/toString */ "./node_modules/lodash-es/toString.js");
/* harmony import */ var lodash_es_forEach__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash-es/forEach */ "./node_modules/lodash-es/forEach.js");
/* harmony import */ var lodash_es_get__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash-es/get */ "./node_modules/lodash-es/get.js");
/* harmony import */ var _helpers_filterHelpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../helpers/filterHelpers */ "./core/modules/catalog-next/helpers/filterHelpers.ts");
/* harmony import */ var _vue_storefront_core_modules_breadcrumbs_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @vue-storefront/core/modules/breadcrumbs/helpers */ "./core/modules/breadcrumbs/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash-es/cloneDeep */ "./node_modules/lodash-es/cloneDeep.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};













function mapCategoryProducts(productsFromState, productsData) {
    return productsFromState.map(function (prodState) {
        if (typeof prodState === 'string') {
            var product = productsData.find(function (prodData) { return prodData.sku === prodState; });
            return Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_11__["default"])(product);
        }
        return prodState;
    });
}
var getters = {
    getCategories: function (state) { return Object.values(state.categoriesMap); },
    getCategoriesMap: function (state) { return state.categoriesMap; },
    getNotFoundCategoryIds: function (state) { return state.notFoundCategoryIds; },
    getCategoryProducts: function (state) { return mapCategoryProducts(state.products, _index__WEBPACK_IMPORTED_MODULE_0__["nonReactiveState"].products); },
    getCategoryFrom: function (state, getters) { return function (path) {
        if (path === void 0) { path = ''; }
        return getters.getCategories.find(function (category) { return Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_10__["removeStoreCodeFromRoute"])(path).replace(/^(\/)/gm, '') === category.url_path; });
    }; },
    getCategoryByParams: function (state, getters, rootState) { return function (params) {
        if (params === void 0) { params = {}; }
        return getters.getCategories.find(function (category) {
            var valueCheck = [];
            var searchOptions = Object(_helpers_categoryHelpers__WEBPACK_IMPORTED_MODULE_1__["getSearchOptionsFromRouteParams"])(params);
            Object(lodash_es_forEach__WEBPACK_IMPORTED_MODULE_6__["default"])(searchOptions, function (value, key) { return valueCheck.push(category[key] && category[key] === (category[key].constructor)(value)); });
            return valueCheck.filter(function (check) { return check === true; }).length === Object.keys(searchOptions).length;
        }) || {};
    }; },
    getCurrentCategory: function (state, getters, rootState, rootGetters) {
        return getters.getCategoryByParams(__assign({}, rootGetters['url/getCurrentRoute'].params));
    },
    getAvailableFiltersFrom: function (state, getters, rootState) { return function (aggregations) {
        var e_1, _a;
        var filters = {};
        if (aggregations) { // populate filter aggregates
            var _loop_1 = function (attrToFilter) {
                var e_2, _a, e_3, _b;
                var filterOptions = [];
                var uniqueFilterValues = new Set();
                if (attrToFilter !== 'price') {
                    if (aggregations['agg_terms_' + attrToFilter]) {
                        var buckets = aggregations['agg_terms_' + attrToFilter].buckets;
                        if (aggregations['agg_terms_' + attrToFilter + '_options']) {
                            buckets = buckets.concat(aggregations['agg_terms_' + attrToFilter + '_options'].buckets);
                        }
                        try {
                            for (var buckets_1 = (e_2 = void 0, __values(buckets)), buckets_1_1 = buckets_1.next(); !buckets_1_1.done; buckets_1_1 = buckets_1.next()) {
                                var option = buckets_1_1.value;
                                uniqueFilterValues.add(Object(lodash_es_toString__WEBPACK_IMPORTED_MODULE_5__["default"])(option.key));
                            }
                        }
                        catch (e_2_1) { e_2 = { error: e_2_1 }; }
                        finally {
                            try {
                                if (buckets_1_1 && !buckets_1_1.done && (_a = buckets_1.return)) _a.call(buckets_1);
                            }
                            finally { if (e_2) throw e_2.error; }
                        }
                    }
                    uniqueFilterValues.forEach(function (key) {
                        var label = Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_3__["optionLabel"])(rootState.attribute, { attributeKey: attrToFilter, optionId: key });
                        if (Object(lodash_es_trim__WEBPACK_IMPORTED_MODULE_4__["default"])(label) !== '') { // is there any situation when label could be empty and we should still support it?
                            filterOptions.push({
                                id: key,
                                label: label,
                                type: attrToFilter
                            });
                        }
                    });
                    filters[attrToFilter] = filterOptions.sort(_helpers_categoryHelpers__WEBPACK_IMPORTED_MODULE_1__["compareByLabel"]);
                }
                else { // special case is range filter for prices
                    var currencySign = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_10__["currentStoreView"])().i18n.currencySign;
                    if (aggregations['agg_range_' + attrToFilter]) {
                        var index = 0;
                        var count = aggregations['agg_range_' + attrToFilter].buckets.length;
                        try {
                            for (var _c = (e_3 = void 0, __values(aggregations['agg_range_' + attrToFilter].buckets)), _d = _c.next(); !_d.done; _d = _c.next()) {
                                var option = _d.value;
                                filterOptions.push({
                                    id: option.key,
                                    type: attrToFilter,
                                    from: option.from,
                                    to: option.to,
                                    label: (index === 0 || (index === count - 1)) ? (option.to ? '< ' + currencySign + option.to : '> ' + currencySign + option.from) : currencySign + option.from + (option.to ? ' - ' + option.to : ''),
                                    single: true
                                });
                                index++;
                            }
                        }
                        catch (e_3_1) { e_3 = { error: e_3_1 }; }
                        finally {
                            try {
                                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                            }
                            finally { if (e_3) throw e_3.error; }
                        }
                        filters[attrToFilter] = filterOptions;
                    }
                }
            };
            try {
                for (var _b = __values(config__WEBPACK_IMPORTED_MODULE_2__["products"].defaultFilters), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var attrToFilter = _c.value;
                    _loop_1(attrToFilter);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            // Add sort to available filters
            var variants_1 = [];
            Object.keys(config__WEBPACK_IMPORTED_MODULE_2__["products"].sortByAttributes).map(function (label) {
                variants_1.push({
                    label: label,
                    id: config__WEBPACK_IMPORTED_MODULE_2__["products"].sortByAttributes[label],
                    type: 'sort'
                });
            });
            filters['sort'] = variants_1;
        }
        return filters;
    }; },
    getFiltersMap: function (state) { return state.filtersMap; },
    getAvailableFilters: function (state, getters) {
        var categoryId = Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_7__["default"])(getters.getCurrentCategory, 'id', null);
        return state.filtersMap[categoryId] || {};
    },
    getCurrentFiltersFrom: function (state, getters, rootState) { return function (filters, categoryFilters) {
        var currentQuery = filters || rootState.route[config__WEBPACK_IMPORTED_MODULE_2__["products"].routerFiltersSource];
        var availableFilters = categoryFilters || getters.getAvailableFilters;
        return Object(_helpers_filterHelpers__WEBPACK_IMPORTED_MODULE_8__["getFiltersFromQuery"])({ availableFilters: availableFilters, filtersQuery: currentQuery });
    }; },
    getCurrentSearchQuery: function (state, getters, rootState) { return getters.getCurrentFiltersFrom(rootState.route[config__WEBPACK_IMPORTED_MODULE_2__["products"].routerFiltersSource]); },
    getCurrentFilters: function (state, getters) { return getters.getCurrentSearchQuery.filters; },
    hasActiveFilters: function (state, getters) { return !!Object.keys(getters.getCurrentFilters).length; },
    getSystemFilterNames: function () { return config__WEBPACK_IMPORTED_MODULE_2__["products"].systemFilterNames; },
    getBreadcrumbs: function (state, getters) { return getters.getBreadcrumbsFor(getters.getCurrentCategory); },
    getBreadcrumbsFor: function (state, getters) { return function (category) {
        if (!category)
            return [];
        var categoryHierarchyIds = Object(_helpers_categoryHelpers__WEBPACK_IMPORTED_MODULE_1__["_prepareCategoryPathIds"])(category);
        var resultCategoryList = categoryHierarchyIds.map(function (categoryId) {
            return getters.getCategoriesMap[categoryId];
        }).filter(function (c) { return !!c; });
        return Object(_vue_storefront_core_modules_breadcrumbs_helpers__WEBPACK_IMPORTED_MODULE_9__["parseCategoryPath"])(resultCategoryList);
    }; },
    getCategorySearchProductsStats: function (state) { return state.searchProductsStats || {}; },
    getCategoryProductsTotal: function (state, getters) {
        var total = getters.getCategorySearchProductsStats.total;
        var totalValue = typeof total === 'object' ? total.value : total;
        return totalValue || 0;
    },
    getMenuCategories: function (state, getters, rootState, rootGetters) {
        return state.menuCategories || rootGetters['category/getCategories'];
    }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/catalog-next/store/category/index.ts":
/*!***********************************************************!*\
  !*** ./core/modules/catalog-next/store/category/index.ts ***!
  \***********************************************************/
/*! exports provided: categoryModule, nonReactiveState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "categoryModule", function() { return categoryModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nonReactiveState", function() { return nonReactiveState; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/catalog-next/store/category/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/catalog-next/store/category/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/catalog-next/store/category/mutations.ts");



var categoryModule = {
    namespaced: true,
    state: {
        categoriesMap: {},
        notFoundCategoryIds: [],
        filtersMap: {},
        products: [],
        searchProductsStats: {},
        menuCategories: []
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};
var nonReactiveState = {
    products: []
};


/***/ }),

/***/ "./core/modules/catalog-next/store/category/mutation-types.ts":
/*!********************************************************************!*\
  !*** ./core/modules/catalog-next/store/category/mutation-types.ts ***!
  \********************************************************************/
/*! exports provided: SN_CATEGORY, CATEGORY_SET_PRODUCTS, CATEGORY_ADD_PRODUCTS, CATEGORY_SET_SEARCH_PRODUCTS_STATS, CATEGORY_ADD_CATEGORIES, CATEGORY_ADD_CATEGORY, CATEGORY_SET_CATEGORY_FILTERS, CATEGORY_ADD_NOT_FOUND_CATEGORY_IDS, CATEGORY_UPD_MENU_CATEGORIES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_CATEGORY", function() { return SN_CATEGORY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_SET_PRODUCTS", function() { return CATEGORY_SET_PRODUCTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_ADD_PRODUCTS", function() { return CATEGORY_ADD_PRODUCTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_SET_SEARCH_PRODUCTS_STATS", function() { return CATEGORY_SET_SEARCH_PRODUCTS_STATS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_ADD_CATEGORIES", function() { return CATEGORY_ADD_CATEGORIES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_ADD_CATEGORY", function() { return CATEGORY_ADD_CATEGORY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_SET_CATEGORY_FILTERS", function() { return CATEGORY_SET_CATEGORY_FILTERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_ADD_NOT_FOUND_CATEGORY_IDS", function() { return CATEGORY_ADD_NOT_FOUND_CATEGORY_IDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_UPD_MENU_CATEGORIES", function() { return CATEGORY_UPD_MENU_CATEGORIES; });
var SN_CATEGORY = 'category';
var CATEGORY_SET_PRODUCTS = SN_CATEGORY + "/SET_PRODUCTS";
var CATEGORY_ADD_PRODUCTS = SN_CATEGORY + "/ADD_PRODUCTS";
var CATEGORY_SET_SEARCH_PRODUCTS_STATS = SN_CATEGORY + "/SET_SEARCH_PRODUCTS_STATS";
var CATEGORY_ADD_CATEGORIES = SN_CATEGORY + "/ADD_CATEGORIES";
var CATEGORY_ADD_CATEGORY = SN_CATEGORY + "/ADD_CATEGORY";
var CATEGORY_SET_CATEGORY_FILTERS = SN_CATEGORY + "/SET_CATEGORY_FILTERS";
var CATEGORY_ADD_NOT_FOUND_CATEGORY_IDS = SN_CATEGORY + "/ADD_NOT_FOUND_CATEGORY_IDS";
var CATEGORY_UPD_MENU_CATEGORIES = SN_CATEGORY + "/UPD_MENU_CATEGORIES";


/***/ }),

/***/ "./core/modules/catalog-next/store/category/mutations.ts":
/*!***************************************************************!*\
  !*** ./core/modules/catalog-next/store/category/mutations.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ "./core/modules/catalog-next/store/category/index.ts");
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog-next/store/category/mutation-types.ts");
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash-es/cloneDeep */ "./node_modules/lodash-es/cloneDeep.js");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_slugifyCategories__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/slugifyCategories */ "./core/modules/catalog/helpers/slugifyCategories.ts");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var _a;






var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_3__["CATEGORY_SET_PRODUCTS"]] = function (state, products) {
        if (products === void 0) { products = []; }
        _index__WEBPACK_IMPORTED_MODULE_1__["nonReactiveState"].products = Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_4__["default"])(products);
        state.products = _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"] ? products : products.map(function (prod) { return prod.sku; });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_3__["CATEGORY_ADD_PRODUCTS"]] = function (state, products) {
        var _a, _b;
        if (products === void 0) { products = []; }
        (_a = _index__WEBPACK_IMPORTED_MODULE_1__["nonReactiveState"].products).push.apply(_a, __spread(Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_4__["default"])(products)));
        (_b = state.products).push.apply(_b, __spread((_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"] ? products : products.map(function (prod) { return prod.sku; }))));
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_3__["CATEGORY_ADD_CATEGORY"]] = function (state, category) {
        if (category) {
            vue__WEBPACK_IMPORTED_MODULE_2__["default"].set(state.categoriesMap, category.id, category);
        }
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_3__["CATEGORY_ADD_CATEGORIES"]] = function (state, categories) {
        if (categories === void 0) { categories = []; }
        if (categories.length) {
            var newCategoriesEntry_1 = {};
            categories.forEach(function (category) {
                newCategoriesEntry_1[category.id] = category;
            });
            state.categoriesMap = Object.assign({}, state.categoriesMap, newCategoriesEntry_1);
        }
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_3__["CATEGORY_ADD_NOT_FOUND_CATEGORY_IDS"]] = function (state, categoryIds) {
        if (categoryIds === void 0) { categoryIds = []; }
        state.notFoundCategoryIds = __spread(state.notFoundCategoryIds, categoryIds);
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_3__["CATEGORY_SET_CATEGORY_FILTERS"]] = function (state, _a) {
        var category = _a.category, filters = _a.filters;
        vue__WEBPACK_IMPORTED_MODULE_2__["default"].set(state.filtersMap, category.id, filters);
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_3__["CATEGORY_SET_SEARCH_PRODUCTS_STATS"]] = function (state, stats) {
        if (stats === void 0) { stats = {}; }
        state.searchProductsStats = stats;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_3__["CATEGORY_UPD_MENU_CATEGORIES"]] = function (state, categories) {
        var e_1, _a;
        var _loop_1 = function (category) {
            category = Object(_vue_storefront_core_modules_catalog_helpers_slugifyCategories__WEBPACK_IMPORTED_MODULE_5__["default"])(category);
            var catExist = state.menuCategories.find(function (existingCat) { return existingCat.id === category.id; });
            if (!catExist) {
                state.menuCategories.push(category);
            }
        };
        try {
            for (var _b = __values(categories.items), _c = _b.next(); !_c.done; _c = _b.next()) {
                var category = _c.value;
                _loop_1(category);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        state.menuCategories.sort(function (catA, catB) {
            if (catA.position && catB.position) {
                if (catA.position < catB.position)
                    return -1;
                if (catA.position > catB.position)
                    return 1;
            }
            return 0;
        });
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/catalog/events.ts":
/*!****************************************!*\
  !*** ./core/modules/catalog/events.ts ***!
  \****************************************/
/*! exports provided: productAfterPriceupdate, filterChangedProduct, productAfterCustomoptions, productAfterBundleoptions, onUserPricesRefreshed, checkParentRedirection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "productAfterPriceupdate", function() { return productAfterPriceupdate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "filterChangedProduct", function() { return filterChangedProduct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "productAfterCustomoptions", function() { return productAfterCustomoptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "productAfterBundleoptions", function() { return productAfterBundleoptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onUserPricesRefreshed", function() { return onUserPricesRefreshed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkParentRedirection", function() { return checkParentRedirection; });
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _store_product_mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store/product/mutation-types */ "./core/modules/catalog/store/product/mutation-types.ts");
/* harmony import */ var lodash_es_omit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es/omit */ "./node_modules/lodash-es/omit.js");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/i18n */ "./core/i18n/index.ts");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _vue_storefront_core_lib_async_data_loader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/lib/async-data-loader */ "./core/lib/async-data-loader.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_modules_url_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/modules/url/helpers */ "./core/modules/url/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @vue-storefront/core/app */ "./core/app.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};












// Listeners moved from Product.js
var prefixMutation = function (mutationKey) { return "product/" + mutationKey; };
var productAfterPriceupdate = function (product, store) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0:
                if (!(store.getters['product/getCurrentProduct'] && product.sku === store.getters['product/getCurrentProduct'].sku)) return [3 /*break*/, 2];
                // join selected variant object to the store
                return [4 /*yield*/, store.dispatch('product/setCurrent', Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_2__["default"])(product, ['name']))];
            case 1:
                // join selected variant object to the store
                _a.sent();
                _a.label = 2;
            case 2: return [2 /*return*/];
        }
    });
}); };
var filterChangedProduct = function (filterOption, store, router) { return __awaiter(void 0, void 0, void 0, function () {
    var currentProductConfiguration, changedConfig, searchQuery, _a, newProductVariant, configuration, selectedVariant, options, product_option, routeProp, newProductConfiguration;
    var _b, _c;
    return __generator(this, function (_d) {
        switch (_d.label) {
            case 0:
                _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_0__["default"].$emit('product-before-configure', { filterOption: filterOption, configuration: store.getters['product/getCurrentProductConfiguration'] });
                currentProductConfiguration = store.getters['product/getCurrentProductConfiguration'];
                changedConfig = Object.assign({}, currentProductConfiguration, (_b = {}, _b[filterOption.attribute_code] = filterOption, _b));
                searchQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_5__["SearchQuery"]();
                searchQuery = searchQuery.applyFilter({ key: 'sku', value: { 'eq': store.getters['product/getCurrentProduct'].parentSku } });
                return [4 /*yield*/, store.dispatch('product/findProducts', {
                        query: searchQuery,
                        size: 1,
                        configuration: changedConfig,
                        options: {
                            fallbackToDefaultWhenNoAvailable: false,
                            setProductErrors: true,
                            assignProductConfiguration: true,
                            separateSelectedVariant: true
                        }
                    }, { root: true })];
            case 1:
                _a = __read.apply(void 0, [(_d.sent()).items, 1]), newProductVariant = _a[0];
                configuration = newProductVariant.configuration, selectedVariant = newProductVariant.selectedVariant, options = newProductVariant.options, product_option = newProductVariant.product_option;
                if (config__WEBPACK_IMPORTED_MODULE_3__.products.setFirstVarianAsDefaultInURL && selectedVariant) {
                    routeProp = config__WEBPACK_IMPORTED_MODULE_3__.seo.useUrlDispatcher ? 'params' : 'query';
                    router.push((_c = {}, _c[routeProp] = { childSku: selectedVariant.sku }, _c));
                }
                if (!selectedVariant) return [3 /*break*/, 3];
                newProductConfiguration = Object.assign({}, store.getters['product/getCurrentProduct'], selectedVariant, { configuration: configuration, options: options, product_option: product_option });
                return [4 /*yield*/, store.dispatch('product/setCurrent', newProductConfiguration)];
            case 2:
                _d.sent();
                _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_0__["default"].$emit('product-after-configure', { product: newProductConfiguration, configuration: configuration, selectedVariant: selectedVariant });
                return [2 /*return*/, selectedVariant];
            case 3:
                store.dispatch('notification/spawnNotification', {
                    type: 'warning',
                    message: _vue_storefront_core_i18n__WEBPACK_IMPORTED_MODULE_4__["default"].t('No such configuration for the product. Please do choose another combination of attributes.'),
                    action1: { label: _vue_storefront_core_i18n__WEBPACK_IMPORTED_MODULE_4__["default"].t('OK') }
                });
                _d.label = 4;
            case 4: return [2 /*return*/];
        }
    });
}); };
var productAfterCustomoptions = function (payload, store) { return __awaiter(void 0, void 0, void 0, function () {
    var priceDelta, priceDeltaInclTax, optionValues;
    return __generator(this, function (_a) {
        priceDelta = 0;
        priceDeltaInclTax = 0;
        optionValues = Object.values(payload.optionValues);
        optionValues.forEach(function (optionValue) {
            if (optionValue && parseInt(optionValue.option_type_id) > 0) {
                if (optionValue.price_type === 'fixed' && optionValue.price !== 0) {
                    priceDelta += optionValue.price;
                    priceDeltaInclTax += optionValue.price;
                }
                if (optionValue.price_type === 'percent' && optionValue.price !== 0) {
                    priceDelta += ((optionValue.price / 100) * store.getters['product/getCurrentProduct'].price);
                    priceDeltaInclTax += ((optionValue.price / 100) * store.getters['product/getCurrentProduct'].price_incl_tax);
                }
            }
        });
        store.commit(prefixMutation(_store_product_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_CURRENT"]), Object.assign({}, store.getters['product/getCurrentProduct'], {
            price: store.getters['product/getCurrentProduct'].price + priceDelta,
            price_incl_tax: store.getters['product/getCurrentProduct'].price_incl_tax + priceDeltaInclTax
        }), { root: true });
        return [2 /*return*/];
    });
}); };
var productAfterBundleoptions = function (payload, store) { return __awaiter(void 0, void 0, void 0, function () {
    var priceDelta, priceDeltaInclTax, optionValues;
    return __generator(this, function (_a) {
        priceDelta = 0;
        priceDeltaInclTax = 0;
        optionValues = Object.values(payload.optionValues);
        optionValues.forEach(function (optionValue) {
            if (optionValue && optionValue.value && optionValue.product && parseInt(optionValue.qty) >= 0) {
                priceDelta += optionValue.value.product.price * parseInt(optionValue.qty);
                priceDeltaInclTax += optionValue.value.product.price_incl_tax * parseInt(optionValue.qty);
            }
        });
        if (priceDelta > 0) {
            store.commit(prefixMutation(_store_product_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_CURRENT"]), Object.assign({}, store.getters['product/getCurrentProduct'], {
                price: priceDelta,
                price_incl_tax: priceDeltaInclTax
            }), { root: true });
        }
        return [2 /*return*/];
    });
}); };
var onUserPricesRefreshed = function (store, router) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0:
                if (!router.currentRoute.params.parentSku) return [3 /*break*/, 3];
                return [4 /*yield*/, store.dispatch('product/reset', {}, { root: true })];
            case 1:
                _a.sent();
                return [4 /*yield*/, store.dispatch('product/single', {
                        options: {
                            sku: router.currentRoute.params.parentSku,
                            childSku: router && router.currentRoute.params && router.currentRoute.params.childSku ? router.currentRoute.params.childSku : null
                        },
                        skipCache: true
                    }, { root: true })];
            case 2:
                _a.sent();
                _a.label = 3;
            case 3: return [2 /*return*/];
        }
    });
}); };
var checkParentRedirection = function (currentProduct, parentProduct) {
    if (parentProduct && parentProduct.id !== currentProduct.id && config__WEBPACK_IMPORTED_MODULE_3__.products.preventConfigurableChildrenDirectAccess) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_9__["Logger"].log('Redirecting to parent, configurable product', parentProduct.sku)();
        parentProduct.parentSku = parentProduct.sku;
        parentProduct.sku = currentProduct.sku;
        var parentUrl_1 = Object(_vue_storefront_core_modules_url_helpers__WEBPACK_IMPORTED_MODULE_8__["formatProductLink"])(parentProduct, Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_7__["currentStoreView"])().storeCode);
        if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_10__["isServer"]) {
            _vue_storefront_core_lib_async_data_loader__WEBPACK_IMPORTED_MODULE_6__["AsyncDataLoader"].push({
                execute: function (_a) {
                    var context = _a.context;
                    return __awaiter(void 0, void 0, void 0, function () {
                        return __generator(this, function (_b) {
                            if (context && !context.url.includes(parentUrl_1)) {
                                context.server.response.redirect(301, parentUrl_1);
                            }
                            return [2 /*return*/];
                        });
                    });
                }
            });
        }
        else {
            _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_11__["router"].replace(parentUrl_1);
        }
    }
};


/***/ }),

/***/ "./core/modules/catalog/helpers/associatedProducts/buildQuery.ts":
/*!***********************************************************************!*\
  !*** ./core/modules/catalog/helpers/associatedProducts/buildQuery.ts ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return buildQuery; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_1__);


/**
 * Creates simple query that will search product by skus list
 */
function buildQuery(skus) {
    var productsQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_1__["SearchQuery"]();
    productsQuery = productsQuery
        .applyFilter({ key: 'sku', value: { 'in': skus } })
        .applyFilter({ key: 'status', value: { 'in': [1] } });
    if (config__WEBPACK_IMPORTED_MODULE_0__.products.listOutOfStockProducts === false) {
        productsQuery = productsQuery.applyFilter({ key: 'stock.is_in_stock', value: { 'eq': true } });
    }
    return productsQuery;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/associatedProducts/getAttributesFromMetadata.ts":
/*!**************************************************************************************!*\
  !*** ./core/modules/catalog/helpers/associatedProducts/getAttributesFromMetadata.ts ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getAttributesFromMetadata; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

/**
 * Set associated attributes by meta data of product links
 */
function getAttributesFromMetadata(context, products) {
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            if (config__WEBPACK_IMPORTED_MODULE_0__.entities.attribute.loadByAttributeMetadata) {
                context.dispatch('attribute/loadProductAttributes', { products: products, merge: true }, { root: true });
            }
            return [2 /*return*/];
        });
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/associatedProducts/getBundleProductPrice.ts":
/*!**********************************************************************************!*\
  !*** ./core/modules/catalog/helpers/associatedProducts/getBundleProductPrice.ts ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getBundleProductPrice; });
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_bundleOptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/bundleOptions */ "./core/modules/catalog/helpers/bundleOptions.ts");

function getBundleProductPrice(product) {
    var selectedBundleOptions = Object(_vue_storefront_core_modules_catalog_helpers_bundleOptions__WEBPACK_IMPORTED_MODULE_0__["getSelectedBundleOptions"])(product);
    var _a = Object(_vue_storefront_core_modules_catalog_helpers_bundleOptions__WEBPACK_IMPORTED_MODULE_0__["getBundleOptionPrice"])(Object(_vue_storefront_core_modules_catalog_helpers_bundleOptions__WEBPACK_IMPORTED_MODULE_0__["getBundleOptionsValues"])(selectedBundleOptions, product.bundle_options)), price = _a.price, priceInclTax = _a.priceInclTax;
    return { price: price, priceInclTax: priceInclTax };
}


/***/ }),

/***/ "./core/modules/catalog/helpers/associatedProducts/getGroupedProductPrice.ts":
/*!***********************************************************************************!*\
  !*** ./core/modules/catalog/helpers/associatedProducts/getGroupedProductPrice.ts ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getGroupedProductPrice; });
/* harmony import */ var _getProductLinkPrice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getProductLinkPrice */ "./core/modules/catalog/helpers/associatedProducts/getProductLinkPrice.ts");

function getGroupedProductPrice(product) {
    var productLinks = (product.product_links || []);
    return Object(_getProductLinkPrice__WEBPACK_IMPORTED_MODULE_0__["getProductLinkPrice"])(productLinks);
}


/***/ }),

/***/ "./core/modules/catalog/helpers/associatedProducts/getProductLinkPrice.ts":
/*!********************************************************************************!*\
  !*** ./core/modules/catalog/helpers/associatedProducts/getProductLinkPrice.ts ***!
  \********************************************************************************/
/*! exports provided: calculateProductLinkPrice, getProductLinkPrice */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateProductLinkPrice", function() { return calculateProductLinkPrice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getProductLinkPrice", function() { return getProductLinkPrice; });
var calculateProductLinkPrice = function (_a) {
    var _b = _a.price, price = _b === void 0 ? 1 : _b, _c = _a.priceInclTax, priceInclTax = _c === void 0 ? 1 : _c, _d = _a.qty, qty = _d === void 0 ? 1 : _d;
    var product = {
        price: 0,
        priceInclTax: 0
    };
    var qtyNum = typeof qty === 'string' ? parseInt(qty) : qty;
    if (qtyNum >= 0) {
        product.price += price * qtyNum;
        product.priceInclTax += priceInclTax * qtyNum;
    }
    return product;
};
var getProductLinkPrice = function (productLinks) { return productLinks
    .map(function (productLink) {
    var product = productLink.product || { price: 1, price_incl_tax: 1, priceInclTax: 1 };
    return calculateProductLinkPrice({
        price: product.price,
        priceInclTax: product.price_incl_tax || product.priceInclTax,
        qty: productLink.qty
    });
})
    .reduce(function (priceDelta, currentPriceDelta) { return ({
    price: currentPriceDelta.price + priceDelta.price,
    priceInclTax: currentPriceDelta.priceInclTax + priceDelta.priceInclTax
}); }, { price: 0, priceInclTax: 0 }); };


/***/ }),

/***/ "./core/modules/catalog/helpers/associatedProducts/index.ts":
/*!******************************************************************!*\
  !*** ./core/modules/catalog/helpers/associatedProducts/index.ts ***!
  \******************************************************************/
/*! exports provided: setGroupedProduct, setBundleProducts, getAttributesFromMetadata */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _setGroupedProduct__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setGroupedProduct */ "./core/modules/catalog/helpers/associatedProducts/setGroupedProduct.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "setGroupedProduct", function() { return _setGroupedProduct__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _setBundleProducts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./setBundleProducts */ "./core/modules/catalog/helpers/associatedProducts/setBundleProducts.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "setBundleProducts", function() { return _setBundleProducts__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _getAttributesFromMetadata__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getAttributesFromMetadata */ "./core/modules/catalog/helpers/associatedProducts/getAttributesFromMetadata.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getAttributesFromMetadata", function() { return _getAttributesFromMetadata__WEBPACK_IMPORTED_MODULE_2__["default"]; });







/***/ }),

/***/ "./core/modules/catalog/helpers/associatedProducts/setBundleProducts.ts":
/*!******************************************************************************!*\
  !*** ./core/modules/catalog/helpers/associatedProducts/setBundleProducts.ts ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setBundleProducts; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _buildQuery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buildQuery */ "./core/modules/catalog/helpers/associatedProducts/buildQuery.ts");
/* harmony import */ var _setProductLink__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./setProductLink */ "./core/modules/catalog/helpers/associatedProducts/setProductLink.ts");
/* harmony import */ var _getBundleProductPrice__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getBundleProductPrice */ "./core/modules/catalog/helpers/associatedProducts/getBundleProductPrice.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./.. */ "./core/modules/catalog/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/data-resolver/ProductService */ "./core/data-resolver/ProductService.ts");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../../hooks */ "./core/modules/catalog/hooks/index.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};







/**
 * This function prepare all product_links for bundle products.
 * It fetches products by sku.
 */
function setBundleProducts(product, _a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.includeFields, includeFields = _c === void 0 ? null : _c, _d = _b.excludeFields, excludeFields = _d === void 0 ? null : _d;
    return __awaiter(this, void 0, void 0, function () {
        var skus, query, items, _e, _f, bundleOption, _loop_1, _g, _h, productLink, _j, price, priceInclTax;
        var e_1, _k, e_2, _l;
        return __generator(this, function (_m) {
            switch (_m.label) {
                case 0:
                    if (!(Object(___WEBPACK_IMPORTED_MODULE_4__["isBundleProduct"])(product) && product.bundle_options)) return [3 /*break*/, 2];
                    skus = product.bundle_options
                        .map(function (bundleOption) { return bundleOption.product_links.map(function (productLink) { return productLink.sku; }); })
                        .reduce(function (acc, next) { return acc.concat(next); }, []);
                    query = Object(_buildQuery__WEBPACK_IMPORTED_MODULE_1__["default"])(skus);
                    return [4 /*yield*/, _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_5__["ProductService"].getProducts({
                            query: query,
                            excludeFields: excludeFields,
                            includeFields: includeFields,
                            options: {
                                prefetchGroupProducts: false,
                                fallbackToDefaultWhenNoAvailable: false,
                                setProductErrors: false,
                                setConfigurableProductOptions: false,
                                assignProductConfiguration: false,
                                separateSelectedVariant: false
                            }
                        })];
                case 1:
                    items = (_m.sent()).items;
                    _hooks__WEBPACK_IMPORTED_MODULE_6__["catalogHooksExecutors"].afterSetBundleProducts(items);
                    try {
                        for (_e = __values(product.bundle_options), _f = _e.next(); !_f.done; _f = _e.next()) {
                            bundleOption = _f.value;
                            _loop_1 = function (productLink) {
                                var associatedProduct = items.find(function (associatedProduct) { return associatedProduct.sku === productLink.sku; });
                                Object(_setProductLink__WEBPACK_IMPORTED_MODULE_2__["default"])(productLink, associatedProduct);
                            };
                            try {
                                for (_g = (e_2 = void 0, __values(bundleOption.product_links)), _h = _g.next(); !_h.done; _h = _g.next()) {
                                    productLink = _h.value;
                                    _loop_1(productLink);
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (_h && !_h.done && (_l = _g.return)) _l.call(_g);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (_f && !_f.done && (_k = _e.return)) _k.call(_e);
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                    if (config__WEBPACK_IMPORTED_MODULE_0__.products.calculateBundlePriceByOptions) {
                        _j = Object(_getBundleProductPrice__WEBPACK_IMPORTED_MODULE_3__["default"])(product), price = _j.price, priceInclTax = _j.priceInclTax;
                        product.price = price;
                        product.priceInclTax = priceInclTax;
                        product.price_incl_tax = priceInclTax;
                    }
                    _m.label = 2;
                case 2: return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/associatedProducts/setGroupedProduct.ts":
/*!******************************************************************************!*\
  !*** ./core/modules/catalog/helpers/associatedProducts/setGroupedProduct.ts ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setGroupedProduct; });
/* harmony import */ var _buildQuery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buildQuery */ "./core/modules/catalog/helpers/associatedProducts/buildQuery.ts");
/* harmony import */ var _setProductLink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./setProductLink */ "./core/modules/catalog/helpers/associatedProducts/setProductLink.ts");
/* harmony import */ var _getGroupedProductPrice__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getGroupedProductPrice */ "./core/modules/catalog/helpers/associatedProducts/getGroupedProductPrice.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./.. */ "./core/modules/catalog/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/data-resolver/ProductService */ "./core/data-resolver/ProductService.ts");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../../hooks */ "./core/modules/catalog/hooks/index.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};






/**
 * This function prepare all product_links for grouped products.
 * It fetches products by sku.
 */
function setGroupedProduct(product, _a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.includeFields, includeFields = _c === void 0 ? null : _c, _d = _b.excludeFields, excludeFields = _d === void 0 ? null : _d;
    return __awaiter(this, void 0, void 0, function () {
        var productLinks, skus, query, items, _loop_1, productLinks_1, productLinks_1_1, productLink, _e, price, priceInclTax;
        var e_1, _f;
        return __generator(this, function (_g) {
            switch (_g.label) {
                case 0:
                    if (!(Object(___WEBPACK_IMPORTED_MODULE_3__["isGroupedProduct"])(product) && product.product_links)) return [3 /*break*/, 2];
                    productLinks = product.product_links.filter(function (productLink) { return productLink.link_type === 'associated' && productLink.linked_product_type === 'simple'; });
                    skus = productLinks.map(function (productLink) { return productLink.linked_product_sku; });
                    query = Object(_buildQuery__WEBPACK_IMPORTED_MODULE_0__["default"])(skus);
                    return [4 /*yield*/, _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_4__["ProductService"].getProducts({
                            query: query,
                            excludeFields: excludeFields,
                            includeFields: includeFields,
                            options: {
                                prefetchGroupProducts: false,
                                fallbackToDefaultWhenNoAvailable: false,
                                setProductErrors: false,
                                setConfigurableProductOptions: false,
                                assignProductConfiguration: false,
                                separateSelectedVariant: false
                            }
                        })];
                case 1:
                    items = (_g.sent()).items;
                    _hooks__WEBPACK_IMPORTED_MODULE_5__["catalogHooksExecutors"].afterSetGroupedProduct(items);
                    _loop_1 = function (productLink) {
                        var associatedProduct = items.find(function (associatedProduct) { return associatedProduct.sku === productLink.linked_product_sku; });
                        Object(_setProductLink__WEBPACK_IMPORTED_MODULE_1__["default"])(productLink, associatedProduct);
                    };
                    try {
                        for (productLinks_1 = __values(productLinks), productLinks_1_1 = productLinks_1.next(); !productLinks_1_1.done; productLinks_1_1 = productLinks_1.next()) {
                            productLink = productLinks_1_1.value;
                            _loop_1(productLink);
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (productLinks_1_1 && !productLinks_1_1.done && (_f = productLinks_1.return)) _f.call(productLinks_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                    _e = Object(_getGroupedProductPrice__WEBPACK_IMPORTED_MODULE_2__["default"])(product), price = _e.price, priceInclTax = _e.priceInclTax;
                    product.price = price;
                    product.priceInclTax = priceInclTax;
                    product.price_incl_tax = priceInclTax;
                    _g.label = 2;
                case 2: return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/associatedProducts/setProductLink.ts":
/*!***************************************************************************!*\
  !*** ./core/modules/catalog/helpers/associatedProducts/setProductLink.ts ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setProductLink; });
/* harmony import */ var _prepare__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../prepare */ "./core/modules/catalog/helpers/prepare/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


/**
 * Set associated product to product link object
 */
function setProductLink(productLink, associatedProduct) {
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            if (associatedProduct) {
                productLink.product = Object(_prepare__WEBPACK_IMPORTED_MODULE_0__["preConfigureProduct"])(associatedProduct);
                productLink.product.qty = Number(productLink.qty || '1');
            }
            else {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('Product not found', productLink.linked_product_sku || productLink.sku)();
            }
            return [2 /*return*/];
        });
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/bundleOptions.ts":
/*!*******************************************************!*\
  !*** ./core/modules/catalog/helpers/bundleOptions.ts ***!
  \*******************************************************/
/*! exports provided: getBundleOptionPrice, getBundleOptionsValues, getSelectedBundleOptions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBundleOptionPrice", function() { return getBundleOptionPrice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBundleOptionsValues", function() { return getBundleOptionsValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSelectedBundleOptions", function() { return getSelectedBundleOptions; });
/* harmony import */ var _associatedProducts_getProductLinkPrice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./associatedProducts/getProductLinkPrice */ "./core/modules/catalog/helpers/associatedProducts/getProductLinkPrice.ts");
/* harmony import */ var lodash_es_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/get */ "./node_modules/lodash-es/get.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


var getBundleOptionPrice = function (bundleOptionValues) { return Object(_associatedProducts_getProductLinkPrice__WEBPACK_IMPORTED_MODULE_0__["getProductLinkPrice"])(bundleOptionValues); };
var getBundleOptionsValues = function (selectedBundleOptions, allBundeOptions) { return selectedBundleOptions
    .map(function (selectedBundleOption) {
    var _a = (allBundeOptions.find(function (bundleOption) { return bundleOption.option_id === selectedBundleOption.option_id; }) || {}).product_links, productLinks = _a === void 0 ? [] : _a;
    var value = productLinks.find(function (productLink) { return String(productLink.id) === String(selectedBundleOption.option_selections[0]); });
    return __assign(__assign({}, value), { qty: selectedBundleOption.option_qty });
}); };
var getSelectedBundleOptions = function (product) {
    var selectedBundleOptions = Object.values(Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__["default"])(product, 'product_option.extension_attributes.bundle_options', {}));
    if (selectedBundleOptions.length) {
        return selectedBundleOptions;
    }
    // get default options
    var allBundeOptions = product.bundle_options || [];
    return allBundeOptions.map(function (bundleOption) {
        var productLinks = bundleOption.product_links || [];
        var defaultLink = productLinks.find(function (productLink) { return productLink.is_default; }) || productLinks[0];
        var qty = (typeof defaultLink.qty === 'string' ? parseInt(defaultLink.qty) : defaultLink.qty) || 1;
        return {
            option_id: bundleOption.option_id,
            option_qty: qty,
            option_selections: [Number(defaultLink.id)]
        };
    });
};


/***/ }),

/***/ "./core/modules/catalog/helpers/configure/configureProductAsync.ts":
/*!*************************************************************************!*\
  !*** ./core/modules/catalog/helpers/configure/configureProductAsync.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return configureProductAsync; });
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/cloneDeep */ "./node_modules/lodash/cloneDeep.js");
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _variant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../variant */ "./core/modules/catalog/helpers/variant/index.ts");
/* harmony import */ var _productOptions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../productOptions */ "./core/modules/catalog/helpers/productOptions/index.ts");
/* harmony import */ var _stock__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stock */ "./core/modules/catalog/helpers/stock/index.ts");
/* harmony import */ var _associatedProducts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../associatedProducts */ "./core/modules/catalog/helpers/associatedProducts/index.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./.. */ "./core/modules/catalog/helpers/index.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};






/**
 * This function configure product for 'configurable', 'bundle' or 'group' product.
 */
function configureProductAsync(_a) {
    var product = _a.product, configuration = _a.configuration, attribute = _a.attribute, _b = _a.options, _c = _b === void 0 ? {} : _b, _d = _c.fallbackToDefaultWhenNoAvailable, fallbackToDefaultWhenNoAvailable = _d === void 0 ? true : _d, _e = _c.setProductErrors, setProductErrors = _e === void 0 ? true : _e, _f = _c.setConfigurableProductOptions, setConfigurableProductOptions = _f === void 0 ? true : _f, _g = _c.filterUnavailableVariants, filterUnavailableVariants = _g === void 0 ? false : _g, _h = _c.assignProductConfiguration, assignProductConfiguration = _h === void 0 ? false : _h, _j = _c.separateSelectedVariant, separateSelectedVariant = _j === void 0 ? false : _j, _k = _c.prefetchGroupProducts, prefetchGroupProducts = _k === void 0 ? false : _k, _l = _a.stockItems, stockItems = _l === void 0 ? [] : _l, excludeFields = _a.excludeFields, includeFields = _a.includeFields;
    return __awaiter(this, void 0, void 0, function () {
        var _configuration, selectedVariant, configuredProduct;
        return __generator(this, function (_m) {
            switch (_m.label) {
                case 0:
                    // it not only filter variants but also it apply stock object
                    if (filterUnavailableVariants) {
                        Object(_stock__WEBPACK_IMPORTED_MODULE_3__["filterOutUnavailableVariants"])(product, stockItems);
                    }
                    if (!prefetchGroupProducts) return [3 /*break*/, 3];
                    return [4 /*yield*/, Object(_associatedProducts__WEBPACK_IMPORTED_MODULE_4__["setGroupedProduct"])(product, { includeFields: includeFields, excludeFields: excludeFields })];
                case 1:
                    _m.sent();
                    return [4 /*yield*/, Object(_associatedProducts__WEBPACK_IMPORTED_MODULE_4__["setBundleProducts"])(product, { includeFields: includeFields, excludeFields: excludeFields })];
                case 2:
                    _m.sent();
                    _m.label = 3;
                case 3:
                    // setup configurable product
                    if (Object(___WEBPACK_IMPORTED_MODULE_5__["hasConfigurableChildren"])(product)) {
                        _configuration = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default()(configuration);
                        selectedVariant = Object(_variant__WEBPACK_IMPORTED_MODULE_1__["getSelectedVariant"])(product, _configuration, { fallbackToDefaultWhenNoAvailable: fallbackToDefaultWhenNoAvailable });
                        if (selectedVariant) {
                            // if there is selectedVariant we want to get configuration based on that variant
                            _configuration = Object(_productOptions__WEBPACK_IMPORTED_MODULE_2__["getProductConfiguration"])({ product: product, selectedVariant: selectedVariant, attribute: attribute });
                            // here we add product_options with selected configuration. It only applies to configurable product
                            Object(_productOptions__WEBPACK_IMPORTED_MODULE_2__["setProductConfigurableOptions"])({ product: product, configuration: _configuration, setConfigurableProductOptions: setConfigurableProductOptions }); // set the custom options
                            product.is_configured = true;
                            // remove props from variant that we don't want need to override in base product
                            selectedVariant = Object(_variant__WEBPACK_IMPORTED_MODULE_1__["omitSelectedVariantFields"])(selectedVariant);
                        }
                        if (!selectedVariant && setProductErrors) { // can not find variant anyway, even the default one
                            product.errors.variants = 'No available product variants';
                        }
                        configuredProduct = __assign(__assign({}, product), (assignProductConfiguration ? { configuration: _configuration } : {}) // we can need configuration as separate object
                        );
                        return [2 /*return*/, __assign(__assign({}, configuredProduct), (separateSelectedVariant ? { selectedVariant: selectedVariant } : selectedVariant) // we can need selected variant as separate object
                            )];
                    }
                    return [2 /*return*/, product];
            }
        });
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/configure/configureProducts.ts":
/*!*********************************************************************!*\
  !*** ./core/modules/catalog/helpers/configure/configureProducts.ts ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return configureProducts; });
/* harmony import */ var _stock__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../stock */ "./core/modules/catalog/helpers/stock/index.ts");
/* harmony import */ var _transformMetadataToAttributes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../transformMetadataToAttributes */ "./core/modules/catalog/helpers/transformMetadataToAttributes.ts");
/* harmony import */ var _configureProductAsync__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./configureProductAsync */ "./core/modules/catalog/helpers/configure/configureProductAsync.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};



/**
 * Prepare all data needed to make product configuration.
 * After common data is setup this function map through every product and configure it based on 'configuration' object
 */
function configureProducts(_a) {
    var products = _a.products, _b = _a.attributes_metadata, attributes_metadata = _b === void 0 ? [] : _b, _c = _a.configuration, configuration = _c === void 0 ? {} : _c, _d = _a.options, options = _d === void 0 ? {} : _d, _e = _a.excludeFields, excludeFields = _e === void 0 ? null : _e, _f = _a.includeFields, includeFields = _f === void 0 ? null : _f;
    return __awaiter(this, void 0, void 0, function () {
        var productAttributesMetadata, attribute, attributeStateFormat, stockItems, configuredProducts;
        var _this = this;
        return __generator(this, function (_g) {
            switch (_g.label) {
                case 0:
                    productAttributesMetadata = products.map(function (product) { return product.attributes_metadata || []; });
                    attribute = Object(_transformMetadataToAttributes__WEBPACK_IMPORTED_MODULE_1__["default"])(__spread([attributes_metadata], productAttributesMetadata));
                    attributeStateFormat = { list_by_code: attribute.attrHashByCode, list_by_id: attribute.attrHashById };
                    stockItems = [];
                    if (!options.filterUnavailableVariants) return [3 /*break*/, 2];
                    return [4 /*yield*/, Object(_stock__WEBPACK_IMPORTED_MODULE_0__["getStockItems"])(products)];
                case 1:
                    stockItems = _g.sent();
                    _g.label = 2;
                case 2: return [4 /*yield*/, Promise.all(products.map(function (product) { return __awaiter(_this, void 0, void 0, function () {
                        var configuredProduct;
                        return __generator(this, function (_a) {
                            switch (_a.label) {
                                case 0: return [4 /*yield*/, Object(_configureProductAsync__WEBPACK_IMPORTED_MODULE_2__["default"])({
                                        product: product,
                                        configuration: configuration,
                                        attribute: attributeStateFormat,
                                        options: options,
                                        stockItems: stockItems,
                                        excludeFields: excludeFields,
                                        includeFields: includeFields
                                    })];
                                case 1:
                                    configuredProduct = _a.sent();
                                    return [2 /*return*/, configuredProduct];
                            }
                        });
                    }); }))];
                case 3:
                    configuredProducts = _g.sent();
                    return [2 /*return*/, configuredProducts];
            }
        });
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/configure/index.ts":
/*!*********************************************************!*\
  !*** ./core/modules/catalog/helpers/configure/index.ts ***!
  \*********************************************************/
/*! exports provided: configureProducts */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _configureProducts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configureProducts */ "./core/modules/catalog/helpers/configure/configureProducts.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "configureProducts", function() { return _configureProducts__WEBPACK_IMPORTED_MODULE_0__["default"]; });





/***/ }),

/***/ "./core/modules/catalog/helpers/createAttributesListQuery.ts":
/*!*******************************************************************!*\
  !*** ./core/modules/catalog/helpers/createAttributesListQuery.ts ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);

var createAttributesListQuery = function (_a) {
    var filterValues = _a.filterValues, filterField = _a.filterField, onlyDefinedByUser = _a.onlyDefinedByUser, onlyVisible = _a.onlyVisible;
    var searchQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"]();
    if (filterValues) {
        searchQuery = searchQuery.applyFilter({ key: filterField, value: { 'in': filterValues } });
    }
    if (onlyDefinedByUser) {
        searchQuery = searchQuery.applyFilter({ key: 'is_user_defined', value: { 'in': [true] } });
    }
    if (onlyVisible) {
        searchQuery = searchQuery.applyFilter({ key: 'is_visible', value: { 'in': [true] } });
    }
    return searchQuery;
};
/* harmony default export */ __webpack_exports__["default"] = (createAttributesListQuery);


/***/ }),

/***/ "./core/modules/catalog/helpers/createCategoryListQuery.ts":
/*!*****************************************************************!*\
  !*** ./core/modules/catalog/helpers/createCategoryListQuery.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);



var createCategoryListQuery = function (_a) {
    var parent = _a.parent, level = _a.level, key = _a.key, value = _a.value, onlyActive = _a.onlyActive, onlyNotEmpty = _a.onlyNotEmpty;
    var isCustomizedQuery = false;
    var searchQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"]();
    if (parent) {
        searchQuery = searchQuery.applyFilter({ key: 'parent_id', value: { 'eq': typeof parent === 'object' ? parent.id : parent } });
        isCustomizedQuery = true;
    }
    if (level !== null) {
        searchQuery = searchQuery.applyFilter({ key: 'level', value: { 'eq': level } });
        if (level !== config__WEBPACK_IMPORTED_MODULE_2__.entities.category.categoriesDynamicPrefetchLevel && !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"]) {
            isCustomizedQuery = true;
        }
    }
    if (key !== null) {
        if (Array.isArray(value)) {
            searchQuery = searchQuery.applyFilter({ key: key, value: { 'in': value } });
        }
        else {
            searchQuery = searchQuery.applyFilter({ key: key, value: { 'eq': value } });
        }
        isCustomizedQuery = true;
    }
    if (onlyActive === true) {
        searchQuery = searchQuery.applyFilter({ key: 'is_active', value: { 'eq': true } });
    }
    if (onlyNotEmpty === true) {
        searchQuery = searchQuery.applyFilter({ key: 'product_count', value: { 'gt': 0 } });
        isCustomizedQuery = true;
    }
    return { searchQuery: searchQuery, isCustomizedQuery: isCustomizedQuery };
};
/* harmony default export */ __webpack_exports__["default"] = (createCategoryListQuery);


/***/ }),

/***/ "./core/modules/catalog/helpers/deprecatedHelpers.ts":
/*!***********************************************************!*\
  !*** ./core/modules/catalog/helpers/deprecatedHelpers.ts ***!
  \***********************************************************/
/*! exports provided: populateProductConfigurationAsync, configureProductAsync */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "populateProductConfigurationAsync", function() { return populateProductConfigurationAsync; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "configureProductAsync", function() { return configureProductAsync; });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var lodash_es_omit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es/omit */ "./node_modules/lodash-es/omit.js");
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _optionLabel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./optionLabel */ "./core/modules/catalog/helpers/optionLabel.ts");
/* harmony import */ var _productOptions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./productOptions */ "./core/modules/catalog/helpers/productOptions/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_7___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _variant__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./variant */ "./core/modules/catalog/helpers/variant/index.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ */ "./core/modules/catalog/helpers/index.ts");
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};










function populateProductConfigurationAsync(context, _a) {
    var e_1, _b;
    var product = _a.product, selectedVariant = _a.selectedVariant;
    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].warn('deprecated, will be not used from 1.12')();
    if (product.configurable_options) {
        var _loop_1 = function (option) {
            var attribute_code;
            var attribute_label = void 0;
            if (option.attribute_code) {
                attribute_code = option.attribute_code;
                attribute_label = option.label ? option.label : (option.frontend_label ? option.frontend_label : option.default_frontend_label);
            }
            else {
                if (option.attribute_id) {
                    var attr = context.rootState.attribute.list_by_id[option.attribute_id];
                    if (!attr) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error('Wrong attribute given in configurable_options - can not find by attribute_id', option)();
                        return "continue";
                    }
                    else {
                        attribute_code = attr.attribute_code;
                        attribute_label = attr.frontend_label ? attr.frontend_label : attr.default_frontend_label;
                    }
                }
                else {
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error('Wrong attribute given in configurable_options - no attribute_code / attribute_id', option)();
                }
            }
            var selectedOption = null;
            if (selectedVariant.custom_attributes) {
                selectedOption = selectedVariant.custom_attributes.find(function (a) {
                    return (a.attribute_code === attribute_code);
                });
            }
            else {
                selectedOption = {
                    attribute_code: attribute_code,
                    value: selectedVariant[attribute_code]
                };
            }
            if (option.values && option.values.length) {
                var selectedOptionMeta = option.values.find(function (ov) { return ov.value_index === selectedOption.value; });
                if (selectedOptionMeta) {
                    selectedOption.label = selectedOptionMeta.label ? selectedOptionMeta.label : selectedOptionMeta.default_label;
                    selectedOption.value_data = selectedOptionMeta.value_data;
                }
            }
            var confVal = {
                attribute_code: attribute_code,
                id: selectedOption.value,
                label: selectedOption.label ? selectedOption.label : /* if not set - find by attribute */ Object(_optionLabel__WEBPACK_IMPORTED_MODULE_5__["optionLabel"])(context.rootState.attribute, { attributeKey: selectedOption.attribute_code, searchBy: 'code', optionId: selectedOption.value })
            };
            vue__WEBPACK_IMPORTED_MODULE_0__["default"].set(context.state.current_configuration, attribute_code, confVal);
        };
        try {
            for (var _c = __values(product.configurable_options), _d = _c.next(); !_d.done; _d = _c.next()) {
                var option = _d.value;
                _loop_1(option);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
        Object(_productOptions__WEBPACK_IMPORTED_MODULE_6__["setProductConfigurableOptions"])({
            product: product,
            configuration: context.state.current_configuration,
            setConfigurableProductOptions: config__WEBPACK_IMPORTED_MODULE_7__.cart.setConfigurableProductOptions
        }); // set the custom options
    }
    return selectedVariant;
}
function configureProductAsync(context, _a) {
    var product = _a.product, configuration = _a.configuration, _b = _a.selectDefaultVariant, selectDefaultVariant = _b === void 0 ? true : _b, _c = _a.fallbackToDefaultWhenNoAvailable, fallbackToDefaultWhenNoAvailable = _c === void 0 ? true : _c, _d = _a.setProductErorrs, setProductErorrs = _d === void 0 ? false : _d;
    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].warn('deprecated, will be not used from 1.12')();
    // use current product if product wasn't passed
    if (product === null)
        product = context.getters.getCurrentProduct;
    var hasConfigurableChildren = (product.configurable_children && product.configurable_children.length > 0);
    if (hasConfigurableChildren) {
        // handle custom_attributes for easier comparing in the future
        product.configurable_children.forEach(function (child) {
            var customAttributesAsObject = {};
            if (child.custom_attributes) {
                child.custom_attributes.forEach(function (attr) {
                    customAttributesAsObject[attr.attribute_code] = attr.value;
                });
                // add values from custom_attributes in a different form
                Object.assign(child, customAttributesAsObject);
            }
        });
        // find selected variant
        var desiredProductFound = false;
        var selectedVariant = Object(_variant__WEBPACK_IMPORTED_MODULE_8__["findConfigurableVariant"])({ product: product, configuration: configuration, availabilityCheck: true });
        if (!selectedVariant) {
            if (fallbackToDefaultWhenNoAvailable) {
                selectedVariant = Object(_variant__WEBPACK_IMPORTED_MODULE_8__["findConfigurableVariant"])({ product: product, selectDefaultChildren: true, availabilityCheck: true }); // return first available child
                desiredProductFound = false;
            }
            else {
                desiredProductFound = false;
            }
        }
        else {
            desiredProductFound = true;
        }
        if (selectedVariant) {
            if (!desiredProductFound && selectDefaultVariant /** don't change the state when no selectDefaultVariant is set */) { // update the configuration
                populateProductConfigurationAsync(context, { product: product, selectedVariant: selectedVariant });
                configuration = context.state.current_configuration;
            }
            if (setProductErorrs) {
                product.errors = {}; // clear the product errors
            }
            product.is_configured = true;
            if (config__WEBPACK_IMPORTED_MODULE_7__.cart.setConfigurableProductOptions && !selectDefaultVariant && !(Object.keys(configuration).length === 1 && configuration.sku)) {
                // the condition above: if selectDefaultVariant - then "setCurrent" is seeting the configurable options; if configuration = { sku: '' } -> this is a special case when not configuring the product but just searching by sku
                Object(_productOptions__WEBPACK_IMPORTED_MODULE_6__["setProductConfigurableOptions"])({
                    product: product,
                    configuration: configuration,
                    setConfigurableProductOptions: config__WEBPACK_IMPORTED_MODULE_7__.cart.setConfigurableProductOptions
                }); // set the custom options
            } /* else {
              Logger.debug('Skipping configurable options setup', configuration)()
            } */
            var fieldsToOmit = ['name'];
            if (!Object(___WEBPACK_IMPORTED_MODULE_9__["hasImage"])(selectedVariant))
                fieldsToOmit.push('image');
            selectedVariant = Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_2__["default"])(selectedVariant, fieldsToOmit); // We need to send the parent SKU to the Magento cart sync but use the child SKU internally in this case
            // use chosen variant for the current product
            if (selectDefaultVariant) {
                context.dispatch('setCurrent', selectedVariant);
            }
            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_1__["default"].$emit('product-after-configure', { product: product, configuration: configuration, selectedVariant: selectedVariant });
        }
        if (!selectedVariant && setProductErorrs) { // can not find variant anyway, even the default one
            product.errors.variants = _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_3__["default"].t('No available product variants');
            if (selectDefaultVariant) {
                context.dispatch('setCurrent', product); // without the configuration
            }
        }
        return selectedVariant;
    }
    else {
        if (fallbackToDefaultWhenNoAvailable) {
            return product;
        }
        else {
            return null;
        }
    }
}


/***/ }),

/***/ "./core/modules/catalog/helpers/filterAttributes.ts":
/*!**********************************************************!*\
  !*** ./core/modules/catalog/helpers/filterAttributes.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return filterAttributes; });
function filterAttributes(_a) {
    var filterValues = _a.filterValues, filterField = _a.filterField, blacklist = _a.blacklist, idsList = _a.idsList, codesList = _a.codesList;
    return filterValues.filter(function (fv) {
        if (fv.indexOf('.') >= 0) {
            return false;
        }
        if (blacklist !== null && blacklist.includes(fv)) {
            return false;
        }
        if (filterField === 'attribute_id') {
            return (typeof idsList[fv] === 'undefined' || idsList[fv] === null);
        }
        if (filterField === 'attribute_code') {
            return (typeof codesList[fv] === 'undefined' || codesList[fv] === null);
        }
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/getProductGallery.ts":
/*!***********************************************************!*\
  !*** ./core/modules/catalog/helpers/getProductGallery.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getProductGallery; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ */ "./core/modules/catalog/helpers/index.ts");
/* harmony import */ var lodash_es_uniqBy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es/uniqBy */ "./node_modules/lodash-es/uniqBy.js");



function getProductGallery(product) {
    if (product.type_id === 'configurable' && product.hasOwnProperty('configurable_children')) {
        if (!config__WEBPACK_IMPORTED_MODULE_0__.products.gallery.mergeConfigurableChildren && product.is_configured) {
            return Object(___WEBPACK_IMPORTED_MODULE_1__["attributeImages"])(product);
        }
    }
    var productGallery = Object(lodash_es_uniqBy__WEBPACK_IMPORTED_MODULE_2__["default"])(Object(___WEBPACK_IMPORTED_MODULE_1__["configurableChildrenImages"])(product).concat(Object(___WEBPACK_IMPORTED_MODULE_1__["getMediaGallery"])(product)), 'src')
        .filter(function (f) { return f.src && f.src !== config__WEBPACK_IMPORTED_MODULE_0__.images.productPlaceholder; });
    return productGallery;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/index.ts":
/*!***********************************************!*\
  !*** ./core/modules/catalog/helpers/index.ts ***!
  \***********************************************/
/*! exports provided: populateProductConfigurationAsync, configureProductAsync, registerProductsMapping, getProductGallery, optionLabel, findConfigurableChildAsync, isOptionAvailableAsync, filterOutUnavailableVariants, doPlatformPricesSync, setConfigurableProductOptionsAsync, hasConfigurableChildren, isGroupedProduct, isBundleProduct, hasImage, childHasImage, setCustomProductOptionsAsync, setBundleProductOptionsAsync, getMediaGallery, attributeImages, configurableChildrenImages, setRequestCacheTags */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasConfigurableChildren", function() { return hasConfigurableChildren; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isGroupedProduct", function() { return isGroupedProduct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isBundleProduct", function() { return isBundleProduct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasImage", function() { return hasImage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "childHasImage", function() { return childHasImage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setCustomProductOptionsAsync", function() { return setCustomProductOptionsAsync; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setBundleProductOptionsAsync", function() { return setBundleProductOptionsAsync; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMediaGallery", function() { return getMediaGallery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attributeImages", function() { return attributeImages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "configurableChildrenImages", function() { return configurableChildrenImages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setRequestCacheTags", function() { return setRequestCacheTags; });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _optionLabel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./optionLabel */ "./core/modules/catalog/helpers/optionLabel.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "optionLabel", function() { return _optionLabel__WEBPACK_IMPORTED_MODULE_1__["optionLabel"]; });

/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _registerProductsMapping__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./registerProductsMapping */ "./core/modules/catalog/helpers/registerProductsMapping.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "registerProductsMapping", function() { return _registerProductsMapping__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _getProductGallery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getProductGallery */ "./core/modules/catalog/helpers/getProductGallery.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getProductGallery", function() { return _getProductGallery__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _variant__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./variant */ "./core/modules/catalog/helpers/variant/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "findConfigurableChildAsync", function() { return _variant__WEBPACK_IMPORTED_MODULE_6__["findConfigurableVariant"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isOptionAvailableAsync", function() { return _variant__WEBPACK_IMPORTED_MODULE_6__["isOptionAvailable"]; });

/* harmony import */ var _stock__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stock */ "./core/modules/catalog/helpers/stock/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "filterOutUnavailableVariants", function() { return _stock__WEBPACK_IMPORTED_MODULE_7__["filterOutUnavailableVariants"]; });

/* harmony import */ var _price__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./price */ "./core/modules/catalog/helpers/price/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "doPlatformPricesSync", function() { return _price__WEBPACK_IMPORTED_MODULE_8__["doPlatformPricesSync"]; });

/* harmony import */ var _productOptions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./productOptions */ "./core/modules/catalog/helpers/productOptions/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "setConfigurableProductOptionsAsync", function() { return _productOptions__WEBPACK_IMPORTED_MODULE_9__["setProductConfigurableOptions"]; });

/* harmony import */ var _deprecatedHelpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./deprecatedHelpers */ "./core/modules/catalog/helpers/deprecatedHelpers.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "populateProductConfigurationAsync", function() { return _deprecatedHelpers__WEBPACK_IMPORTED_MODULE_10__["populateProductConfigurationAsync"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "configureProductAsync", function() { return _deprecatedHelpers__WEBPACK_IMPORTED_MODULE_10__["configureProductAsync"]; });

var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};

// TODO: Remove this dependency









/** Below helpers are not used from 1.12 and can be removed to reduce bundle */


/***/

var hasConfigurableChildren = function (product) { return product && product.configurable_children && product.configurable_children.length; };
var isGroupedProduct = function (product) { return product.type_id === 'grouped'; };
var isBundleProduct = function (product) { return product.type_id === 'bundle'; };
/**
 * check if object have an image
 */
var hasImage = function (product) { return product && product.image && product.image !== 'no_selection'; };
/**
 * check if one of the configuableChildren has an image
 */
var childHasImage = function (children) {
    if (children === void 0) { children = []; }
    return children.some(hasImage);
};
function _prepareProductOption(product) {
    var product_option = {
        extension_attributes: {
            custom_options: [],
            configurable_item_options: [],
            bundle_options: []
        }
    };
    /* if (product.product_option) {
      product_option = product.product_option
    } */
    return product_option;
}
function setCustomProductOptionsAsync(context, _a) {
    var product = _a.product, customOptions = _a.customOptions;
    var productOption = _prepareProductOption(product);
    productOption.extension_attributes.custom_options = customOptions;
    return productOption;
}
function setBundleProductOptionsAsync(context, _a) {
    var product = _a.product, bundleOptions = _a.bundleOptions;
    var productOption = _prepareProductOption(product);
    productOption.extension_attributes.bundle_options = bundleOptions;
    return productOption;
}
/**
 * Get media Gallery images from product
 */
function getMediaGallery(product) {
    var e_1, _a;
    var mediaGallery = [];
    if (product.media_gallery) {
        try {
            for (var _b = __values(product.media_gallery), _c = _b.next(); !_c.done; _c = _b.next()) {
                var mediaItem = _c.value;
                if (mediaItem.image) {
                    var video = mediaItem.vid;
                    if (video && video.video_id) {
                        video.id = video.video_id;
                        delete video.video_id;
                    }
                    mediaGallery.push({
                        'src': Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["getThumbnailPath"])(mediaItem.image, config__WEBPACK_IMPORTED_MODULE_3__.products.gallery.width, config__WEBPACK_IMPORTED_MODULE_3__.products.gallery.height),
                        'loading': Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["getThumbnailPath"])(mediaItem.image, config__WEBPACK_IMPORTED_MODULE_3__.products.thumbnails.width, config__WEBPACK_IMPORTED_MODULE_3__.products.thumbnails.height),
                        'error': Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["getThumbnailPath"])(mediaItem.image, config__WEBPACK_IMPORTED_MODULE_3__.products.thumbnails.width, config__WEBPACK_IMPORTED_MODULE_3__.products.thumbnails.height),
                        'video': video
                    });
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    }
    return mediaGallery;
}
/**
 * Get images from configured attribute images
 */
function attributeImages(product) {
    var e_2, _a;
    var attributeImages = [];
    if (config__WEBPACK_IMPORTED_MODULE_3__.products.gallery.imageAttributes) {
        try {
            for (var _b = __values(config__WEBPACK_IMPORTED_MODULE_3__.products.gallery.imageAttributes), _c = _b.next(); !_c.done; _c = _b.next()) {
                var attribute = _c.value;
                if (product[attribute]) {
                    attributeImages.push({
                        'src': Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["getThumbnailPath"])(product[attribute], config__WEBPACK_IMPORTED_MODULE_3__.products.gallery.width, config__WEBPACK_IMPORTED_MODULE_3__.products.gallery.height),
                        'loading': Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["getThumbnailPath"])(product[attribute], 310, 300),
                        'error': Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["getThumbnailPath"])(product[attribute], 310, 300)
                    });
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
    }
    return attributeImages;
}
/**
 * Get configurable_children images from product if any
 * otherwise get attribute images
 */
function configurableChildrenImages(product) {
    var configurableChildrenImages = [];
    if (childHasImage(product.configurable_children)) {
        var configurableAttributes_1 = product.configurable_options.map(function (option) { return option.attribute_code; });
        configurableChildrenImages = product.configurable_children.map(function (child) {
            return ({
                'src': Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["getThumbnailPath"])((!hasImage(child) ? product.image : child.image), config__WEBPACK_IMPORTED_MODULE_3__.products.gallery.width, config__WEBPACK_IMPORTED_MODULE_3__.products.gallery.height),
                'loading': Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["getThumbnailPath"])(product.image, config__WEBPACK_IMPORTED_MODULE_3__.products.thumbnails.width, config__WEBPACK_IMPORTED_MODULE_3__.products.thumbnails.height),
                'id': configurableAttributes_1.reduce(function (result, attribute) {
                    result[attribute] = child[attribute];
                    return result;
                }, {})
            });
        });
    }
    else {
        configurableChildrenImages = attributeImages(product);
    }
    return configurableChildrenImages;
}
var setRequestCacheTags = function (_a) {
    var _b = _a.products, products = _b === void 0 ? [] : _b;
    if (vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags) {
        products.forEach(function (product) {
            vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags.add("P" + product.id);
        });
    }
};


/***/ }),

/***/ "./core/modules/catalog/helpers/optionLabel.ts":
/*!*****************************************************!*\
  !*** ./core/modules/catalog/helpers/optionLabel.ts ***!
  \*****************************************************/
/*! exports provided: optionLabel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "optionLabel", function() { return optionLabel; });
/* harmony import */ var lodash_es_toString__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash-es/toString */ "./node_modules/lodash-es/toString.js");
/* harmony import */ var lodash_es_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/get */ "./node_modules/lodash-es/get.js");
/**
 * Helper method for getting attribute name - TODO: to be moved to external/shared helper
 *
 * @param {String} attributeCode
 * @param {String} optionId - value to get label for
 */


function optionLabel(state, _a) {
    var attributeKey = _a.attributeKey, _b = _a.searchBy, searchBy = _b === void 0 ? 'code' : _b, optionId = _a.optionId;
    if (!state.labels) {
        state.labels = {};
    }
    // check cached attribute
    var attrCache = Object(lodash_es_get__WEBPACK_IMPORTED_MODULE_1__["default"])(state, "labels." + attributeKey + "." + optionId, null);
    if (attrCache) {
        return attrCache;
    }
    var attr = state['list_by_' + searchBy][attributeKey];
    if (attr) {
        var opt = attr.options.find(function (op) { return Object(lodash_es_toString__WEBPACK_IMPORTED_MODULE_0__["default"])(op.value) === Object(lodash_es_toString__WEBPACK_IMPORTED_MODULE_0__["default"])(optionId); });
        if (opt) {
            if (!state.labels[attributeKey]) {
                state.labels[attributeKey] = {};
            }
            state.labels[attributeKey][optionId] = opt.label;
            return opt ? opt.label : optionId;
        }
        else {
            return optionId;
        }
    }
    else {
        return optionId;
    }
}


/***/ }),

/***/ "./core/modules/catalog/helpers/prefetchCachedAttributes.ts":
/*!******************************************************************!*\
  !*** ./core/modules/catalog/helpers/prefetchCachedAttributes.ts ***!
  \******************************************************************/
/*! exports provided: prefetchCachedAttributes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prefetchCachedAttributes", function() { return prefetchCachedAttributes; });
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/store/entities */ "./core/lib/store/entities.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};



function prefetchCachedAttributes(filterField, filterValues) {
    return __awaiter(this, void 0, void 0, function () {
        var attrCollection_1, cachedAttributes;
        var _this = this;
        return __generator(this, function (_a) {
            if (!config__WEBPACK_IMPORTED_MODULE_2__.attributes || !config__WEBPACK_IMPORTED_MODULE_2__.attributes.disablePersistentAttributesCache) {
                attrCollection_1 = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_0__["StorageManager"].get('attributes');
                cachedAttributes = filterValues.map(function (filterValue) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {
                    return [2 /*return*/, attrCollection_1.getItem(Object(_vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_1__["entityKeyName"])(filterField, String(filterValue).toLowerCase()))];
                }); }); });
                return [2 /*return*/, Promise.all(cachedAttributes)];
            }
            return [2 /*return*/];
        });
    });
}



/***/ }),

/***/ "./core/modules/catalog/helpers/prepare/index.ts":
/*!*******************************************************!*\
  !*** ./core/modules/catalog/helpers/prepare/index.ts ***!
  \*******************************************************/
/*! exports provided: prepareProducts, preConfigureProduct */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prepareProducts", function() { return prepareProducts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preConfigureProduct", function() { return preConfigureProduct; });
/* harmony import */ var _setDefaultQty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setDefaultQty */ "./core/modules/catalog/helpers/prepare/setDefaultQty.ts");
/* harmony import */ var _setDefaultObjects__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./setDefaultObjects */ "./core/modules/catalog/helpers/prepare/setDefaultObjects.ts");
/* harmony import */ var _setParentSku__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./setParentSku */ "./core/modules/catalog/helpers/prepare/setParentSku.ts");
/* harmony import */ var _setParentId__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./setParentId */ "./core/modules/catalog/helpers/prepare/setParentId.ts");
/* harmony import */ var _setCustomAttributesForChild__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./setCustomAttributesForChild */ "./core/modules/catalog/helpers/prepare/setCustomAttributesForChild.ts");
/* harmony import */ var _setDefaultProductOptions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./setDefaultProductOptions */ "./core/modules/catalog/helpers/prepare/setDefaultProductOptions.ts");






/**
 * Apply base modification to product, after those modification we can store product in cache.
 */
function preConfigureProduct(product) {
    // base product modifications
    Object(_setDefaultQty__WEBPACK_IMPORTED_MODULE_0__["default"])(product);
    Object(_setDefaultObjects__WEBPACK_IMPORTED_MODULE_1__["default"])(product);
    Object(_setParentSku__WEBPACK_IMPORTED_MODULE_2__["default"])(product);
    Object(_setParentId__WEBPACK_IMPORTED_MODULE_3__["default"])(product);
    Object(_setCustomAttributesForChild__WEBPACK_IMPORTED_MODULE_4__["default"])(product);
    Object(_setDefaultProductOptions__WEBPACK_IMPORTED_MODULE_5__["default"])(product);
    return product;
}
/**
 * Apply base modification to product list, after those modification we can store product in cache.
 */
function prepareProducts(products) {
    var preparedProducts = products.map(preConfigureProduct);
    return preparedProducts;
}



/***/ }),

/***/ "./core/modules/catalog/helpers/prepare/setCustomAttributesForChild.ts":
/*!*****************************************************************************!*\
  !*** ./core/modules/catalog/helpers/prepare/setCustomAttributesForChild.ts ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setCustomAttributesForChild; });
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ */ "./core/modules/catalog/helpers/index.ts");

/**
 * Fill custom attributes for every configurable child
 */
function setCustomAttributesForChild(product) {
    if (!Object(___WEBPACK_IMPORTED_MODULE_0__["hasConfigurableChildren"])(product))
        return;
    // handle custom_attributes for easier comparing in the future
    product.configurable_children.forEach(function (child) {
        var customAttributesAsObject = {};
        if (child.custom_attributes) {
            child.custom_attributes.forEach(function (attr) {
                customAttributesAsObject[attr.attribute_code] = attr.value;
            });
            // add values from custom_attributes in a different form
            Object.assign(child, customAttributesAsObject);
        }
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/prepare/setDefaultObjects.ts":
/*!*******************************************************************!*\
  !*** ./core/modules/catalog/helpers/prepare/setDefaultObjects.ts ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setDefaultObjects; });
/**
 * Default object that are used in vsf
 */
function setDefaultObjects(product) {
    product.errors = {}; // this is an object to store validation result for custom options and others
    product.info = {};
}


/***/ }),

/***/ "./core/modules/catalog/helpers/prepare/setDefaultProductOptions.ts":
/*!**************************************************************************!*\
  !*** ./core/modules/catalog/helpers/prepare/setDefaultProductOptions.ts ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setDefaultProductOptions; });
/**
 * Init product_option, needed to next configuration step
 */
function setDefaultProductOptions(product) {
    if (product.product_option)
        return;
    product.product_option = {
        extension_attributes: {
            custom_options: [],
            configurable_item_options: [],
            bundle_options: []
        }
    };
}


/***/ }),

/***/ "./core/modules/catalog/helpers/prepare/setDefaultQty.ts":
/*!***************************************************************!*\
  !*** ./core/modules/catalog/helpers/prepare/setDefaultQty.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setDefaultQty; });
/**
 * set product quantity to 1
 */
function setDefaultQty(product) {
    if (!product.qty) {
        product.qty = 1;
    }
}


/***/ }),

/***/ "./core/modules/catalog/helpers/prepare/setParentId.ts":
/*!*************************************************************!*\
  !*** ./core/modules/catalog/helpers/prepare/setParentId.ts ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setParentId; });
/**
 * set parent id, this is needed, because in configuration process we will override id by configurable_children.id
 */
function setParentId(product) {
    if (!product.parentId) {
        product.parentId = product.id;
    }
}


/***/ }),

/***/ "./core/modules/catalog/helpers/prepare/setParentSku.ts":
/*!**************************************************************!*\
  !*** ./core/modules/catalog/helpers/prepare/setParentSku.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setParentSku; });
/**
 * set parent sku, this is needed, because in configuration process we will override sku by configurable_children.sku
 */
function setParentSku(product) {
    if (!product.parentSku) {
        product.parentSku = product.sku;
    }
}


/***/ }),

/***/ "./core/modules/catalog/helpers/price/doPlatformPricesSync.ts":
/*!********************************************************************!*\
  !*** ./core/modules/catalog/helpers/price/doPlatformPricesSync.ts ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return doPlatformPricesSync; });
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var lodash_es_flattenDeep__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es/flattenDeep */ "./node_modules/lodash-es/flattenDeep.js");
/* harmony import */ var lodash_es_union__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash-es/union */ "./node_modules/lodash-es/union.js");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/data-resolver/ProductService */ "./core/data-resolver/ProductService.ts");
/* harmony import */ var _syncProductPrice__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./syncProductPrice */ "./core/modules/catalog/helpers/price/syncProductPrice.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};








/**
 * Synchronize / override prices got from ElasticSearch with current one's from Magento2 or other platform backend
 * @param {Array} products
 */
function doPlatformPricesSync(products) {
    var _this = this;
    return new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {
        var products_1, products_1_1, product, _a, _b, sc, skus, childSkus, items, _loop_1, products_2, products_2_1, product, products_3, products_3_1, product;
        var e_1, _c, e_2, _d, e_3, _e, e_4, _f;
        return __generator(this, function (_g) {
            switch (_g.label) {
                case 0:
                    if (!config__WEBPACK_IMPORTED_MODULE_1__.products.alwaysSyncPlatformPricesOver) return [3 /*break*/, 4];
                    if (config__WEBPACK_IMPORTED_MODULE_1__.products.clearPricesBeforePlatformSync) {
                        try {
                            for (products_1 = __values(products), products_1_1 = products_1.next(); !products_1_1.done; products_1_1 = products_1.next()) { // clear out the prices as we need to sync them with Magento
                                product = products_1_1.value;
                                product.price_incl_tax = null;
                                product.original_price_incl_tax = null;
                                product.special_price_incl_tax = null;
                                product.special_price = null;
                                product.price = null;
                                product.original_price = null;
                                product.price_tax = null;
                                product.special_price_tax = null;
                                product.original_price_tax = null;
                                /** BEGIN @deprecated - inconsitent naming kept just for the backward compatibility */
                                product.priceInclTax = product.price_incl_tax;
                                product.priceTax = product.price_tax;
                                product.originalPrice = product.original_price;
                                product.originalPriceInclTax = product.original_price_incl_tax;
                                product.originalPriceTax = product.original_price_tax;
                                product.specialPriceInclTax = product.special_price_incl_tax;
                                product.specialPriceTax = product.special_price_tax;
                                /** END */
                                if (product.configurable_children) {
                                    try {
                                        for (_a = (e_2 = void 0, __values(product.configurable_children)), _b = _a.next(); !_b.done; _b = _a.next()) {
                                            sc = _b.value;
                                            sc.price_incl_tax = null;
                                            sc.original_price_incl_tax = null;
                                            sc.special_price_incl_tax = null;
                                            sc.special_price = null;
                                            sc.price = null;
                                            sc.original_price = null;
                                            sc.price_tax = null;
                                            sc.special_price_tax = null;
                                            sc.original_price_tax = null;
                                            /** BEGIN @deprecated - inconsitent naming kept just for the backward compatibility */
                                            sc.priceInclTax = sc.price_incl_tax;
                                            sc.priceTax = sc.price_tax;
                                            sc.originalPrice = sc.original_price;
                                            sc.originalPriceInclTax = sc.original_price_incl_tax;
                                            sc.originalPriceTax = sc.original_price_tax;
                                            sc.specialPriceInclTax = sc.special_price_incl_tax;
                                            sc.specialPriceTax = sc.special_price_tax;
                                            /** END */
                                        }
                                    }
                                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                                    finally {
                                        try {
                                            if (_b && !_b.done && (_d = _a.return)) _d.call(_a);
                                        }
                                        finally { if (e_2) throw e_2.error; }
                                    }
                                }
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (products_1_1 && !products_1_1.done && (_c = products_1.return)) _c.call(products_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                    }
                    skus = products.map(function (p) { return p.sku; });
                    if (products.length === 1) { // single product - download child data
                        childSkus = Object(lodash_es_flattenDeep__WEBPACK_IMPORTED_MODULE_2__["default"])(products.map(function (p) { return (p.configurable_children) ? p.configurable_children.map(function (cc) { return cc.sku; }) : null; }));
                        skus = Object(lodash_es_union__WEBPACK_IMPORTED_MODULE_3__["default"])(skus, childSkus);
                    }
                    if (!(skus && skus.length > 0)) return [3 /*break*/, 2];
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].log('Starting platform prices sync for', skus); // TODO: add option for syncro and non syncro return()
                    return [4 /*yield*/, _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_6__["ProductService"].getProductRenderList({
                            skus: skus,
                            isUserGroupedTaxActive: _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_5__["default"].getters['tax/getIsUserGroupedTaxActive'],
                            userGroupId: _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_5__["default"].getters['tax/getUserTaxGroupId'],
                            token: _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_5__["default"].getters['user/getToken']
                        })];
                case 1:
                    items = (_g.sent()).items;
                    if (items) {
                        _loop_1 = function (product) {
                            var e_5, _a;
                            var backProduct = items.find(function (itm) { return itm.id === product.id; });
                            if (backProduct) {
                                product.price_is_current = true; // in case we're syncing up the prices we should mark if we do have current or not
                                product.price_refreshed_at = new Date();
                                product = Object(_syncProductPrice__WEBPACK_IMPORTED_MODULE_7__["default"])(product, backProduct);
                                if (product.configurable_children) {
                                    var _loop_2 = function (configurableChild) {
                                        var backProductChild = items.find(function (itm) { return itm.id === configurableChild.id; });
                                        if (backProductChild) {
                                            configurableChild = Object(_syncProductPrice__WEBPACK_IMPORTED_MODULE_7__["default"])(configurableChild, backProductChild);
                                        }
                                    };
                                    try {
                                        for (var _b = (e_5 = void 0, __values(product.configurable_children)), _c = _b.next(); !_c.done; _c = _b.next()) {
                                            var configurableChild = _c.value;
                                            _loop_2(configurableChild);
                                        }
                                    }
                                    catch (e_5_1) { e_5 = { error: e_5_1 }; }
                                    finally {
                                        try {
                                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                                        }
                                        finally { if (e_5) throw e_5.error; }
                                    }
                                }
                                // TODO: shall we update local storage here for the main product?
                            }
                        };
                        try {
                            for (products_2 = __values(products), products_2_1 = products_2.next(); !products_2_1.done; products_2_1 = products_2.next()) {
                                product = products_2_1.value;
                                _loop_1(product);
                            }
                        }
                        catch (e_3_1) { e_3 = { error: e_3_1 }; }
                        finally {
                            try {
                                if (products_2_1 && !products_2_1.done && (_e = products_2.return)) _e.call(products_2);
                            }
                            finally { if (e_3) throw e_3.error; }
                        }
                    }
                    resolve(products);
                    return [3 /*break*/, 3];
                case 2:
                    resolve(products);
                    _g.label = 3;
                case 3:
                    if (!config__WEBPACK_IMPORTED_MODULE_1__.products.waitForPlatformSync && !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"]) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].log('Returning products, the prices yet to come from backend!')();
                        try {
                            for (products_3 = __values(products), products_3_1 = products_3.next(); !products_3_1.done; products_3_1 = products_3.next()) {
                                product = products_3_1.value;
                                product.price_is_current = false; // in case we're syncing up the prices we should mark if we do have current or not
                                product.price_refreshed_at = null;
                            }
                        }
                        catch (e_4_1) { e_4 = { error: e_4_1 }; }
                        finally {
                            try {
                                if (products_3_1 && !products_3_1.done && (_f = products_3.return)) _f.call(products_3);
                            }
                            finally { if (e_4) throw e_4.error; }
                        }
                        resolve(products);
                    }
                    return [3 /*break*/, 5];
                case 4:
                    resolve(products);
                    _g.label = 5;
                case 5: return [2 /*return*/];
            }
        });
    }); });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/price/index.ts":
/*!*****************************************************!*\
  !*** ./core/modules/catalog/helpers/price/index.ts ***!
  \*****************************************************/
/*! exports provided: doPlatformPricesSync */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _doPlatformPricesSync__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./doPlatformPricesSync */ "./core/modules/catalog/helpers/price/doPlatformPricesSync.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "doPlatformPricesSync", function() { return _doPlatformPricesSync__WEBPACK_IMPORTED_MODULE_0__["default"]; });





/***/ }),

/***/ "./core/modules/catalog/helpers/price/syncProductPrice.ts":
/*!****************************************************************!*\
  !*** ./core/modules/catalog/helpers/price/syncProductPrice.ts ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return syncProductPrice; });
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");

function syncProductPrice(product, backProduct) {
    product.sgn = backProduct.sgn; // copy the signature for the modified price
    product.price_incl_tax = backProduct.price_info.final_price;
    product.original_price_incl_tax = backProduct.price_info.regular_price;
    product.special_price_incl_tax = backProduct.price_info.special_price;
    product.special_price = backProduct.price_info.extension_attributes.tax_adjustments.special_price;
    product.price = backProduct.price_info.extension_attributes.tax_adjustments.final_price;
    product.original_price = backProduct.price_info.extension_attributes.tax_adjustments.regular_price;
    product.price_tax = product.price_incl_tax - product.price;
    product.special_price_tax = product.special_price_incl_tax - product.special_price;
    product.original_price_tax = product.original_price_incl_tax - product.original_trice;
    if (product.price_incl_tax >= product.original_price_incl_tax) {
        product.special_price_incl_tax = 0;
        product.special_price = 0;
    }
    /** BEGIN @deprecated - inconsitent naming kept just for the backward compatibility */
    product.priceInclTax = product.price_incl_tax;
    product.priceTax = product.price_tax;
    product.originalPrice = product.original_price;
    product.originalPriceInclTax = product.original_price_incl_tax;
    product.originalPriceTax = product.original_price_tax;
    product.specialPriceInclTax = product.special_price_incl_tax;
    product.specialPriceTax = product.special_price_tax;
    /** END */
    _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_0__["default"].$emit('product-after-priceupdate', product);
    // Logger.log(product.sku, product, backProduct)()
    return product;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/productOptions/getAllProductConfigurations.ts":
/*!************************************************************************************!*\
  !*** ./core/modules/catalog/helpers/productOptions/getAllProductConfigurations.ts ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getAllProductConfigurations; });
/**
 * It returns all available options for configurable product
 */
function getAllProductConfigurations(_a) {
    var configurableOptions = _a.configurableOptions, configuration = _a.configuration;
    var product_option = {
        extension_attributes: {
            custom_options: [],
            configurable_item_options: [],
            bundle_options: []
        }
    };
    /* eslint camelcase: "off" */
    product_option.extension_attributes.configurable_item_options = Object.keys(configuration)
        .map(function (key) { return configuration[key]; })
        .filter(function (configOption) {
        return configOption &&
            configOption.attribute_code &&
            configOption.attribute_code !== 'price';
    })
        .map(function (configOption) { return ({
        configOption: configOption,
        productOption: configurableOptions.find(function (productConfigOption) { return productConfigOption.attribute_code === configOption.attribute_code; })
    }); })
        .filter(function (_a) {
        var productOption = _a.productOption;
        return productOption;
    })
        .map(function (_a) {
        var configOption = _a.configOption, productOption = _a.productOption;
        return ({
            option_id: String(productOption.attribute_id),
            option_value: String(configOption.id),
            label: productOption.label || configOption.attribute_code,
            value: configOption.label
        });
    });
    return product_option;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/productOptions/getAttributeCode.ts":
/*!*************************************************************************!*\
  !*** ./core/modules/catalog/helpers/productOptions/getAttributeCode.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getAttributeCode; });
/**
 * Returns attribute_code for product option
 */
function getAttributeCode(option, attribute) {
    var attribute_code = option.attribute_code
        ? option.attribute_code
        : option.attribute_id && (attribute.list_by_id[option.attribute_id] || {}).attribute_code;
    return attribute_code || option.label.toLowerCase();
}


/***/ }),

/***/ "./core/modules/catalog/helpers/productOptions/getInternalOptionsFormat.ts":
/*!*********************************************************************************!*\
  !*** ./core/modules/catalog/helpers/productOptions/getInternalOptionsFormat.ts ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getInternalOptionsFormat; });
/**
 * Returns internal format for product options
 */
function getInternalOptionsFormat(productOption) {
    return productOption.extension_attributes.configurable_item_options
        .map(function (_a) {
        var label = _a.label, value = _a.value;
        return ({ label: label, value: value });
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/productOptions/getProductConfiguration.ts":
/*!********************************************************************************!*\
  !*** ./core/modules/catalog/helpers/productOptions/getProductConfiguration.ts ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getProductConfiguration; });
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers */ "./core/modules/catalog/helpers/index.ts");
/* harmony import */ var _getAttributeCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getAttributeCode */ "./core/modules/catalog/helpers/productOptions/getAttributeCode.ts");
/* harmony import */ var _getSelectedOption__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getSelectedOption */ "./core/modules/catalog/helpers/productOptions/getSelectedOption.ts");
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};



/**
 * Returns configuration based on selected variant. Only applies to configurable product
 */
function getProductConfiguration(_a) {
    var e_1, _b;
    var product = _a.product, selectedVariant = _a.selectedVariant, attribute = _a.attribute;
    var currentProductOption = {};
    var configurableOptions = product.configurable_options || [];
    try {
        for (var configurableOptions_1 = __values(configurableOptions), configurableOptions_1_1 = configurableOptions_1.next(); !configurableOptions_1_1.done; configurableOptions_1_1 = configurableOptions_1.next()) {
            var option = configurableOptions_1_1.value;
            var attributeCode = Object(_getAttributeCode__WEBPACK_IMPORTED_MODULE_1__["default"])(option, attribute);
            var selectedOption = Object(_getSelectedOption__WEBPACK_IMPORTED_MODULE_2__["default"])(selectedVariant, attributeCode, option);
            var label = selectedOption.label
                ? selectedOption.label
                : Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_0__["optionLabel"])(attribute, {
                    attributeKey: selectedOption.attribute_code,
                    searchBy: 'code',
                    optionId: selectedOption.value
                });
            currentProductOption[attributeCode] = {
                attribute_code: attributeCode,
                id: String(selectedOption.value),
                label: label
            };
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (configurableOptions_1_1 && !configurableOptions_1_1.done && (_b = configurableOptions_1.return)) _b.call(configurableOptions_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return currentProductOption;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/productOptions/getProductConfigurationOptions.ts":
/*!***************************************************************************************!*\
  !*** ./core/modules/catalog/helpers/productOptions/getProductConfigurationOptions.ts ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getProductConfigurationOptions; });
/* harmony import */ var _getAttributeCode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getAttributeCode */ "./core/modules/catalog/helpers/productOptions/getAttributeCode.ts");
/* harmony import */ var lodash_es_trim__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/trim */ "./node_modules/lodash-es/trim.js");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers */ "./core/modules/catalog/helpers/index.ts");
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};



function getProductConfigurationOptions(_a) {
    var e_1, _b;
    var product = _a.product, attribute = _a.attribute;
    var productOptions = {};
    var configurableOptions = product.configurable_options || [];
    var _loop_1 = function (option) {
        var attributeCode = Object(_getAttributeCode__WEBPACK_IMPORTED_MODULE_0__["default"])(option, attribute);
        var productOptionValues = option.values
            .map(function (optionValue) { return ({
            label: optionValue.label
                ? optionValue.label
                : Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_2__["optionLabel"])(attribute, {
                    attributeKey: option.attribute_id,
                    searchBy: 'id',
                    optionId: optionValue.value_index
                }),
            id: String(optionValue.value_index),
            attribute_code: option.attribute_code
        }); })
            .filter(function (optionValue) { return Object(lodash_es_trim__WEBPACK_IMPORTED_MODULE_1__["default"])(optionValue.label) !== ''; });
        productOptions[attributeCode] = productOptionValues;
    };
    try {
        for (var configurableOptions_1 = __values(configurableOptions), configurableOptions_1_1 = configurableOptions_1.next(); !configurableOptions_1_1.done; configurableOptions_1_1 = configurableOptions_1.next()) {
            var option = configurableOptions_1_1.value;
            _loop_1(option);
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (configurableOptions_1_1 && !configurableOptions_1_1.done && (_b = configurableOptions_1.return)) _b.call(configurableOptions_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return productOptions;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/productOptions/getSelectedOption.ts":
/*!**************************************************************************!*\
  !*** ./core/modules/catalog/helpers/productOptions/getSelectedOption.ts ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getSelectedOption; });
/**
 * Returns single option for configurable product based on attribute code
 */
function getSelectedOption(selectedVariant, attributeCode, option) {
    var selectedOption = (selectedVariant.custom_attributes || []).find(function (a) { return a.attribute_code === attributeCode; });
    selectedOption = selectedOption || {
        attribute_code: attributeCode,
        value: selectedVariant[attributeCode]
    };
    if (option.values && option.values.length) {
        var selectedOptionMeta = option.values.find(function (ov) { return ov.value_index === selectedOption.value; });
        if (selectedOptionMeta) {
            selectedOption.label = selectedOptionMeta.label
                ? selectedOptionMeta.label
                : selectedOptionMeta.default_label;
        }
    }
    return selectedOption;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/productOptions/index.ts":
/*!**************************************************************!*\
  !*** ./core/modules/catalog/helpers/productOptions/index.ts ***!
  \**************************************************************/
/*! exports provided: setProductConfigurableOptions, getProductConfiguration, getProductConfigurationOptions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _setProductConfigurableOptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setProductConfigurableOptions */ "./core/modules/catalog/helpers/productOptions/setProductConfigurableOptions.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "setProductConfigurableOptions", function() { return _setProductConfigurableOptions__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _getProductConfiguration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getProductConfiguration */ "./core/modules/catalog/helpers/productOptions/getProductConfiguration.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getProductConfiguration", function() { return _getProductConfiguration__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _getProductConfigurationOptions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getProductConfigurationOptions */ "./core/modules/catalog/helpers/productOptions/getProductConfigurationOptions.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getProductConfigurationOptions", function() { return _getProductConfigurationOptions__WEBPACK_IMPORTED_MODULE_2__["default"]; });







/***/ }),

/***/ "./core/modules/catalog/helpers/productOptions/omitInternalOptionsFormat.ts":
/*!**********************************************************************************!*\
  !*** ./core/modules/catalog/helpers/productOptions/omitInternalOptionsFormat.ts ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return omitInternalOptionsFormat; });
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/omit */ "./node_modules/lodash/omit.js");
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_0__);

/**
 * Omit props that is not needed for product_option
 */
function omitInternalOptionsFormat(productOption) {
    productOption.extension_attributes.configurable_item_options = productOption.extension_attributes.configurable_item_options
        .map(function (option) { return lodash_omit__WEBPACK_IMPORTED_MODULE_0___default()(option, ['label', 'value']); });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/productOptions/setProductConfigurableOptions.ts":
/*!**************************************************************************************!*\
  !*** ./core/modules/catalog/helpers/productOptions/setProductConfigurableOptions.ts ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setProductConfigurableOptions; });
/* harmony import */ var _getAllProductConfigurations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getAllProductConfigurations */ "./core/modules/catalog/helpers/productOptions/getAllProductConfigurations.ts");
/* harmony import */ var _getInternalOptionsFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getInternalOptionsFormat */ "./core/modules/catalog/helpers/productOptions/getInternalOptionsFormat.ts");
/* harmony import */ var _omitInternalOptionsFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./omitInternalOptionsFormat */ "./core/modules/catalog/helpers/productOptions/omitInternalOptionsFormat.ts");



/**
 * set 'product_option' and 'options' based on selected configuration
 */
function setProductConfigurableOptions(_a) {
    var product = _a.product, configuration = _a.configuration, setConfigurableProductOptions = _a.setConfigurableProductOptions;
    // return if there is no 'setConfigurableProductOptions' option
    if (!setConfigurableProductOptions)
        return;
    var configurableOptions = product.configurable_options;
    if (!configurableOptions)
        return;
    var productOptions = Object(_getAllProductConfigurations__WEBPACK_IMPORTED_MODULE_0__["default"])({ configurableOptions: configurableOptions, configuration: configuration });
    product.options = Object(_getInternalOptionsFormat__WEBPACK_IMPORTED_MODULE_1__["default"])(productOptions);
    Object(_omitInternalOptionsFormat__WEBPACK_IMPORTED_MODULE_2__["default"])(productOptions);
    product.product_option = productOptions;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/reduceAttributesLists.ts":
/*!***************************************************************!*\
  !*** ./core/modules/catalog/helpers/reduceAttributesLists.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var reduceAttributes = function (prev, curr) {
    if (curr) {
        prev.attrHashByCode[curr.attribute_code] = curr;
        prev.attrHashById[curr.attribute_id] = curr;
    }
    return prev;
};
var reduceAttributesLists = function (_a) {
    var codesList = _a.codesList, idsList = _a.idsList, attributes = _a.attributes;
    return attributes.reduce(reduceAttributes, { attrHashByCode: codesList, attrHashById: idsList });
};
/* harmony default export */ __webpack_exports__["default"] = (reduceAttributesLists);


/***/ }),

/***/ "./core/modules/catalog/helpers/registerProductsMapping.ts":
/*!*****************************************************************!*\
  !*** ./core/modules/catalog/helpers/registerProductsMapping.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return registerProductsMapping; });
/* harmony import */ var _vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/url/helpers/transformUrl */ "./core/modules/url/helpers/transformUrl.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


function registerProductsMapping(_a, products) {
    var dispatch = _a.dispatch;
    if (products === void 0) { products = []; }
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0: return [4 /*yield*/, Promise.all(products.map(function (product) {
                        if (product.url_path) {
                            var url_path = product.url_path, sku = product.sku, slug = product.slug, type_id = product.type_id, parentSku = product.parentSku;
                            return dispatch('url/registerMapping', {
                                url: Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_1__["localizedDispatcherRoute"])(url_path),
                                routeData: Object(_vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_0__["transformProductUrl"])({ sku: sku, parentSku: parentSku, slug: slug, type_id: type_id })
                            }, { root: true });
                        }
                    }))];
                case 1:
                    _b.sent();
                    return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/search.ts":
/*!************************************************!*\
  !*** ./core/modules/catalog/helpers/search.ts ***!
  \************************************************/
/*! exports provided: canCache, configureChildren, storeProductToCache, preConfigureProduct, getOptimizedFields, isGroupedOrBundle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "canCache", function() { return canCache; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "configureChildren", function() { return configureChildren; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storeProductToCache", function() { return storeProductToCache; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preConfigureProduct", function() { return preConfigureProduct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOptimizedFields", function() { return getOptimizedFields; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isGroupedOrBundle", function() { return isGroupedOrBundle; });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/store/entities */ "./core/lib/store/entities.ts");
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};





var canCache = function (_a) {
    var includeFields = _a.includeFields, excludeFields = _a.excludeFields;
    var isCacheable = includeFields === null && excludeFields === null;
    if (isCacheable) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].debug('Entity cache is enabled for productList')();
    }
    else {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].debug('Entity cache is disabled for productList')();
    }
    return isCacheable;
};
var getCacheKey = function (product, cacheByKey) {
    if (!product[cacheByKey]) {
        cacheByKey = 'id';
    }
    return Object(_vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_4__["entityKeyName"])(cacheByKey, product[cacheByKey === 'sku' && product['parentSku'] ? 'parentSku' : cacheByKey]); // to avoid caching products by configurable_children.sku
};
var configureChildren = function (product) {
    var e_1, _a, e_2, _b;
    if (product.configurable_children) {
        try {
            for (var _c = __values(product.configurable_children), _d = _c.next(); !_d.done; _d = _c.next()) {
                var configurableChild = _d.value;
                if (configurableChild.custom_attributes) {
                    try {
                        for (var _e = (e_2 = void 0, __values(configurableChild.custom_attributes)), _f = _e.next(); !_f.done; _f = _e.next()) {
                            var opt = _f.value;
                            configurableChild[opt.attribute_code] = opt.value;
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
    }
    return product;
};
var storeProductToCache = function (product, cacheByKey) {
    var cacheKey = getCacheKey(product, cacheByKey);
    var cache = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_3__["StorageManager"].get('elasticCache');
    cache.setItem(cacheKey, product, null, config__WEBPACK_IMPORTED_MODULE_2__.products.disablePersistentProductsCache);
};
var preConfigureProduct = function (_a) {
    var product = _a.product, populateRequestCacheTags = _a.populateRequestCacheTags;
    var shouldPopulateCacheTags = populateRequestCacheTags && vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags;
    var isFirstVariantAsDefaultInURL = config__WEBPACK_IMPORTED_MODULE_2__.products.setFirstVarianAsDefaultInURL &&
        product.hasOwnProperty('configurable_children') &&
        product.configurable_children.length > 0;
    product.errors = {}; // this is an object to store validation result for custom options and others
    product.info = {};
    if (shouldPopulateCacheTags) {
        vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags.add("P" + product.id);
    }
    if (!product.parentSku) {
        product.parentSku = product.sku;
    }
    if (isFirstVariantAsDefaultInURL) {
        product.sku = product.configurable_children[0].sku;
    }
    return product;
};
var getOptimizedFields = function (_a) {
    var excludeFields = _a.excludeFields, includeFields = _a.includeFields;
    if (config__WEBPACK_IMPORTED_MODULE_2__.entities.optimize) {
        return {
            excluded: excludeFields || config__WEBPACK_IMPORTED_MODULE_2__.entities.product.excludeFields,
            included: includeFields || config__WEBPACK_IMPORTED_MODULE_2__.entities.product.includeFields
        };
    }
    return { excluded: excludeFields, included: includeFields };
};
var isGroupedOrBundle = function (product) {
    return product.type_id === 'grouped' || product.type_id === 'bundle';
};


/***/ }),

/***/ "./core/modules/catalog/helpers/slugifyCategories.ts":
/*!***********************************************************!*\
  !*** ./core/modules/catalog/helpers/slugifyCategories.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


var createSlug = function (category) {
    if (category.url_key && config__WEBPACK_IMPORTED_MODULE_0__.products.useMagentoUrlKeys) {
        return category.url_key;
    }
    return Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["slugify"])(category.name) + "-" + category.id;
};
var slugifyCategories = function (category) {
    if (category.children_data) {
        category.children_data.forEach(function (subCat) {
            if (subCat.name && !subCat.slug) {
                slugifyCategories(__assign(__assign({}, subCat), { slug: createSlug(subCat) }));
            }
        });
    }
    return category;
};
/* harmony default export */ __webpack_exports__["default"] = (slugifyCategories);


/***/ }),

/***/ "./core/modules/catalog/helpers/stock/filterChildrenByStockitem.ts":
/*!*************************************************************************!*\
  !*** ./core/modules/catalog/helpers/stock/filterChildrenByStockitem.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return filterChildrenByStockitem; });
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
/**
 * Add 'stock' object to 'configurable_children' and filter configurable child that is not available
 */
function filterChildrenByStockitem(product, stockItems) {
    var e_1, _a;
    if (stockItems === void 0) { stockItems = []; }
    var _loop_1 = function (stockItem) {
        var confChild = product.configurable_children.find(function (child) { return child.id === stockItem.product_id; });
        if (!stockItem.is_in_stock || (confChild && confChild.status >= 2 /* conf child is disabled */)) {
            product.configurable_children = product.configurable_children.filter(function (child) { return child.id !== stockItem.product_id; });
        }
        else {
            if (confChild) {
                confChild.stock = stockItem;
            }
        }
    };
    try {
        for (var stockItems_1 = __values(stockItems), stockItems_1_1 = stockItems_1.next(); !stockItems_1_1.done; stockItems_1_1 = stockItems_1.next()) {
            var stockItem = stockItems_1_1.value;
            _loop_1(stockItem);
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (stockItems_1_1 && !stockItems_1_1.done && (_a = stockItems_1.return)) _a.call(stockItems_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
}


/***/ }),

/***/ "./core/modules/catalog/helpers/stock/filterOutUnavailableVariants.ts":
/*!****************************************************************************!*\
  !*** ./core/modules/catalog/helpers/stock/filterOutUnavailableVariants.ts ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return filterOutUnavailableVariants; });
/* harmony import */ var _filterChildrenByStockitem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./filterChildrenByStockitem */ "./core/modules/catalog/helpers/stock/filterChildrenByStockitem.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./.. */ "./core/modules/catalog/helpers/index.ts");


/**
 * Add 'stock' object to product. If product is out of stock then add error to product.
 * Also check all children for configurable products and remove if any children is out of stock.
 */
function filterOutUnavailableVariants(product, stockItems) {
    if (stockItems === void 0) { stockItems = []; }
    var productStockItem = stockItems.find(function (p) { return p.product_id === product.id; });
    product.stock = productStockItem;
    if (productStockItem && !productStockItem.is_in_stock) {
        product.errors.variants = 'No available product variants';
    }
    if (product.type_id === 'configurable' && Object(___WEBPACK_IMPORTED_MODULE_1__["hasConfigurableChildren"])(product)) {
        Object(_filterChildrenByStockitem__WEBPACK_IMPORTED_MODULE_0__["default"])(stockItems, product);
    }
}


/***/ }),

/***/ "./core/modules/catalog/helpers/stock/getProductInfos.ts":
/*!***************************************************************!*\
  !*** ./core/modules/catalog/helpers/stock/getProductInfos.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getProductInfos = function (products) { return products.map(function (product) { return ({
    is_in_stock: product.is_in_stock,
    qty: product.qty,
    product_id: product.product_id
}); }); };
/* harmony default export */ __webpack_exports__["default"] = (getProductInfos);


/***/ }),

/***/ "./core/modules/catalog/helpers/stock/getStatus.ts":
/*!*********************************************************!*\
  !*** ./core/modules/catalog/helpers/stock/getStatus.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getStatus = function (product, defaultStatus) {
    if (product.stock) {
        return product.stock.is_in_stock ? 'ok' : 'out_of_stock';
    }
    return defaultStatus;
};
/* harmony default export */ __webpack_exports__["default"] = (getStatus);


/***/ }),

/***/ "./core/modules/catalog/helpers/stock/getStockItems.ts":
/*!*************************************************************!*\
  !*** ./core/modules/catalog/helpers/stock/getStockItems.ts ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getStockItems; });
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};


/**
 * Get products skus and products children skus. Based on that search for stock objects and return them.
 */
function getStockItems(products) {
    return __awaiter(this, void 0, void 0, function () {
        var skuArray, task, err_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    skuArray = products.map(function (_a) {
                        var sku = _a.sku, _b = _a.configurable_children, configurable_children = _b === void 0 ? [] : _b;
                        var childSkus = configurable_children.map(function (c) { return c.sku; });
                        return __spread([sku], childSkus);
                    }).reduce(function (acc, curr) { return acc.concat(curr); }, []);
                    if (!config__WEBPACK_IMPORTED_MODULE_1__.stock.synchronize)
                        return [2 /*return*/];
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_0__["StockService"].list(skuArray)];
                case 2:
                    task = _a.sent();
                    if (task.resultCode === 200) {
                        return [2 /*return*/, task.result];
                    }
                    return [2 /*return*/, []];
                case 3:
                    err_1 = _a.sent();
                    console.error(err_1);
                    return [2 /*return*/, []];
                case 4: return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./core/modules/catalog/helpers/stock/index.ts":
/*!*****************************************************!*\
  !*** ./core/modules/catalog/helpers/stock/index.ts ***!
  \*****************************************************/
/*! exports provided: getStatus, getProductInfos, getStockItems, filterOutUnavailableVariants */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _getStatus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getStatus */ "./core/modules/catalog/helpers/stock/getStatus.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getStatus", function() { return _getStatus__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _getProductInfos__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getProductInfos */ "./core/modules/catalog/helpers/stock/getProductInfos.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getProductInfos", function() { return _getProductInfos__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _getStockItems__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getStockItems */ "./core/modules/catalog/helpers/stock/getStockItems.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getStockItems", function() { return _getStockItems__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _filterOutUnavailableVariants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./filterOutUnavailableVariants */ "./core/modules/catalog/helpers/stock/filterOutUnavailableVariants.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "filterOutUnavailableVariants", function() { return _filterOutUnavailableVariants__WEBPACK_IMPORTED_MODULE_3__["default"]; });








/***/ }),

/***/ "./core/modules/catalog/helpers/taxCalc.ts":
/*!*************************************************!*\
  !*** ./core/modules/catalog/helpers/taxCalc.ts ***!
  \*************************************************/
/*! exports provided: updateProductPrices, calculateProductTax */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateProductPrices", function() { return updateProductPrices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateProductTax", function() { return calculateProductTax; });
/* harmony import */ var lodash_es_camelCase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash-es/camelCase */ "./node_modules/lodash-es/camelCase.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};

// this is the mirror copy of taxcalc.js from VSF API
function isSpecialPriceActive(fromDate, toDate) {
    if (!fromDate && !toDate) {
        return true;
    }
    var now = new Date();
    fromDate = fromDate ? new Date(fromDate) : false;
    toDate = toDate ? new Date(toDate) : false;
    if (fromDate && toDate) {
        return fromDate < now && toDate > now;
    }
    if (fromDate && !toDate) {
        return fromDate < now;
    }
    if (!fromDate && toDate) {
        return toDate > now;
    }
}
/**
 * change object keys to camelCase
 */
function toCamelCase(obj) {
    if (obj === void 0) { obj = {}; }
    return Object.keys(obj).reduce(function (accObj, currKey) {
        accObj[Object(lodash_es_camelCase__WEBPACK_IMPORTED_MODULE_0__["default"])(currKey)] = obj[currKey];
        return accObj;
    }, {});
}
/**
 * Create price object with base price and tax
 * @param price - product price which is used to extract tax value
 * @param rateFactor - tax % in decimal
 * @param isPriceInclTax - determines if price already include tax
 */
function createSinglePrice(price, rateFactor, isPriceInclTax) {
    var _price = isPriceInclTax ? price / (1 + rateFactor) : price;
    var tax = _price * rateFactor;
    return { price: _price, tax: tax };
}
/**
 * assign price and tax to product with proper keys
 * @param AssignPriceParams
 */
function assignPrice(_a) {
    var _b;
    var product = _a.product, target = _a.target, price = _a.price, _c = _a.tax, tax = _c === void 0 ? 0 : _c, _d = _a.deprecatedPriceFieldsSupport, deprecatedPriceFieldsSupport = _d === void 0 ? true : _d;
    var priceUpdate = (_b = {},
        _b[target] = price,
        _b[target + "_tax"] = tax,
        _b[target + "_incl_tax"] = price + tax,
        _b);
    if (deprecatedPriceFieldsSupport) {
        /** BEGIN @deprecated - inconsitent naming kept just for the backward compatibility */
        priceUpdate = Object.assign(priceUpdate, toCamelCase(priceUpdate));
        /** END */
    }
    Object.assign(product, priceUpdate);
}
function updateProductPrices(_a) {
    var e_1, _b, e_2, _c;
    var product = _a.product, rate = _a.rate, _d = _a.sourcePriceInclTax, sourcePriceInclTax = _d === void 0 ? false : _d, _e = _a.deprecatedPriceFieldsSupport, deprecatedPriceFieldsSupport = _e === void 0 ? false : _e, _f = _a.finalPriceInclTax, finalPriceInclTax = _f === void 0 ? true : _f;
    var rate_factor = parseFloat(rate.rate) / 100;
    var hasOriginalPrices = (product.hasOwnProperty('original_price') &&
        product.hasOwnProperty('original_final_price') &&
        product.hasOwnProperty('original_special_price'));
    // build objects with original price and tax
    // for first calculation use `price`, for next one use `original_price`
    var priceWithTax = createSinglePrice(parseFloat(product.original_price || product.price), rate_factor, sourcePriceInclTax && !hasOriginalPrices);
    var finalPriceWithTax = createSinglePrice(parseFloat(product.original_final_price || product.final_price), rate_factor, finalPriceInclTax && !hasOriginalPrices);
    var specialPriceWithTax = createSinglePrice(parseFloat(product.original_special_price || product.special_price), rate_factor, sourcePriceInclTax && !hasOriginalPrices);
    // save original prices
    if (!hasOriginalPrices) {
        assignPrice(__assign(__assign({ product: product, target: 'original_price' }, priceWithTax), { deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport }));
        if (specialPriceWithTax.price) {
            product.original_special_price = specialPriceWithTax.price;
        }
        if (finalPriceWithTax.price) {
            product.original_final_price = finalPriceWithTax.price;
        }
    }
    // reset previous calculation
    assignPrice(__assign(__assign({ product: product, target: 'price' }, priceWithTax), { deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport }));
    if (specialPriceWithTax.price) {
        assignPrice(__assign(__assign({ product: product, target: 'special_price' }, specialPriceWithTax), { deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport }));
    }
    if (finalPriceWithTax.price) {
        assignPrice(__assign(__assign({ product: product, target: 'final_price' }, finalPriceWithTax), { deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport }));
    }
    if (product.final_price) {
        if (product.final_price < product.price) { // compare the prices with the product final price if provided; final prices is used in case of active catalog promo rules for example
            assignPrice(__assign(__assign({ product: product, target: 'price' }, finalPriceWithTax), { deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport }));
            if (product.special_price && product.final_price < product.special_price) { // for VS - special_price is any price lowered than regular price (`price`); in Magento there is a separate mechanism for setting the `special_prices`
                assignPrice(__assign(__assign({ product: product, target: 'price' }, specialPriceWithTax), { deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport })); // if the `final_price` is lower than the original `special_price` - it means some catalog rules were applied over it
                assignPrice(__assign(__assign({ product: product, target: 'special_price' }, finalPriceWithTax), { deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport }));
            }
            else {
                assignPrice(__assign(__assign({ product: product, target: 'price' }, finalPriceWithTax), { deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport }));
            }
        }
    }
    if (product.special_price && (product.special_price < product.original_price)) {
        if (!isSpecialPriceActive(product.special_from_date, product.special_to_date)) {
            // out of the dates period
            assignPrice({ product: product, target: 'special_price', price: 0, tax: 0, deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport });
        }
        else {
            assignPrice(__assign(__assign({ product: product, target: 'price' }, specialPriceWithTax), { deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport }));
        }
    }
    else {
        // the same price as original; it's not a promotion
        assignPrice({ product: product, target: 'special_price', price: 0, tax: 0, deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport });
    }
    if (product.configurable_children) {
        try {
            for (var _g = __values(product.configurable_children), _h = _g.next(); !_h.done; _h = _g.next()) {
                var configurableChild = _h.value;
                if (configurableChild.custom_attributes) {
                    try {
                        for (var _j = (e_2 = void 0, __values(configurableChild.custom_attributes)), _k = _j.next(); !_k.done; _k = _j.next()) {
                            var opt = _k.value;
                            configurableChild[opt.attribute_code] = opt.value;
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
                // update children prices
                updateProductPrices({ product: configurableChild, rate: rate, sourcePriceInclTax: sourcePriceInclTax, deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport, finalPriceInclTax: finalPriceInclTax });
                if ((configurableChild.price_incl_tax <= product.price_incl_tax) || product.price === 0) { // always show the lowest price
                    assignPrice({
                        product: product,
                        target: 'price',
                        price: configurableChild.price,
                        tax: configurableChild.price_tax,
                        deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport
                    });
                    assignPrice({
                        product: product,
                        target: 'special_price',
                        price: configurableChild.special_price,
                        tax: configurableChild.special_price_tax,
                        deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport
                    });
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
            }
            finally { if (e_1) throw e_1.error; }
        }
    }
}
function calculateProductTax(_a) {
    var e_3, _b, e_4, _c;
    var product = _a.product, taxClasses = _a.taxClasses, _d = _a.taxCountry, taxCountry = _d === void 0 ? 'PL' : _d, _e = _a.taxRegion, taxRegion = _e === void 0 ? '' : _e, _f = _a.sourcePriceInclTax, sourcePriceInclTax = _f === void 0 ? false : _f, _g = _a.deprecatedPriceFieldsSupport, deprecatedPriceFieldsSupport = _g === void 0 ? false : _g, _h = _a.finalPriceInclTax, finalPriceInclTax = _h === void 0 ? true : _h, _j = _a.userGroupId, userGroupId = _j === void 0 ? null : _j, isTaxWithUserGroupIsActive = _a.isTaxWithUserGroupIsActive;
    var rateFound = false;
    var product_tax_class_id = parseInt(product.tax_class_id);
    if (product_tax_class_id > 0) {
        var taxClass = void 0;
        if (isTaxWithUserGroupIsActive) {
            taxClass = taxClasses.find(function (el) {
                return el.product_tax_class_ids.indexOf(product_tax_class_id) >= 0 &&
                    el.customer_tax_class_ids.indexOf(userGroupId) >= 0;
            });
        }
        else {
            taxClass = taxClasses.find(function (el) { return el.product_tax_class_ids.indexOf(product_tax_class_id) >= 0; });
        }
        if (taxClass) {
            try {
                for (var _k = __values(taxClass.rates), _l = _k.next(); !_l.done; _l = _k.next()) { // TODO: add check for zip code ranges (!)
                    var rate = _l.value;
                    if (rate.tax_country_id === taxCountry && (rate.region_name === taxRegion || rate.tax_region_id === 0 || !rate.region_name)) {
                        updateProductPrices({ product: product, rate: rate, sourcePriceInclTax: sourcePriceInclTax, deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport, finalPriceInclTax: finalPriceInclTax });
                        rateFound = true;
                        break;
                    }
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_l && !_l.done && (_b = _k.return)) _b.call(_k);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
    }
    if (!rateFound) {
        updateProductPrices({ product: product, rate: { rate: 0 }, sourcePriceInclTax: sourcePriceInclTax, deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport, finalPriceInclTax: finalPriceInclTax });
        product.price_incl_tax = product.price;
        product.price_tax = 0;
        product.special_price_incl_tax = 0;
        product.special_price_tax = 0;
        if (deprecatedPriceFieldsSupport) {
            /** BEGIN @deprecated - inconsitent naming kept just for the backward compatibility */
            product.priceInclTax = product.price;
            product.priceTax = 0;
            product.specialPriceInclTax = 0;
            product.specialPriceTax = 0;
            /** END */
        }
        if (product.configurable_children) {
            try {
                for (var _m = __values(product.configurable_children), _o = _m.next(); !_o.done; _o = _m.next()) {
                    var configurableChildren = _o.value;
                    configurableChildren.price_incl_tax = configurableChildren.price;
                    configurableChildren.price_tax = 0;
                    configurableChildren.special_price_incl_tax = 0;
                    configurableChildren.special_price_tax = 0;
                    if (deprecatedPriceFieldsSupport) {
                        /** BEGIN @deprecated - inconsitent naming kept just for the backward compatibility */
                        configurableChildren.priceInclTax = configurableChildren.price;
                        configurableChildren.priceTax = 0;
                        configurableChildren.specialPriceInclTax = 0;
                        configurableChildren.specialPriceTax = 0;
                        /** END */
                    }
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_o && !_o.done && (_c = _m.return)) _c.call(_m);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
    }
    return product;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/transformMetadataToAttributes.ts":
/*!***********************************************************************!*\
  !*** ./core/modules/catalog/helpers/transformMetadataToAttributes.ts ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_es_uniqBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash-es/uniqBy */ "./node_modules/lodash-es/uniqBy.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};

var transformMetadataToAttributes = function (attributeMetadata) { return attributeMetadata
    .reduce(function (prev, curr) { return (__spread(prev, curr)); }, [])
    .reduce(function (prev, curr) {
    var attribute = prev.find(function (a) { return a.attribute_id === curr.attribute_id && a.options; });
    if (attribute) {
        return prev.map(function (attr) {
            if (attr.attribute_id === curr.attribute_id) {
                return __assign(__assign({}, attr), { options: Object(lodash_es_uniqBy__WEBPACK_IMPORTED_MODULE_0__["default"])(__spread((attr.options || []), (curr.options || [])), function (obj) { return obj.label + "_" + obj.value; }) });
            }
            return attr;
        });
    }
    return __spread(prev, [curr]);
}, [])
    .reduce(function (prev, curr) {
    var _a, _b;
    return ({
        attrHashByCode: __assign(__assign({}, (prev.attrHashByCode || {})), (_a = {}, _a[curr.attribute_code] = curr, _a)),
        attrHashById: __assign(__assign({}, (prev.attrHashById || {})), (_b = {}, _b[curr.attribute_id] = curr, _b))
    });
}, { attrHashByCode: {}, attrHashById: {} }); };
/* harmony default export */ __webpack_exports__["default"] = (transformMetadataToAttributes);


/***/ }),

/***/ "./core/modules/catalog/helpers/variant/findConfigurableVariant.ts":
/*!*************************************************************************!*\
  !*** ./core/modules/catalog/helpers/variant/findConfigurableVariant.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return findConfigurableVariant; });
/* harmony import */ var _getConfigurationMatchLevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getConfigurationMatchLevel */ "./core/modules/catalog/helpers/variant/getConfigurationMatchLevel.ts");
/* harmony import */ var _getVariantWithLowestPrice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getVariantWithLowestPrice */ "./core/modules/catalog/helpers/variant/getVariantWithLowestPrice.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);



/**
 * This function responsiblity is to find best matching variant for configurable product based on configuration object or stock availability.
 */
function findConfigurableVariant(_a) {
    var product = _a.product, _b = _a.configuration, configuration = _b === void 0 ? null : _b, _c = _a.selectDefaultChildren, selectDefaultChildren = _c === void 0 ? false : _c, _d = _a.availabilityCheck, availabilityCheck = _d === void 0 ? true : _d;
    var selectedVariant = product.configurable_children.reduce(function (prevVariant, nextVariant) {
        if (availabilityCheck) {
            if (nextVariant.stock && !config__WEBPACK_IMPORTED_MODULE_2__.products.listOutOfStockProducts) {
                if (!nextVariant.stock.is_in_stock) {
                    return prevVariant;
                }
            }
        }
        if (nextVariant.status >= 2 /** disabled product */) {
            return prevVariant;
        }
        if (selectDefaultChildren) {
            return prevVariant || nextVariant; // return first
        }
        if ((configuration && configuration.sku) &&
            (nextVariant.sku === configuration.sku)) { // by sku or first one
            return nextVariant;
        }
        else {
            // get match level for each variant
            var prevVariantMatch = Object(_getConfigurationMatchLevel__WEBPACK_IMPORTED_MODULE_0__["default"])(configuration, prevVariant);
            var nextVariantMatch = Object(_getConfigurationMatchLevel__WEBPACK_IMPORTED_MODULE_0__["default"])(configuration, nextVariant);
            // if we have draw between prev variant and current variant then return one that has lowest price
            if (prevVariantMatch === nextVariantMatch) {
                return Object(_getVariantWithLowestPrice__WEBPACK_IMPORTED_MODULE_1__["default"])(prevVariant, nextVariant);
            }
            // return variant with best matching level
            return nextVariantMatch > prevVariantMatch ? nextVariant : prevVariant;
        }
    }, undefined);
    return selectedVariant;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/variant/getConfigurationMatchLevel.ts":
/*!****************************************************************************!*\
  !*** ./core/modules/catalog/helpers/variant/getConfigurationMatchLevel.ts ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getConfigurationMatchLevel; });
/* harmony import */ var lodash_toString__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/toString */ "./node_modules/lodash/toString.js");
/* harmony import */ var lodash_toString__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_toString__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/omit */ "./node_modules/lodash/omit.js");
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_1__);


/**
 * Counts how much coniguration match for specific variant
 */
function getConfigurationMatchLevel(configuration, variant) {
    if (!variant || !configuration)
        return 0;
    var configProperties = Object.keys(lodash_omit__WEBPACK_IMPORTED_MODULE_1___default()(configuration, ['price']));
    return configProperties
        .map(function (configProperty) {
        var variantPropertyId = variant[configProperty];
        if (configuration[configProperty] === null) {
            return false;
        }
        return [].concat(configuration[configProperty])
            .map(function (f) { return typeof f === 'object' ? lodash_toString__WEBPACK_IMPORTED_MODULE_0___default()(f.id) : f; })
            .includes(lodash_toString__WEBPACK_IMPORTED_MODULE_0___default()(variantPropertyId));
    })
        .filter(Boolean)
        .length;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/variant/getSelectedVariant.ts":
/*!********************************************************************!*\
  !*** ./core/modules/catalog/helpers/variant/getSelectedVariant.ts ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getSelectedVariant; });
/* harmony import */ var _findConfigurableVariant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./findConfigurableVariant */ "./core/modules/catalog/helpers/variant/findConfigurableVariant.ts");

/**
 * Returns product based on configuration or if there is no match then return first variant as default.
 */
function getSelectedVariant(product, configuration, _a) {
    var fallbackToDefaultWhenNoAvailable = _a.fallbackToDefaultWhenNoAvailable;
    var selectedVariant = Object(_findConfigurableVariant__WEBPACK_IMPORTED_MODULE_0__["default"])({ product: product, configuration: configuration, availabilityCheck: true });
    if (!selectedVariant) {
        if (fallbackToDefaultWhenNoAvailable) {
            selectedVariant = Object(_findConfigurableVariant__WEBPACK_IMPORTED_MODULE_0__["default"])({ product: product, selectDefaultChildren: true, availabilityCheck: true }); // return first available child
        }
    }
    return selectedVariant;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/variant/getVariantWithLowestPrice.ts":
/*!***************************************************************************!*\
  !*** ./core/modules/catalog/helpers/variant/getVariantWithLowestPrice.ts ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getVariantWithLowestPrice; });
/**
 * Makes product variants comparission and returns variant with lowest price
 */
function getVariantWithLowestPrice(prevVariant, nextVariant) {
    if (!prevVariant || !prevVariant.original_price_incl_tax) {
        return nextVariant;
    }
    var prevPrice = prevVariant.price_incl_tax || prevVariant.original_price_incl_tax;
    var nextPrice = nextVariant.price_incl_tax || nextVariant.original_price_incl_tax;
    return nextPrice < prevPrice ? nextVariant : prevVariant;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/variant/index.ts":
/*!*******************************************************!*\
  !*** ./core/modules/catalog/helpers/variant/index.ts ***!
  \*******************************************************/
/*! exports provided: omitSelectedVariantFields, getSelectedVariant, isOptionAvailable, findConfigurableVariant */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _omitSelectedVariantFields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./omitSelectedVariantFields */ "./core/modules/catalog/helpers/variant/omitSelectedVariantFields.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "omitSelectedVariantFields", function() { return _omitSelectedVariantFields__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _getSelectedVariant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getSelectedVariant */ "./core/modules/catalog/helpers/variant/getSelectedVariant.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getSelectedVariant", function() { return _getSelectedVariant__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _isOptionAvailable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isOptionAvailable */ "./core/modules/catalog/helpers/variant/isOptionAvailable.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isOptionAvailable", function() { return _isOptionAvailable__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _findConfigurableVariant__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./findConfigurableVariant */ "./core/modules/catalog/helpers/variant/findConfigurableVariant.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "findConfigurableVariant", function() { return _findConfigurableVariant__WEBPACK_IMPORTED_MODULE_3__["default"]; });








/***/ }),

/***/ "./core/modules/catalog/helpers/variant/isOptionAvailable.ts":
/*!*******************************************************************!*\
  !*** ./core/modules/catalog/helpers/variant/isOptionAvailable.ts ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return isOptionAvailable; });
/* harmony import */ var _findConfigurableVariant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./findConfigurableVariant */ "./core/modules/catalog/helpers/variant/findConfigurableVariant.ts");

/**
 * Checks if variant with specific configuration exist
 */
function isOptionAvailable(context, _a) {
    var product = _a.product, configuration = _a.configuration;
    var variant = Object(_findConfigurableVariant__WEBPACK_IMPORTED_MODULE_0__["default"])({ product: product, configuration: configuration, availabilityCheck: true });
    return typeof variant !== 'undefined' && variant !== null;
}


/***/ }),

/***/ "./core/modules/catalog/helpers/variant/omitSelectedVariantFields.ts":
/*!***************************************************************************!*\
  !*** ./core/modules/catalog/helpers/variant/omitSelectedVariantFields.ts ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return omitSelectedVariantFields; });
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/omit */ "./node_modules/lodash/omit.js");
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_0__);

/**
 * Omit some variant fields to prevent overriding same base product fields
 */
function omitSelectedVariantFields(selectedVariant) {
    var hasImage = selectedVariant && selectedVariant.image && selectedVariant.image !== 'no_selection';
    var fieldsToOmit = ['name', 'visibility'];
    if (!hasImage)
        fieldsToOmit.push('image');
    return lodash_omit__WEBPACK_IMPORTED_MODULE_0___default()(selectedVariant, fieldsToOmit);
}


/***/ }),

/***/ "./core/modules/catalog/hooks/index.ts":
/*!*********************************************!*\
  !*** ./core/modules/catalog/hooks/index.ts ***!
  \*********************************************/
/*! exports provided: catalogHooks, catalogHooksExecutors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "catalogHooks", function() { return catalogHooks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "catalogHooksExecutors", function() { return catalogHooksExecutors; });
/* harmony import */ var _vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/hooks */ "./core/lib/hooks.ts");

var _a = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createMutatorHook"])(), beforeTaxesCalculatedHook = _a.hook, beforeTaxesCalculatedExecutor = _a.executor;
var _b = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterSetBundleProductsHook = _b.hook, afterSetBundleProductsExecutor = _b.executor;
var _c = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterSetGroupedProductHook = _c.hook, afterSetGroupedProductExecutor = _c.executor;
var catalogHooksExecutors = {
    beforeTaxesCalculated: beforeTaxesCalculatedExecutor,
    afterSetBundleProducts: afterSetBundleProductsExecutor,
    afterSetGroupedProduct: afterSetGroupedProductExecutor
};
var catalogHooks = {
    beforeTaxesCalculated: beforeTaxesCalculatedHook,
    afterSetBundleProducts: afterSetBundleProductsHook,
    afterSetGroupedProduct: afterSetGroupedProductHook
};



/***/ }),

/***/ "./core/modules/catalog/index.ts":
/*!***************************************!*\
  !*** ./core/modules/catalog/index.ts ***!
  \***************************************/
/*! exports provided: CatalogModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CatalogModule", function() { return CatalogModule; });
/* harmony import */ var _store_product__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store/product */ "./core/modules/catalog/store/product/index.ts");
/* harmony import */ var _store_attribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store/attribute */ "./core/modules/catalog/store/attribute/index.ts");
/* harmony import */ var _store_stock__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./store/stock */ "./core/modules/catalog/store/stock/index.ts");
/* harmony import */ var _store_tax__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./store/tax */ "./core/modules/catalog/store/tax/index.ts");
/* harmony import */ var _store_category__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./store/category */ "./core/modules/catalog/store/category/index.ts");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hooks */ "./core/modules/catalog/hooks/index.ts");
/* harmony import */ var _helpers_associatedProducts__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./helpers/associatedProducts */ "./core/modules/catalog/helpers/associatedProducts/index.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_9___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./events */ "./core/modules/catalog/events.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var lodash_es_uniq__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! lodash-es/uniq */ "./node_modules/lodash-es/uniq.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};













var CatalogModule = function (_a) {
    var store = _a.store, router = _a.router, appConfig = _a.appConfig;
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_7__["StorageManager"].init('categories');
                    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_7__["StorageManager"].init('attributes');
                    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_7__["StorageManager"].init('products');
                    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_7__["StorageManager"].init('elasticCache', true, appConfig.server.elasticCacheQuota);
                    store.registerModule('product', _store_product__WEBPACK_IMPORTED_MODULE_0__["productModule"]);
                    store.registerModule('attribute', _store_attribute__WEBPACK_IMPORTED_MODULE_1__["attributeModule"]);
                    store.registerModule('stock', _store_stock__WEBPACK_IMPORTED_MODULE_2__["stockModule"]);
                    store.registerModule('tax', _store_tax__WEBPACK_IMPORTED_MODULE_3__["taxModule"]);
                    store.registerModule('category', _store_category__WEBPACK_IMPORTED_MODULE_4__["categoryModule"]);
                    _hooks__WEBPACK_IMPORTED_MODULE_5__["catalogHooks"].afterSetBundleProducts(function (products) { return Object(_helpers_associatedProducts__WEBPACK_IMPORTED_MODULE_6__["getAttributesFromMetadata"])(store, products); });
                    _hooks__WEBPACK_IMPORTED_MODULE_5__["catalogHooks"].afterSetGroupedProduct(function (products) { return Object(_helpers_associatedProducts__WEBPACK_IMPORTED_MODULE_6__["getAttributesFromMetadata"])(store, products); });
                    if (!!config__WEBPACK_IMPORTED_MODULE_9__.entities.attribute.loadByAttributeMetadata) return [3 /*break*/, 2];
                    return [4 /*yield*/, store.dispatch('attribute/list', {
                            filterValues: Object(lodash_es_uniq__WEBPACK_IMPORTED_MODULE_12__["default"])(__spread(config__WEBPACK_IMPORTED_MODULE_9__.products.defaultFilters, config__WEBPACK_IMPORTED_MODULE_9__.entities.productListWithChildren.includeFields))
                        })];
                case 1:
                    _b.sent();
                    _b.label = 2;
                case 2:
                    if (!_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_11__["isServer"]) {
                        // Things moved from Product.js
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_8__["default"].$on('product-after-priceupdate', function (product) { return Object(_events__WEBPACK_IMPORTED_MODULE_10__["productAfterPriceupdate"])(product, store); });
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_8__["default"].$on('filter-changed-product', function (filterOptions) { return Object(_events__WEBPACK_IMPORTED_MODULE_10__["filterChangedProduct"])(filterOptions, store, router); });
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_8__["default"].$on('product-after-customoptions', function (payload) { return Object(_events__WEBPACK_IMPORTED_MODULE_10__["productAfterCustomoptions"])(payload, store); });
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_8__["default"].$on('product-after-bundleoptions', function (payload) { return Object(_events__WEBPACK_IMPORTED_MODULE_10__["productAfterBundleoptions"])(payload, store); });
                        if (config__WEBPACK_IMPORTED_MODULE_9__.usePriceTiers || store.getters['tax/getIsUserGroupedTaxActive']) {
                            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_8__["default"].$on('user-after-loggedin', _events__WEBPACK_IMPORTED_MODULE_10__["onUserPricesRefreshed"].bind(null, store, router));
                            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_8__["default"].$on('user-after-logout', _events__WEBPACK_IMPORTED_MODULE_10__["onUserPricesRefreshed"].bind(null, store, router));
                        }
                    }
                    return [2 /*return*/];
            }
        });
    });
};


/***/ }),

/***/ "./core/modules/catalog/queries/common.js":
/*!************************************************!*\
  !*** ./core/modules/catalog/queries/common.js ***!
  \************************************************/
/*! exports provided: prepareQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prepareQuery", function() { return prepareQuery; });
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);


function prepareQuery(_ref) {
  var _ref$queryText = _ref.queryText,
      queryText = _ref$queryText === void 0 ? '' : _ref$queryText,
      _ref$filters = _ref.filters,
      filters = _ref$filters === void 0 ? [] : _ref$filters,
      _ref$queryConfig = _ref.queryConfig,
      queryConfig = _ref$queryConfig === void 0 ? '' : _ref$queryConfig;
  var query = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"](); // prepare filters and searchText

  if (filters.length === 0 && queryConfig !== '') {
    // try get filters from config
    if (config__WEBPACK_IMPORTED_MODULE_1__.hasOwnProperty('query') && config__WEBPACK_IMPORTED_MODULE_1__.query.hasOwnProperty(queryConfig) && config__WEBPACK_IMPORTED_MODULE_1__.query[queryConfig].hasOwnProperty('filter')) {
      filters = config__WEBPACK_IMPORTED_MODULE_1__.query[queryConfig].filter;
    }
  }

  if (queryText === '') {
    // try to get searchText from config
    if (config__WEBPACK_IMPORTED_MODULE_1__.hasOwnProperty('query') && config__WEBPACK_IMPORTED_MODULE_1__.query.hasOwnProperty(queryConfig) && config__WEBPACK_IMPORTED_MODULE_1__.query[queryConfig].hasOwnProperty('searchText')) {
      queryText = config__WEBPACK_IMPORTED_MODULE_1__.query[queryConfig].searchText;
    }
  } // Process filters and searchText if exists


  if (filters.length > 0) {
    filters.forEach(function (filter) {
      query = query.applyFilter({
        key: filter.key,
        value: filter.value
      }); // Tees category
    });
  }

  if (queryText !== '') {
    query = query.setSearchText(queryText);
  } // Add basic filters


  query = query.applyFilter({
    key: 'visibility',
    value: {
      'in': [2, 3, 4]
    }
  }).applyFilter({
    key: 'status',
    value: {
      'in': [0, 1]
    }
  });
  return query;
}

/***/ }),

/***/ "./core/modules/catalog/store/attribute/actions.ts":
/*!*********************************************************!*\
  !*** ./core/modules/catalog/store/attribute/actions.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/attribute/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/search */ "./core/lib/search.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/lib/store/entities */ "./core/lib/store/entities.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_prefetchCachedAttributes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/prefetchCachedAttributes */ "./core/modules/catalog/helpers/prefetchCachedAttributes.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_createAttributesListQuery__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/createAttributesListQuery */ "./core/modules/catalog/helpers/createAttributesListQuery.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_reduceAttributesLists__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/reduceAttributesLists */ "./core/modules/catalog/helpers/reduceAttributesLists.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_transformMetadataToAttributes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/transformMetadataToAttributes */ "./core/modules/catalog/helpers/transformMetadataToAttributes.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_filterAttributes__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/filterAttributes */ "./core/modules/catalog/helpers/filterAttributes.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};











var actions = {
    updateAttributes: function (_a, _b) {
        var commit = _a.commit, getters = _a.getters;
        var attributes = _b.attributes;
        return __awaiter(this, void 0, void 0, function () {
            var idsList, codesList, attributes_1, attributes_1_1, attr, attrCollection, e_1, e_2_1;
            var e_2, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        idsList = getters.getAttributeListById;
                        codesList = getters.getAttributeListByCode;
                        _d.label = 1;
                    case 1:
                        _d.trys.push([1, 9, 10, 11]);
                        attributes_1 = __values(attributes), attributes_1_1 = attributes_1.next();
                        _d.label = 2;
                    case 2:
                        if (!!attributes_1_1.done) return [3 /*break*/, 8];
                        attr = attributes_1_1.value;
                        if (!(attr && !config__WEBPACK_IMPORTED_MODULE_3__.attributes.disablePersistentAttributesCache)) return [3 /*break*/, 7];
                        attrCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].get('attributes');
                        _d.label = 3;
                    case 3:
                        _d.trys.push([3, 6, , 7]);
                        return [4 /*yield*/, attrCollection.setItem(Object(_vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_5__["entityKeyName"])('attribute_code', attr.attribute_code.toLowerCase()), attr)];
                    case 4:
                        _d.sent();
                        return [4 /*yield*/, attrCollection.setItem(Object(_vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_5__["entityKeyName"])('attribute_id', attr.attribute_id.toString()), attr)];
                    case 5:
                        _d.sent();
                        return [3 /*break*/, 7];
                    case 6:
                        e_1 = _d.sent();
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error(e_1, 'mutations')();
                        return [3 /*break*/, 7];
                    case 7:
                        attributes_1_1 = attributes_1.next();
                        return [3 /*break*/, 2];
                    case 8: return [3 /*break*/, 11];
                    case 9:
                        e_2_1 = _d.sent();
                        e_2 = { error: e_2_1 };
                        return [3 /*break*/, 11];
                    case 10:
                        try {
                            if (attributes_1_1 && !attributes_1_1.done && (_c = attributes_1.return)) _c.call(attributes_1);
                        }
                        finally { if (e_2) throw e_2.error; }
                        return [7 /*endfinally*/];
                    case 11:
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["ATTRIBUTE_UPD_ATTRIBUTES"], Object(_vue_storefront_core_modules_catalog_helpers_reduceAttributesLists__WEBPACK_IMPORTED_MODULE_8__["default"])({ codesList: codesList, idsList: idsList, attributes: attributes }));
                        return [2 /*return*/];
                }
            });
        });
    },
    loadCachedAttributes: function (_a, _b) {
        var dispatch = _a.dispatch;
        var filterField = _b.filterField, filterValues = _b.filterValues;
        return __awaiter(this, void 0, void 0, function () {
            var attributes;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!filterValues) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, Object(_vue_storefront_core_modules_catalog_helpers_prefetchCachedAttributes__WEBPACK_IMPORTED_MODULE_6__["prefetchCachedAttributes"])(filterField, filterValues)];
                    case 1:
                        attributes = _c.sent();
                        if (!attributes) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('updateAttributes', { attributes: attributes })];
                    case 2:
                        _c.sent();
                        _c.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    },
    updateBlacklist: function (_a, _b) {
        var commit = _a.commit, getters = _a.getters;
        var filterValues = _b.filterValues, filterField = _b.filterField, attributes = _b.attributes;
        if (attributes && filterValues.length > 0) {
            var foundValues_1 = attributes.map(function (attr) { return attr[filterField]; });
            var toBlackList = filterValues.filter(function (ofv) { return !foundValues_1.includes(ofv) && !getters.getBlacklist.includes(ofv); });
            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["ATTRIBUTE_UPD_BLACKLIST"], toBlackList);
        }
    },
    /**
     * Load attributes with specific codes
     * @param {Object} context
     * @param {Array} attrCodes attribute codes to load
     */
    list: function (_a, _b) {
        var getters = _a.getters, dispatch = _a.dispatch;
        var _c = _b.filterValues, filterValues = _c === void 0 ? null : _c, _d = _b.filterField, filterField = _d === void 0 ? 'attribute_code' : _d, _e = _b.only_user_defined, only_user_defined = _e === void 0 ? false : _e, _f = _b.only_visible, only_visible = _f === void 0 ? false : _f, _g = _b.size, size = _g === void 0 ? 150 : _g, _h = _b.start, start = _h === void 0 ? 0 : _h, _j = _b.includeFields, includeFields = _j === void 0 ? config__WEBPACK_IMPORTED_MODULE_3__.entities.optimize ? config__WEBPACK_IMPORTED_MODULE_3__.entities.attribute.includeFields : null : _j;
        return __awaiter(this, void 0, void 0, function () {
            var blacklist, idsList, codesList, orgFilterValues, query, resp, attributes;
            return __generator(this, function (_k) {
                switch (_k.label) {
                    case 0:
                        blacklist = getters.getBlacklist;
                        idsList = getters.getAttributeListById;
                        codesList = getters.getAttributeListByCode;
                        orgFilterValues = filterValues || [];
                        return [4 /*yield*/, dispatch('loadCachedAttributes', { filterField: filterField, filterValues: filterValues })];
                    case 1:
                        _k.sent();
                        filterValues = Object(_vue_storefront_core_modules_catalog_helpers_filterAttributes__WEBPACK_IMPORTED_MODULE_10__["default"])({ filterValues: filterValues, filterField: filterField, blacklist: blacklist, idsList: idsList, codesList: codesList });
                        if (filterValues.length === 0) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].info('Skipping attribute load - attributes already loaded', 'attr', { orgFilterValues: orgFilterValues, filterField: filterField })();
                            return [2 /*return*/, { items: Object.values(codesList) }];
                        }
                        query = Object(_vue_storefront_core_modules_catalog_helpers_createAttributesListQuery__WEBPACK_IMPORTED_MODULE_7__["default"])({
                            filterValues: filterValues,
                            filterField: filterField,
                            onlyDefinedByUser: only_user_defined,
                            onlyVisible: only_visible
                        });
                        return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_1__["quickSearchByQuery"])({ entityType: 'attribute', query: query, includeFields: includeFields, start: start, size: size })];
                    case 2:
                        resp = _k.sent();
                        attributes = resp && orgFilterValues.length > 0 ? resp.items : null;
                        dispatch('updateBlacklist', { filterValues: filterValues, filterField: filterField, attributes: attributes });
                        return [4 /*yield*/, dispatch('updateAttributes', { attributes: attributes })];
                    case 3:
                        _k.sent();
                        return [2 /*return*/, resp];
                }
            });
        });
    },
    loadProductAttributes: function (context, _a) {
        var products = _a.products, _b = _a.merge, merge = _b === void 0 ? false : _b;
        return __awaiter(this, void 0, void 0, function () {
            var attributeMetadata, attributes;
            return __generator(this, function (_c) {
                attributeMetadata = products
                    .filter(function (product) { return product.attributes_metadata; })
                    .map(function (product) { return product.attributes_metadata; });
                attributes = Object(_vue_storefront_core_modules_catalog_helpers_transformMetadataToAttributes__WEBPACK_IMPORTED_MODULE_9__["default"])(attributeMetadata);
                if (merge) {
                    attributes.attrHashByCode = __assign(__assign({}, attributes.attrHashByCode), context.state.list_by_code);
                    attributes.attrHashById = __assign(__assign({}, attributes.attrHashById), context.state.list_by_id);
                }
                context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["ATTRIBUTE_UPD_ATTRIBUTES"], attributes);
                return [2 /*return*/];
            });
        });
    },
    loadCategoryAttributes: function (context, _a) {
        var attributeMetadata = _a.attributeMetadata;
        return __awaiter(this, void 0, void 0, function () {
            var attributes;
            return __generator(this, function (_b) {
                if (!attributeMetadata)
                    return [2 /*return*/];
                attributes = Object(_vue_storefront_core_modules_catalog_helpers_transformMetadataToAttributes__WEBPACK_IMPORTED_MODULE_9__["default"])([attributeMetadata]);
                context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["ATTRIBUTE_UPD_ATTRIBUTES"], attributes);
                return [2 /*return*/];
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/catalog/store/attribute/getters.ts":
/*!*********************************************************!*\
  !*** ./core/modules/catalog/store/attribute/getters.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getters = {
    getAttributeListByCode: function (state) { return state.list_by_code; },
    getAttributeListById: function (state) { return state.list_by_id; },
    // @deprecated
    attributeListByCode: function (state, getters) { return getters.getAttributeListByCode; },
    // @deprecated
    attributeListById: function (state, getters) { return getters.getAttributeListById; },
    getBlacklist: function (state) { return state.blacklist; },
    getAllComparableAttributes: function (state, getters) {
        var attributesByCode = getters.getAttributeListByCode;
        return Object.values(attributesByCode).filter(function (a) { return ['1', true].includes(a.is_comparable); }); // In some cases we get boolean instead of "0"/"1" that why we support both options
    }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/catalog/store/attribute/index.ts":
/*!*******************************************************!*\
  !*** ./core/modules/catalog/store/attribute/index.ts ***!
  \*******************************************************/
/*! exports provided: attributeModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attributeModule", function() { return attributeModule; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/catalog/store/attribute/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/catalog/store/attribute/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/catalog/store/attribute/mutations.ts");



var attributeModule = {
    namespaced: true,
    state: {
        list_by_code: {},
        list_by_id: {},
        blacklist: [],
        labels: {}
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/catalog/store/attribute/mutation-types.ts":
/*!****************************************************************!*\
  !*** ./core/modules/catalog/store/attribute/mutation-types.ts ***!
  \****************************************************************/
/*! exports provided: SN_ATTRIBUTE, ATTRIBUTE_UPD_ATTRIBUTES, ATTRIBUTE_UPD_BLACKLIST */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_ATTRIBUTE", function() { return SN_ATTRIBUTE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ATTRIBUTE_UPD_ATTRIBUTES", function() { return ATTRIBUTE_UPD_ATTRIBUTES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ATTRIBUTE_UPD_BLACKLIST", function() { return ATTRIBUTE_UPD_BLACKLIST; });
var SN_ATTRIBUTE = 'attribute';
var ATTRIBUTE_UPD_ATTRIBUTES = SN_ATTRIBUTE + '/UPD_ATTRIBUTES';
var ATTRIBUTE_UPD_BLACKLIST = SN_ATTRIBUTE + '/UPD_BLACKLIST_ATTRIBUTES';


/***/ }),

/***/ "./core/modules/catalog/store/attribute/mutations.ts":
/*!***********************************************************!*\
  !*** ./core/modules/catalog/store/attribute/mutations.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/attribute/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var _a;



var mutations = (_a = {},
    /**
     * Store attributes by code in state and localForage
     * @param {} state
     * @param {Array} attributes
     */
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["ATTRIBUTE_UPD_ATTRIBUTES"]] = function (state, _a) {
        var attrHashByCode = _a.attrHashByCode, attrHashById = _a.attrHashById;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                vue__WEBPACK_IMPORTED_MODULE_0__["default"].set(state, 'list_by_code', attrHashByCode);
                vue__WEBPACK_IMPORTED_MODULE_0__["default"].set(state, 'list_by_id', attrHashById);
                _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_2__["default"].$emit('product-after-attributes-loaded');
                return [2 /*return*/];
            });
        });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["ATTRIBUTE_UPD_BLACKLIST"]] = function (state, blacklist) {
        state.blacklist = state.blacklist.concat(blacklist);
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/catalog/store/category/actions.ts":
/*!********************************************************!*\
  !*** ./core/modules/catalog/store/category/actions.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/category/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/search */ "./core/lib/search.ts");
/* harmony import */ var _vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/store/entities */ "./core/lib/store/entities.ts");
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var lodash_es_chunk__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash-es/chunk */ "./node_modules/lodash-es/chunk.js");
/* harmony import */ var lodash_es_trim__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash-es/trim */ "./node_modules/lodash-es/trim.js");
/* harmony import */ var lodash_es_toString__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! lodash-es/toString */ "./node_modules/lodash-es/toString.js");
/* harmony import */ var _helpers_optionLabel__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../helpers/optionLabel */ "./core/modules/catalog/helpers/optionLabel.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_13___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_createCategoryListQuery__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/createCategoryListQuery */ "./core/modules/catalog/helpers/createCategoryListQuery.ts");
/* harmony import */ var _vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @vue-storefront/core/modules/url/helpers/transformUrl */ "./core/modules/url/helpers/transformUrl.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};


















var actions = {
    /**
     * Reset current category and path
     * @param {Object} context
     */
    reset: function (context) {
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CURRENT_CATEGORY_PATH"], []);
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CURRENT_CATEGORY"], {});
        _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('stock/clearCache');
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_14__["default"].$emit('category-after-reset', {});
    },
    /**
     * Load categories within specified parent
     * @param {Object} commit promise
     * @param {Object} parent parent category
     */
    list: function (_a, _b) {
        var commit = _a.commit, state = _a.state, dispatch = _a.dispatch;
        var _c = _b.parent, parent = _c === void 0 ? null : _c, _d = _b.key, key = _d === void 0 ? null : _d, _e = _b.value, value = _e === void 0 ? null : _e, _f = _b.level, level = _f === void 0 ? null : _f, _g = _b.onlyActive, onlyActive = _g === void 0 ? true : _g, _h = _b.onlyNotEmpty, onlyNotEmpty = _h === void 0 ? false : _h, _j = _b.size, size = _j === void 0 ? 4000 : _j, _k = _b.start, start = _k === void 0 ? 0 : _k, _l = _b.sort, sort = _l === void 0 ? 'position:asc' : _l, _m = _b.includeFields, includeFields = _m === void 0 ? config__WEBPACK_IMPORTED_MODULE_13__.entities.optimize ? config__WEBPACK_IMPORTED_MODULE_13__.entities.category.includeFields : null : _m, _o = _b.excludeFields, excludeFields = _o === void 0 ? config__WEBPACK_IMPORTED_MODULE_13__.entities.optimize ? config__WEBPACK_IMPORTED_MODULE_13__.entities.category.excludeFields : null : _o, _p = _b.skipCache, skipCache = _p === void 0 ? false : _p, _q = _b.updateState, updateState = _q === void 0 ? true : _q;
        return __awaiter(this, void 0, void 0, function () {
            var _r, searchQuery, isCustomizedQuery, shouldLoadCategories, resp, list;
            return __generator(this, function (_s) {
                switch (_s.label) {
                    case 0:
                        _r = Object(_vue_storefront_core_modules_catalog_helpers_createCategoryListQuery__WEBPACK_IMPORTED_MODULE_16__["default"])({ parent: parent, level: level, key: key, value: value, onlyActive: onlyActive, onlyNotEmpty: onlyNotEmpty }), searchQuery = _r.searchQuery, isCustomizedQuery = _r.isCustomizedQuery;
                        shouldLoadCategories = skipCache || ((!state.list || state.list.length === 0) || isCustomizedQuery);
                        if (!shouldLoadCategories) return [3 /*break*/, 4];
                        return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_2__["quickSearchByQuery"])({ entityType: 'category', query: searchQuery, sort: sort, size: size, start: start, includeFields: includeFields, excludeFields: excludeFields })];
                    case 1:
                        resp = _s.sent();
                        if (!updateState) return [3 /*break*/, 3];
                        return [4 /*yield*/, dispatch('registerCategoryMapping', { categories: resp.items })];
                    case 2:
                        _s.sent();
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CATEGORIES"], __assign(__assign({}, resp), { includeFields: includeFields, excludeFields: excludeFields }));
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_14__["default"].$emit('category-after-list', { query: searchQuery, sort: sort, size: size, start: start, list: resp });
                        _s.label = 3;
                    case 3: return [2 /*return*/, resp];
                    case 4:
                        list = { items: state.list, total: state.list.length };
                        if (updateState) {
                            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_14__["default"].$emit('category-after-list', { query: searchQuery, sort: sort, size: size, start: start, list: list });
                        }
                        return [2 /*return*/, list];
                }
            });
        });
    },
    registerCategoryMapping: function (_a, _b) {
        var dispatch = _a.dispatch;
        var categories = _b.categories;
        return __awaiter(this, void 0, void 0, function () {
            var _c, storeCode, appendStoreCode, categories_1, categories_1_1, category, e_1_1;
            var e_1, _d;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _c = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_10__["currentStoreView"])(), storeCode = _c.storeCode, appendStoreCode = _c.appendStoreCode;
                        _e.label = 1;
                    case 1:
                        _e.trys.push([1, 6, 7, 8]);
                        categories_1 = __values(categories), categories_1_1 = categories_1.next();
                        _e.label = 2;
                    case 2:
                        if (!!categories_1_1.done) return [3 /*break*/, 5];
                        category = categories_1_1.value;
                        if (!category.url_path) return [3 /*break*/, 4];
                        return [4 /*yield*/, dispatch('url/registerMapping', {
                                url: Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_10__["localizedDispatcherRoute"])(category.url_path, storeCode),
                                routeData: Object(_vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_17__["transformCategoryUrl"])(category)
                            }, { root: true })];
                    case 3:
                        _e.sent();
                        _e.label = 4;
                    case 4:
                        categories_1_1 = categories_1.next();
                        return [3 /*break*/, 2];
                    case 5: return [3 /*break*/, 8];
                    case 6:
                        e_1_1 = _e.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 8];
                    case 7:
                        try {
                            if (categories_1_1 && !categories_1_1.done && (_d = categories_1.return)) _d.call(categories_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 8: return [2 /*return*/];
                }
            });
        });
    },
    /**
     * Load category object by specific field - using local storage/indexed Db
     * loadCategories() should be called at first!
     * @param {Object} commit
     * @param {String} key
     * @param {String} value
     * @param {Bool} setCurrentCategory default=true and means that state.current_category is set to the one loaded
     */
    single: function (context, _a) {
        var key = _a.key, value = _a.value, _b = _a.setCurrentCategory, setCurrentCategory = _b === void 0 ? true : _b, _c = _a.setCurrentCategoryPath, setCurrentCategoryPath = _c === void 0 ? true : _c, _d = _a.populateRequestCacheTags, populateRequestCacheTags = _d === void 0 ? true : _d, _e = _a.skipCache, skipCache = _e === void 0 ? false : _e;
        var state = context.state;
        var commit = context.commit;
        var dispatch = context.dispatch;
        return new Promise(function (resolve, reject) {
            var fetchCat = function (_a) {
                var key = _a.key, value = _a.value;
                if (key !== 'id' || value >= config__WEBPACK_IMPORTED_MODULE_13__.entities.category.categoriesRootCategorylId /* root category */) {
                    context.dispatch('list', { key: key, value: value }).then(function (res) {
                        if (res && res.items && res.items.length) {
                            setcat(null, res.items[0]); // eslint-disable-line @typescript-eslint/no-use-before-define
                        }
                        else {
                            reject(new Error('Category query returned empty result ' + key + ' = ' + value));
                        }
                    }).catch(reject);
                }
                else {
                    reject(new Error('Category query returned empty result ' + key + ' = ' + value));
                }
            };
            var setcat = function (error, mainCategory) {
                if (!mainCategory) {
                    fetchCat({ key: key, value: value });
                    return;
                }
                if (error) {
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].error(error)();
                    reject(error);
                }
                if (setCurrentCategory) {
                    commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CURRENT_CATEGORY"], mainCategory);
                }
                if (populateRequestCacheTags && mainCategory && vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags) {
                    vue__WEBPACK_IMPORTED_MODULE_0__["default"].prototype.$cacheTags.add("C" + mainCategory.id);
                }
                if (setCurrentCategoryPath) {
                    var currentPath_1 = [];
                    var recurCatFinder_1 = function (category) {
                        if (!category) {
                            return;
                        }
                        if (category.parent_id >= config__WEBPACK_IMPORTED_MODULE_13__.entities.category.categoriesRootCategorylId) {
                            dispatch('single', { key: 'id', value: category.parent_id, setCurrentCategory: false, setCurrentCategoryPath: false }).then(function (sc) {
                                if (!sc || sc.parent_id === sc.id) {
                                    commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CURRENT_CATEGORY_PATH"], currentPath_1);
                                    _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_14__["default"].$emit('category-after-single', { category: mainCategory });
                                    return resolve(mainCategory);
                                }
                                currentPath_1.unshift(sc);
                                recurCatFinder_1(sc);
                            }).catch(function (err) {
                                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].error(err)();
                                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CURRENT_CATEGORY_PATH"], currentPath_1); // this is the case when category is not binded to the root tree - for example 'Erin Recommends'
                                resolve(mainCategory);
                            });
                        }
                        else {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CURRENT_CATEGORY_PATH"], currentPath_1);
                            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_14__["default"].$emit('category-after-single', { category: mainCategory });
                            resolve(mainCategory);
                        }
                    };
                    if (typeof mainCategory !== 'undefined') {
                        recurCatFinder_1(mainCategory); // TODO: Store breadcrumbs in IndexedDb for further usage to optimize speed?
                    }
                    else {
                        reject(new Error('Category query returned empty result ' + key + ' = ' + value));
                    }
                }
                else {
                    _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_14__["default"].$emit('category-after-single', { category: mainCategory });
                    resolve(mainCategory);
                }
            };
            var foundInLocalCache = false;
            if (state.list.length > 0 && !skipCache) { // SSR - there were some issues with using localForage, so it's the reason to use local state instead, when possible
                var category = state.list.find(function (itm) { return itm[key] === value; });
                // Check if category exists in the store OR we have recursively reached Default category (id=1)
                if (category && value >= config__WEBPACK_IMPORTED_MODULE_13__.entities.category.categoriesRootCategorylId /** root category parent */) {
                    foundInLocalCache = true;
                    setcat(null, category);
                }
            }
            if (!foundInLocalCache) {
                if (skipCache || _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_12__["isServer"]) {
                    fetchCat({ key: key, value: value });
                }
                else {
                    var catCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_15__["StorageManager"].get('categories');
                    // Check if category does not exist in the store AND we haven't recursively reached Default category (id=1)
                    catCollection.getItem(Object(_vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_3__["entityKeyName"])(key, value), setcat);
                }
            }
        });
    },
    /**
     * Filter category products
     */
    products: function (context, _a) {
        var _b = _a.populateAggregations, populateAggregations = _b === void 0 ? false : _b, _c = _a.filters, filters = _c === void 0 ? [] : _c, searchProductQuery = _a.searchProductQuery, _d = _a.current, current = _d === void 0 ? 0 : _d, _e = _a.perPage, perPage = _e === void 0 ? 50 : _e, _f = _a.sort, sort = _f === void 0 ? '' : _f, _g = _a.includeFields, includeFields = _g === void 0 ? null : _g, _h = _a.excludeFields, excludeFields = _h === void 0 ? null : _h, _j = _a.configuration, configuration = _j === void 0 ? null : _j, _k = _a.append, append = _k === void 0 ? false : _k, _l = _a.skipCache, skipCache = _l === void 0 ? false : _l, _m = _a.cacheOnly, cacheOnly = _m === void 0 ? false : _m;
        context.dispatch('setSearchOptions', {
            populateAggregations: populateAggregations,
            filters: filters,
            current: current,
            perPage: perPage,
            includeFields: includeFields,
            excludeFields: excludeFields,
            configuration: configuration,
            append: append,
            sort: sort
        });
        var prefetchGroupProducts = true;
        if (config__WEBPACK_IMPORTED_MODULE_13__.entities.twoStageCaching && config__WEBPACK_IMPORTED_MODULE_13__.entities.optimize && !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_12__["isServer"] && !_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDisabled) { // only client side, only when two stage caching enabled
            includeFields = config__WEBPACK_IMPORTED_MODULE_13__.entities.productListWithChildren.includeFields; // we need configurable_children for filters to work
            excludeFields = config__WEBPACK_IMPORTED_MODULE_13__.entities.productListWithChildren.excludeFields;
            prefetchGroupProducts = false;
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].log('Using two stage caching for performance optimization - executing first stage product pre-fetching')();
        }
        else {
            prefetchGroupProducts = true;
            if (_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDisabled) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].log('Two stage caching is disabled runtime because of no performance gain')();
            }
            else {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].log('Two stage caching is disabled by the config')();
            }
        }
        if (cacheOnly) {
            excludeFields = null;
            includeFields = null;
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].log('Caching request only, no state update')();
        }
        var t0 = new Date().getTime();
        var precachedQuery = searchProductQuery;
        var productPromise = _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('product/list', {
            query: precachedQuery,
            start: current,
            size: perPage,
            excludeFields: excludeFields,
            includeFields: includeFields,
            configuration: configuration,
            append: append,
            sort: sort,
            updateState: !cacheOnly,
            prefetchGroupProducts: prefetchGroupProducts
        }).then(function (res) {
            var e_2, _a, e_3, _b;
            var t1 = new Date().getTime();
            _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDelta1 = t1 - t0;
            var subloaders = [];
            if (!res || (res.noresults)) {
                _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('notification/spawnNotification', {
                    type: 'warning',
                    message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__["default"].t('No products synchronized for this category. Please come back while online!'),
                    action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__["default"].t('OK') }
                });
                if (!append)
                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('product/reset');
                _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.product.list = { items: [] }; // no products to show TODO: refactor to rootStore.state.category.reset() and rootStore.state.product.reset()
                // rootStore.state.category.filters = { color: [], size: [], price: [] }
                return [];
            }
            else {
                if (config__WEBPACK_IMPORTED_MODULE_13__.products.filterUnavailableVariants && config__WEBPACK_IMPORTED_MODULE_13__.products.configurableChildrenStockPrefetchStatic) { // prefetch the stock items
                    var skus_1 = [];
                    var prefetchIndex_1 = 0;
                    res.items.map(function (i) {
                        var e_4, _a;
                        if (config__WEBPACK_IMPORTED_MODULE_13__.products.configurableChildrenStockPrefetchStaticPrefetchCount > 0) {
                            if (prefetchIndex_1 > config__WEBPACK_IMPORTED_MODULE_13__.products.configurableChildrenStockPrefetchStaticPrefetchCount)
                                return;
                        }
                        skus_1.push(i.sku); // main product sku to be checked anyway
                        if (i.type_id === 'configurable' && i.configurable_children && i.configurable_children.length > 0) {
                            try {
                                for (var _b = __values(i.configurable_children), _c = _b.next(); !_c.done; _c = _b.next()) {
                                    var confChild = _c.value;
                                    var cachedItem = context.rootState.stock.cache[confChild.id];
                                    if (typeof cachedItem === 'undefined' || cachedItem === null) {
                                        skus_1.push(confChild.sku);
                                    }
                                }
                            }
                            catch (e_4_1) { e_4 = { error: e_4_1 }; }
                            finally {
                                try {
                                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                                }
                                finally { if (e_4) throw e_4.error; }
                            }
                            prefetchIndex_1++;
                        }
                    });
                    try {
                        for (var _c = __values(Object(lodash_es_chunk__WEBPACK_IMPORTED_MODULE_6__["default"])(skus_1, 15)), _d = _c.next(); !_d.done; _d = _c.next()) {
                            var chunkItem = _d.value;
                            _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('stock/list', { skus: chunkItem, skipCache: skipCache }); // store it in the cache
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
                if (populateAggregations === true && res.aggregations) { // populate filter aggregates
                    var _loop_1 = function (attrToFilter) {
                        var e_5, _a, e_6, _b;
                        var filterOptions = [];
                        var uniqueFilterValues = new Set();
                        if (attrToFilter !== 'price') {
                            if (res.aggregations['agg_terms_' + attrToFilter]) {
                                var buckets = res.aggregations['agg_terms_' + attrToFilter].buckets;
                                if (res.aggregations['agg_terms_' + attrToFilter + '_options']) {
                                    buckets = buckets.concat(res.aggregations['agg_terms_' + attrToFilter + '_options'].buckets);
                                }
                                try {
                                    for (var buckets_1 = (e_5 = void 0, __values(buckets)), buckets_1_1 = buckets_1.next(); !buckets_1_1.done; buckets_1_1 = buckets_1.next()) {
                                        var option = buckets_1_1.value;
                                        uniqueFilterValues.add(Object(lodash_es_toString__WEBPACK_IMPORTED_MODULE_8__["default"])(option.key));
                                    }
                                }
                                catch (e_5_1) { e_5 = { error: e_5_1 }; }
                                finally {
                                    try {
                                        if (buckets_1_1 && !buckets_1_1.done && (_a = buckets_1.return)) _a.call(buckets_1);
                                    }
                                    finally { if (e_5) throw e_5.error; }
                                }
                            }
                            uniqueFilterValues.forEach(function (key) {
                                var label = Object(_helpers_optionLabel__WEBPACK_IMPORTED_MODULE_9__["optionLabel"])(_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.attribute, { attributeKey: attrToFilter, optionId: key });
                                if (Object(lodash_es_trim__WEBPACK_IMPORTED_MODULE_7__["default"])(label) !== '') { // is there any situation when label could be empty and we should still support it?
                                    filterOptions.push({
                                        id: key,
                                        label: label
                                    });
                                }
                            });
                        }
                        else { // special case is range filter for prices
                            var storeView = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_10__["currentStoreView"])();
                            var currencySign = storeView.i18n.currencySign;
                            if (res.aggregations['agg_range_' + attrToFilter]) {
                                var index = 0;
                                var count = res.aggregations['agg_range_' + attrToFilter].buckets.length;
                                try {
                                    for (var _c = (e_6 = void 0, __values(res.aggregations['agg_range_' + attrToFilter].buckets)), _d = _c.next(); !_d.done; _d = _c.next()) {
                                        var option = _d.value;
                                        filterOptions.push({
                                            id: option.key,
                                            from: option.from,
                                            to: option.to,
                                            label: (index === 0 || (index === count - 1)) ? (option.to ? '< ' + currencySign + option.to : '> ' + currencySign + option.from) : currencySign + option.from + (option.to ? ' - ' + option.to : '') // TODO: add better way for formatting, extract currency sign
                                        });
                                        index++;
                                    }
                                }
                                catch (e_6_1) { e_6 = { error: e_6_1 }; }
                                finally {
                                    try {
                                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                                    }
                                    finally { if (e_6) throw e_6.error; }
                                }
                            }
                        }
                        context.dispatch('addAvailableFilter', {
                            key: attrToFilter,
                            options: filterOptions
                        });
                    };
                    try {
                        for (var filters_1 = __values(filters), filters_1_1 = filters_1.next(); !filters_1_1.done; filters_1_1 = filters_1.next()) {
                            var attrToFilter = filters_1_1.value;
                            _loop_1(attrToFilter);
                        }
                    }
                    catch (e_3_1) { e_3 = { error: e_3_1 }; }
                    finally {
                        try {
                            if (filters_1_1 && !filters_1_1.done && (_b = filters_1.return)) _b.call(filters_1);
                        }
                        finally { if (e_3) throw e_3.error; }
                    }
                }
            }
            return subloaders;
        }).catch(function (err) {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].error(err)();
            _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('notification/spawnNotification', {
                type: 'warning',
                message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__["default"].t('No products synchronized for this category. Please come back while online!'),
                action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_5__["default"].t('OK') }
            });
        });
        if (config__WEBPACK_IMPORTED_MODULE_13__.entities.twoStageCaching && config__WEBPACK_IMPORTED_MODULE_13__.entities.optimize && !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_12__["isServer"] && !_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDisabled && !cacheOnly) { // second stage - request for caching entities; if cacheOnly set - the caching took place with the stage1 request!
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].log('Using two stage caching for performance optimization - executing second stage product caching', 'category'); // TODO: in this case we can pre-fetch products in advance getting more products than set by pageSize()
            _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].dispatch('product/list', {
                query: precachedQuery,
                start: current,
                size: perPage,
                excludeFields: null,
                includeFields: null,
                configuration: configuration,
                sort: sort,
                updateState: false,
                prefetchGroupProducts: prefetchGroupProducts
            }).catch(function (err) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].info("Problem with second stage caching - couldn't store the data", 'category')();
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].info(err, 'category')();
            }).then(function (res) {
                var t2 = new Date().getTime();
                _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDelta2 = t2 - t0;
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].log('Using two stage caching for performance optimization - Time comparison stage1 vs stage2' + _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDelta1 + _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDelta2, 'category')();
                if (_vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDelta1 > _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDelta2) { // two stage caching is not making any good
                    _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"].state.twoStageCachingDisabled = true;
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].log('Disabling two stage caching', 'category')();
                }
            });
        }
        return productPromise;
    },
    addAvailableFilter: function (_a, _b) {
        var commit = _a.commit;
        var _c = _b === void 0 ? {} : _b, key = _c.key, options = _c.options;
        if (key)
            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_ADD_AVAILABLE_FILTER"], { key: key, options: options });
    },
    resetFilters: function (context) {
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_REMOVE_FILTERS"]);
    },
    searchProductQuery: function (context, productQuery) {
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_SEARCH_PRODUCT_QUERY"], productQuery);
    },
    setSearchOptions: function (_a, searchOptions) {
        var commit = _a.commit;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_SET_SEARCH_OPTIONS"], searchOptions);
    },
    mergeSearchOptions: function (_a, searchOptions) {
        var commit = _a.commit;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_MERGE_SEARCH_OPTIONS"], searchOptions);
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/catalog/store/category/getters.ts":
/*!********************************************************!*\
  !*** ./core/modules/catalog/store/category/getters.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getters = {
    getCurrentCategory: function (state) { return state.current; },
    getCurrentCategoryPath: function (state) { return state.current_path; },
    getAllCategoryFilters: function (state) { return state.filters; },
    getActiveCategoryFilters: function (state) { return state.filters.chosen; },
    getAvailableCategoryFilters: function (state) { return state.filters.available; },
    getCurrentCategoryProductQuery: function (state) { return state.current_product_query; },
    getCategories: function (state) { return state.list; },
    getCategoryBreadcrumbs: function (state) { return state.breadcrumbs; },
    /**
     * @deprecated use getCurrentCategory instead
     */
    current: function (state, getters) { return getters.getCurrentCategory; },
    /**
     * @deprecated use getCategories instead
     */
    list: function (state, getters) { return getters.getCategories; }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/catalog/store/category/index.ts":
/*!******************************************************!*\
  !*** ./core/modules/catalog/store/category/index.ts ***!
  \******************************************************/
/*! exports provided: categoryModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "categoryModule", function() { return categoryModule; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/catalog/store/category/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/catalog/store/category/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/catalog/store/category/mutations.ts");



var categoryModule = {
    namespaced: true,
    state: {
        list: [],
        current: {},
        filters: {
            available: {},
            chosen: {}
        },
        breadcrumbs: {
            routes: []
        },
        current_product_query: null,
        current_path: [] // list of categories from root to current
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/catalog/store/category/mutation-types.ts":
/*!***************************************************************!*\
  !*** ./core/modules/catalog/store/category/mutation-types.ts ***!
  \***************************************************************/
/*! exports provided: SN_CATEGORY, CATEGORY_UPD_CATEGORIES, CATEGORY_UPD_CURRENT_CATEGORY, CATEGORY_UPD_CURRENT_CATEGORY_PATH, CATEGORY_UPD_SEARCH_PRODUCT_QUERY, CATEGORY_ADD_AVAILABLE_FILTER, CATEGORY_REMOVE_FILTERS, CATEGORY_SET_SEARCH_OPTIONS, CATEGORY_MERGE_SEARCH_OPTIONS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_CATEGORY", function() { return SN_CATEGORY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_UPD_CATEGORIES", function() { return CATEGORY_UPD_CATEGORIES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_UPD_CURRENT_CATEGORY", function() { return CATEGORY_UPD_CURRENT_CATEGORY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_UPD_CURRENT_CATEGORY_PATH", function() { return CATEGORY_UPD_CURRENT_CATEGORY_PATH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_UPD_SEARCH_PRODUCT_QUERY", function() { return CATEGORY_UPD_SEARCH_PRODUCT_QUERY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_ADD_AVAILABLE_FILTER", function() { return CATEGORY_ADD_AVAILABLE_FILTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_REMOVE_FILTERS", function() { return CATEGORY_REMOVE_FILTERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_SET_SEARCH_OPTIONS", function() { return CATEGORY_SET_SEARCH_OPTIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORY_MERGE_SEARCH_OPTIONS", function() { return CATEGORY_MERGE_SEARCH_OPTIONS; });
var SN_CATEGORY = 'category';
var CATEGORY_UPD_CATEGORIES = SN_CATEGORY + '/UPD_CATEGORIES';
var CATEGORY_UPD_CURRENT_CATEGORY = SN_CATEGORY + '/UPD_CURRENT_CATEGORY';
var CATEGORY_UPD_CURRENT_CATEGORY_PATH = SN_CATEGORY + '/UPD_CURRENT_CATEGORY_PATH';
var CATEGORY_UPD_SEARCH_PRODUCT_QUERY = SN_CATEGORY + '/UPD_SEARCH_PRODUCT_QUERY';
var CATEGORY_ADD_AVAILABLE_FILTER = SN_CATEGORY + "/ADD_AVAILABLE_FILTER";
var CATEGORY_REMOVE_FILTERS = SN_CATEGORY + '/REMOVE_FILTERS';
var CATEGORY_SET_SEARCH_OPTIONS = SN_CATEGORY + "/SET_SEARCH_OPTIONS";
var CATEGORY_MERGE_SEARCH_OPTIONS = SN_CATEGORY + "/MERGE_SEARCH_OPTIONS";


/***/ }),

/***/ "./core/modules/catalog/store/category/mutations.ts":
/*!**********************************************************!*\
  !*** ./core/modules/catalog/store/category/mutations.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/category/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/store/entities */ "./core/lib/store/entities.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_slugifyCategories__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/slugifyCategories */ "./core/modules/catalog/helpers/slugifyCategories.ts");
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var _a;








var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CURRENT_CATEGORY"]] = function (state, category) {
        state.current = category;
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__["default"].$emit('category-after-current', { category: category });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CURRENT_CATEGORY_PATH"]] = function (state, path) {
        state.current_path = path; // TODO: store to cache
        state.breadcrumbs.routes = Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["formatBreadCrumbRoutes"])(state.current_path);
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_CATEGORIES"]] = function (state, categories) {
        var e_1, _a;
        var catCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__["StorageManager"].get('categories');
        var _loop_1 = function (category) {
            category = Object(_vue_storefront_core_modules_catalog_helpers_slugifyCategories__WEBPACK_IMPORTED_MODULE_7__["default"])(category);
            var catExist = state.list.find(function (existingCat) { return existingCat.id === category.id; });
            if (!catExist) {
                state.list.push(category);
            }
            if (!categories.includeFields) {
                try {
                    catCollection
                        .setItem(Object(_vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_3__["entityKeyName"])('slug', category.slug.toLowerCase()), category)
                        .catch(function (reason) { return _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error(reason, 'category'); });
                    catCollection
                        .setItem(Object(_vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_3__["entityKeyName"])('id', category.id), category)
                        .catch(function (reason) { return _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error(reason, 'category'); });
                }
                catch (e) {
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error(e, 'category')();
                }
            }
        };
        try {
            for (var _b = __values(categories.items), _c = _b.next(); !_c.done; _c = _b.next()) {
                var category = _c.value;
                _loop_1(category);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        state.list.sort(function (catA, catB) {
            if (catA.position && catB.position) {
                if (catA.position < catB.position)
                    return -1;
                if (catA.position > catB.position)
                    return 1;
            }
            return 0;
        });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_ADD_AVAILABLE_FILTER"]] = function (state, _a) {
        var key = _a.key, _b = _a.options, options = _b === void 0 ? [] : _b;
        vue__WEBPACK_IMPORTED_MODULE_0__["default"].set(state.filters.available, key, options);
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_REMOVE_FILTERS"]] = function (state) {
        state.filters.chosen = {};
        state.current_product_query.configuration = {};
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_UPD_SEARCH_PRODUCT_QUERY"]] = function (state, newQuery) {
        state.current_product_query = newQuery;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_SET_SEARCH_OPTIONS"]] = function (state, searchOptions) {
        state.current_product_query = searchOptions || null;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATEGORY_MERGE_SEARCH_OPTIONS"]] = function (state, searchOptions) {
        if (searchOptions === void 0) { searchOptions = {}; }
        var currentOptions = state.current_product_query || {};
        state.current_product_query = Object.assign(currentOptions, searchOptions);
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/catalog/store/product/actions.ts":
/*!*******************************************************!*\
  !*** ./core/modules/catalog/store/product/actions.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/product/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash-es/cloneDeep */ "./node_modules/lodash-es/cloneDeep.js");
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_6___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/data-resolver/ProductService */ "./core/data-resolver/ProductService.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers */ "./core/modules/catalog/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_productOptions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/productOptions */ "./core/modules/catalog/helpers/productOptions/index.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_events__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/events */ "./core/modules/catalog/events.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};












var actions = __assign({ doPlatformPricesSync: function (context, _a) {
        var products = _a.products;
        return Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_9__["doPlatformPricesSync"])(products);
    },
    /**
     * This is fix for https://github.com/DivanteLtd/vue-storefront/issues/508
     * TODO: probably it would be better to have "parent_id" for simple products or to just ensure configurable variants are not visible in categories/search
     */
    checkConfigurableParent: function (_a, _b) {
        var commit = _a.commit, dispatch = _a.dispatch, getters = _a.getters;
        var product = _b.product;
        if (product.type_id === 'simple') {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].log('Checking configurable parent')();
            var parent_1 = dispatch('findConfigurableParent', { product: { sku: getters.getCurrentProduct.sku } });
            if (parent_1) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_PARENT"], parent_1);
            }
            return parent_1;
        }
    },
    /**
     * Search ElasticSearch catalog of products using simple text query
     * Use bodybuilder to build the query, aggregations etc: http://bodybuilder.js.org/
     * @param {Object} query is the object of searchQuery class
     * @param {Int} start start index
     * @param {Int} size page size
     * @return {Promise}
     */
    list: function (context, _a) {
        var _b = _a === void 0 ? {} : _a, query = _b.query, _c = _b.start, start = _c === void 0 ? 0 : _c, _d = _b.size, size = _d === void 0 ? 50 : _d, _e = _b.sort, sort = _e === void 0 ? '' : _e, _f = _b.prefetchGroupProducts, prefetchGroupProducts = _f === void 0 ? !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"] : _f, _g = _b.excludeFields, excludeFields = _g === void 0 ? null : _g, _h = _b.includeFields, includeFields = _h === void 0 ? null : _h, _j = _b.configuration, configuration = _j === void 0 ? null : _j, _k = _b.populateRequestCacheTags, populateRequestCacheTags = _k === void 0 ? true : _k, _l = _b.updateState, updateState = _l === void 0 ? false : _l, _m = _b.append, append = _m === void 0 ? false : _m;
        return __awaiter(this, void 0, void 0, function () {
            var items;
            return __generator(this, function (_o) {
                switch (_o.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].warn('`product/list` deprecated, will be not used from 1.12, use "findProducts" instead')();
                        return [4 /*yield*/, context.dispatch('findProducts', {
                                query: query,
                                start: start,
                                size: size,
                                sort: sort,
                                excludeFields: excludeFields,
                                includeFields: includeFields,
                                configuration: configuration,
                                options: {
                                    populateRequestCacheTags: populateRequestCacheTags,
                                    prefetchGroupProducts: prefetchGroupProducts
                                }
                            })];
                    case 1:
                        items = (_o.sent()).items;
                        if (updateState) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].warn('updateState and append are deprecated, will be not used from 1.12')();
                            if (append)
                                context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_ADD_PAGED_PRODUCTS"], { items: items });
                            else
                                context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_PAGED_PRODUCTS"], { items: items });
                        }
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_7__["default"].$emit('product-after-list', { query: query, start: start, size: size, sort: sort, entityType: 'product', result: { items: items } });
                        return [2 /*return*/, { items: items }];
                }
            });
        });
    },
    findProducts: function (context, _a) {
        var _b = _a === void 0 ? {} : _a, query = _b.query, _c = _b.start, start = _c === void 0 ? 0 : _c, _d = _b.size, size = _d === void 0 ? 50 : _d, _e = _b.sort, sort = _e === void 0 ? '' : _e, _f = _b.excludeFields, excludeFields = _f === void 0 ? null : _f, _g = _b.includeFields, includeFields = _g === void 0 ? null : _g, _h = _b.configuration, configuration = _h === void 0 ? null : _h, _j = _b.populateRequestCacheTags, populateRequestCacheTags = _j === void 0 ? false : _j, _k = _b.options, _l = _k === void 0 ? {} : _k, _m = _l.populateRequestCacheTags, populateRequestCacheTagsNew = _m === void 0 ? false : _m, _o = _l.prefetchGroupProducts, prefetchGroupProducts = _o === void 0 ? !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"] : _o, _p = _l.setProductErrors, setProductErrors = _p === void 0 ? false : _p, _q = _l.fallbackToDefaultWhenNoAvailable, fallbackToDefaultWhenNoAvailable = _q === void 0 ? true : _q, _r = _l.assignProductConfiguration, assignProductConfiguration = _r === void 0 ? false : _r, _s = _l.separateSelectedVariant, separateSelectedVariant = _s === void 0 ? false : _s, _t = _l.setConfigurableProductOptions, setConfigurableProductOptions = _t === void 0 ? config__WEBPACK_IMPORTED_MODULE_6__.cart.setConfigurableProductOptions : _t, _u = _l.filterUnavailableVariants, filterUnavailableVariants = _u === void 0 ? config__WEBPACK_IMPORTED_MODULE_6__.products.filterUnavailableVariants : _u;
        return __awaiter(this, void 0, void 0, function () {
            var _v, items, restResponseData;
            return __generator(this, function (_w) {
                switch (_w.label) {
                    case 0: return [4 /*yield*/, _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_8__["ProductService"].getProducts({
                            query: query,
                            start: start,
                            size: size,
                            sort: sort,
                            excludeFields: excludeFields,
                            includeFields: includeFields,
                            configuration: configuration,
                            options: {
                                prefetchGroupProducts: prefetchGroupProducts,
                                fallbackToDefaultWhenNoAvailable: fallbackToDefaultWhenNoAvailable,
                                setProductErrors: setProductErrors,
                                setConfigurableProductOptions: setConfigurableProductOptions,
                                filterUnavailableVariants: filterUnavailableVariants,
                                assignProductConfiguration: assignProductConfiguration,
                                separateSelectedVariant: separateSelectedVariant
                            }
                        })];
                    case 1:
                        _v = _w.sent(), items = _v.items, restResponseData = __rest(_v, ["items"]);
                        Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_9__["registerProductsMapping"])(context, items);
                        if (populateRequestCacheTags) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].warn('deprecated from 1.13, use "options.populateRequestCacheTags" instead')();
                        }
                        if (populateRequestCacheTags || populateRequestCacheTagsNew) {
                            Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_9__["setRequestCacheTags"])({ products: items });
                        }
                        return [4 /*yield*/, context.dispatch('tax/calculateTaxes', { products: items }, { root: true })];
                    case 2:
                        _w.sent();
                        return [2 /*return*/, __assign(__assign({}, restResponseData), { items: items })];
                }
            });
        });
    },
    findConfigurableParent: function (context, _a) {
        var product = _a.product, configuration = _a.configuration;
        return __awaiter(this, void 0, void 0, function () {
            var searchQuery, query, products;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        searchQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_2__["SearchQuery"]();
                        query = searchQuery.applyFilter({ key: 'configurable_children.sku', value: { 'eq': product.sku } });
                        return [4 /*yield*/, context.dispatch('findProducts', { query: query, configuration: configuration })];
                    case 1:
                        products = _b.sent();
                        return [2 /*return*/, products.items && products.items.length > 0 ? products.items[0] : null];
                }
            });
        });
    },
    /**
     * Search products by specific field
     * @param {Object} options
     */
    single: function (context, _a) {
        var _b = _a === void 0 ? {} : _a, _c = _b.options, options = _c === void 0 ? {} : _c, _d = _b.setCurrentProduct, setCurrentProduct = _d === void 0 ? false : _d, _e = _b.key, key = _e === void 0 ? 'sku' : _e, _f = _b.skipCache, skipCache = _f === void 0 ? false : _f;
        return __awaiter(this, void 0, void 0, function () {
            var product;
            return __generator(this, function (_g) {
                switch (_g.label) {
                    case 0:
                        if (setCurrentProduct) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].warn('option `setCurrentProduct` is deprecated, will be not used from 1.13')();
                        }
                        if (!options[key]) {
                            throw new Error('Please provide the search key ' + key + ' for product/single action!');
                        }
                        return [4 /*yield*/, _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_8__["ProductService"].getProductByKey({
                                options: options,
                                key: key,
                                skipCache: skipCache
                            })];
                    case 1:
                        product = _g.sent();
                        return [4 /*yield*/, context.dispatch('tax/calculateTaxes', { products: [product] }, { root: true })];
                    case 2:
                        _g.sent();
                        if (!setCurrentProduct) return [3 /*break*/, 4];
                        return [4 /*yield*/, context.dispatch('setCurrent', product)];
                    case 3:
                        _g.sent();
                        _g.label = 4;
                    case 4:
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_7__["default"].$emitFilter('product-after-single', { key: key, options: options, product: product });
                        return [2 /*return*/, product];
                }
            });
        });
    },
    /**
     * Assign the custom options object to the currentl product
     */
    setCustomOptions: function (context, _a) {
        var customOptions = _a.customOptions, product = _a.product;
        if (customOptions) { // TODO: this causes some kind of recurrency error
            context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_CURRENT"], Object.assign({}, product, { product_option: Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_9__["setCustomProductOptionsAsync"])(context, { product: context.getters.getCurrentProduct, customOptions: customOptions }) }));
        }
    },
    /**
     * Assign the bundle options object to the vurrent product
     */
    setBundleOptions: function (context, _a) {
        var bundleOptions = _a.bundleOptions, product = _a.product;
        if (bundleOptions) { // TODO: this causes some kind of recurrency error
            context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_CURRENT"], Object.assign({}, product, { product_option: Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_9__["setBundleProductOptionsAsync"])(context, { product: context.getters.getCurrentProduct, bundleOptions: bundleOptions }) }));
        }
    },
    /**
     * Set current product with given variant's properties
     * @param {Object} context
     * @param {Object} productVariant
     */
    setCurrent: function (context, product) {
        if (product && typeof product === 'object') {
            var configuration = product.configuration, restProduct = __rest(product, ["configuration"]);
            var productUpdated = Object.assign({}, restProduct);
            if (!config__WEBPACK_IMPORTED_MODULE_6__.products.gallery.mergeConfigurableChildren) {
                context.dispatch('setProductGallery', { product: productUpdated });
            }
            var productOptions = Object(_vue_storefront_core_modules_catalog_helpers_productOptions__WEBPACK_IMPORTED_MODULE_10__["getProductConfigurationOptions"])({ product: product, attribute: context.rootState.attribute });
            context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_CURRENT_OPTIONS"], productOptions);
            context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_CURRENT_CONFIGURATION"], configuration || {});
            context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_CURRENT"], productUpdated);
            return productUpdated;
        }
        else
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].debug('Unable to update current product.', 'product')();
    },
    /**
     * Set related products
     */
    related: function (context, _a) {
        var _b = _a.key, key = _b === void 0 ? 'related-products' : _b, items = _a.items;
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_RELATED"], { key: key, items: items });
    },
    /**
     * Load the product data and sets current product
     */
    loadProduct: function (_a, _b) {
        var dispatch = _a.dispatch, state = _a.state;
        var parentSku = _b.parentSku, _c = _b.childSku, childSku = _c === void 0 ? null : _c, _d = _b.route, route = _d === void 0 ? null : _d, _e = _b.skipCache, skipCache = _e === void 0 ? false : _e;
        return __awaiter(this, void 0, void 0, function () {
            var product, parentProduct, syncPromises, gallerySetup;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].info('Fetching product data asynchronously', 'product', { parentSku: parentSku, childSku: childSku })();
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_7__["default"].$emit('product-before-load', { store: _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"], route: route });
                        return [4 /*yield*/, dispatch('single', {
                                options: {
                                    sku: parentSku,
                                    childSku: childSku
                                },
                                key: 'sku',
                                skipCache: skipCache
                            })];
                    case 1:
                        product = _f.sent();
                        Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_9__["setRequestCacheTags"])({ products: [product] });
                        return [4 /*yield*/, dispatch('setCurrent', product)];
                    case 2:
                        _f.sent();
                        if (product.status >= 2) {
                            throw new Error("Product query returned empty result product status = " + product.status);
                        }
                        if (!(product.visibility === 1)) return [3 /*break*/, 5];
                        if (!config__WEBPACK_IMPORTED_MODULE_6__.products.preventConfigurableChildrenDirectAccess) return [3 /*break*/, 4];
                        return [4 /*yield*/, dispatch('findConfigurableParent', { product: product })];
                    case 3:
                        parentProduct = _f.sent();
                        Object(_vue_storefront_core_modules_catalog_events__WEBPACK_IMPORTED_MODULE_11__["checkParentRedirection"])(product, parentProduct);
                        return [3 /*break*/, 5];
                    case 4: throw new Error("Product query returned empty result product visibility = " + product.visibility);
                    case 5:
                        if (!config__WEBPACK_IMPORTED_MODULE_6__.entities.attribute.loadByAttributeMetadata) return [3 /*break*/, 7];
                        return [4 /*yield*/, dispatch('attribute/loadProductAttributes', { products: [product] }, { root: true })];
                    case 6:
                        _f.sent();
                        return [3 /*break*/, 9];
                    case 7: return [4 /*yield*/, dispatch('loadProductAttributes', { product: product })];
                    case 8:
                        _f.sent();
                        _f.label = 9;
                    case 9:
                        syncPromises = [];
                        gallerySetup = dispatch('setProductGallery', { product: product });
                        if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"]) {
                            syncPromises.push(gallerySetup);
                        }
                        return [4 /*yield*/, Promise.all(syncPromises)];
                    case 10:
                        _f.sent();
                        return [4 /*yield*/, _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_7__["default"].$emitFilter('product-after-load', { store: _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_4__["default"], route: route })];
                    case 11:
                        _f.sent();
                        return [2 /*return*/, product];
                }
            });
        });
    },
    /**
     * Add custom option validator for product custom options
     */
    addCustomOptionValidator: function (context, _a) {
        var validationRule = _a.validationRule, validatorFunction = _a.validatorFunction;
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_CUSTOM_OPTION_VALIDATOR"], { validationRule: validationRule, validatorFunction: validatorFunction });
    },
    /**
     * Set product gallery depending on product type
     */
    setProductGallery: function (context, _a) {
        var product = _a.product;
        var productGallery = Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_9__["getProductGallery"])(product);
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["PRODUCT_SET_GALLERY"], productGallery);
    },
    loadProductBreadcrumbs: function (_a, _b) {
        var dispatch = _a.dispatch, rootGetters = _a.rootGetters;
        var product = (_b === void 0 ? {} : _b).product;
        return __awaiter(this, void 0, void 0, function () {
            var currentCategory_1, breadcrumbCategory, categoryFilters, categories;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!(product && product.category_ids)) return [3 /*break*/, 3];
                        currentCategory_1 = rootGetters['category-next/getCurrentCategory'];
                        breadcrumbCategory = void 0;
                        categoryFilters = Object.assign({ 'id': __spread(product.category_ids) }, Object(lodash_es_cloneDeep__WEBPACK_IMPORTED_MODULE_3__["default"])(config__WEBPACK_IMPORTED_MODULE_6__.entities.category.breadcrumbFilterFields));
                        return [4 /*yield*/, dispatch('category-next/loadCategories', { filters: categoryFilters, reloadAll: Object.keys(config__WEBPACK_IMPORTED_MODULE_6__.entities.category.breadcrumbFilterFields).length > 0 }, { root: true })];
                    case 1:
                        categories = _c.sent();
                        if ((currentCategory_1 && currentCategory_1.id) && // current category exist
                            (config__WEBPACK_IMPORTED_MODULE_6__.entities.category.categoriesRootCategorylId !== currentCategory_1.id) && // is not highest category (All) - if we open product from different page then category page
                            (categories.findIndex(function (category) { return category.id === currentCategory_1.id; }) >= 0) // can be found in fetched categories
                        ) {
                            breadcrumbCategory = currentCategory_1; // use current category if set and included in the filtered list
                        }
                        else {
                            breadcrumbCategory = categories.sort(function (a, b) { return (a.level > b.level) ? -1 : 1; })[0]; // sort starting by deepest level
                        }
                        return [4 /*yield*/, dispatch('category-next/loadCategoryBreadcrumbs', { category: breadcrumbCategory, currentRouteName: product.name }, { root: true })];
                    case 2:
                        _c.sent();
                        _c.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    },
    getProductVariant: function (context, _a) {
        var _b = _a === void 0 ? {} : _a, product = _b.product, configuration = _b.configuration;
        return __awaiter(this, void 0, void 0, function () {
            var searchQuery, _c, newProductVariant, _d, selectedVariant, options, product_option;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        searchQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_2__["SearchQuery"]();
                        searchQuery = searchQuery.applyFilter({ key: 'sku', value: { 'eq': product.parentSku } });
                        if (!product.parentSku) {
                            throw new Error('Product doesn\'t have parentSku, please check if this is configurable product');
                        }
                        return [4 /*yield*/, context.dispatch('findProducts', {
                                query: searchQuery,
                                size: 1,
                                configuration: configuration,
                                options: {
                                    fallbackToDefaultWhenNoAvailable: false,
                                    setProductErrors: true,
                                    separateSelectedVariant: true
                                }
                            })];
                    case 1:
                        _c = __read.apply(void 0, [(_e.sent()).items, 1]), newProductVariant = _c[0];
                        _d = newProductVariant.selectedVariant, selectedVariant = _d === void 0 ? {} : _d, options = newProductVariant.options, product_option = newProductVariant.product_option;
                        return [2 /*return*/, __assign(__assign({}, selectedVariant), { options: options, product_option: product_option })];
                }
            });
        });
    } }, __webpack_require__(/*! ./deprecatedActions */ "./core/modules/catalog/store/product/deprecatedActions.ts").default);
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/catalog/store/product/deprecatedActions.ts":
/*!*****************************************************************!*\
  !*** ./core/modules/catalog/store/product/deprecatedActions.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _helpers_optionLabel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../helpers/optionLabel */ "./core/modules/catalog/helpers/optionLabel.ts");
/* harmony import */ var lodash_es_trim__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/trim */ "./node_modules/lodash-es/trim.js");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/search */ "./core/modules/catalog/helpers/search.ts");
/* harmony import */ var lodash_es_toString__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash-es/toString */ "./node_modules/lodash-es/toString.js");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers */ "./core/modules/catalog/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/product/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/data-resolver/ProductService */ "./core/data-resolver/ProductService.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_9___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};











var populateProductConfigurationAsync = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers */ "./core/modules/catalog/helpers/index.ts").populateProductConfigurationAsync;
var actions = {
    /**
     * Reset current configuration and selected variatnts
     */
    reset: function (context) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/reset` deprecated, will be not used from 1.12')();
        var originalProduct = Object.assign({}, context.getters.getOriginalProduct);
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_7__["PRODUCT_RESET_CURRENT"], originalProduct);
    },
    /**
     * Setup product breadcrumbs path
     */
    setupBreadcrumbs: function (context, _a) {
        var product = _a.product;
        return __awaiter(this, void 0, void 0, function () {
            var breadcrumbsName, setBreadcrumbRoutesFromPath, categoryIds_1;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/setupBreadcrumbs` deprecated, will be not used from 1.12')();
                        breadcrumbsName = null;
                        setBreadcrumbRoutesFromPath = function (path) {
                            if (path.findIndex(function (itm) {
                                return itm.slug === context.rootGetters['category/getCurrentCategory'].slug;
                            }) < 0) {
                                path.push({
                                    url_path: context.rootGetters['category/getCurrentCategory'].url_path,
                                    slug: context.rootGetters['category/getCurrentCategory'].slug,
                                    name: context.rootGetters['category/getCurrentCategory'].name
                                }); // current category at the end
                            }
                            // deprecated, TODO: base on breadcrumbs module
                            breadcrumbsName = product.name;
                            var breadcrumbs = {
                                routes: Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["formatBreadCrumbRoutes"])(path),
                                current: breadcrumbsName,
                                name: breadcrumbsName
                            };
                            context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_7__["CATALOG_SET_BREADCRUMBS"], breadcrumbs);
                        };
                        if (!(product.category && product.category.length > 0)) return [3 /*break*/, 2];
                        categoryIds_1 = product.category.reverse().map(function (cat) { return cat.category_id; });
                        return [4 /*yield*/, context.dispatch('category/list', { key: 'id', value: categoryIds_1 }, { root: true }).then(function (categories) { return __awaiter(_this, void 0, void 0, function () {
                                var catList, _loop_1, categoryIds_2, categoryIds_2_1, catId, rootCat, catForBreadcrumbs, catList_1, catList_1_1, cat, catPath;
                                var e_1, _a, e_2, _b;
                                return __generator(this, function (_c) {
                                    switch (_c.label) {
                                        case 0:
                                            catList = [];
                                            _loop_1 = function (catId) {
                                                var category = categories.items.find(function (itm) { return Object(lodash_es_toString__WEBPACK_IMPORTED_MODULE_4__["default"])(itm['id']) === Object(lodash_es_toString__WEBPACK_IMPORTED_MODULE_4__["default"])(catId); });
                                                if (category) {
                                                    catList.push(category);
                                                }
                                            };
                                            try {
                                                for (categoryIds_2 = __values(categoryIds_1), categoryIds_2_1 = categoryIds_2.next(); !categoryIds_2_1.done; categoryIds_2_1 = categoryIds_2.next()) {
                                                    catId = categoryIds_2_1.value;
                                                    _loop_1(catId);
                                                }
                                            }
                                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                                            finally {
                                                try {
                                                    if (categoryIds_2_1 && !categoryIds_2_1.done && (_a = categoryIds_2.return)) _a.call(categoryIds_2);
                                                }
                                                finally { if (e_1) throw e_1.error; }
                                            }
                                            rootCat = catList.shift();
                                            catForBreadcrumbs = rootCat;
                                            try {
                                                for (catList_1 = __values(catList), catList_1_1 = catList_1.next(); !catList_1_1.done; catList_1_1 = catList_1.next()) {
                                                    cat = catList_1_1.value;
                                                    catPath = cat.path;
                                                    if (catPath && catPath.includes(rootCat.path) && (catPath.split('/').length > catForBreadcrumbs.path.split('/').length)) {
                                                        catForBreadcrumbs = cat;
                                                    }
                                                }
                                            }
                                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                                            finally {
                                                try {
                                                    if (catList_1_1 && !catList_1_1.done && (_b = catList_1.return)) _b.call(catList_1);
                                                }
                                                finally { if (e_2) throw e_2.error; }
                                            }
                                            if (!(typeof catForBreadcrumbs !== 'undefined')) return [3 /*break*/, 2];
                                            return [4 /*yield*/, context.dispatch('category/single', { key: 'id', value: catForBreadcrumbs.id }, { root: true }).then(function () {
                                                    setBreadcrumbRoutesFromPath(context.rootGetters['category/getCurrentCategoryPath']);
                                                }).catch(function (err) {
                                                    setBreadcrumbRoutesFromPath(context.rootGetters['category/getCurrentCategoryPath']);
                                                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].error(err)();
                                                })];
                                        case 1:
                                            _c.sent();
                                            return [3 /*break*/, 3];
                                        case 2:
                                            setBreadcrumbRoutesFromPath(context.rootGetters['category/getCurrentCategoryPath']);
                                            _c.label = 3;
                                        case 3: return [2 /*return*/];
                                    }
                                });
                            }); })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    },
    /**
     * Download Magento2 / other platform prices to put them over ElasticSearch prices
     */
    syncPlatformPricesOver: function (_a, _b) {
        var rootGetters = _a.rootGetters;
        var skus = _b.skus;
        return __awaiter(this, void 0, void 0, function () {
            var result;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/syncPlatformPricesOver`deprecated, will be not used from 1.12')();
                        return [4 /*yield*/, _vue_storefront_core_data_resolver_ProductService__WEBPACK_IMPORTED_MODULE_8__["ProductService"].getProductRenderList({
                                skus: skus,
                                isUserGroupedTaxActive: rootGetters['tax/getIsUserGroupedTaxActive'],
                                userGroupId: rootGetters['tax/getUserTaxGroupId'],
                                token: rootGetters['user/getToken']
                            })];
                    case 1:
                        result = _c.sent();
                        return [2 /*return*/, result];
                }
            });
        });
    },
    /**
     * Setup associated products
     */
    setupAssociated: function (context, _a) {
        var e_3, _b, e_4, _c;
        var product = _a.product, _d = _a.skipCache, skipCache = _d === void 0 ? true : _d;
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/setupAssociated` deprecated, will be not used from 1.12')();
        var subloaders = [];
        if (product.type_id === 'grouped') {
            product.price = 0;
            product.price_incl_tax = 0;
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].debug(product.name + ' SETUP ASSOCIATED', product.type_id)();
            if (product.product_links && product.product_links.length > 0) {
                var _loop_2 = function (pl) {
                    if (pl.link_type === 'associated' && pl.linked_product_type === 'simple') { // prefetch links
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].debug('Prefetching grouped product link for ' + pl.sku + ' = ' + pl.linked_product_sku)();
                        subloaders.push(context.dispatch('single', {
                            options: { sku: pl.linked_product_sku },
                            setCurrentProduct: false,
                            selectDefaultVariant: false,
                            skipCache: skipCache
                        }).catch(function (err) { _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].error(err); }).then(function (asocProd) {
                            if (asocProd) {
                                pl.product = asocProd;
                                pl.product.qty = 1;
                                product.price += pl.product.price;
                                product.price_incl_tax += pl.product.price_incl_tax;
                                product.tax += pl.product.tax;
                            }
                            else {
                                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].error('Product link not found', pl.linked_product_sku)();
                            }
                        }));
                    }
                };
                try {
                    for (var _e = __values(product.product_links), _f = _e.next(); !_f.done; _f = _e.next()) {
                        var pl = _f.value;
                        _loop_2(pl);
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
            }
            else {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].error('Product with type grouped has no product_links set!', product)();
            }
        }
        if (product.type_id === 'bundle') {
            product.price = 0;
            product.price_incl_tax = 0;
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].debug(product.name + ' SETUP ASSOCIATED', product.type_id)();
            if (product.bundle_options && product.bundle_options.length > 0) {
                var _loop_3 = function (bo) {
                    var e_5, _a;
                    var defaultOption = bo.product_links.find(function (p) { return p.is_default; });
                    if (!defaultOption)
                        defaultOption = bo.product_links[0];
                    var _loop_4 = function (pl) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].debug('Prefetching bundle product link for ' + bo.sku + ' = ' + pl.sku)();
                        subloaders.push(context.dispatch('single', {
                            options: { sku: pl.sku },
                            setCurrentProduct: false,
                            selectDefaultVariant: false,
                            skipCache: skipCache
                        }).catch(function (err) { _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].error(err); }).then(function (asocProd) {
                            if (asocProd) {
                                pl.product = asocProd;
                                pl.product.qty = pl.qty;
                                if (pl.id === defaultOption.id) {
                                    product.price += pl.product.price * pl.product.qty;
                                    product.price_incl_tax += pl.product.price_incl_tax * pl.product.qty;
                                    product.tax += pl.product.tax * pl.product.qty;
                                }
                            }
                            else {
                                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].error('Product link not found', pl.sku)();
                            }
                        }));
                    };
                    try {
                        for (var _b = (e_5 = void 0, __values(bo.product_links)), _c = _b.next(); !_c.done; _c = _b.next()) {
                            var pl = _c.value;
                            _loop_4(pl);
                        }
                    }
                    catch (e_5_1) { e_5 = { error: e_5_1 }; }
                    finally {
                        try {
                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                        }
                        finally { if (e_5) throw e_5.error; }
                    }
                };
                try {
                    for (var _g = __values(product.bundle_options), _h = _g.next(); !_h.done; _h = _g.next()) {
                        var bo = _h.value;
                        _loop_3(bo);
                    }
                }
                catch (e_4_1) { e_4 = { error: e_4_1 }; }
                finally {
                    try {
                        if (_h && !_h.done && (_c = _g.return)) _c.call(_g);
                    }
                    finally { if (e_4) throw e_4.error; }
                }
            }
        }
        return Promise.all(subloaders);
    },
    /**
     * Load required configurable attributes
     * @param context
     * @param product
     */
    loadConfigurableAttributes: function (context, _a) {
        var product = _a.product;
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/loadConfigurableAttributes` deprecated, will be not used from 1.12')();
        var attributeKey = 'attribute_id';
        var configurableAttrKeys = product.configurable_options.map(function (opt) {
            if (opt.attribute_id) {
                attributeKey = 'attribute_id';
                return opt.attribute_id;
            }
            else {
                attributeKey = 'attribute_code';
                return opt.attribute_code;
            }
        });
        return context.dispatch('attribute/list', {
            filterValues: configurableAttrKeys,
            filterField: attributeKey
        }, { root: true });
    },
    /**
     * Setup product current variants
     */
    setupVariants: function (context, _a) {
        var product = _a.product;
        return __awaiter(this, void 0, void 0, function () {
            var productOptions, _b, _c, option, _d, _e, ov, lb, optionKey, selectedVariant;
            var e_6, _f, e_7, _g;
            return __generator(this, function (_h) {
                switch (_h.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/setupVariants` deprecated, will be not used from 1.12')();
                        if (product.type_id !== 'configurable' || !product.hasOwnProperty('configurable_options')) {
                            return [2 /*return*/];
                        }
                        if (!config__WEBPACK_IMPORTED_MODULE_9__.entities.attribute.loadByAttributeMetadata) return [3 /*break*/, 2];
                        return [4 /*yield*/, context.dispatch('attribute/loadProductAttributes', { products: [product] }, { root: true })];
                    case 1:
                        _h.sent();
                        _h.label = 2;
                    case 2:
                        productOptions = {};
                        try {
                            for (_b = __values(product.configurable_options), _c = _b.next(); !_c.done; _c = _b.next()) {
                                option = _c.value;
                                try {
                                    for (_d = (e_7 = void 0, __values(option.values)), _e = _d.next(); !_e.done; _e = _d.next()) {
                                        ov = _e.value;
                                        lb = ov.label ? ov.label : Object(_helpers_optionLabel__WEBPACK_IMPORTED_MODULE_0__["optionLabel"])(context.rootState.attribute, { attributeKey: option.attribute_id, searchBy: 'id', optionId: ov.value_index });
                                        if (Object(lodash_es_trim__WEBPACK_IMPORTED_MODULE_1__["default"])(lb) !== '') {
                                            optionKey = option.attribute_code ? option.attribute_code : option.label.toLowerCase();
                                            if (!productOptions[optionKey]) {
                                                productOptions[optionKey] = [];
                                            }
                                            productOptions[optionKey].push({
                                                label: lb,
                                                id: ov.value_index,
                                                attribute_code: option.attribute_code
                                            });
                                        }
                                    }
                                }
                                catch (e_7_1) { e_7 = { error: e_7_1 }; }
                                finally {
                                    try {
                                        if (_e && !_e.done && (_g = _d.return)) _g.call(_d);
                                    }
                                    finally { if (e_7) throw e_7.error; }
                                }
                            }
                        }
                        catch (e_6_1) { e_6 = { error: e_6_1 }; }
                        finally {
                            try {
                                if (_c && !_c.done && (_f = _b.return)) _f.call(_b);
                            }
                            finally { if (e_6) throw e_6.error; }
                        }
                        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_7__["PRODUCT_SET_CURRENT_OPTIONS"], productOptions);
                        selectedVariant = context.getters.getCurrentProduct;
                        populateProductConfigurationAsync(context, { selectedVariant: selectedVariant, product: product });
                        return [2 /*return*/];
                }
            });
        });
    },
    filterUnavailableVariants: function (context, _a) {
        var product = _a.product;
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/filterUnavailableVariants` deprecated, will be not used from 1.12')();
        return Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_5__["filterOutUnavailableVariants"])(context, product);
    },
    preConfigureAssociated: function (context, _a) {
        var e_8, _b;
        var searchResult = _a.searchResult, prefetchGroupProducts = _a.prefetchGroupProducts;
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/preConfigureAssociated` deprecated, will be not used from 1.12')();
        Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_5__["registerProductsMapping"])(context, searchResult.items);
        try {
            for (var _c = __values(searchResult.items), _d = _c.next(); !_d.done; _d = _c.next()) {
                var product = _d.value;
                if (Object(_vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_3__["isGroupedOrBundle"])(product) && prefetchGroupProducts && !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["isServer"]) {
                    context.dispatch('setupAssociated', { product: product });
                }
            }
        }
        catch (e_8_1) { e_8 = { error: e_8_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
            }
            finally { if (e_8) throw e_8.error; }
        }
    },
    preConfigureProduct: function (context, _a) {
        var product = _a.product, populateRequestCacheTags = _a.populateRequestCacheTags, configuration = _a.configuration;
        return __awaiter(this, void 0, void 0, function () {
            var _product, selectedVariant;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/preConfigureProduct` deprecated, will be not used from 1.12')();
                        _product = Object(_vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_3__["preConfigureProduct"])({ product: product, populateRequestCacheTags: populateRequestCacheTags });
                        if (!configuration) return [3 /*break*/, 2];
                        return [4 /*yield*/, context.dispatch('getProductVariant', { product: _product, configuration: configuration })];
                    case 1:
                        selectedVariant = _b.sent();
                        _product = Object.assign({}, _product, selectedVariant);
                        _b.label = 2;
                    case 2: return [2 /*return*/, _product];
                }
            });
        });
    },
    configureLoadedProducts: function (context, _a) {
        var products = _a.products, isCacheable = _a.isCacheable, cacheByKey = _a.cacheByKey, populateRequestCacheTags = _a.populateRequestCacheTags, configuration = _a.configuration;
        return __awaiter(this, void 0, void 0, function () {
            var configuredProducts, configuredProducts_1, configuredProducts_1_1, product;
            var e_9, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/configureLoadedProducts` deprecated, will be not used from 1.12')();
                        return [4 /*yield*/, context.dispatch('category-next/configureProducts', {
                                products: products.items,
                                filters: configuration || {},
                                populateRequestCacheTags: populateRequestCacheTags
                            }, { root: true })];
                    case 1:
                        configuredProducts = _c.sent();
                        return [4 /*yield*/, context.dispatch('tax/calculateTaxes', { products: configuredProducts }, { root: true })];
                    case 2:
                        _c.sent();
                        try {
                            for (configuredProducts_1 = __values(configuredProducts), configuredProducts_1_1 = configuredProducts_1.next(); !configuredProducts_1_1.done; configuredProducts_1_1 = configuredProducts_1.next()) { // we store each product separately in cache to have offline access to products/single method
                                product = configuredProducts_1_1.value;
                                if (isCacheable) { // store cache only for full loads
                                    Object(_vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_3__["storeProductToCache"])(product, cacheByKey);
                                }
                            }
                        }
                        catch (e_9_1) { e_9 = { error: e_9_1 }; }
                        finally {
                            try {
                                if (configuredProducts_1_1 && !configuredProducts_1_1.done && (_b = configuredProducts_1.return)) _b.call(configuredProducts_1);
                            }
                            finally { if (e_9) throw e_9.error; }
                        }
                        return [2 /*return*/, products];
                }
            });
        });
    },
    /**
     * Update associated products for bundle product
     * @param context
     * @param product
     */
    configureBundleAsync: function (context, product) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/configureBundleAsync` deprecated, will be not used from 1.12')();
        return context.dispatch('setupAssociated', {
            product: product,
            skipCache: true
        })
            .then(function () { context.dispatch('setCurrent', product); })
            .then(function () { _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_10__["default"].$emit('product-after-setup-associated'); });
    },
    /**
     * Update associated products for group product
     * @param context
     * @param product
     */
    configureGroupedAsync: function (context, product) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/configureGroupedAsync` deprecated, will be not used from 1.12')();
        return context.dispatch('setupAssociated', {
            product: product,
            skipCache: true
        })
            .then(function () { context.dispatch('setCurrent', product); });
    },
    /**
     * Configure product with given configuration and set it as current
     * @param {Object} context
     * @param {Object} product
     * @param {Array} configuration
     */
    configure: function (context, _a) {
        var _b = _a.product, product = _b === void 0 ? null : _b, configuration = _a.configuration, _c = _a.selectDefaultVariant, selectDefaultVariant = _c === void 0 ? true : _c, _d = _a.fallbackToDefaultWhenNoAvailable, fallbackToDefaultWhenNoAvailable = _d === void 0 ? false : _d;
        return __awaiter(this, void 0, void 0, function () {
            var result;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/configure` deprecated, will be not used from 1.12, use "product/getProductVariant"')();
                        return [4 /*yield*/, context.dispatch('getProductVariant', { product: product, configuration: configuration })];
                    case 1:
                        result = _e.sent();
                        return [2 /*return*/, result];
                }
            });
        });
    },
    setCurrentOption: function (context, productOption) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/setCurrentOption` deprecated, will be not used from 1.12')();
        if (productOption && typeof productOption === 'object') { // TODO: this causes some kind of recurrency error
            context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_7__["PRODUCT_SET_CURRENT"], Object.assign({}, context.getters.getCurrentProduct, { product_option: productOption }));
        }
    },
    setCurrentErrors: function (context, errors) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/setCurrentErrors` deprecated, will be not used from 1.12')();
        if (errors && typeof errors === 'object') {
            context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_7__["PRODUCT_SET_CURRENT"], Object.assign({}, context.getters.getCurrentProduct, { errors: errors }));
        }
    },
    /**
     * Set given product as original
     * @param {Object} context
     * @param {Object} originalProduct
     */
    setOriginal: function (context, originalProduct) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/setOriginal` deprecated, will be not used from 1.12')();
        if (originalProduct && typeof originalProduct === 'object')
            context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_7__["PRODUCT_SET_ORIGINAL"], Object.assign({}, originalProduct));
        else
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].debug('Unable to setup original product.', 'product')();
    },
    /**
     * Load product attributes
     */
    loadProductAttributes: function (_a, _b) {
        var dispatch = _a.dispatch;
        var product = _b.product;
        return __awaiter(this, void 0, void 0, function () {
            var productFields, _c, useDynamicAttributeLoader, optimize, attribute;
            return __generator(this, function (_d) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_6__["Logger"].warn('`product/loadProductAttributes` deprecated, will be not used from 1.12')();
                productFields = Object.keys(product).filter(function (fieldName) {
                    return !config__WEBPACK_IMPORTED_MODULE_9__.entities.product.standardSystemFields.includes(fieldName); // don't load metadata info for standard fields
                });
                _c = config__WEBPACK_IMPORTED_MODULE_9__.entities, useDynamicAttributeLoader = _c.product.useDynamicAttributeLoader, optimize = _c.optimize, attribute = _c.attribute;
                return [2 /*return*/, dispatch('attribute/list', {
                        filterValues: useDynamicAttributeLoader ? productFields : null,
                        only_visible: !!useDynamicAttributeLoader,
                        only_user_defined: true,
                        includeFields: optimize ? attribute.includeFields : null
                    }, { root: true })];
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/catalog/store/product/getters.ts":
/*!*******************************************************!*\
  !*** ./core/modules/catalog/store/product/getters.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var getters = {
    getCurrentProduct: function (state) { return state.current; },
    getCurrentProductConfiguration: function (state) { return state.current_configuration; },
    getCurrentProductOptions: function (state) { return state.current_options; },
    getOriginalProduct: function (state, getters) {
        if (!getters.getCurrentProduct)
            return null;
        return state.original || __assign(__assign({}, getters.getCurrentProduct), { id: getters.getCurrentProduct.parentId || getters.getCurrentProduct.id });
    },
    getParentProduct: function (state) { return state.parent; },
    getProductsSearchResult: function (state) { return state.list; },
    getProducts: function (state, getters) { return getters.getProductsSearchResult.items; },
    getProductGallery: function (state) { return state.productGallery; },
    getProductRelated: function (state) { return state.related; },
    getCurrentCustomOptions: function (state) { return state.current_custom_options; }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/catalog/store/product/index.ts":
/*!*****************************************************!*\
  !*** ./core/modules/catalog/store/product/index.ts ***!
  \*****************************************************/
/*! exports provided: productModule, nonReactiveState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "productModule", function() { return productModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nonReactiveState", function() { return nonReactiveState; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/catalog/store/product/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/catalog/store/product/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/catalog/store/product/mutations.ts");



var productModule = {
    namespaced: true,
    state: {
        // TODO use breadcrumbs from category-next, leave here for backward compatibility
        breadcrumbs: {
            routes: [],
            name: ''
        },
        current: null,
        current_options: {
            color: [],
            size: []
        },
        current_configuration: {},
        parent: null,
        list: {
            start: 0,
            perPage: 50,
            total: 0,
            items: []
        },
        original: null,
        related: {},
        offlineImage: null,
        current_custom_options: {},
        current_bundle_options: {},
        custom_options_validators: {},
        productLoadStart: 0,
        productLoadPromise: null,
        productGallery: []
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};
var nonReactiveState = {
    list: []
};


/***/ }),

/***/ "./core/modules/catalog/store/product/mutation-types.ts":
/*!**************************************************************!*\
  !*** ./core/modules/catalog/store/product/mutation-types.ts ***!
  \**************************************************************/
/*! exports provided: SN_PRODUCT, PRODUCT_SET_PAGED_PRODUCTS, PRODUCT_ADD_PAGED_PRODUCTS, PRODUCT_SET_RELATED, PRODUCT_SET_CURRENT, PRODUCT_SET_CURRENT_OPTIONS, PRODUCT_RESET_CURRENT, PRODUCT_SET_ORIGINAL, PRODUCT_SET_CURRENT_CONFIGURATION, PRODUCT_SET_PARENT, PRODUCT_SET_CUSTOM_OPTION, PRODUCT_SET_CUSTOM_OPTION_VALIDATOR, PRODUCT_SET_BUNDLE_OPTION, PRODUCT_SET_GALLERY, CATALOG_UPD_PRODUCTS, CATALOG_UPD_RELATED, CATALOG_SET_PRODUCT_CURRENT, CATALOG_SET_PRODUCT_ORIGINAL, CATALOG_RESET_PRODUCT, CATALOG_SET_PRODUCT_PARENT, CATALOG_UPD_CUSTOM_OPTION, CATALOG_UPD_BUNDLE_OPTION, CATALOG_ADD_CUSTOM_OPTION_VALIDATOR, CATALOG_UPD_GALLERY, CATALOG_SET_BREADCRUMBS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_PRODUCT", function() { return SN_PRODUCT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_PAGED_PRODUCTS", function() { return PRODUCT_SET_PAGED_PRODUCTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_ADD_PAGED_PRODUCTS", function() { return PRODUCT_ADD_PAGED_PRODUCTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_RELATED", function() { return PRODUCT_SET_RELATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_CURRENT", function() { return PRODUCT_SET_CURRENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_CURRENT_OPTIONS", function() { return PRODUCT_SET_CURRENT_OPTIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_RESET_CURRENT", function() { return PRODUCT_RESET_CURRENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_ORIGINAL", function() { return PRODUCT_SET_ORIGINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_CURRENT_CONFIGURATION", function() { return PRODUCT_SET_CURRENT_CONFIGURATION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_PARENT", function() { return PRODUCT_SET_PARENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_CUSTOM_OPTION", function() { return PRODUCT_SET_CUSTOM_OPTION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_CUSTOM_OPTION_VALIDATOR", function() { return PRODUCT_SET_CUSTOM_OPTION_VALIDATOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_BUNDLE_OPTION", function() { return PRODUCT_SET_BUNDLE_OPTION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRODUCT_SET_GALLERY", function() { return PRODUCT_SET_GALLERY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_UPD_PRODUCTS", function() { return CATALOG_UPD_PRODUCTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_UPD_RELATED", function() { return CATALOG_UPD_RELATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_SET_PRODUCT_CURRENT", function() { return CATALOG_SET_PRODUCT_CURRENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_SET_PRODUCT_ORIGINAL", function() { return CATALOG_SET_PRODUCT_ORIGINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_RESET_PRODUCT", function() { return CATALOG_RESET_PRODUCT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_SET_PRODUCT_PARENT", function() { return CATALOG_SET_PRODUCT_PARENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_UPD_CUSTOM_OPTION", function() { return CATALOG_UPD_CUSTOM_OPTION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_UPD_BUNDLE_OPTION", function() { return CATALOG_UPD_BUNDLE_OPTION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_ADD_CUSTOM_OPTION_VALIDATOR", function() { return CATALOG_ADD_CUSTOM_OPTION_VALIDATOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_UPD_GALLERY", function() { return CATALOG_UPD_GALLERY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATALOG_SET_BREADCRUMBS", function() { return CATALOG_SET_BREADCRUMBS; });
var SN_PRODUCT = 'product';
var PRODUCT_SET_PAGED_PRODUCTS = SN_PRODUCT + '/SET_PRODUCTS';
var PRODUCT_ADD_PAGED_PRODUCTS = SN_PRODUCT + '/ADD_PRODUCTS';
var PRODUCT_SET_RELATED = SN_PRODUCT + '/SET_RELATED';
var PRODUCT_SET_CURRENT = SN_PRODUCT + '/SET_CURRENT';
var PRODUCT_SET_CURRENT_OPTIONS = SN_PRODUCT + '/SET_CURRENT_OPTIONS';
var PRODUCT_RESET_CURRENT = SN_PRODUCT + '/RESET_CURRENT';
var PRODUCT_SET_ORIGINAL = SN_PRODUCT + '/SET_ORIGINAL';
var PRODUCT_SET_CURRENT_CONFIGURATION = SN_PRODUCT + '/SET_CURRENT_CONFIGURATION';
var PRODUCT_SET_PARENT = SN_PRODUCT + '/SET_PARENT';
var PRODUCT_SET_CUSTOM_OPTION = SN_PRODUCT + '/SET_CUSTOM_OPTION';
var PRODUCT_SET_CUSTOM_OPTION_VALIDATOR = SN_PRODUCT + '/SET_CUSTOM_OPTION_VALIDATOR';
var PRODUCT_SET_BUNDLE_OPTION = SN_PRODUCT + '/SET_BUNDLE_OPTION';
var PRODUCT_SET_GALLERY = SN_PRODUCT + '/SET_PRODUCT_GALLERY';
// remove later
var CATALOG_UPD_PRODUCTS = SN_PRODUCT + '/UPD_PRODUCTS';
var CATALOG_UPD_RELATED = SN_PRODUCT + '/UPD_RELATED';
var CATALOG_SET_PRODUCT_CURRENT = SN_PRODUCT + '/SET_PRODUCT_CURRENT';
var CATALOG_SET_PRODUCT_ORIGINAL = SN_PRODUCT + '/SET_PRODUCT_ORIGINAL';
var CATALOG_RESET_PRODUCT = SN_PRODUCT + '/RESET_PRODUCT_ORIGINAL';
var CATALOG_SET_PRODUCT_PARENT = SN_PRODUCT + '/SET_PARENT';
var CATALOG_UPD_CUSTOM_OPTION = SN_PRODUCT + '/SET_CUSTOM_OPTION';
var CATALOG_UPD_BUNDLE_OPTION = SN_PRODUCT + '/UPD_BUNDLE_OPTION';
var CATALOG_ADD_CUSTOM_OPTION_VALIDATOR = SN_PRODUCT + '/ADD_CUSTOM_OPTION_VALIDATOR';
var CATALOG_UPD_GALLERY = SN_PRODUCT + '/SET_GALLERY';
var CATALOG_SET_BREADCRUMBS = SN_PRODUCT + '/SET_BREADCRUMBS';


/***/ }),

/***/ "./core/modules/catalog/store/product/mutations.ts":
/*!*********************************************************!*\
  !*** ./core/modules/catalog/store/product/mutations.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/product/mutation-types.ts");
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (undefined && undefined.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};
var _a;



var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_PAGED_PRODUCTS"]] = function (state, searchResult) {
        var start = searchResult.start, perPage = searchResult.perPage, total = searchResult.total, items = searchResult.items;
        state.list = {
            start: start,
            perPage: perPage,
            total: total,
            items: items
        };
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_ADD_PAGED_PRODUCTS"]] = function (state, searchResult) {
        var start = searchResult.start, perPage = searchResult.perPage, items = searchResult.items;
        state.list = Object.assign({}, state.list, {
            start: start,
            perPage: perPage,
            items: __spread(state.list.items, items)
        });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_RELATED"]] = function (state, _a) {
        var _b;
        var key = _a.key, items = _a.items;
        state.related = Object.assign({}, state.related, (_b = {}, _b[key] = items, _b));
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_CURRENT"]] = function (state, product) {
        state.current = product;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_RESET_CURRENT"]] = function (state, originalProduct) {
        state.current = Object.assign({}, originalProduct);
        state.current_configuration = {};
        state.offlineImage = null;
        state.parent = null;
        state.current_options = { color: [], size: [] };
        state.current_bundle_options = {};
        state.current_custom_options = {};
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_CURRENT_OPTIONS"]] = function (state, configuration) {
        if (configuration === void 0) { configuration = {}; }
        state.current_options = configuration;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_CURRENT_CONFIGURATION"]] = function (state, configuration) {
        if (configuration === void 0) { configuration = {}; }
        vue__WEBPACK_IMPORTED_MODULE_2__["default"].set(state, 'current_configuration', configuration || {});
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_ORIGINAL"]] = function (state, product) {
        state.original = product;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_PARENT"]] = function (state, product) {
        state.parent = product;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_CUSTOM_OPTION"]] = function (state, _a) {
        var _b;
        var optionId = _a.optionId, optionValue = _a.optionValue;
        state.current_custom_options = Object.assign({}, state.current_custom_options, (_b = {}, _b[optionId] = {
            option_id: optionId,
            option_value: optionValue
        }, _b));
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_BUNDLE_OPTION"]] = function (state, _a) {
        var _b;
        var optionId = _a.optionId, optionQty = _a.optionQty, optionSelections = _a.optionSelections;
        var option = {
            option_id: optionId,
            option_qty: optionQty,
            option_selections: optionSelections
        };
        state.current_bundle_options = Object.assign({}, state.current_bundle_options, (_b = {}, _b[optionId] = option, _b));
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_CUSTOM_OPTION_VALIDATOR"]] = function (state, _a) {
        var _b;
        var validationRule = _a.validationRule, validatorFunction = _a.validatorFunction;
        state.custom_options_validators = Object.assign({}, state.custom_options_validators, (_b = {}, _b[validationRule] = validatorFunction, _b));
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["PRODUCT_SET_GALLERY"]] = function (state, productGallery) {
        state.productGallery = productGallery;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATALOG_SET_BREADCRUMBS"]] = function (state, payload) {
        state.breadcrumbs = payload;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATALOG_ADD_CUSTOM_OPTION_VALIDATOR"]] = function (state, _a) {
        var validationRule = _a.validationRule, validatorFunction = _a.validatorFunction;
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('Deprecated mutation CATALOG_ADD_CUSTOM_OPTION_VALIDATOR - use PRODUCT_SET_CUSTOM_OPTION_VALIDATOR instead')();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATALOG_UPD_RELATED"]] = function (state, _a) {
        var key = _a.key, items = _a.items;
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('Deprecated mutation CATALOG_UPD_RELATED - use PRODUCT_SET_RELATED instead')();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATALOG_UPD_BUNDLE_OPTION"]] = function (state, _a) {
        var optionId = _a.optionId, optionQty = _a.optionQty, optionSelections = _a.optionSelections;
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('Deprecated mutation CATALOG_UPD_BUNDLE_OPTION - use PRODUCT_SET_BUNDLE_OPTION instead')();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATALOG_UPD_PRODUCTS"]] = function (state, _a) {
        var products = _a.products, append = _a.append;
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('Deprecated mutation CATALOG_UPD_PRODUCTS - use PRODUCT_SET_PAGED_PRODUCTS or PRODUCT_ADD_PAGED_PRODUCTS instead')();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATALOG_SET_PRODUCT_CURRENT"]] = function (state, product) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('Deprecated mutation CATALOG_SET_PRODUCT_CURRENT - use PRODUCT_SET_CURRENT instead')();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATALOG_SET_PRODUCT_ORIGINAL"]] = function (state, product) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('Deprecated mutation CATALOG_SET_PRODUCT_ORIGINAL - use PRODUCT_SET_ORIGINAL instead')();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATALOG_RESET_PRODUCT"]] = function (state, productOriginal) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('Deprecated mutation CATALOG_RESET_PRODUCT - use PRODUCT_RESET_CURRENT instead')();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CATALOG_UPD_GALLERY"]] = function (state, productGallery) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('Deprecated mutation CATALOG_UPD_GALLERY - use PRODUCT_SET_GALLERY instead')();
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/catalog/store/stock/actions.ts":
/*!*****************************************************!*\
  !*** ./core/modules/catalog/store/stock/actions.ts ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_modules_catalog_store_stock_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/store/stock/mutation-types */ "./core/modules/catalog/store/stock/mutation-types.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_stock__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/stock */ "./core/modules/catalog/helpers/stock/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};





var actions = {
    queueCheck: function (_a, _b) {
        var dispatch = _a.dispatch;
        var product = _b.product;
        return __awaiter(this, void 0, void 0, function () {
            var checkStatus, task;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        checkStatus = {
                            qty: product.stock ? product.stock.qty : 0,
                            status: Object(_vue_storefront_core_modules_catalog_helpers_stock__WEBPACK_IMPORTED_MODULE_3__["getStatus"])(product, 'ok')
                        };
                        if (!config__WEBPACK_IMPORTED_MODULE_1__.stock.synchronize) return [3 /*break*/, 2];
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__["StockService"].queueCheck(product.sku, 'cart/stockSync')
                            // @ts-ignore
                        ];
                    case 1:
                        task = _c.sent();
                        // @ts-ignore
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].debug("Stock quantity checked for " + task.product_sku + ", response time: " + (task.transmited_at - task.created_at) + " ms", 'stock')();
                        return [2 /*return*/, __assign(__assign({}, checkStatus), { onlineCheckTaskId: task.task_id })];
                    case 2: return [2 /*return*/, __assign(__assign({}, checkStatus), { status: Object(_vue_storefront_core_modules_catalog_helpers_stock__WEBPACK_IMPORTED_MODULE_3__["getStatus"])(product, 'volatile') })];
                }
            });
        });
    },
    check: function (context, _a) {
        var product = _a.product;
        return __awaiter(this, void 0, void 0, function () {
            var _b, result, task_id;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!config__WEBPACK_IMPORTED_MODULE_1__.stock.synchronize) return [3 /*break*/, 2];
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__["StockService"].check(product.sku)];
                    case 1:
                        _b = _c.sent(), result = _b.result, task_id = _b.task_id;
                        return [2 /*return*/, {
                                qty: result ? result.qty : 0,
                                status: Object(_vue_storefront_core_modules_catalog_helpers_stock__WEBPACK_IMPORTED_MODULE_3__["getStatus"])(result, 'ok'),
                                isManageStock: result.manage_stock,
                                onlineCheckTaskId: task_id
                            }];
                    case 2: return [2 /*return*/, {
                            qty: product.stock ? product.stock.qty : 0,
                            status: Object(_vue_storefront_core_modules_catalog_helpers_stock__WEBPACK_IMPORTED_MODULE_3__["getStatus"])(product, 'volatile')
                        }];
                }
            });
        });
    },
    list: function (_a, _b) {
        var commit = _a.commit;
        var skus = _b.skus;
        return __awaiter(this, void 0, void 0, function () {
            var task, productInfos, productInfos_1, productInfos_1_1, productInfo;
            var e_1, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (!config__WEBPACK_IMPORTED_MODULE_1__.stock.synchronize)
                            return [2 /*return*/];
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__["StockService"].list(skus)];
                    case 1:
                        task = _d.sent();
                        if (task.resultCode === 200) {
                            productInfos = Object(_vue_storefront_core_modules_catalog_helpers_stock__WEBPACK_IMPORTED_MODULE_3__["getProductInfos"])(task.result);
                            try {
                                for (productInfos_1 = __values(productInfos), productInfos_1_1 = productInfos_1.next(); !productInfos_1_1.done; productInfos_1_1 = productInfos_1.next()) {
                                    productInfo = productInfos_1_1.value;
                                    commit(_vue_storefront_core_modules_catalog_store_stock_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_STOCK_CACHE_PRODUCT"], {
                                        productId: productInfo.product_id,
                                        productInfo: productInfo
                                    });
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (productInfos_1_1 && !productInfos_1_1.done && (_c = productInfos_1.return)) _c.call(productInfos_1);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        }
                        return [2 /*return*/, task];
                }
            });
        });
    },
    clearCache: function (_a) {
        var commit = _a.commit;
        commit(_vue_storefront_core_modules_catalog_store_stock_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_STOCK_CACHE"], {});
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/catalog/store/stock/index.ts":
/*!***************************************************!*\
  !*** ./core/modules/catalog/store/stock/index.ts ***!
  \***************************************************/
/*! exports provided: stockModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stockModule", function() { return stockModule; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/catalog/store/stock/actions.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutations */ "./core/modules/catalog/store/stock/mutations.ts");


var stockModule = {
    namespaced: true,
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_1__["default"],
    state: {
        cache: {}
    }
};


/***/ }),

/***/ "./core/modules/catalog/store/stock/mutation-types.ts":
/*!************************************************************!*\
  !*** ./core/modules/catalog/store/stock/mutation-types.ts ***!
  \************************************************************/
/*! exports provided: SN_CATALOG, SET_STOCK_CACHE, SET_STOCK_CACHE_PRODUCT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_CATALOG", function() { return SN_CATALOG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SET_STOCK_CACHE", function() { return SET_STOCK_CACHE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SET_STOCK_CACHE_PRODUCT", function() { return SET_STOCK_CACHE_PRODUCT; });
var SN_CATALOG = 'catalog';
var SET_STOCK_CACHE = SN_CATALOG + "/SET_STOCK_CACHE";
var SET_STOCK_CACHE_PRODUCT = SN_CATALOG + "/SET_STOCK_CACHE_PRODUCT";


/***/ }),

/***/ "./core/modules/catalog/store/stock/mutations.ts":
/*!*******************************************************!*\
  !*** ./core/modules/catalog/store/stock/mutations.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/stock/mutation-types.ts");
var _a;

var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_STOCK_CACHE"]] = function (state, cache) {
        state.cache = cache;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_STOCK_CACHE_PRODUCT"]] = function (state, _a) {
        var _b;
        var productId = _a.productId, productInfo = _a.productInfo;
        state.cache = Object.assign({}, state.cache, (_b = {},
            _b[productId] = productInfo,
            _b));
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/catalog/store/tax/actions.ts":
/*!***************************************************!*\
  !*** ./core/modules/catalog/store/tax/actions.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/tax/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/search */ "./core/lib/search.ts");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/lib/store/entities */ "./core/lib/store/entities.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_6___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_taxCalc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/taxCalc */ "./core/modules/catalog/helpers/taxCalc.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers */ "./core/modules/catalog/helpers/index.ts");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./../../hooks */ "./core/modules/catalog/hooks/index.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};











var actions = {
    list: function (_a, _b) {
        var state = _a.state, commit = _a.commit, dispatch = _a.dispatch;
        var _c = _b.entityType, entityType = _c === void 0 ? 'taxrule' : _c;
        return __awaiter(this, void 0, void 0, function () {
            var resp;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (state.rules.length > 0) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].info('Tax rules served from local memory', 'tax')();
                            return [2 /*return*/, { items: state.rules }];
                        }
                        return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_1__["quickSearchByQuery"])({ query: new storefront_query_builder__WEBPACK_IMPORTED_MODULE_2__["SearchQuery"](), entityType: entityType })];
                    case 1:
                        resp = _d.sent();
                        dispatch('storeToRulesCache', { items: resp.items });
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["TAX_UPDATE_RULES"], resp);
                        return [2 /*return*/, resp];
                }
            });
        });
    },
    storeToRulesCache: function (context, _a) {
        var e_1, _b;
        var items = _a.items;
        var cache = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__["StorageManager"].get('elasticCache');
        var _loop_1 = function (tc) {
            var cacheKey = Object(_vue_storefront_core_lib_store_entities__WEBPACK_IMPORTED_MODULE_5__["entityKeyName"])('tc', tc.id);
            cache.setItem(cacheKey, tc).catch(function (err) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].error('Cannot store cache for ' + cacheKey + ', ' + err)();
            });
        };
        try {
            for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {
                var tc = items_1_1.value;
                _loop_1(tc);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (items_1_1 && !items_1_1.done && (_b = items_1.return)) _b.call(items_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
    },
    single: function (_a, _b) {
        var getters = _a.getters;
        var productTaxClassId = _b.productTaxClassId;
        return getters.getRules.find(function (e) {
            return e.product_tax_class_ids.indexOf(parseInt(productTaxClassId)) >= 0;
        });
    },
    calculateTaxes: function (_a, _b) {
        var dispatch = _a.dispatch, getters = _a.getters, rootState = _a.rootState;
        var products = _b.products;
        return __awaiter(this, void 0, void 0, function () {
            var mutatedProducts, storeView, tcs, _c, defaultCountry, defaultRegion, sourcePriceIncludesTax, finalPriceIncludesTax, deprecatedPriceFieldsSupport, recalculatedProducts;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        mutatedProducts = _hooks__WEBPACK_IMPORTED_MODULE_9__["catalogHooksExecutors"].beforeTaxesCalculated(products);
                        if (config__WEBPACK_IMPORTED_MODULE_6__.tax.calculateServerSide) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].debug('Taxes calculated server side, skipping')();
                            return [2 /*return*/, Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_8__["doPlatformPricesSync"])(mutatedProducts)];
                        }
                        storeView = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_10__["currentStoreView"])();
                        return [4 /*yield*/, dispatch('list', {})];
                    case 1:
                        tcs = _d.sent();
                        _c = storeView.tax, defaultCountry = _c.defaultCountry, defaultRegion = _c.defaultRegion, sourcePriceIncludesTax = _c.sourcePriceIncludesTax, finalPriceIncludesTax = _c.finalPriceIncludesTax, deprecatedPriceFieldsSupport = _c.deprecatedPriceFieldsSupport;
                        recalculatedProducts = mutatedProducts.map(function (product) {
                            return Object(_vue_storefront_core_modules_catalog_helpers_taxCalc__WEBPACK_IMPORTED_MODULE_7__["calculateProductTax"])({
                                product: product,
                                taxClasses: tcs.items,
                                taxCountry: defaultCountry,
                                taxRegion: defaultRegion,
                                finalPriceInclTax: finalPriceIncludesTax,
                                sourcePriceInclTax: sourcePriceIncludesTax,
                                userGroupId: getters.getUserTaxGroupId,
                                deprecatedPriceFieldsSupport: deprecatedPriceFieldsSupport,
                                isTaxWithUserGroupIsActive: getters.getIsUserGroupedTaxActive
                            });
                        });
                        return [2 /*return*/, Object(_vue_storefront_core_modules_catalog_helpers__WEBPACK_IMPORTED_MODULE_8__["doPlatformPricesSync"])(recalculatedProducts)];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/catalog/store/tax/getters.ts":
/*!***************************************************!*\
  !*** ./core/modules/catalog/store/tax/getters.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");

var getters = {
    getRules: function (state) { return state.rules; },
    getUserTaxGroupId: function (state, getters, rootState) {
        if (!getters.getIsUserGroupedTaxActive)
            return;
        var storeViewTax = rootState.storeView.tax;
        var currentUser = rootState.user.current;
        if (storeViewTax.useOnlyDefaultUserGroupId || !currentUser) {
            return storeViewTax.userGroupId;
        }
        return currentUser.group_id;
    },
    getIsUserGroupedTaxActive: function (state, getters, rootState) {
        return typeof Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])().tax.userGroupId === 'number';
    }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/catalog/store/tax/index.ts":
/*!*************************************************!*\
  !*** ./core/modules/catalog/store/tax/index.ts ***!
  \*************************************************/
/*! exports provided: taxModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "taxModule", function() { return taxModule; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/catalog/store/tax/actions.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutations */ "./core/modules/catalog/store/tax/mutations.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getters */ "./core/modules/catalog/store/tax/getters.ts");



var taxModule = {
    namespaced: true,
    state: {
        rules: []
    },
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_1__["default"],
    getters: _getters__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/catalog/store/tax/mutation-types.ts":
/*!**********************************************************!*\
  !*** ./core/modules/catalog/store/tax/mutation-types.ts ***!
  \**********************************************************/
/*! exports provided: SN_TAX, TAX_UPDATE_RULES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_TAX", function() { return SN_TAX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TAX_UPDATE_RULES", function() { return TAX_UPDATE_RULES; });
var SN_TAX = 'tax';
var TAX_UPDATE_RULES = SN_TAX + '/UPDATE_RULES';


/***/ }),

/***/ "./core/modules/catalog/store/tax/mutations.ts":
/*!*****************************************************!*\
  !*** ./core/modules/catalog/store/tax/mutations.ts ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/catalog/store/tax/mutation-types.ts");
var _a;

var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["TAX_UPDATE_RULES"]] = function (state, taxClasses) {
        state.rules = taxClasses.items;
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/checkout/index.ts":
/*!****************************************!*\
  !*** ./core/modules/checkout/index.ts ***!
  \****************************************/
/*! exports provided: CheckoutModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CheckoutModule", function() { return CheckoutModule; });
/* harmony import */ var _store_checkout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store/checkout */ "./core/modules/checkout/store/checkout/index.ts");
/* harmony import */ var _store_payment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store/payment */ "./core/modules/checkout/store/payment/index.ts");
/* harmony import */ var _store_shipping__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./store/shipping */ "./core/modules/checkout/store/shipping/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _store_checkout_mutation_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./store/checkout/mutation-types */ "./core/modules/checkout/store/checkout/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");






var CheckoutModule = function (_a) {
    var store = _a.store;
    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_5__["StorageManager"].init('checkout');
    store.registerModule('shipping', _store_shipping__WEBPACK_IMPORTED_MODULE_2__["shippingModule"]);
    store.registerModule('payment', _store_payment__WEBPACK_IMPORTED_MODULE_1__["paymentModule"]);
    store.registerModule('checkout', _store_checkout__WEBPACK_IMPORTED_MODULE_0__["checkoutModule"]);
    store.subscribe(function (mutation, state) {
        var type = mutation.type;
        if (type.endsWith(_store_checkout_mutation_types__WEBPACK_IMPORTED_MODULE_4__["CHECKOUT_SAVE_PERSONAL_DETAILS"])) {
            _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_5__["StorageManager"].get('checkout').setItem('personal-details', state.checkout.personalDetails).catch(function (reason) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].error(reason)(); // it doesn't work on SSR
            }); // populate cache
        }
        if (type.endsWith(_store_checkout_mutation_types__WEBPACK_IMPORTED_MODULE_4__["CHECKOUT_SAVE_SHIPPING_DETAILS"]) || type.endsWith(_store_checkout_mutation_types__WEBPACK_IMPORTED_MODULE_4__["CHECKOUT_UPDATE_PROP_VALUE"])) {
            _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_5__["StorageManager"].get('checkout').setItem('shipping-details', state.checkout.shippingDetails).catch(function (reason) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].error(reason)(); // it doesn't work on SSR
            }); // populate cache
        }
        if (type.endsWith(_store_checkout_mutation_types__WEBPACK_IMPORTED_MODULE_4__["CHECKOUT_SAVE_PAYMENT_DETAILS"])) {
            _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_5__["StorageManager"].get('checkout').setItem('payment-details', state.checkout.paymentDetails).catch(function (reason) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].error(reason)(); // it doesn't work on SSR
            }); // populate cache
        }
    });
};


/***/ }),

/***/ "./core/modules/checkout/store/checkout/actions.ts":
/*!*********************************************************!*\
  !*** ./core/modules/checkout/store/checkout/actions.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/checkout/store/checkout/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};



var actions = {
    placeOrder: function (_a, _b) {
        var dispatch = _a.dispatch;
        var order = _b.order;
        return __awaiter(this, void 0, void 0, function () {
            var result, e_1;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 6, , 7]);
                        return [4 /*yield*/, dispatch('order/placeOrder', order, { root: true })];
                    case 1:
                        result = _c.sent();
                        if (!(!result.resultCode || result.resultCode === 200)) return [3 /*break*/, 5];
                        return [4 /*yield*/, dispatch('updateOrderTimestamp')
                            // clear cart without sync, because after order cart will be already cleared on backend
                        ];
                    case 2:
                        _c.sent();
                        // clear cart without sync, because after order cart will be already cleared on backend
                        return [4 /*yield*/, dispatch('cart/clear', { sync: false }, { root: true })];
                    case 3:
                        // clear cart without sync, because after order cart will be already cleared on backend
                        _c.sent();
                        return [4 /*yield*/, dispatch('dropPassword')];
                    case 4:
                        _c.sent();
                        _c.label = 5;
                    case 5: return [3 /*break*/, 7];
                    case 6:
                        e_1 = _c.sent();
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(e_1, 'checkout')();
                        return [3 /*break*/, 7];
                    case 7: return [2 /*return*/];
                }
            });
        });
    },
    updateOrderTimestamp: function () {
        return __awaiter(this, void 0, void 0, function () {
            var userStorage;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        userStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].get('user');
                        return [4 /*yield*/, userStorage.setItem('last-cart-bypass-ts', new Date().getTime())];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    },
    dropPassword: function (_a) {
        var commit = _a.commit, state = _a.state;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                if (state.personalDetails.createAccount) {
                    commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_DROP_PASSWORD"]);
                }
                return [2 /*return*/];
            });
        });
    },
    setModifiedAt: function (_a, timestamp) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SET_MODIFIED_AT"], timestamp);
                return [2 /*return*/];
            });
        });
    },
    savePersonalDetails: function (_a, personalDetails) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SAVE_PERSONAL_DETAILS"], personalDetails);
                return [2 /*return*/];
            });
        });
    },
    saveShippingDetails: function (_a, shippingDetails) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SAVE_SHIPPING_DETAILS"], shippingDetails);
                return [2 /*return*/];
            });
        });
    },
    savePaymentDetails: function (_a, paymentDetails) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SAVE_PAYMENT_DETAILS"], paymentDetails);
                return [2 /*return*/];
            });
        });
    },
    load: function (_a) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            var checkoutStorage, _b, personalDetails, shippingDetails, paymentDetails;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        checkoutStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].get('checkout');
                        return [4 /*yield*/, Promise.all([
                                checkoutStorage.getItem('personal-details'),
                                checkoutStorage.getItem('shipping-details'),
                                checkoutStorage.getItem('payment-details')
                            ])];
                    case 1:
                        _b = __read.apply(void 0, [_c.sent(), 3]), personalDetails = _b[0], shippingDetails = _b[1], paymentDetails = _b[2];
                        if (personalDetails) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_LOAD_PERSONAL_DETAILS"], personalDetails);
                        }
                        if (shippingDetails) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_LOAD_SHIPPING_DETAILS"], shippingDetails);
                        }
                        if (paymentDetails) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_LOAD_PAYMENT_DETAILS"], paymentDetails);
                        }
                        return [2 /*return*/];
                }
            });
        });
    },
    updatePropValue: function (_a, payload) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_UPDATE_PROP_VALUE"], payload);
                return [2 /*return*/];
            });
        });
    },
    setThankYouPage: function (_a, payload) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SET_THANKYOU"], payload);
                return [2 /*return*/];
            });
        });
    },
    addPaymentMethod: function (_a, paymentMethod) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_ADD_PAYMENT_METHOD"], paymentMethod);
                return [2 /*return*/];
            });
        });
    },
    replacePaymentMethods: function (_a, paymentMethods) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SET_PAYMENT_METHODS"], paymentMethods);
                return [2 /*return*/];
            });
        });
    },
    addShippingMethod: function (_a, shippingMethod) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_ADD_SHIPPING_METHOD"], shippingMethod);
                return [2 /*return*/];
            });
        });
    },
    replaceShippingMethods: function (_a, shippingMethods) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SET_SHIPPING_METHODS"], shippingMethods);
                return [2 /*return*/];
            });
        });
    },
    updatePaymentDetails: function (_a, updateData) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_UPDATE_PAYMENT_DETAILS"], updateData);
                return [2 /*return*/];
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/checkout/store/checkout/getters.ts":
/*!*********************************************************!*\
  !*** ./core/modules/checkout/store/checkout/getters.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var getters = {
    getShippingDetails: function (state, getters, rootState) {
        if (!state.shippingDetails.country) {
            return __assign(__assign({}, state.shippingDetails), { country: rootState.storeView.tax.defaultCountry });
        }
        return state.shippingDetails;
    },
    getPersonalDetails: function (state) { return state.personalDetails; },
    getPaymentDetails: function (state) { return state.paymentDetails; },
    isThankYouPage: function (state) { return state.isThankYouPage; },
    getModifiedAt: function (state) { return state.modifiedAt; },
    isUserInCheckout: function (state) { return ((Date.now() - state.modifiedAt) <= (60 * 30 * 1000)); },
    getPaymentMethods: function (state, getters, rootState, rootGetters) {
        var isVirtualCart = rootGetters['cart/isVirtualCart'];
        return state.paymentMethods.filter(function (method) { return !isVirtualCart || method.code !== 'cashondelivery'; });
    },
    getDefaultPaymentMethod: function (state, getters) { return getters.getPaymentMethods.find(function (item) { return item.default; }); },
    getNotServerPaymentMethods: function (state, getters) {
        return getters.getPaymentMethods.filter(function (itm) {
            return (typeof itm !== 'object' || !itm.is_server_method);
        });
    },
    getShippingMethods: function (state) { return state.shippingMethods; },
    getDefaultShippingMethod: function (state) { return state.shippingMethods.find(function (item) { return item.default; }); }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/checkout/store/checkout/index.ts":
/*!*******************************************************!*\
  !*** ./core/modules/checkout/store/checkout/index.ts ***!
  \*******************************************************/
/*! exports provided: checkoutModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkoutModule", function() { return checkoutModule; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/checkout/store/checkout/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/checkout/store/checkout/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/checkout/store/checkout/mutations.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);




var checkoutModule = {
    namespaced: true,
    state: {
        order: {},
        paymentMethods: [],
        shippingMethods: config__WEBPACK_IMPORTED_MODULE_3__.shipping.methods,
        personalDetails: {
            firstName: '',
            lastName: '',
            emailAddress: '',
            password: '',
            createAccount: false
        },
        shippingDetails: {
            firstName: '',
            lastName: '',
            country: '',
            streetAddress: '',
            apartmentNumber: '',
            city: '',
            state: '',
            region_id: 0,
            zipCode: '',
            phoneNumber: '',
            shippingMethod: ''
        },
        paymentDetails: {
            firstName: '',
            lastName: '',
            company: '',
            country: '',
            streetAddress: '',
            apartmentNumber: '',
            city: '',
            state: '',
            region_id: 0,
            zipCode: '',
            phoneNumber: '',
            taxId: '',
            paymentMethod: '',
            paymentMethodAdditional: {}
        },
        isThankYouPage: false,
        modifiedAt: 0
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/checkout/store/checkout/mutation-types.ts":
/*!****************************************************************!*\
  !*** ./core/modules/checkout/store/checkout/mutation-types.ts ***!
  \****************************************************************/
/*! exports provided: SN_CHECKOUT, CHECKOUT_PLACE_ORDER, CHECKOUT_SAVE_PERSONAL_DETAILS, CHECKOUT_SAVE_SHIPPING_DETAILS, CHECKOUT_SAVE_PAYMENT_DETAILS, CHECKOUT_LOAD_PERSONAL_DETAILS, CHECKOUT_LOAD_SHIPPING_DETAILS, CHECKOUT_LOAD_PAYMENT_DETAILS, CHECKOUT_UPDATE_PROP_VALUE, CHECKOUT_DROP_PASSWORD, CHECKOUT_SET_THANKYOU, CHECKOUT_SET_MODIFIED_AT, CHECKOUT_ADD_PAYMENT_METHOD, CHECKOUT_SET_PAYMENT_METHODS, CHECKOUT_ADD_SHIPPING_METHOD, CHECKOUT_SET_SHIPPING_METHODS, CHECKOUT_UPDATE_PAYMENT_DETAILS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_CHECKOUT", function() { return SN_CHECKOUT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_PLACE_ORDER", function() { return CHECKOUT_PLACE_ORDER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_SAVE_PERSONAL_DETAILS", function() { return CHECKOUT_SAVE_PERSONAL_DETAILS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_SAVE_SHIPPING_DETAILS", function() { return CHECKOUT_SAVE_SHIPPING_DETAILS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_SAVE_PAYMENT_DETAILS", function() { return CHECKOUT_SAVE_PAYMENT_DETAILS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_LOAD_PERSONAL_DETAILS", function() { return CHECKOUT_LOAD_PERSONAL_DETAILS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_LOAD_SHIPPING_DETAILS", function() { return CHECKOUT_LOAD_SHIPPING_DETAILS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_LOAD_PAYMENT_DETAILS", function() { return CHECKOUT_LOAD_PAYMENT_DETAILS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_UPDATE_PROP_VALUE", function() { return CHECKOUT_UPDATE_PROP_VALUE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_DROP_PASSWORD", function() { return CHECKOUT_DROP_PASSWORD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_SET_THANKYOU", function() { return CHECKOUT_SET_THANKYOU; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_SET_MODIFIED_AT", function() { return CHECKOUT_SET_MODIFIED_AT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_ADD_PAYMENT_METHOD", function() { return CHECKOUT_ADD_PAYMENT_METHOD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_SET_PAYMENT_METHODS", function() { return CHECKOUT_SET_PAYMENT_METHODS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_ADD_SHIPPING_METHOD", function() { return CHECKOUT_ADD_SHIPPING_METHOD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_SET_SHIPPING_METHODS", function() { return CHECKOUT_SET_SHIPPING_METHODS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECKOUT_UPDATE_PAYMENT_DETAILS", function() { return CHECKOUT_UPDATE_PAYMENT_DETAILS; });
var SN_CHECKOUT = 'checkout';
var CHECKOUT_PLACE_ORDER = SN_CHECKOUT + '/PLACE_ORDER';
var CHECKOUT_SAVE_PERSONAL_DETAILS = SN_CHECKOUT + '/SAVE_PERSONAL_DETAILS';
var CHECKOUT_SAVE_SHIPPING_DETAILS = SN_CHECKOUT + '/SAVE_SHIPPING_DETAILS';
var CHECKOUT_SAVE_PAYMENT_DETAILS = SN_CHECKOUT + '/SAVE_PAYMENT_DETAILS';
var CHECKOUT_LOAD_PERSONAL_DETAILS = SN_CHECKOUT + '/LOAD_PERSONAL_DETAILS';
var CHECKOUT_LOAD_SHIPPING_DETAILS = SN_CHECKOUT + '/LOAD_SHIPPING_DETAILS';
var CHECKOUT_LOAD_PAYMENT_DETAILS = SN_CHECKOUT + '/LOAD_PAYMENT_DETAILS';
var CHECKOUT_UPDATE_PROP_VALUE = SN_CHECKOUT + '/UPDATE_PROP_VALUE';
var CHECKOUT_DROP_PASSWORD = SN_CHECKOUT + '/DROP_PASSWORD';
var CHECKOUT_SET_THANKYOU = SN_CHECKOUT + '/SET_THANKYOU';
var CHECKOUT_SET_MODIFIED_AT = SN_CHECKOUT + '/SET_MODIFIEDAT';
var CHECKOUT_ADD_PAYMENT_METHOD = SN_CHECKOUT + '/ADD_PAYMENT_METHOD';
var CHECKOUT_SET_PAYMENT_METHODS = SN_CHECKOUT + '/SET_PAYMENT_METHODS';
var CHECKOUT_ADD_SHIPPING_METHOD = SN_CHECKOUT + '/ADD_SHIPPING_METHOD';
var CHECKOUT_SET_SHIPPING_METHODS = SN_CHECKOUT + '/SET_SHIPPING_METHOD';
var CHECKOUT_UPDATE_PAYMENT_DETAILS = SN_CHECKOUT + '/UPDATE_PAYMENT_DETAILS';


/***/ }),

/***/ "./core/modules/checkout/store/checkout/mutations.ts":
/*!***********************************************************!*\
  !*** ./core/modules/checkout/store/checkout/mutations.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/checkout/store/checkout/mutation-types.ts");
var _a;

var mutations = (_a = {},
    /**
     * Setup current order object
     * @param {Object} order Object
     */
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_PLACE_ORDER"]] = function (state, order) {
        state.order = order;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SET_MODIFIED_AT"]] = function (state, timestamp) {
        state.modifiedAt = timestamp;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SAVE_PERSONAL_DETAILS"]] = function (state, personalDetails) {
        state.personalDetails = personalDetails;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SAVE_SHIPPING_DETAILS"]] = function (state, shippingDetails) {
        state.shippingDetails = shippingDetails;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SAVE_PAYMENT_DETAILS"]] = function (state, paymentDetails) {
        state.paymentDetails = paymentDetails;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_LOAD_PERSONAL_DETAILS"]] = function (state, storedPersonalDetails) {
        state.personalDetails = storedPersonalDetails;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_LOAD_SHIPPING_DETAILS"]] = function (state, storedShippingDetails) {
        state.shippingDetails = storedShippingDetails;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_LOAD_PAYMENT_DETAILS"]] = function (state, storedPaymentDetails) {
        state.paymentDetails = storedPaymentDetails;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_UPDATE_PROP_VALUE"]] = function (state, payload) {
        state.shippingDetails[payload[0]] = payload[1];
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_DROP_PASSWORD"]] = function (state) {
        state.personalDetails.password = '';
        state.personalDetails.createAccount = false;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SET_THANKYOU"]] = function (state, payload) {
        state.isThankYouPage = payload;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_ADD_PAYMENT_METHOD"]] = function (state, paymentMethod) {
        state.paymentMethods.push(paymentMethod);
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SET_PAYMENT_METHODS"]] = function (state, paymentMethods) {
        if (paymentMethods === void 0) { paymentMethods = []; }
        state.paymentMethods = paymentMethods;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_ADD_SHIPPING_METHOD"]] = function (state, shippingMethods) {
        state.shippingMethods.push(shippingMethods);
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_SET_SHIPPING_METHODS"]] = function (state, shippingMethods) {
        if (shippingMethods === void 0) { shippingMethods = []; }
        state.shippingMethods = shippingMethods;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CHECKOUT_UPDATE_PAYMENT_DETAILS"]] = function (state, updateData) {
        if (updateData === void 0) { updateData = {}; }
        state.paymentDetails = Object.assign({}, state.paymentDetails, updateData);
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/checkout/store/payment/index.ts":
/*!******************************************************!*\
  !*** ./core/modules/checkout/store/payment/index.ts ***!
  \******************************************************/
/*! exports provided: paymentModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "paymentModule", function() { return paymentModule; });
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");

// @deprecated
var paymentModule = {
    namespaced: true,
    actions: {
        addMethod: function (_a, paymentMethod) {
            var dispatch = _a.dispatch;
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('The action payment/addMethod has been deprecated please change to checkout/addPaymentMethod')();
            dispatch('checkout/addPaymentMethod', paymentMethod, { root: true });
        },
        replaceMethods: function (_a, paymentMethods) {
            var dispatch = _a.dispatch;
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('The action payment/replaceMethods has been deprecated please change to checkout/replacePaymentMethods')();
            dispatch('checkout/replacePaymentMethods', paymentMethods, { root: true });
        }
    },
    getters: {
        // @deprecated
        paymentMethods: function (state, getters, rootState, rootGetters) { return rootGetters['checkout/getPaymentMethods']; },
        // @deprecated
        getDefaultPaymentMethod: function (state, getters, rootState, rootGetters) { return rootGetters['checkout/getDefaultPaymentMethod']; },
        // @deprecated
        getNotServerPaymentMethods: function (state, getters, rootState, rootGetters) { return rootGetters['checkout/getNotServerPaymentMethods']; }
    }
};


/***/ }),

/***/ "./core/modules/checkout/store/shipping/index.ts":
/*!*******************************************************!*\
  !*** ./core/modules/checkout/store/shipping/index.ts ***!
  \*******************************************************/
/*! exports provided: shippingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shippingModule", function() { return shippingModule; });
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");

// @deprecated
var shippingModule = {
    namespaced: true,
    actions: {
        addMethod: function (_a, shippingMethod) {
            var dispatch = _a.dispatch;
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('The action shipping/addMethod has been deprecated please change to checkout/addShippingMethod')();
            dispatch('checkout/addShippingMethod', shippingMethod, { root: true });
        },
        replaceMethods: function (_a, shippingMethods) {
            var dispatch = _a.dispatch;
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('The action shipping/replaceMethods has been deprecated please change to checkout/replaceShippingMethods')();
            dispatch('checkout/replaceShippingMethods', shippingMethods, { root: true });
        }
    },
    getters: {
        // @deprecated
        shippingMethods: function (state, getters, rootState, rootGetters) { return rootGetters['checkout/getShippingMethods']; },
        // @deprecated
        getShippingMethods: function (state, getters, rootState, rootGetters) { return rootGetters['checkout/getShippingMethods']; },
        // @deprecated
        getDefaultShippingMethod: function (state, getters, rootState, rootGetters) { return rootGetters['checkout/getDefaultShippingMethod']; }
    }
};


/***/ }),

/***/ "./core/modules/cms/helpers/createHierarchyLoadQuery.ts":
/*!**************************************************************!*\
  !*** ./core/modules/cms/helpers/createHierarchyLoadQuery.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);

var createHierarchyLoadQuery = function (_a) {
    var id = _a.id;
    var query = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"]();
    if (id) {
        query = query.applyFilter({ key: 'identifier', value: { eq: id } });
    }
    return query;
};
/* harmony default export */ __webpack_exports__["default"] = (createHierarchyLoadQuery);


/***/ }),

/***/ "./core/modules/cms/helpers/createLoadingBlockQuery.ts":
/*!*************************************************************!*\
  !*** ./core/modules/cms/helpers/createLoadingBlockQuery.ts ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);

var createLoadingBlockQuery = function (_a) {
    var filterField = _a.filterField, filterValues = _a.filterValues;
    var query = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"]();
    if (filterValues) {
        query = query.applyFilter({ key: filterField, value: { like: filterValues } });
    }
    return query;
};
/* harmony default export */ __webpack_exports__["default"] = (createLoadingBlockQuery);


/***/ }),

/***/ "./core/modules/cms/helpers/createPageLoadingQuery.ts":
/*!************************************************************!*\
  !*** ./core/modules/cms/helpers/createPageLoadingQuery.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);

var createPageLoadingQuery = function (_a) {
    var filterField = _a.filterField, filterValues = _a.filterValues;
    var query = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"]();
    if (filterValues) {
        query = query.applyFilter({ key: filterField, value: { like: filterValues } });
    }
    return query;
};
/* harmony default export */ __webpack_exports__["default"] = (createPageLoadingQuery);


/***/ }),

/***/ "./core/modules/cms/helpers/createSingleBlockQuery.ts":
/*!************************************************************!*\
  !*** ./core/modules/cms/helpers/createSingleBlockQuery.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);

var createSingleBlockQuery = function (_a) {
    var key = _a.key, value = _a.value;
    var query = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"]();
    if (value) {
        query = query.applyFilter({ key: key, value: { like: value } });
    }
    return query;
};
/* harmony default export */ __webpack_exports__["default"] = (createSingleBlockQuery);


/***/ }),

/***/ "./core/modules/cms/helpers/createSinglePageLoadQuery.ts":
/*!***************************************************************!*\
  !*** ./core/modules/cms/helpers/createSinglePageLoadQuery.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__);

var createSinglePageLoadQuery = function (_a) {
    var key = _a.key, value = _a.value;
    var query = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_0__["SearchQuery"]();
    if (value) {
        query = query.applyFilter({ key: key, value: { like: value } });
    }
    return query;
};
/* harmony default export */ __webpack_exports__["default"] = (createSinglePageLoadQuery);


/***/ }),

/***/ "./core/modules/cms/helpers/index.ts":
/*!*******************************************!*\
  !*** ./core/modules/cms/helpers/index.ts ***!
  \*******************************************/
/*! exports provided: createLoadingBlockQuery, createSingleBlockQuery, createHierarchyLoadQuery, createPageLoadingQuery, createSinglePageLoadQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createLoadingBlockQuery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createLoadingBlockQuery */ "./core/modules/cms/helpers/createLoadingBlockQuery.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createLoadingBlockQuery", function() { return _createLoadingBlockQuery__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _createSingleBlockQuery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createSingleBlockQuery */ "./core/modules/cms/helpers/createSingleBlockQuery.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createSingleBlockQuery", function() { return _createSingleBlockQuery__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _createHierarchyLoadQuery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./createHierarchyLoadQuery */ "./core/modules/cms/helpers/createHierarchyLoadQuery.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createHierarchyLoadQuery", function() { return _createHierarchyLoadQuery__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _createPageLoadingQuery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./createPageLoadingQuery */ "./core/modules/cms/helpers/createPageLoadingQuery.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createPageLoadingQuery", function() { return _createPageLoadingQuery__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _createSinglePageLoadQuery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./createSinglePageLoadQuery */ "./core/modules/cms/helpers/createSinglePageLoadQuery.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createSinglePageLoadQuery", function() { return _createSinglePageLoadQuery__WEBPACK_IMPORTED_MODULE_4__["default"]; });









/***/ }),

/***/ "./core/modules/cms/index.ts":
/*!***********************************!*\
  !*** ./core/modules/cms/index.ts ***!
  \***********************************/
/*! exports provided: CmsModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CmsModule", function() { return CmsModule; });
/* harmony import */ var _store_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store/page */ "./core/modules/cms/store/page/index.ts");
/* harmony import */ var _store_block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store/block */ "./core/modules/cms/store/block/index.ts");
/* harmony import */ var _store_hierarchy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./store/hierarchy */ "./core/modules/cms/store/hierarchy/index.ts");
/* harmony import */ var _store_cmsPersistPlugin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./store/cmsPersistPlugin */ "./core/modules/cms/store/cmsPersistPlugin.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");





var CmsModule = function (_a) {
    var store = _a.store;
    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__["StorageManager"].init('cms');
    store.registerModule('cmsPage', _store_page__WEBPACK_IMPORTED_MODULE_0__["cmsPageModule"]);
    store.registerModule('cmsBlock', _store_block__WEBPACK_IMPORTED_MODULE_1__["cmsBlockModule"]);
    store.registerModule('cmsHierarchy', _store_hierarchy__WEBPACK_IMPORTED_MODULE_2__["cmsHierarchyModule"]);
    store.subscribe(_store_cmsPersistPlugin__WEBPACK_IMPORTED_MODULE_3__["default"]);
};


/***/ }),

/***/ "./core/modules/cms/store/block/actions.ts":
/*!*************************************************!*\
  !*** ./core/modules/cms/store/block/actions.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/search */ "./core/lib/search.ts");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/cms/store/block/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_modules_cms_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/modules/cms/helpers */ "./core/modules/cms/helpers/index.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};



var actions = {
    list: function (_a, _b) {
        var getters = _a.getters, commit = _a.commit;
        var _c = _b.filterValues, filterValues = _c === void 0 ? null : _c, _d = _b.filterField, filterField = _d === void 0 ? 'identifier' : _d, _e = _b.size, size = _e === void 0 ? 150 : _e, _f = _b.start, start = _f === void 0 ? 0 : _f, _g = _b.excludeFields, excludeFields = _g === void 0 ? null : _g, _h = _b.includeFields, includeFields = _h === void 0 ? null : _h, _j = _b.skipCache, skipCache = _j === void 0 ? false : _j;
        return __awaiter(this, void 0, void 0, function () {
            var blockResponse;
            return __generator(this, function (_k) {
                switch (_k.label) {
                    case 0:
                        if (!(skipCache || !getters.hasItems)) return [3 /*break*/, 2];
                        return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__["quickSearchByQuery"])({
                                query: Object(_vue_storefront_core_modules_cms_helpers__WEBPACK_IMPORTED_MODULE_2__["createLoadingBlockQuery"])({ filterField: filterField, filterValues: filterValues }),
                                entityType: 'cms_block',
                                size: size,
                                start: start,
                                excludeFields: excludeFields,
                                includeFields: includeFields
                            })];
                    case 1:
                        blockResponse = _k.sent();
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_BLOCK_UPDATE_CMS_BLOCKS"], blockResponse.items);
                        return [2 /*return*/, blockResponse.items];
                    case 2: return [2 /*return*/, getters.getCmsBlocks];
                }
            });
        });
    },
    single: function (_a, _b) {
        var getters = _a.getters, commit = _a.commit;
        var _c = _b.key, key = _c === void 0 ? 'identifier' : _c, value = _b.value, _d = _b.excludeFields, excludeFields = _d === void 0 ? null : _d, _e = _b.includeFields, includeFields = _e === void 0 ? null : _e, _f = _b.skipCache, skipCache = _f === void 0 ? false : _f;
        return __awaiter(this, void 0, void 0, function () {
            var cmsBlock, blockResponse;
            return __generator(this, function (_g) {
                switch (_g.label) {
                    case 0:
                        cmsBlock = getters.findCmsBlocks({ key: key, value: value });
                        if (!(skipCache || cmsBlock.length === 0)) return [3 /*break*/, 2];
                        return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__["quickSearchByQuery"])({
                                query: Object(_vue_storefront_core_modules_cms_helpers__WEBPACK_IMPORTED_MODULE_2__["createSingleBlockQuery"])({ key: key, value: value }),
                                entityType: 'cms_block',
                                excludeFields: excludeFields,
                                includeFields: includeFields
                            })];
                    case 1:
                        blockResponse = _g.sent();
                        if (blockResponse.items.length > 0) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_BLOCK_ADD_CMS_BLOCK"], blockResponse.items[0]);
                            return [2 /*return*/, blockResponse.items[0]];
                        }
                        _g.label = 2;
                    case 2: return [2 /*return*/, cmsBlock[0]];
                }
            });
        });
    },
    addItem: function (_a, block) {
        var commit = _a.commit;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_BLOCK_ADD_CMS_BLOCK"], block);
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/cms/store/block/getters.ts":
/*!*************************************************!*\
  !*** ./core/modules/cms/store/block/getters.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getters = {
    // @deprecated
    cmsBlocks: function (state, getters) { return getters.getCmsBlocks; },
    // @deprecated
    cmsBlockIdentifier: function (state, getters) { return function (identifier) { return getters.getCmsBlockByIdentifier(identifier); }; },
    // @deprecated
    cmsBlockId: function (state, getters) { return function (id) { return getters.getCmsBlockById(id); }; },
    getCmsBlockByIdentifier: function (state) { return function (identifier) {
        return state.items.find(function (item) { return typeof item === 'object' && item.identifier === identifier; });
    }; },
    getCmsBlockById: function (state) { return function (id) { return state.items.find(function (item) { return item.id === id; }); }; },
    getCmsBlocks: function (state) { return state.items; },
    hasItems: function (state) { return state.items && state.items.length > 0; },
    findCmsBlocks: function (state) { return function (_a) {
        var key = _a.key, value = _a.value;
        return state.items.filter(function (item) { return item[key] === value; });
    }; }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/cms/store/block/index.ts":
/*!***********************************************!*\
  !*** ./core/modules/cms/store/block/index.ts ***!
  \***********************************************/
/*! exports provided: cmsBlockStorageKey, cmsBlockModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cmsBlockStorageKey", function() { return cmsBlockStorageKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cmsBlockModule", function() { return cmsBlockModule; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/cms/store/block/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/cms/store/block/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/cms/store/block/mutations.ts");



var cmsBlockStorageKey = 'cms-blocks';
var cmsBlockModule = {
    namespaced: true,
    state: {
        items: []
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/cms/store/block/mutation-types.ts":
/*!********************************************************!*\
  !*** ./core/modules/cms/store/block/mutation-types.ts ***!
  \********************************************************/
/*! exports provided: SN_CMS_BLOCK, CMS_BLOCK_UPDATE_CMS_BLOCKS, CMS_BLOCK_ADD_CMS_BLOCK */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_CMS_BLOCK", function() { return SN_CMS_BLOCK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CMS_BLOCK_UPDATE_CMS_BLOCKS", function() { return CMS_BLOCK_UPDATE_CMS_BLOCKS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CMS_BLOCK_ADD_CMS_BLOCK", function() { return CMS_BLOCK_ADD_CMS_BLOCK; });
var SN_CMS_BLOCK = 'cmsBlock';
var CMS_BLOCK_UPDATE_CMS_BLOCKS = SN_CMS_BLOCK + '/UPDATE_CMS_BLOCKS';
var CMS_BLOCK_ADD_CMS_BLOCK = SN_CMS_BLOCK + '/ADD_CMS_BLOCK';


/***/ }),

/***/ "./core/modules/cms/store/block/mutations.ts":
/*!***************************************************!*\
  !*** ./core/modules/cms/store/block/mutations.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/cms/store/block/mutation-types.ts");
var _a;

var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CMS_BLOCK_UPDATE_CMS_BLOCKS"]] = function (state, cmsBlocks) {
        state.items = cmsBlocks || [];
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CMS_BLOCK_ADD_CMS_BLOCK"]] = function (state, cmsBlock) {
        var record = state.items.find(function (c) { return c.id === cmsBlock.id; });
        if (!record) {
            state.items.push(cmsBlock);
        }
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/cms/store/cmsPersistPlugin.ts":
/*!****************************************************!*\
  !*** ./core/modules/cms/store/cmsPersistPlugin.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _page_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./page/mutation-types */ "./core/modules/cms/store/page/mutation-types.ts");
/* harmony import */ var _block_mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./block/mutation-types */ "./core/modules/cms/store/block/mutation-types.ts");
/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./page */ "./core/modules/cms/store/page/index.ts");
/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ "./core/modules/cms/store/block/index.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");






var cmsPersistPlugin = function (mutation, state) {
    var cmsStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_4__["StorageManager"].get('cms');
    if (mutation.type.startsWith(_page_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SN_CMS_PAGE"])) {
        cmsStorage.setItem(_page__WEBPACK_IMPORTED_MODULE_2__["cmsPagesStorageKey"], state.cmsPage.items).catch(function (reason) {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].error(reason, 'cms'); // it doesn't work on SSR
        });
    }
    if (mutation.type.startsWith(_block_mutation_types__WEBPACK_IMPORTED_MODULE_1__["SN_CMS_BLOCK"])) {
        cmsStorage.setItem(_block__WEBPACK_IMPORTED_MODULE_3__["cmsBlockStorageKey"], state.cmsBlock.items).catch(function (reason) {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].error(reason, 'cms'); // it doesn't work on SSR
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (cmsPersistPlugin);


/***/ }),

/***/ "./core/modules/cms/store/hierarchy/actions.ts":
/*!*****************************************************!*\
  !*** ./core/modules/cms/store/hierarchy/actions.ts ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/search */ "./core/lib/search.ts");
/* harmony import */ var _vue_storefront_core_modules_cms_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/modules/cms/helpers */ "./core/modules/cms/helpers/index.ts");


var actions = {
    list: function (context, _a) {
        var id = _a.id, _b = _a.entityType, entityType = _b === void 0 ? 'cms_hierarchy' : _b, _c = _a.excludeFields, excludeFields = _c === void 0 ? null : _c, _d = _a.includeFields, includeFields = _d === void 0 ? null : _d;
        return Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__["quickSearchByQuery"])({
            query: Object(_vue_storefront_core_modules_cms_helpers__WEBPACK_IMPORTED_MODULE_1__["createHierarchyLoadQuery"])({ id: id }),
            entityType: entityType,
            excludeFields: excludeFields,
            includeFields: includeFields
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/cms/store/hierarchy/index.ts":
/*!***************************************************!*\
  !*** ./core/modules/cms/store/hierarchy/index.ts ***!
  \***************************************************/
/*! exports provided: cmsHierarchyModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cmsHierarchyModule", function() { return cmsHierarchyModule; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/cms/store/hierarchy/actions.ts");

var cmsHierarchyModule = {
    namespaced: true,
    state: {
        items: []
    },
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"]
};


/***/ }),

/***/ "./core/modules/cms/store/page/actions.ts":
/*!************************************************!*\
  !*** ./core/modules/cms/store/page/actions.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/search */ "./core/lib/search.ts");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/cms/store/page/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ */ "./core/modules/cms/store/page/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cms_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/modules/cms/helpers */ "./core/modules/cms/helpers/index.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};





var actions = {
    list: function (_a, _b) {
        var commit = _a.commit;
        var _c = _b.filterValues, filterValues = _c === void 0 ? null : _c, _d = _b.filterField, filterField = _d === void 0 ? 'identifier' : _d, _e = _b.size, size = _e === void 0 ? 150 : _e, _f = _b.start, start = _f === void 0 ? 0 : _f, _g = _b.excludeFields, excludeFields = _g === void 0 ? null : _g, _h = _b.includeFields, includeFields = _h === void 0 ? null : _h, _j = _b.skipCache, skipCache = _j === void 0 ? false : _j;
        return __awaiter(this, void 0, void 0, function () {
            var query, pageResponse;
            return __generator(this, function (_k) {
                switch (_k.label) {
                    case 0:
                        query = Object(_vue_storefront_core_modules_cms_helpers__WEBPACK_IMPORTED_MODULE_4__["createPageLoadingQuery"])({ filterField: filterField, filterValues: filterValues });
                        return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__["quickSearchByQuery"])({ query: query, entityType: 'cms_page', excludeFields: excludeFields, includeFields: includeFields })];
                    case 1:
                        pageResponse = _k.sent();
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_PAGE_UPDATE_CMS_PAGES"], pageResponse.items);
                        return [2 /*return*/, pageResponse.items];
                }
            });
        });
    },
    single: function (_a, _b) {
        var getters = _a.getters, commit = _a.commit, dispatch = _a.dispatch;
        var _c = _b.key, key = _c === void 0 ? 'identifier' : _c, value = _b.value, _d = _b.excludeFields, excludeFields = _d === void 0 ? null : _d, _e = _b.includeFields, includeFields = _e === void 0 ? null : _e, _f = _b.skipCache, skipCache = _f === void 0 ? false : _f, _g = _b.setCurrent, setCurrent = _g === void 0 ? true : _g;
        return __awaiter(this, void 0, void 0, function () {
            var currentItems, pageResponse;
            return __generator(this, function (_h) {
                switch (_h.label) {
                    case 0:
                        currentItems = getters.findItems({ key: key, value: value });
                        if (!(skipCache || !getters.hasItems || !currentItems)) return [3 /*break*/, 2];
                        return [4 /*yield*/, Object(_vue_storefront_core_lib_search__WEBPACK_IMPORTED_MODULE_0__["quickSearchByQuery"])({
                                query: Object(_vue_storefront_core_modules_cms_helpers__WEBPACK_IMPORTED_MODULE_4__["createSinglePageLoadQuery"])({ key: key, value: value }),
                                entityType: 'cms_page',
                                excludeFields: excludeFields,
                                includeFields: includeFields
                            })];
                    case 1:
                        pageResponse = _h.sent();
                        if (pageResponse && pageResponse.items && pageResponse.items.length > 0) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_PAGE_ADD_CMS_PAGE"], pageResponse.items[0]);
                            if (setCurrent)
                                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_PAGE_SET_CURRENT"], pageResponse.items[0]);
                            return [2 /*return*/, pageResponse.items[0]];
                        }
                        throw new Error('CMS query returned empty result');
                    case 2:
                        if (currentItems) {
                            if (setCurrent) {
                                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_PAGE_SET_CURRENT"], currentItems);
                            }
                            return [2 /*return*/, currentItems];
                        }
                        return [2 /*return*/];
                }
            });
        });
    },
    loadFromCache: function (_a, _b) {
        var commit = _a.commit;
        var key = _b.key, value = _b.value, setCurrent = _b.setCurrent;
        return __awaiter(this, void 0, void 0, function () {
            var cmsStorage, storedItems, resp;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        cmsStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].get('cms');
                        return [4 /*yield*/, cmsStorage.getItem(___WEBPACK_IMPORTED_MODULE_3__["cmsPagesStorageKey"])];
                    case 1:
                        storedItems = _c.sent();
                        if (storedItems) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_PAGE_UPDATE_CMS_PAGES"], storedItems);
                            resp = storedItems.find(function (p) { return p[key] === value; });
                            if (!resp) {
                                throw new Error('CMS query returned empty result');
                            }
                            if (setCurrent) {
                                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_PAGE_SET_CURRENT"], resp);
                            }
                            return [2 /*return*/, resp];
                        }
                        throw new Error('CMS query returned empty result');
                }
            });
        });
    },
    addItem: function (_a, page) {
        var commit = _a.commit;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_1__["CMS_PAGE_ADD_CMS_PAGE"], page);
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/cms/store/page/getters.ts":
/*!************************************************!*\
  !*** ./core/modules/cms/store/page/getters.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");

var getters = {
    cmsPages: function (state, getters) {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].error('The getter cmsPage/cmsPages has been deprecated please change to cmsPage/getCmsPages')();
        return getters.getCmsPages;
    },
    getCmsPages: function (state) { return state.items; },
    hasItems: function (state) { return state.items && state.items.length > 0; },
    findItems: function (state) { return function (_a) {
        var key = _a.key, value = _a.value;
        return state.items.find(function (p) { return p[key] === value; });
    }; }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/cms/store/page/index.ts":
/*!**********************************************!*\
  !*** ./core/modules/cms/store/page/index.ts ***!
  \**********************************************/
/*! exports provided: cmsPagesStorageKey, cmsPageModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cmsPagesStorageKey", function() { return cmsPagesStorageKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cmsPageModule", function() { return cmsPageModule; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/cms/store/page/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/cms/store/page/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/cms/store/page/mutations.ts");



var cmsPagesStorageKey = 'cms-page';
var cmsPageModule = {
    namespaced: true,
    state: {
        items: [],
        current: null
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/cms/store/page/mutation-types.ts":
/*!*******************************************************!*\
  !*** ./core/modules/cms/store/page/mutation-types.ts ***!
  \*******************************************************/
/*! exports provided: SN_CMS_PAGE, CMS_PAGE_UPDATE_CMS_PAGES, CMS_PAGE_ADD_CMS_PAGE, CMS_PAGE_SET_CURRENT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_CMS_PAGE", function() { return SN_CMS_PAGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CMS_PAGE_UPDATE_CMS_PAGES", function() { return CMS_PAGE_UPDATE_CMS_PAGES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CMS_PAGE_ADD_CMS_PAGE", function() { return CMS_PAGE_ADD_CMS_PAGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CMS_PAGE_SET_CURRENT", function() { return CMS_PAGE_SET_CURRENT; });
var SN_CMS_PAGE = 'cmsPage';
var CMS_PAGE_UPDATE_CMS_PAGES = SN_CMS_PAGE + '/UPDATE_CMS_PAGES';
var CMS_PAGE_ADD_CMS_PAGE = SN_CMS_PAGE + '/ADD_CMS_PAGE';
var CMS_PAGE_SET_CURRENT = SN_CMS_PAGE + '/SET_CURRENT_CMS_PAGE';


/***/ }),

/***/ "./core/modules/cms/store/page/mutations.ts":
/*!**************************************************!*\
  !*** ./core/modules/cms/store/page/mutations.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/cms/store/page/mutation-types.ts");
var _a;

var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CMS_PAGE_UPDATE_CMS_PAGES"]] = function (state, cmsPages) {
        state.items = cmsPages || [];
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CMS_PAGE_SET_CURRENT"]] = function (state, current) {
        state.current = current;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CMS_PAGE_ADD_CMS_PAGE"]] = function (state, cmsPage) {
        var record = state.items.find(function (c) { return c.id === cmsPage.id; });
        if (!record) {
            state.items.push(cmsPage);
        }
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/compare/index.ts":
/*!***************************************!*\
  !*** ./core/modules/compare/index.ts ***!
  \***************************************/
/*! exports provided: CompareModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CompareModule", function() { return CompareModule; });
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store */ "./core/modules/compare/store/index.ts");
/* harmony import */ var _store_plugin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store/plugin */ "./core/modules/compare/store/plugin.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");



var CompareModule = function (_a) {
    var store = _a.store;
    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].init('compare');
    store.registerModule('compare', _store__WEBPACK_IMPORTED_MODULE_0__["compareStore"]);
    store.subscribe(_store_plugin__WEBPACK_IMPORTED_MODULE_1__["default"]);
};


/***/ }),

/***/ "./core/modules/compare/store/actions.ts":
/*!***********************************************!*\
  !*** ./core/modules/compare/store/actions.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/compare/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};




var actions = {
    load: function (_a, force) {
        var commit = _a.commit, getters = _a.getters, dispatch = _a.dispatch;
        if (force === void 0) { force = false; }
        return __awaiter(this, void 0, void 0, function () {
            var storedItems;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!(force || !getters.isCompareLoaded)) return [3 /*break*/, 2];
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_COMPARE_LOADED"]);
                        return [4 /*yield*/, dispatch('fetchCurrentCompare')];
                    case 1:
                        storedItems = _b.sent();
                        if (storedItems) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_LOAD_COMPARE"], storedItems);
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].info('Compare state loaded from browser cache: ', 'cache', storedItems)();
                        }
                        if (config__WEBPACK_IMPORTED_MODULE_3__.entities.attribute.loadByAttributeMetadata) {
                            dispatch('attribute/loadProductAttributes', { products: getters.getCompareItems, merge: true }, { root: true });
                        }
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    },
    fetchCurrentCompare: function () {
        return __awaiter(this, void 0, void 0, function () {
            var cacheStorage;
            return __generator(this, function (_a) {
                cacheStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].get('compare');
                return [2 /*return*/, cacheStorage.getItem('current-compare')];
            });
        });
    },
    addItem: function (_a, product) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_ADD_ITEM"], { product: product });
                return [2 /*return*/];
            });
        });
    },
    removeItem: function (_a, product) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_DEL_ITEM"], { product: product });
                return [2 /*return*/];
            });
        });
    },
    clear: function (_a) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_LOAD_COMPARE"], []);
                return [2 /*return*/];
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/compare/store/getters.ts":
/*!***********************************************!*\
  !*** ./core/modules/compare/store/getters.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getters = {
    isEmpty: function (state) { return state.items.length === 0; },
    isOnCompare: function (state) { return function (product) { return state.items.some(function (p) { return p.sku === product.sku; }); }; },
    isCompareLoaded: function (state) { return state.loaded; },
    getCompareProductsCount: function (state) { return state.items.length; },
    getCompareItems: function (state) { return state.items; }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/compare/store/index.ts":
/*!*********************************************!*\
  !*** ./core/modules/compare/store/index.ts ***!
  \*********************************************/
/*! exports provided: compareStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareStore", function() { return compareStore; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/compare/store/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/compare/store/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/compare/store/mutations.ts");



var compareStore = {
    namespaced: true,
    state: {
        loaded: false,
        items: []
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/compare/store/mutation-types.ts":
/*!******************************************************!*\
  !*** ./core/modules/compare/store/mutation-types.ts ***!
  \******************************************************/
/*! exports provided: SN_COMPARE, COMPARE_ADD_ITEM, COMPARE_DEL_ITEM, COMPARE_LOAD_COMPARE, SET_COMPARE_LOADED */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_COMPARE", function() { return SN_COMPARE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COMPARE_ADD_ITEM", function() { return COMPARE_ADD_ITEM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COMPARE_DEL_ITEM", function() { return COMPARE_DEL_ITEM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COMPARE_LOAD_COMPARE", function() { return COMPARE_LOAD_COMPARE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SET_COMPARE_LOADED", function() { return SET_COMPARE_LOADED; });
var SN_COMPARE = 'compare';
var COMPARE_ADD_ITEM = SN_COMPARE + "/ADD";
var COMPARE_DEL_ITEM = SN_COMPARE + "/DEL";
var COMPARE_LOAD_COMPARE = SN_COMPARE + "/LOAD";
var SET_COMPARE_LOADED = SN_COMPARE + "/SET_COMPARE_LOADED";


/***/ }),

/***/ "./core/modules/compare/store/mutations.ts":
/*!*************************************************!*\
  !*** ./core/modules/compare/store/mutations.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/compare/store/mutation-types.ts");
var _a;

var mutations = (_a = {},
    /**
     * Add product to Compare
     * @param {Object} product data format for products is described in /doc/ElasticSearch data formats.md
     */
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_ADD_ITEM"]] = function (state, _a) {
        var product = _a.product;
        var record = state.items.find(function (p) { return p.sku === product.sku; });
        if (!record) {
            state.items.push(product);
        }
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_DEL_ITEM"]] = function (state, _a) {
        var product = _a.product;
        state.items = state.items.filter(function (p) { return p.sku !== product.sku; });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_LOAD_COMPARE"]] = function (state, storedItems) {
        state.items = storedItems || [];
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_COMPARE_LOADED"]] = function (state, isLoaded) {
        if (isLoaded === void 0) { isLoaded = true; }
        state.loaded = isLoaded;
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/compare/store/plugin.ts":
/*!**********************************************!*\
  !*** ./core/modules/compare/store/plugin.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/compare/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");



var watchedMutations = [_mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_ADD_ITEM"], _mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_DEL_ITEM"], _mutation_types__WEBPACK_IMPORTED_MODULE_0__["COMPARE_LOAD_COMPARE"]].map(function (m) { return "compare/" + m; });
var cachePersistPlugin = function (mutation, state) {
    var cacheStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].get('compare');
    if (watchedMutations.includes(mutation.type)) {
        cacheStorage.setItem('current-compare', state.compare.items).catch(function (reason) {
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(reason, 'compare');
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (cachePersistPlugin);


/***/ }),

/***/ "./core/modules/initial-resources/clientResourcesLoader.ts":
/*!*****************************************************************!*\
  !*** ./core/modules/initial-resources/clientResourcesLoader.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ "./core/modules/initial-resources/helpers.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


var initialResources = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__["addRegexpListToConfig"])(config__WEBPACK_IMPORTED_MODULE_1__);
var prefetchRegexps = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__["flatToRegexpList"])(initialResources.filter(function (filterConfig) { return filterConfig.rel !== 'preload' && filterConfig.onload; }));
var preloadRegexps = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__["flatToRegexpList"])(initialResources.filter(function (filterConfig) { return filterConfig.rel === 'preload' && filterConfig.onload; }));
/**
 * Build links that need to be load and add them on the end of head.
 */
var addLinksFromManifest = function (manifestFilesUrls, regexps, publicPath) {
    manifestFilesUrls
        .filter(function (file) { return Object(_helpers__WEBPACK_IMPORTED_MODULE_0__["createRegexpMatcher"])(file)(regexps); })
        .forEach(function (file) {
        var link = document.createElement('link');
        link.href = publicPath + file;
        link.rel = 'prefetch';
        document.head.appendChild(link);
    });
};
var getManifest = function () { return __awaiter(void 0, void 0, void 0, function () {
    var ssrManifest, _1;
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0:
                ssrManifest = null;
                _a.label = 1;
            case 1:
                _a.trys.push([1, 4, , 5]);
                return [4 /*yield*/, fetch('/dist/vue-ssr-client-manifest.json')];
            case 2: return [4 /*yield*/, (_a.sent()).json()];
            case 3:
                ssrManifest = (_a.sent()) || null;
                return [3 /*break*/, 5];
            case 4:
                _1 = _a.sent();
                ssrManifest = null;
                return [3 /*break*/, 5];
            case 5: return [2 /*return*/, ssrManifest];
        }
    });
}); };
/**
 * Add links from manifest to head element.
 */
/* harmony default export */ __webpack_exports__["default"] = (function () { return __awaiter(void 0, void 0, void 0, function () {
    var ssrManifest;
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0: return [4 /*yield*/, getManifest()];
            case 1:
                ssrManifest = _a.sent();
                if (!ssrManifest)
                    return [2 /*return*/];
                addLinksFromManifest(ssrManifest.async, prefetchRegexps, ssrManifest.publicPath);
                addLinksFromManifest(ssrManifest.initial, preloadRegexps, ssrManifest.publicPath);
                return [2 /*return*/];
        }
    });
}); });


/***/ }),

/***/ "./core/modules/initial-resources/helpers.ts":
/*!***************************************************!*\
  !*** ./core/modules/initial-resources/helpers.ts ***!
  \***************************************************/
/*! exports provided: createRegexpMatcher, addRegexpListToConfig, flatToRegexpList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRegexpMatcher", function() { return createRegexpMatcher; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addRegexpListToConfig", function() { return addRegexpListToConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatToRegexpList", function() { return flatToRegexpList; });
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
/**
 * Creates RegExp based on type and provided filter/filname in config.
 * There is option to create custom regexp by not providing type.
 * @param type - type of resources
 * @param filter - part of regex that will filter files from prefetch or preload
 */
var createRegexp = function (type, filter) {
    if (filter === void 0) { filter = ''; }
    switch (type) {
        case 'script': {
            return new RegExp("^" + filter + "(\\..+\\.|\\.)js", 'gi');
        }
        case 'style': {
            return new RegExp("^" + filter + "(\\..+\\.|\\.)css", 'gi');
        }
        default: {
            return new RegExp("" + filter, 'gi');
        }
    }
};
/**
 * Create RegExp list based on initialResources config
 */
var createRegexpList = function (_a) {
    var type = _a.type, _b = _a.filters, filters = _b === void 0 ? [] : _b;
    return filters.map(createRegexp.bind(null, type));
};
/**
 * Returns function that require RegExp list. Then after second call we will get boolean that determines if file match any regexp.
 * @param file - this is filename that will be checked
 */
var createRegexpMatcher = function (file) { return function (regexps) { return regexps.some(function (regexp) { return file.match(regexp); }); }; };
/**
 * Extended initialResurces config by adding to it list of RegExp.
 */
var addRegexpListToConfig = function (config) {
    var initialResourcesConfig = config.initialResources || [];
    return initialResourcesConfig
        .map(function (resourceConfig) { return (__assign(__assign({}, resourceConfig), { regexps: createRegexpList(resourceConfig) })); });
};
/**
 * Returns RegExp list from extended initialResources config.
 */
var flatToRegexpList = function (configs) { return configs
    .map(function (pConfig) { return pConfig.regexps; })
    .reduce(function (acc, val) { return acc.concat(val); }, []); };


/***/ }),

/***/ "./core/modules/initial-resources/index.ts":
/*!*************************************************!*\
  !*** ./core/modules/initial-resources/index.ts ***!
  \*************************************************/
/*! exports provided: InitialResourcesModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InitialResourcesModule", function() { return InitialResourcesModule; });
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _clientResourcesLoader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./clientResourcesLoader */ "./core/modules/initial-resources/clientResourcesLoader.ts");


var InitialResourcesModule = function () {
    if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"])
        return;
    window.addEventListener('load', _clientResourcesLoader__WEBPACK_IMPORTED_MODULE_1__["default"]);
};


/***/ }),

/***/ "./core/modules/newsletter/index.ts":
/*!******************************************!*\
  !*** ./core/modules/newsletter/index.ts ***!
  \******************************************/
/*! exports provided: NewsletterModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NewsletterModule", function() { return NewsletterModule; });
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store */ "./core/modules/newsletter/store/index.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");


var NewsletterModule = function (_a) {
    var store = _a.store;
    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].init('newsletter');
    store.registerModule('newsletter', _store__WEBPACK_IMPORTED_MODULE_0__["newsletterStore"]);
};


/***/ }),

/***/ "./core/modules/newsletter/store/index.ts":
/*!************************************************!*\
  !*** ./core/modules/newsletter/store/index.ts ***!
  \************************************************/
/*! exports provided: newsletterStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "newsletterStore", function() { return newsletterStore; });
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/newsletter/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var _a;



var newsletterStore = {
    namespaced: true,
    state: {
        isSubscribed: null,
        email: null
    },
    getters: {
        isSubscribed: function (state) { return state.isSubscribed; },
        email: function (state) { return state.email; }
    },
    mutations: (_a = {},
        _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["NEWSLETTER_SUBSCRIBE"]] = function (state) {
            state.isSubscribed = true;
        },
        _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["NEWSLETTER_UNSUBSCRIBE"]] = function (state) {
            state.isSubscribed = false;
        },
        _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_EMAIL"]] = function (state, payload) {
            state.email = payload;
        },
        _a),
    actions: {
        status: function (_a, email) {
            var commit = _a.commit;
            return __awaiter(this, void 0, void 0, function () {
                var isSubscribed;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0: return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__["NewsletterService"].isSubscribed(email)];
                        case 1:
                            isSubscribed = _b.sent();
                            if (isSubscribed) {
                                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_EMAIL"], email);
                                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["NEWSLETTER_SUBSCRIBE"]);
                            }
                            else {
                                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["NEWSLETTER_UNSUBSCRIBE"]);
                            }
                            return [2 /*return*/, isSubscribed];
                    }
                });
            });
        },
        subscribe: function (_a, email) {
            var commit = _a.commit, getters = _a.getters, dispatch = _a.dispatch;
            return __awaiter(this, void 0, void 0, function () {
                var subscribeResponse;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            if (getters.isSubscribed)
                                return [2 /*return*/];
                            return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__["NewsletterService"].subscribe(email)];
                        case 1:
                            subscribeResponse = _b.sent();
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["NEWSLETTER_SUBSCRIBE"]);
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_EMAIL"], email);
                            return [4 /*yield*/, dispatch('storeToCache', { email: email })];
                        case 2:
                            _b.sent();
                            return [2 /*return*/, subscribeResponse];
                    }
                });
            });
        },
        unsubscribe: function (_a, email) {
            var commit = _a.commit, getters = _a.getters;
            return __awaiter(this, void 0, void 0, function () {
                var unsubscribeResponse;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            if (!getters.isSubscribed)
                                return [2 /*return*/];
                            return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_2__["NewsletterService"].unsubscribe(email)];
                        case 1:
                            unsubscribeResponse = _b.sent();
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["NEWSLETTER_UNSUBSCRIBE"]);
                            return [2 /*return*/, unsubscribeResponse];
                    }
                });
            });
        },
        storeToCache: function (context, _a) {
            var email = _a.email;
            return __awaiter(this, void 0, void 0, function () {
                var newsletterStorage;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            newsletterStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].get('newsletter');
                            return [4 /*yield*/, newsletterStorage.setItem('email', email)];
                        case 1:
                            _b.sent();
                            return [2 /*return*/];
                    }
                });
            });
        }
    }
};


/***/ }),

/***/ "./core/modules/newsletter/store/mutation-types.ts":
/*!*********************************************************!*\
  !*** ./core/modules/newsletter/store/mutation-types.ts ***!
  \*********************************************************/
/*! exports provided: NEWSLETTER_SUBSCRIBE, NEWSLETTER_UNSUBSCRIBE, SET_EMAIL */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NEWSLETTER_SUBSCRIBE", function() { return NEWSLETTER_SUBSCRIBE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NEWSLETTER_UNSUBSCRIBE", function() { return NEWSLETTER_UNSUBSCRIBE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SET_EMAIL", function() { return SET_EMAIL; });
var NEWSLETTER_SUBSCRIBE = 'NEWSLETTER_SUBSCRIBE';
var NEWSLETTER_UNSUBSCRIBE = 'NEWSLETTER_UNSUBSCRIBE';
var SET_EMAIL = 'SET_EMAIL';


/***/ }),

/***/ "./core/modules/notification/index.ts":
/*!********************************************!*\
  !*** ./core/modules/notification/index.ts ***!
  \********************************************/
/*! exports provided: NotificationModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NotificationModule", function() { return NotificationModule; });
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store */ "./core/modules/notification/store/index.ts");

var NotificationModule = function (_a) {
    var store = _a.store;
    store.registerModule('notification', _store__WEBPACK_IMPORTED_MODULE_0__["notificationStore"]);
};


/***/ }),

/***/ "./core/modules/notification/store/index.ts":
/*!**************************************************!*\
  !*** ./core/modules/notification/store/index.ts ***!
  \**************************************************/
/*! exports provided: notificationStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "notificationStore", function() { return notificationStore; });
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var notificationStore = {
    namespaced: true,
    state: {
        notifications: []
    },
    getters: {
        notifications: function (state) { return state.notifications; }
    },
    mutations: {
        add: function (state, payload) {
            state.notifications.push(payload);
        },
        remove: function (state, index) {
            state.notifications.splice(index, 1);
        }
    },
    actions: {
        spawnNotification: function (_a, notification) {
            var commit = _a.commit, state = _a.state, dispatch = _a.dispatch;
            if (state.notifications.length > 0 &&
                state.notifications[state.notifications.length - 1].message === notification.message) {
                return;
            }
            var id = Math.floor(Math.random() * 100000);
            var newNotification = __assign({ id: id }, notification);
            commit('add', newNotification);
            if (!newNotification.hasNoTimeout) {
                setTimeout(function () {
                    dispatch('removeNotificationById', id);
                }, newNotification.timeToLive || 5000);
            }
            return newNotification;
        },
        removeNotification: function (_a, index) {
            var commit = _a.commit, state = _a.state;
            if (!index) {
                commit('remove', state.notifications.length - 1);
            }
            else {
                commit('remove', index);
            }
        },
        removeNotificationById: function (_a, id) {
            var commit = _a.commit, state = _a.state;
            var index = state.notifications.findIndex(function (notification) { return notification.id === id; });
            if (index !== -1) {
                commit('remove', index);
            }
        }
    }
};


/***/ }),

/***/ "./core/modules/offline-order/helpers/onNetworkStatusChange.ts":
/*!*********************************************************************!*\
  !*** ./core/modules/offline-order/helpers/onNetworkStatusChange.ts ***!
  \*********************************************************************/
/*! exports provided: onNetworkStatusChange */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onNetworkStatusChange", function() { return onNetworkStatusChange; });
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus/index */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");




function onNetworkStatusChange(store) {
    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].log('Are we online: ' + navigator.onLine, 'offline-order')();
    if (typeof navigator !== 'undefined' && navigator.onLine) {
        _vue_storefront_core_compatibility_plugins_event_bus_index__WEBPACK_IMPORTED_MODULE_0__["default"].$emit('sync/PROCESS_QUEUE', { config: config__WEBPACK_IMPORTED_MODULE_2__ }); // process checkout queue
        store.dispatch('cart/load', { forceClientState: true });
        if (config__WEBPACK_IMPORTED_MODULE_2__.orders.offline_orders.automatic_transmission_enabled || store.getters['checkout/isThankYouPage']) {
            _vue_storefront_core_compatibility_plugins_event_bus_index__WEBPACK_IMPORTED_MODULE_0__["default"].$emit('order/PROCESS_QUEUE', { config: config__WEBPACK_IMPORTED_MODULE_2__ }); // process checkout queue
        }
        else {
            var ordersToConfirm_1 = [];
            var ordersCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_3__["StorageManager"].get('orders');
            ordersCollection.iterate(function (order, id, iterationNumber) {
                if (!order.transmited) {
                    ordersToConfirm_1.push(order);
                }
            }).catch(function (err) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(err, 'offline-order')();
            });
            if (ordersToConfirm_1.length > 0) {
                _vue_storefront_core_compatibility_plugins_event_bus_index__WEBPACK_IMPORTED_MODULE_0__["default"].$emit('offline-order-confirmation', ordersToConfirm_1);
            }
        }
    }
}


/***/ }),

/***/ "./core/modules/url/helpers/index.ts":
/*!*******************************************!*\
  !*** ./core/modules/url/helpers/index.ts ***!
  \*******************************************/
/*! exports provided: parametrizeRouteData, processDynamicRoute, preProcessDynamicRoutes, findRouteByPath, normalizeUrlPath, formatCategoryLink, formatProductLink, getFallbackRouteData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parametrizeRouteData", function() { return parametrizeRouteData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "processDynamicRoute", function() { return processDynamicRoute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preProcessDynamicRoutes", function() { return preProcessDynamicRoutes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findRouteByPath", function() { return findRouteByPath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalizeUrlPath", function() { return normalizeUrlPath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatCategoryLink", function() { return formatCategoryLink; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatProductLink", function() { return formatProductLink; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFallbackRouteData", function() { return getFallbackRouteData; });
/* harmony import */ var _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/app */ "./core/app.ts");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/router-manager */ "./core/lib/router-manager.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
var __values = (undefined && undefined.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};





function parametrizeRouteData(routeData, query, storeCodeInPath) {
    var parametrizedRoute = Object.assign({}, routeData);
    parametrizedRoute.params = Object.assign({}, parametrizedRoute.params || {}, query);
    if (storeCodeInPath && !parametrizedRoute.name.startsWith(storeCodeInPath + '-')) {
        parametrizedRoute.name = storeCodeInPath + '-' + parametrizedRoute.name;
    }
    return parametrizedRoute;
}
function prepareDynamicRoute(routeData, path) {
    var userRoute = _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_3__["RouterManager"].findByName(routeData.name);
    if (userRoute) {
        var normalizedPath = "" + (path.startsWith('/') ? '' : '/') + path;
        var dynamicRoute = Object.assign({}, userRoute, routeData, { path: normalizedPath, name: "urldispatcher-" + normalizedPath });
        return dynamicRoute;
    }
    else {
        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_4__["Logger"].error('Route not found ' + routeData['name'], 'dispatcher')();
        return null;
    }
}
function processDynamicRoute(routeData, path, addToRoutes) {
    if (addToRoutes === void 0) { addToRoutes = true; }
    var preparedRoute = prepareDynamicRoute(routeData, path);
    if (addToRoutes && preparedRoute) {
        _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_0__["router"].addRoutes([preparedRoute], true);
    }
    return preparedRoute;
}
function preProcessDynamicRoutes(dispatcherMap, addToRoutes) {
    var e_1, _a;
    if (addToRoutes === void 0) { addToRoutes = true; }
    var preparedRoutes = [];
    try {
        for (var _b = __values(Object.entries(dispatcherMap)), _c = _b.next(); !_c.done; _c = _b.next()) {
            var _d = __read(_c.value, 2), url = _d[0], routeData = _d[1];
            var preparedRoute = prepareDynamicRoute(routeData, url);
            if (preparedRoute) {
                preparedRoutes.push(preparedRoute);
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_1) throw e_1.error; }
    }
    if (addToRoutes) {
        _vue_storefront_core_app__WEBPACK_IMPORTED_MODULE_0__["router"].addRoutes(preparedRoutes, true);
    }
    return preparedRoutes;
}
function findRouteByPath(path) {
    return _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_3__["RouterManager"].findByPath(path);
}
function normalizeUrlPath(url) {
    if (url && url.length > 0) {
        if (url.length > 0 && !url.startsWith('/'))
            url = "/" + url;
        if (url.endsWith('/'))
            url = url.slice(0, -1);
        var queryPos = url.indexOf('?');
        if (queryPos > 0)
            url = url.slice(0, queryPos);
    }
    return url;
}
function formatCategoryLink(category, storeCode) {
    if (storeCode === void 0) { storeCode = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_2__["currentStoreView"])().storeCode; }
    storeCode ? storeCode += '/' : storeCode = '';
    if (Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_2__["currentStoreView"])().appendStoreCode === false) {
        storeCode = '';
    }
    if (category) {
        return config__WEBPACK_IMPORTED_MODULE_1__.seo.useUrlDispatcher ? ('/' + storeCode + category.url_path) : ('/' + storeCode + 'c/' + category.slug);
    }
    return '/' + storeCode;
}
function formatProductLink(product, storeCode) {
    if (config__WEBPACK_IMPORTED_MODULE_1__.seo.useUrlDispatcher && product.url_path) {
        var routeData = void 0;
        if ((product.options && product.options.length > 0) || (product.configurable_children && product.configurable_children.length > 0)) {
            routeData = {
                path: product.url_path,
                params: { childSku: product.sku }
            };
        }
        else {
            routeData = { path: product.url_path };
        }
        return Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_2__["localizedDispatcherRoute"])(routeData, storeCode);
    }
    else {
        var routeData = {
            name: product.type_id + '-product',
            params: {
                parentSku: product.parentSku ? product.parentSku : product.sku,
                slug: product.slug,
                childSku: product.sku
            }
        };
        return Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_2__["localizedRoute"])(routeData, storeCode);
    }
}
var getFallbackRouteData = function (_a) {
    var mappedFallback = _a.mappedFallback, url = _a.url;
    if (Array.isArray(mappedFallback)) {
        return mappedFallback
            .reverse()
            .filter(function (f) { return f.params && f.params.slug; })
            .find(function (f) { return url.includes(f.params.slug); });
    }
    return mappedFallback;
};


/***/ }),

/***/ "./core/modules/url/helpers/transformUrl.ts":
/*!**************************************************!*\
  !*** ./core/modules/url/helpers/transformUrl.ts ***!
  \**************************************************/
/*! exports provided: transformProductUrl, transformCategoryUrl, transformCmsPageUrl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformProductUrl", function() { return transformProductUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformCategoryUrl", function() { return transformCategoryUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformCmsPageUrl", function() { return transformCmsPageUrl; });
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");

var transformProductUrl = function (product, urlParams) {
    if (urlParams === void 0) { urlParams = {}; }
    var _a = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])(), storeCode = _a.storeCode, appendStoreCode = _a.appendStoreCode;
    return {
        name: Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["localizedDispatcherRouteName"])(product.type_id + '-product', storeCode, appendStoreCode),
        params: {
            slug: product.slug,
            parentSku: product.parentSku || product.sku,
            childSku: urlParams['childSku'] ? urlParams['childSku'] : product.sku
        }
    };
};
var transformCategoryUrl = function (category) {
    var _a = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["currentStoreView"])(), storeCode = _a.storeCode, appendStoreCode = _a.appendStoreCode;
    return {
        name: Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["localizedDispatcherRouteName"])('category', storeCode, appendStoreCode),
        params: {
            slug: category.slug
        }
    };
};
var transformCmsPageUrl = function (cmsPage) {
    return {
        name: 'cms-page',
        params: {
            slug: cmsPage.identifier
        }
    };
};


/***/ }),

/***/ "./core/modules/url/index.ts":
/*!***********************************!*\
  !*** ./core/modules/url/index.ts ***!
  \***********************************/
/*! exports provided: cacheStorage, UrlModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cacheStorage", function() { return cacheStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UrlModule", function() { return UrlModule; });
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store */ "./core/modules/url/store/index.ts");
/* harmony import */ var _router_beforeEach__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./router/beforeEach */ "./core/modules/url/router/beforeEach.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");



var cacheStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].init('url');
var UrlModule = function (_a) {
    var store = _a.store, router = _a.router;
    store.registerModule('url', _store__WEBPACK_IMPORTED_MODULE_0__["urlStore"]);
    router.beforeEach(_router_beforeEach__WEBPACK_IMPORTED_MODULE_1__["beforeEachGuard"]);
};


/***/ }),

/***/ "./core/modules/url/router/beforeEach.ts":
/*!***********************************************!*\
  !*** ./core/modules/url/router/beforeEach.ts ***!
  \***********************************************/
/*! exports provided: UrlDispatchMapper, beforeEachGuard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UrlDispatchMapper", function() { return UrlDispatchMapper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "beforeEachGuard", function() { return beforeEachGuard; });
/* harmony import */ var _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/store */ "./core/store/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers */ "./core/modules/url/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/router-manager */ "./core/lib/router-manager.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};






var UrlDispatchMapper = function (to) { return __awaiter(void 0, void 0, void 0, function () {
    var routeData;
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0: return [4 /*yield*/, _vue_storefront_core_store__WEBPACK_IMPORTED_MODULE_0__["default"].dispatch('url/mapUrl', { url: to.path, query: to.query })];
            case 1:
                routeData = _a.sent();
                return [2 /*return*/, Object.assign({}, to, routeData)];
        }
    });
}); };
function beforeEachGuard(to, from, next) {
    return __awaiter(this, void 0, void 0, function () {
        var path, hasRouteParams, isPreviouslyDispatchedDynamicRoute, storeCode, routeData, dynamicRoute, e_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!_vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_4__["RouterManager"].isRouteProcessing()) return [3 /*break*/, 2];
                    return [4 /*yield*/, _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_4__["RouterManager"].getRouteLockPromise()];
                case 1:
                    _a.sent();
                    next();
                    return [2 /*return*/];
                case 2:
                    _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_4__["RouterManager"].lockRoute();
                    path = Object(_helpers__WEBPACK_IMPORTED_MODULE_2__["normalizeUrlPath"])(to.path);
                    hasRouteParams = to.hasOwnProperty('params') && Object.values(to.params).length > 0;
                    isPreviouslyDispatchedDynamicRoute = to.matched.length > 0 && to.name && to.name.startsWith('urldispatcher');
                    if (!(!to.matched.length || to.matched[0].name.endsWith('page-not-found') || (isPreviouslyDispatchedDynamicRoute && !hasRouteParams))) return [3 /*break*/, 8];
                    storeCode = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_3__["currentStoreView"])().storeCode;
                    _a.label = 3;
                case 3:
                    _a.trys.push([3, 5, 6, 7]);
                    return [4 /*yield*/, UrlDispatchMapper(to)];
                case 4:
                    routeData = _a.sent();
                    if (routeData) {
                        dynamicRoute = Object(_helpers__WEBPACK_IMPORTED_MODULE_2__["processDynamicRoute"])(routeData, path, !isPreviouslyDispatchedDynamicRoute);
                        if (dynamicRoute) {
                            next(__assign(__assign({}, dynamicRoute), { replace: _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_5__["routerHelper"].popStateDetected || dynamicRoute.fullPath === from.fullPath }));
                        }
                        else {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('Route not found ' + routeData['name'], 'dispatcher')();
                            next();
                        }
                    }
                    else {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error('No mapping found for ' + path, 'dispatcher')();
                        next();
                    }
                    return [3 /*break*/, 7];
                case 5:
                    e_1 = _a.sent();
                    _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(e_1, 'dispatcher')();
                    next();
                    return [3 /*break*/, 7];
                case 6:
                    _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_4__["RouterManager"].unlockRoute();
                    return [7 /*endfinally*/];
                case 7: return [3 /*break*/, 9];
                case 8:
                    next();
                    _vue_storefront_core_lib_router_manager__WEBPACK_IMPORTED_MODULE_4__["RouterManager"].unlockRoute();
                    _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_5__["routerHelper"].popStateDetected = false;
                    _a.label = 9;
                case 9:
                    _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_5__["routerHelper"].popStateDetected = false;
                    return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./core/modules/url/store/actions.ts":
/*!*******************************************!*\
  !*** ./core/modules/url/store/actions.ts ***!
  \*******************************************/
/*! exports provided: actions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actions", function() { return actions; });
/* harmony import */ var _vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/url/helpers/transformUrl */ "./core/modules/url/helpers/transformUrl.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ */ "./core/modules/url/index.ts");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! query-string */ "./node_modules/query-string/index.js");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! storefront-query-builder */ "./node_modules/storefront-query-builder/lib/index.js");
/* harmony import */ var storefront_query_builder__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(storefront_query_builder__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../helpers */ "./core/modules/url/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _vue_storefront_core_lib_storeCodeFromRoute__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/lib/storeCodeFromRoute */ "./core/lib/storeCodeFromRoute.ts");
/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! isomorphic-fetch */ "./node_modules/isomorphic-fetch/fetch-npm-browserify.js");
/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(isomorphic_fetch__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_next_store_category_mutation_types__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog-next/store/category/mutation-types */ "./core/modules/catalog-next/store/category/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_modules_cms_store_page_mutation_types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @vue-storefront/core/modules/cms/store/page/mutation-types */ "./core/modules/cms/store/page/mutation-types.ts");
/* harmony import */ var lodash_es_isEqual__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! lodash-es/isEqual */ "./node_modules/lodash-es/isEqual.js");
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/url/store/mutation-types.ts");
/* harmony import */ var lodash_es_omit__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lodash-es/omit */ "./node_modules/lodash-es/omit.js");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/search */ "./core/modules/catalog/helpers/search.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_helpers_prepare__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/helpers/prepare */ "./core/modules/catalog/helpers/prepare/index.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};


// you can use this storage if you want to enable offline capabilities

















// it's a good practice for all actions to return Promises with effect of their execution
var actions = {
    // if you want to use cache in your module you can load cached data like this
    registerMapping: function (_a, _b) {
        var state = _a.state;
        var url = _b.url, routeData = _b.routeData;
        return __awaiter(this, void 0, void 0, function () {
            var err_1;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!state.dispatcherMap[url]) {
                            state.dispatcherMap[url] = routeData;
                        }
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, ___WEBPACK_IMPORTED_MODULE_2__["cacheStorage"].setItem(Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["normalizeUrlPath"])(url), routeData, null, config__WEBPACK_IMPORTED_MODULE_4__.seo.disableUrlRoutesPersistentCache)];
                    case 2:
                        _c.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        err_1 = _c.sent();
                        if (err_1.name === 'QuotaExceededError' ||
                            err_1.name === 'NS_ERROR_DOM_QUOTA_REACHED') { // quota exceeded error
                            ___WEBPACK_IMPORTED_MODULE_2__["cacheStorage"].clear(); // clear the url cache if quota has been exceeded
                        }
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/, routeData];
                }
            });
        });
    },
    /**
     * Register dynamic vue-router routes
     */
    registerDynamicRoutes: function (_a) {
        var state = _a.state, dispatch = _a.dispatch;
        return __awaiter(this, void 0, void 0, function () {
            var registrationRoutePromises;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!state.dispatcherMap)
                            return [2 /*return*/];
                        Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["preProcessDynamicRoutes"])(state.dispatcherMap);
                        registrationRoutePromises = Object.keys(state.dispatcherMap).map(function (url) {
                            var routeData = state.dispatcherMap[url];
                            return dispatch('registerMapping', { url: url, routeData: routeData });
                        });
                        return [4 /*yield*/, Promise.all(registrationRoutePromises)];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    },
    mapUrl: function (_a, _b) {
        var state = _a.state, dispatch = _a.dispatch;
        var url = _b.url, query = _b.query;
        var parsedQuery = typeof query === 'string' ? query_string__WEBPACK_IMPORTED_MODULE_3___default.a.parse(query) : query;
        var storeCodeInPath = Object(_vue_storefront_core_lib_storeCodeFromRoute__WEBPACK_IMPORTED_MODULE_8__["default"])(url);
        url = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["normalizeUrlPath"])(url);
        return new Promise(function (resolve, reject) {
            if (state.dispatcherMap[url]) {
                return resolve(Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["parametrizeRouteData"])(state.dispatcherMap[url], query, storeCodeInPath));
            }
            ___WEBPACK_IMPORTED_MODULE_2__["cacheStorage"].getItem(url).then(function (routeData) {
                if (routeData !== null) {
                    return resolve(Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["parametrizeRouteData"])(routeData, query, storeCodeInPath));
                }
                else {
                    var mappingActionName = config__WEBPACK_IMPORTED_MODULE_4__.urlModule.enableMapFallbackUrl ? 'mapFallbackUrl' : 'mappingFallback';
                    dispatch(mappingActionName, { url: url, params: parsedQuery }).then(function (mappedFallback) {
                        var routeData = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["getFallbackRouteData"])({ mappedFallback: mappedFallback, url: url });
                        dispatch('registerMapping', { url: url, routeData: routeData }); // register mapping for further usage
                        resolve(Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["parametrizeRouteData"])(routeData, query, storeCodeInPath));
                    }).catch(reject);
                }
            }).catch(reject);
        });
    },
    /**
     * @deprecated from 1.12
     * Router mapping fallback - get the proper URL from API
     * This method could be overriden in custom module to provide custom URL mapping logic
     */
    mappingFallback: function (_a, _b) {
        var dispatch = _a.dispatch;
        var url = _b.url, params = _b.params;
        return __awaiter(this, void 0, void 0, function () {
            var productQuery, products, product, category;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].warn("\n      Deprecated action mappingFallback - use mapFallbackUrl instead.\n      You can enable mapFallbackUrl by changing 'config.urlModule.enableMapFallbackUrl' to true\n    ")();
                        productQuery = new storefront_query_builder__WEBPACK_IMPORTED_MODULE_5__["SearchQuery"]();
                        url = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_7__["removeStoreCodeFromRoute"])(url.startsWith('/') ? url.slice(1) : url);
                        productQuery.applyFilter({ key: 'url_path', value: { 'eq': url } }); // Tees category
                        return [4 /*yield*/, dispatch('product/list', { query: productQuery }, { root: true })];
                    case 1:
                        products = _c.sent();
                        if (!(products && products.items && products.items.length)) return [3 /*break*/, 2];
                        product = products.items[0];
                        return [2 /*return*/, Object(_vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_0__["transformProductUrl"])(product, params)];
                    case 2: return [4 /*yield*/, dispatch('category/single', { key: 'url_path', value: url }, { root: true })];
                    case 3:
                        category = _c.sent();
                        if (category !== null) {
                            return [2 /*return*/, Object(_vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_0__["transformCategoryUrl"])(category)];
                        }
                        _c.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    },
    /**
     * Router mapping fallback - get the proper URL from API
     * This method could be overriden in custom module to provide custom URL mapping logic
     */
    mapFallbackUrl: function (_a, _b) {
        var dispatch = _a.dispatch;
        var url = _b.url, params = _b.params;
        return __awaiter(this, void 0, void 0, function () {
            var fallbackData, _c, result;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        url = Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_7__["removeStoreCodeFromRoute"])(url.startsWith('/') ? url.slice(1) : url);
                        return [4 /*yield*/, dispatch('getFallbackByUrl', { url: url, params: params })
                            // if there is record in ES then map data
                        ];
                    case 1:
                        fallbackData = _d.sent();
                        if (!fallbackData) return [3 /*break*/, 3];
                        return [4 /*yield*/, Promise.all([
                                dispatch('transformFallback', __assign(__assign({}, fallbackData), { params: params })),
                                dispatch('saveFallbackData', fallbackData)
                            ])];
                    case 2:
                        _c = __read.apply(void 0, [_d.sent(), 1]), result = _c[0];
                        return [2 /*return*/, result];
                    case 3: return [2 /*return*/, {
                            name: 'page-not-found',
                            params: {
                                slug: 'page-not-found'
                            }
                        }];
                }
            });
        });
    },
    /**
     * Search for record in ES which contains url value (check which fields it searches in vsf-api config.urlModule.map.searchedFields)
     */
    getFallbackByUrl: function (context, _a) {
        var url = _a.url, params = _a.params;
        return __awaiter(this, void 0, void 0, function () {
            var groupId, groupToken, requestUrl, response, err_2;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        groupId = (config__WEBPACK_IMPORTED_MODULE_4__.usePriceTiers && context.rootState.user.groupId) || null;
                        groupToken = context.rootState.user.groupToken || null;
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 4, , 5]);
                        requestUrl = "" + Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_7__["adjustMultistoreApiUrl"])(Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["processURLAddress"])(config__WEBPACK_IMPORTED_MODULE_4__.urlModule.map_endpoint));
                        return [4 /*yield*/, isomorphic_fetch__WEBPACK_IMPORTED_MODULE_9___default()(requestUrl, {
                                method: 'POST',
                                mode: 'cors',
                                headers: {
                                    'Accept': 'application/json',
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    url: url,
                                    includeFields: null,
                                    excludeFields: [],
                                    options: {
                                        prefetchGroupProducts: true,
                                        assignProductConfiguration: true,
                                        populateRequestCacheTags: false,
                                        setProductErrors: false,
                                        fallbackToDefaultWhenNoAvailable: true,
                                        separateSelectedVariant: false,
                                        setConfigurableProductOptions: config__WEBPACK_IMPORTED_MODULE_4__.cart.setConfigurableProductOptions,
                                        filterUnavailableVariants: config__WEBPACK_IMPORTED_MODULE_4__.products.filterUnavailableVariants
                                    },
                                    filters: { sku: params.childSku },
                                    groupId: groupId,
                                    groupToken: groupToken
                                })
                            })];
                    case 2:
                        response = _b.sent();
                        if (!response.ok) {
                            return [2 /*return*/, null];
                        }
                        return [4 /*yield*/, response.json()];
                    case 3:
                        response = _b.sent();
                        return [2 /*return*/, response];
                    case 4:
                        err_2 = _b.sent();
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].error('FetchError in request to ES: ', 'search', err_2)();
                        return [2 /*return*/, null];
                    case 5: return [2 /*return*/];
                }
            });
        });
    },
    /**
     * Transforms data to vue-router route format
     */
    transformFallback: function (context, _a) {
        var _type = _a._type, _source = _a._source, params = _a.params;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                switch (_type) {
                    case 'product': {
                        return [2 /*return*/, Object(_vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_0__["transformProductUrl"])(_source, params)];
                    }
                    case 'category': {
                        return [2 /*return*/, Object(_vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_0__["transformCategoryUrl"])(_source)];
                    }
                    case 'cms_page': {
                        return [2 /*return*/, Object(_vue_storefront_core_modules_url_helpers_transformUrl__WEBPACK_IMPORTED_MODULE_0__["transformCmsPageUrl"])(_source)];
                    }
                    default: {
                        return [2 /*return*/, {
                                name: 'page-not-found',
                                params: {
                                    slug: 'page-not-found'
                                }
                            }];
                    }
                }
                return [2 /*return*/];
            });
        });
    },
    /**
     * Here we can save data based on _type, so there will be no need to create another request for it.
     */
    saveFallbackData: function (_a, _b) {
        var commit = _a.commit;
        var _type = _b._type, _source = _b._source;
        return __awaiter(this, void 0, void 0, function () {
            var _c, product;
            return __generator(this, function (_d) {
                switch (_type) {
                    case 'product': {
                        _c = __read(Object(_vue_storefront_core_modules_catalog_helpers_prepare__WEBPACK_IMPORTED_MODULE_17__["prepareProducts"])([_source]), 1), product = _c[0];
                        Object(_vue_storefront_core_modules_catalog_helpers_search__WEBPACK_IMPORTED_MODULE_16__["storeProductToCache"])(product, 'sku');
                        break;
                    }
                    case 'category': {
                        commit('category-next/' + _vue_storefront_core_modules_catalog_next_store_category_mutation_types__WEBPACK_IMPORTED_MODULE_11__["CATEGORY_ADD_CATEGORY"], _source, { root: true });
                        break;
                    }
                    case 'cms_page': {
                        commit('cmsPage/' + _vue_storefront_core_modules_cms_store_page_mutation_types__WEBPACK_IMPORTED_MODULE_12__["CMS_PAGE_ADD_CMS_PAGE"], _source, { root: true });
                        commit('cmsPage/' + _vue_storefront_core_modules_cms_store_page_mutation_types__WEBPACK_IMPORTED_MODULE_12__["CMS_PAGE_SET_CURRENT"], _source, { root: true });
                        break;
                    }
                    default: {
                        break;
                    }
                }
                return [2 /*return*/];
            });
        });
    },
    setCurrentRoute: function (_a, _b) {
        var commit = _a.commit, state = _a.state, rootGetters = _a.rootGetters;
        var _c = _b === void 0 ? {} : _b, to = _c.to, from = _c.from;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_14__["SET_CURRENT_ROUTE"], __assign(__assign({}, to), { scrollPosition: __assign({}, state.prevRoute.scrollPosition), categoryPageSize: state.prevRoute.categoryPageSize }));
        var sameAsPrevRoute = Object(lodash_es_isEqual__WEBPACK_IMPORTED_MODULE_13__["default"])(Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_15__["default"])(state.prevRoute, ['scrollPosition', 'categoryPageSize']), Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_15__["default"])(state.currentRoute, ['scrollPosition', 'categoryPageSize']));
        var hasDifferentPath = (state.currentRoute && state.currentRoute.path) !== (from && from.path);
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_14__["IS_BACK_ROUTE"], sameAsPrevRoute && hasDifferentPath);
        var scrollPosition = {
            x: !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"] ? window.pageXOffset : 0,
            y: !_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"] ? window.pageYOffset : 0
        };
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_14__["SET_PREV_ROUTE"], __assign(__assign({}, from), { scrollPosition: scrollPosition, categoryPageSize: rootGetters['category-next/getCategoryProducts'].length }));
    }
};


/***/ }),

/***/ "./core/modules/url/store/getters.ts":
/*!*******************************************!*\
  !*** ./core/modules/url/store/getters.ts ***!
  \*******************************************/
/*! exports provided: getters */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getters", function() { return getters; });
var getters = {
    getCurrentRoute: function (state) { return state.currentRoute; },
    isBackRoute: function (state) { return state.isBackRoute; },
    getPrevRoute: function (state) { return state.prevRoute; }
};


/***/ }),

/***/ "./core/modules/url/store/index.ts":
/*!*****************************************!*\
  !*** ./core/modules/url/store/index.ts ***!
  \*****************************************/
/*! exports provided: urlStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "urlStore", function() { return urlStore; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/url/store/actions.ts");
/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./state */ "./core/modules/url/store/state.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getters */ "./core/modules/url/store/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mutations */ "./core/modules/url/store/mutations.ts");




var urlStore = {
    namespaced: true,
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["actions"],
    state: _state__WEBPACK_IMPORTED_MODULE_1__["state"],
    getters: _getters__WEBPACK_IMPORTED_MODULE_2__["getters"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_3__["mutations"]
};


/***/ }),

/***/ "./core/modules/url/store/mutation-types.ts":
/*!**************************************************!*\
  !*** ./core/modules/url/store/mutation-types.ts ***!
  \**************************************************/
/*! exports provided: SET_CURRENT_ROUTE, SET_PREV_ROUTE, IS_BACK_ROUTE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SET_CURRENT_ROUTE", function() { return SET_CURRENT_ROUTE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SET_PREV_ROUTE", function() { return SET_PREV_ROUTE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IS_BACK_ROUTE", function() { return IS_BACK_ROUTE; });
var SET_CURRENT_ROUTE = 'URL/SET_CURRENT_ROUTE';
var SET_PREV_ROUTE = 'URL/SET_PREV_ROUTE';
var IS_BACK_ROUTE = 'URL/IS_BACK_ROUTE';


/***/ }),

/***/ "./core/modules/url/store/mutations.ts":
/*!*********************************************!*\
  !*** ./core/modules/url/store/mutations.ts ***!
  \*********************************************/
/*! exports provided: mutations */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mutations", function() { return mutations; });
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/url/store/mutation-types.ts");
/* harmony import */ var lodash_es_omit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es/omit */ "./node_modules/lodash-es/omit.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var _a;


var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_CURRENT_ROUTE"]] = function (state, payload) {
        if (payload === void 0) { payload = {}; }
        state.currentRoute = Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_1__["default"])(__assign({}, payload), ['matched']);
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_PREV_ROUTE"]] = function (state, payload) {
        if (payload === void 0) { payload = {}; }
        state.prevRoute = Object(lodash_es_omit__WEBPACK_IMPORTED_MODULE_1__["default"])(__assign({}, payload), ['matched']);
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["IS_BACK_ROUTE"]] = function (state, payload) {
        state.isBackRoute = payload;
    },
    _a);


/***/ }),

/***/ "./core/modules/url/store/state.ts":
/*!*****************************************!*\
  !*** ./core/modules/url/store/state.ts ***!
  \*****************************************/
/*! exports provided: state */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "state", function() { return state; });
var state = {
    dispatcherMap: {},
    currentRoute: {},
    prevRoute: {},
    isBackRoute: false
};


/***/ }),

/***/ "./core/modules/user/hooks.ts":
/*!************************************!*\
  !*** ./core/modules/user/hooks.ts ***!
  \************************************/
/*! exports provided: userHooks, userHooksExecutors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "userHooks", function() { return userHooks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "userHooksExecutors", function() { return userHooksExecutors; });
/* harmony import */ var _vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/hooks */ "./core/lib/hooks.ts");

// Authorize
var _a = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterUserAuthorizeHook = _a.hook, afterUserAuthorizeExecutor = _a.executor;
// Unauthorize
var _b = Object(_vue_storefront_core_lib_hooks__WEBPACK_IMPORTED_MODULE_0__["createListenerHook"])(), afterUserUnauthorizeHook = _b.hook, afterUserUnauthorizeExecutor = _b.executor;
/** Only for internal usage in this module */
var userHooksExecutors = {
    afterUserAuthorize: afterUserAuthorizeExecutor,
    afterUserUnauthorize: afterUserUnauthorizeExecutor
};
var userHooks = {
    /** Hook is fired right after user is authenticated or auth fails.
     * @param response result of user authentication containing status codes and user data
    */
    afterUserAuthorize: afterUserAuthorizeHook,
    /** Hook is fired right after user is logged out.
    */
    afterUserUnauthorize: afterUserUnauthorizeHook
};



/***/ }),

/***/ "./core/modules/user/index.ts":
/*!************************************!*\
  !*** ./core/modules/user/index.ts ***!
  \************************************/
/*! exports provided: UserModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserModule", function() { return UserModule; });
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store */ "./core/modules/user/store/index.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _store_mutation_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./store/mutation-types */ "./core/modules/user/store/mutation-types.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};






var UserModule = function (_a) {
    var store = _a.store;
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_b) {
            _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].init('user');
            store.registerModule('user', _store__WEBPACK_IMPORTED_MODULE_0__["userStore"]);
            if (!_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["isServer"]) {
                _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_4__["default"].$on('user-before-logout', function () {
                    store.dispatch('user/logout', { silent: false });
                    // TODO: Move it to theme
                    store.commit('ui/setSubmenu', {
                        depth: 0
                    });
                });
                _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_4__["default"].$on('user-after-loggedin', function (receivedData) {
                    // TODO: Make independent of checkout module
                    store.dispatch('checkout/savePersonalDetails', {
                        firstName: receivedData.firstname,
                        lastName: receivedData.lastname,
                        emailAddress: receivedData.email
                    });
                });
                store.dispatch('user/startSession');
            }
            store.subscribe(function (mutation, state) {
                var type = mutation.type;
                if (type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_5__["USER_INFO_LOADED"])) {
                    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].get('user').setItem('current-user', state.user.current).catch(function (reason) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].error(reason)(); // it doesn't work on SSR
                    }); // populate cache
                }
                if (type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_5__["USER_ORDERS_HISTORY_LOADED"])) {
                    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].get('user').setItem('orders-history', state.user.orders_history).catch(function (reason) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].error(reason)(); // it doesn't work on SSR
                    }); // populate cache
                }
                if (type.endsWith(_store_mutation_types__WEBPACK_IMPORTED_MODULE_5__["USER_TOKEN_CHANGED"])) {
                    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].get('user').setItem('current-token', state.user.token).catch(function (reason) {
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].error(reason)(); // it doesn't work on SSR
                    }); // populate cache
                    if (state.user.refreshToken) {
                        _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].get('user').setItem('current-refresh-token', state.user.refreshToken).catch(function (reason) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_3__["Logger"].error(reason)(); // it doesn't work on SSR
                        }); // populate cache
                    }
                }
            });
            return [2 /*return*/];
        });
    });
};


/***/ }),

/***/ "./core/modules/user/store/actions.ts":
/*!********************************************!*\
  !*** ./core/modules/user/store/actions.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/user/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/i18n */ "./core/i18n/index.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/data-resolver */ "./core/data-resolver/index.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../hooks */ "./core/modules/user/hooks.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};









var actions = {
    startSession: function (_a) {
        var commit = _a.commit, dispatch = _a.dispatch, getters = _a.getters;
        return __awaiter(this, void 0, void 0, function () {
            var usersCollection, userData, lastUserToken;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        usersCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__["StorageManager"].get('user');
                        return [4 /*yield*/, usersCollection.getItem('current-user')];
                    case 1:
                        userData = _b.sent();
                        if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["isServer"] || getters.isLocalDataLoaded)
                            return [2 /*return*/];
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_LOCAL_DATA_LOADED"], true);
                        if (userData) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_INFO_LOADED"], userData);
                        }
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_START_SESSION"]);
                        return [4 /*yield*/, usersCollection.getItem('current-token')];
                    case 2:
                        lastUserToken = _b.sent();
                        if (!lastUserToken) return [3 /*break*/, 4];
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_TOKEN_CHANGED"], { newToken: lastUserToken });
                        return [4 /*yield*/, dispatch('sessionAfterAuthorized', {})];
                    case 3:
                        _b.sent();
                        if (userData) {
                            dispatch('setUserGroup', userData);
                        }
                        return [3 /*break*/, 5];
                    case 4:
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__["default"].$emit('session-after-nonauthorized');
                        _b.label = 5;
                    case 5:
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__["default"].$emit('session-after-started');
                        return [2 /*return*/];
                }
            });
        });
    },
    /**
     * Send password reset link for specific e-mail
     */
    resetPassword: function (context, _a) {
        var email = _a.email;
        return _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["UserService"].resetPassword(email);
    },
    /**
     * Create new password for provided email with resetToken
     * We could receive resetToken by running user.resetPassword action
     */
    createPassword: function (context, _a) {
        var email = _a.email, newPassword = _a.newPassword, resetToken = _a.resetToken;
        return _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["UserService"].createPassword(email, newPassword, resetToken);
    },
    /**
     * Login user and return user profile and current token
     */
    login: function (_a, _b) {
        var commit = _a.commit, dispatch = _a.dispatch;
        var username = _b.username, password = _b.password;
        return __awaiter(this, void 0, void 0, function () {
            var resp, err_1;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["UserService"].login(username, password)];
                    case 1:
                        resp = _c.sent();
                        _hooks__WEBPACK_IMPORTED_MODULE_7__["userHooksExecutors"].afterUserAuthorize(resp);
                        if (!(resp.code === 200)) return [3 /*break*/, 7];
                        _c.label = 2;
                    case 2:
                        _c.trys.push([2, 5, , 7]);
                        return [4 /*yield*/, dispatch('resetUserInvalidateLock', {}, { root: true })];
                    case 3:
                        _c.sent();
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_TOKEN_CHANGED"], { newToken: resp.result, meta: resp.meta }); // TODO: handle the "Refresh-token" header
                        return [4 /*yield*/, dispatch('sessionAfterAuthorized', { refresh: true, useCache: false })];
                    case 4:
                        _c.sent();
                        return [3 /*break*/, 7];
                    case 5:
                        err_1 = _c.sent();
                        return [4 /*yield*/, dispatch('clearCurrentUser')];
                    case 6:
                        _c.sent();
                        throw new Error(err_1);
                    case 7: return [2 /*return*/, resp];
                }
            });
        });
    },
    /**
     * Login user and return user profile and current token
     */
    register: function (context, _a) {
        var password = _a.password, customer = __rest(_a, ["password"]);
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                return [2 /*return*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["UserService"].register(customer, password)];
            });
        });
    },
    /**
    * Invalidate user token
    */
    refresh: function (_a) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            var usersCollection, refreshToken, newToken;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        usersCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__["StorageManager"].get('user');
                        return [4 /*yield*/, usersCollection.getItem('current-refresh-token')];
                    case 1:
                        refreshToken = _b.sent();
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["UserService"].refreshToken(refreshToken)];
                    case 2:
                        newToken = _b.sent();
                        if (newToken) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_TOKEN_CHANGED"], { newToken: newToken });
                        }
                        return [2 /*return*/, newToken];
                }
            });
        });
    },
    /**
     * Update user groupToken and groupId in state
     * @param context
     * @param userData
     */
    setUserGroup: function (_a, userData) {
        var commit = _a.commit;
        if (userData.groupToken) {
            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_GROUP_TOKEN_CHANGED"], userData.groupToken);
        }
        if (userData.group_id) {
            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_GROUP_CHANGED"], userData.group_id);
        }
    },
    restoreCurrentUserFromCache: function (_a) {
        var commit = _a.commit, dispatch = _a.dispatch;
        return __awaiter(this, void 0, void 0, function () {
            var usersCollection, currentUser;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        usersCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__["StorageManager"].get('user');
                        return [4 /*yield*/, usersCollection.getItem('current-user')];
                    case 1:
                        currentUser = _b.sent();
                        if (!currentUser) return [3 /*break*/, 3];
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_INFO_LOADED"], currentUser);
                        return [4 /*yield*/, dispatch('setUserGroup', currentUser)];
                    case 2:
                        _b.sent();
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__["default"].$emit('user-after-loggedin', currentUser);
                        dispatch('cart/authorize', {}, { root: true });
                        return [2 /*return*/, currentUser];
                    case 3: return [2 /*return*/, null];
                }
            });
        });
    },
    refreshUserProfile: function (_a, _b) {
        var commit = _a.commit, dispatch = _a.dispatch;
        var resolvedFromCache = _b.resolvedFromCache;
        return __awaiter(this, void 0, void 0, function () {
            var resp;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["UserService"].getProfile()];
                    case 1:
                        resp = _c.sent();
                        if (!(resp.resultCode === 200)) return [3 /*break*/, 3];
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_INFO_LOADED"], resp.result); // this also stores the current user to localForage
                        return [4 /*yield*/, dispatch('setUserGroup', resp.result)];
                    case 2:
                        _c.sent();
                        _c.label = 3;
                    case 3:
                        if (!(!resolvedFromCache && resp.resultCode === 200)) return [3 /*break*/, 5];
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__["default"].$emit('user-after-loggedin', resp.result);
                        return [4 /*yield*/, dispatch('cart/authorize', {}, { root: true })];
                    case 4:
                        _c.sent();
                        return [2 /*return*/, resp];
                    case 5: return [2 /*return*/];
                }
            });
        });
    },
    /**
     * Load current user profile
     */
    me: function (_a, _b) {
        var dispatch = _a.dispatch, getters = _a.getters;
        var _c = _b === void 0 ? {} : _b, _d = _c.refresh, refresh = _d === void 0 ? true : _d, _e = _c.useCache, useCache = _e === void 0 ? true : _e;
        return __awaiter(this, void 0, void 0, function () {
            var resolvedFromCache, currentUser;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        if (!getters.getToken) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].warn('No User token, user unauthorized', 'user')();
                            return [2 /*return*/];
                        }
                        resolvedFromCache = false;
                        if (!useCache) return [3 /*break*/, 2];
                        return [4 /*yield*/, dispatch('restoreCurrentUserFromCache')];
                    case 1:
                        currentUser = _f.sent();
                        if (currentUser) {
                            resolvedFromCache = true;
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].log('Current user served from cache', 'user')();
                        }
                        _f.label = 2;
                    case 2:
                        if (refresh) {
                            return [2 /*return*/, dispatch('refreshUserProfile', { resolvedFromCache: resolvedFromCache })];
                        }
                        return [2 /*return*/];
                }
            });
        });
    },
    /**
     * Update user profile with data from My Account page
     */
    update: function (_, profile) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["UserService"].updateProfile(profile, 'user/handleUpdateProfile')];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    },
    handleUpdateProfile: function (_a, event) {
        var dispatch = _a.dispatch;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                if (event.resultCode === 200) {
                    dispatch('notification/spawnNotification', {
                        type: 'success',
                        message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t('Account data has successfully been updated'),
                        action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t('OK') }
                    }, { root: true });
                    dispatch('user/setCurrentUser', event.result, { root: true });
                }
                return [2 /*return*/];
            });
        });
    },
    setCurrentUser: function (_a, userData) {
        var commit = _a.commit;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_INFO_LOADED"], userData);
    },
    /**
     * Change user password
     */
    changePassword: function (_a, passwordData) {
        var dispatch = _a.dispatch, getters = _a.getters;
        return __awaiter(this, void 0, void 0, function () {
            var resp;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["onlineHelper"].isOnline) {
                            dispatch('notification/spawnNotification', {
                                type: 'error',
                                message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t('Reset password feature does not work while offline!'),
                                action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t('OK') }
                            }, { root: true });
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["UserService"].changePassword(passwordData)];
                    case 1:
                        resp = _b.sent();
                        if (!(resp.code === 200)) return [3 /*break*/, 4];
                        return [4 /*yield*/, dispatch('notification/spawnNotification', {
                                type: 'success',
                                message: 'Password has successfully been changed',
                                action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t('OK') }
                            }, { root: true })];
                    case 2:
                        _b.sent();
                        return [4 /*yield*/, dispatch('login', {
                                username: getters.getUserEmail,
                                password: passwordData.newPassword
                            })];
                    case 3:
                        _b.sent();
                        return [3 /*break*/, 6];
                    case 4: return [4 /*yield*/, dispatch('notification/spawnNotification', {
                            type: 'error',
                            message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t(resp.result.errorMessage),
                            action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t('OK') }
                        }, { root: true })];
                    case 5:
                        _b.sent();
                        _b.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    },
    clearCurrentUser: function (_a) {
        var commit = _a.commit, dispatch = _a.dispatch;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_TOKEN_CHANGED"], '');
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_GROUP_TOKEN_CHANGED"], '');
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_GROUP_CHANGED"], null);
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_INFO_LOADED"], null);
        dispatch('wishlist/clear', null, { root: true });
        dispatch('compare/clear', null, { root: true });
        dispatch('checkout/savePersonalDetails', {}, { root: true });
        dispatch('checkout/saveShippingDetails', {}, { root: true });
        dispatch('checkout/savePaymentDetails', {}, { root: true });
    },
    /**
     * Logout user
     */
    logout: function (_a, _b) {
        var commit = _a.commit, dispatch = _a.dispatch;
        var _c = _b.silent, silent = _c === void 0 ? false : _c;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_END_SESSION"]);
                        return [4 /*yield*/, dispatch('cart/disconnect', {}, { root: true })];
                    case 1:
                        _d.sent();
                        return [4 /*yield*/, dispatch('clearCurrentUser')];
                    case 2:
                        _d.sent();
                        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__["default"].$emit('user-after-logout');
                        // clear cart without sync, because after logout we don't want to clear cart on backend
                        // user should have items when he comes back
                        return [4 /*yield*/, dispatch('cart/clear', { sync: false }, { root: true })];
                    case 3:
                        // clear cart without sync, because after logout we don't want to clear cart on backend
                        // user should have items when he comes back
                        _d.sent();
                        if (!!silent) return [3 /*break*/, 5];
                        return [4 /*yield*/, dispatch('notification/spawnNotification', {
                                type: 'success',
                                message: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t("You're logged out"),
                                action1: { label: _vue_storefront_i18n__WEBPACK_IMPORTED_MODULE_1__["default"].t('OK') }
                            }, { root: true })];
                    case 4:
                        _d.sent();
                        _d.label = 5;
                    case 5:
                        _hooks__WEBPACK_IMPORTED_MODULE_7__["userHooksExecutors"].afterUserUnauthorize();
                        return [2 /*return*/];
                }
            });
        });
    },
    loadOrdersFromCache: function (_a) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            var ordersHistoryCollection, ordersHistory;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        ordersHistoryCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_6__["StorageManager"].get('user');
                        return [4 /*yield*/, ordersHistoryCollection.getItem('orders-history')];
                    case 1:
                        ordersHistory = _b.sent();
                        if (ordersHistory) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_ORDERS_HISTORY_LOADED"], ordersHistory);
                            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__["default"].$emit('user-after-loaded-orders', ordersHistory);
                            return [2 /*return*/, ordersHistory];
                        }
                        return [2 /*return*/];
                }
            });
        });
    },
    refreshOrdersHistory: function (_a, _b) {
        var commit = _a.commit;
        var resolvedFromCache = _b.resolvedFromCache, _c = _b.pageSize, pageSize = _c === void 0 ? 20 : _c, _d = _b.currentPage, currentPage = _d === void 0 ? 1 : _d;
        return __awaiter(this, void 0, void 0, function () {
            var resp;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0: return [4 /*yield*/, _vue_storefront_core_data_resolver__WEBPACK_IMPORTED_MODULE_4__["UserService"].getOrdersHistory(pageSize, currentPage)];
                    case 1:
                        resp = _e.sent();
                        if (resp.code === 200) {
                            commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_ORDERS_HISTORY_LOADED"], resp.result); // this also stores the current user to localForage
                            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_5__["default"].$emit('user-after-loaded-orders', resp.result);
                        }
                        if (!resolvedFromCache) {
                            Promise.resolve(resp.code === 200 ? resp : null);
                        }
                        return [2 /*return*/, resp];
                }
            });
        });
    },
    /**
     * Load user's orders history
     */
    getOrdersHistory: function (_a, _b) {
        var dispatch = _a.dispatch, getters = _a.getters;
        var _c = _b.refresh, refresh = _c === void 0 ? true : _c, _d = _b.useCache, useCache = _d === void 0 ? true : _d, _e = _b.pageSize, pageSize = _e === void 0 ? 20 : _e, _f = _b.currentPage, currentPage = _f === void 0 ? 1 : _f;
        return __awaiter(this, void 0, void 0, function () {
            var resolvedFromCache, ordersHistory;
            return __generator(this, function (_g) {
                switch (_g.label) {
                    case 0:
                        if (!getters.getToken) {
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].debug('No User token, user unauthorized', 'user')();
                            return [2 /*return*/, Promise.resolve(null)];
                        }
                        resolvedFromCache = false;
                        if (!useCache) return [3 /*break*/, 2];
                        return [4 /*yield*/, dispatch('loadOrdersFromCache')];
                    case 1:
                        ordersHistory = _g.sent();
                        if (ordersHistory) {
                            resolvedFromCache = true;
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].log('Current user order history served from cache', 'user')();
                        }
                        _g.label = 2;
                    case 2:
                        if (refresh) {
                            return [2 /*return*/, dispatch('refreshOrdersHistory', { resolvedFromCache: resolvedFromCache, pageSize: pageSize, currentPage: currentPage })];
                        }
                        else {
                            if (!resolvedFromCache) {
                                Promise.resolve(null);
                            }
                        }
                        return [2 /*return*/];
                }
            });
        });
    },
    sessionAfterAuthorized: function (_a, _b) {
        var dispatch = _a.dispatch;
        var _c = _b.refresh, refresh = _c === void 0 ? _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["onlineHelper"].isOnline : _c, _d = _b.useCache, useCache = _d === void 0 ? true : _d;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].info('User session authorised ', 'user')();
                        return [4 /*yield*/, dispatch('me', { refresh: refresh, useCache: useCache })];
                    case 1:
                        _e.sent();
                        return [4 /*yield*/, dispatch('getOrdersHistory', { refresh: refresh, useCache: useCache })];
                    case 2:
                        _e.sent();
                        return [2 /*return*/];
                }
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/user/store/getters.ts":
/*!********************************************!*\
  !*** ./core/modules/user/store/getters.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getters = {
    isLoggedIn: function (state) {
        return state.current !== null;
    },
    isLocalDataLoaded: function (state) { return state.local_data_loaded; },
    getUserToken: function (state) {
        return state.token;
    },
    getOrdersHistory: function (state) {
        return state.orders_history ? state.orders_history.items : [];
    },
    getToken: function (state) {
        return state.token;
    },
    getUserEmail: function (state, getters) {
        return getters.isLoggedIn ? state.current.email : null;
    }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/user/store/index.ts":
/*!******************************************!*\
  !*** ./core/modules/user/store/index.ts ***!
  \******************************************/
/*! exports provided: userStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "userStore", function() { return userStore; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/user/store/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getters */ "./core/modules/user/store/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./core/modules/user/store/mutations.ts");



var userStore = {
    namespaced: true,
    state: {
        token: '',
        refreshToken: '',
        groupToken: '',
        groupId: null,
        current: null,
        current_storecode: '',
        session_started: new Date(),
        orders_history: null,
        local_data_loaded: false
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_1__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/user/store/mutation-types.ts":
/*!***************************************************!*\
  !*** ./core/modules/user/store/mutation-types.ts ***!
  \***************************************************/
/*! exports provided: SN_USER, USER_NEWSLETTER_SIGNUP, USER_TOKEN_CHANGED, USER_INFO_LOADED, USER_ORDERS_HISTORY_LOADED, USER_START_SESSION, USER_END_SESSION, USER_UPDATE_PREFERENCES, USER_GROUP_TOKEN_CHANGED, USER_GROUP_CHANGED, USER_LOCAL_DATA_LOADED */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_USER", function() { return SN_USER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_NEWSLETTER_SIGNUP", function() { return USER_NEWSLETTER_SIGNUP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_TOKEN_CHANGED", function() { return USER_TOKEN_CHANGED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_INFO_LOADED", function() { return USER_INFO_LOADED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_ORDERS_HISTORY_LOADED", function() { return USER_ORDERS_HISTORY_LOADED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_START_SESSION", function() { return USER_START_SESSION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_END_SESSION", function() { return USER_END_SESSION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_UPDATE_PREFERENCES", function() { return USER_UPDATE_PREFERENCES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_GROUP_TOKEN_CHANGED", function() { return USER_GROUP_TOKEN_CHANGED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_GROUP_CHANGED", function() { return USER_GROUP_CHANGED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_LOCAL_DATA_LOADED", function() { return USER_LOCAL_DATA_LOADED; });
var SN_USER = 'user';
var USER_NEWSLETTER_SIGNUP = SN_USER + '/NEWSLETTER_SIGNUP';
var USER_TOKEN_CHANGED = SN_USER + '/TOKEN_CHANGED';
var USER_INFO_LOADED = SN_USER + '/INFO_LOADED';
var USER_ORDERS_HISTORY_LOADED = SN_USER + '/ORDERS_HISTORY_LOADED';
var USER_START_SESSION = SN_USER + '/START_SESSION';
var USER_END_SESSION = SN_USER + '/END_SESSION';
var USER_UPDATE_PREFERENCES = SN_USER + '/UPDATE_PREFERENCES';
var USER_GROUP_TOKEN_CHANGED = SN_USER + '/GROUP_TOKEN_CHANGED';
var USER_GROUP_CHANGED = SN_USER + '/GROUP_ID_CHANGED';
var USER_LOCAL_DATA_LOADED = SN_USER + '/LOCAL_DATA_LOADED';


/***/ }),

/***/ "./core/modules/user/store/mutations.ts":
/*!**********************************************!*\
  !*** ./core/modules/user/store/mutations.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/user/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
var _a;


var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_TOKEN_CHANGED"]] = function (state, payload) {
        state.token = payload.newToken;
        if (payload.meta && payload.meta.refreshToken) {
            state.refreshToken = payload.meta.refreshToken; // store the refresh token
            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].log('Refresh token is set to' + state.refreshToken, 'user')();
        }
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_START_SESSION"]] = function (state) {
        state.session_started = new Date();
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_GROUP_TOKEN_CHANGED"]] = function (state, token) {
        state.groupToken = token;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_GROUP_CHANGED"]] = function (state, groupId) {
        state.groupId = groupId;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_INFO_LOADED"]] = function (state, currentUser) {
        state.current = currentUser;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_ORDERS_HISTORY_LOADED"]] = function (state, ordersHistory) {
        state.orders_history = ordersHistory;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_END_SESSION"]] = function (state) {
        state.token = '';
        state.current = null;
        state.session_started = null;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_LOCAL_DATA_LOADED"]] = function (state, readed) {
        if (readed === void 0) { readed = false; }
        state.local_data_loaded = readed;
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/wishlist/index.ts":
/*!****************************************!*\
  !*** ./core/modules/wishlist/index.ts ***!
  \****************************************/
/*! exports provided: WishlistModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WishlistModule", function() { return WishlistModule; });
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store */ "./core/modules/wishlist/store/index.ts");
/* harmony import */ var _store_whishListPersistPlugin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store/whishListPersistPlugin */ "./core/modules/wishlist/store/whishListPersistPlugin.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");



var WishlistModule = function (_a) {
    var store = _a.store;
    _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_2__["StorageManager"].init('wishlist');
    store.registerModule('wishlist', _store__WEBPACK_IMPORTED_MODULE_0__["wishlistStore"]);
    store.subscribe(_store_whishListPersistPlugin__WEBPACK_IMPORTED_MODULE_1__["default"]);
};


/***/ }),

/***/ "./core/modules/wishlist/store/actions.ts":
/*!************************************************!*\
  !*** ./core/modules/wishlist/store/actions.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/wishlist/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


var actions = {
    clear: function (context) {
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_DEL_ALL_ITEMS"], []);
    },
    load: function (_a, force) {
        var commit = _a.commit, getters = _a.getters, dispatch = _a.dispatch;
        if (force === void 0) { force = false; }
        return __awaiter(this, void 0, void 0, function () {
            var storedItems;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!force && getters.isWishlistLoaded)
                            return [2 /*return*/];
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_WISHLIST_LOADED"]);
                        return [4 /*yield*/, dispatch('loadFromCache')];
                    case 1:
                        storedItems = _b.sent();
                        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_LOAD_WISH"], storedItems);
                        return [2 /*return*/];
                }
            });
        });
    },
    loadFromCache: function () {
        var wishlistStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].get('wishlist');
        return wishlistStorage.getItem('current-wishlist');
    },
    addItem: function (_a, product) {
        var commit = _a.commit;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_ADD_ITEM"], { product: product });
    },
    removeItem: function (_a, product) {
        var commit = _a.commit;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_DEL_ITEM"], { product: product });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/modules/wishlist/store/getters.ts":
/*!************************************************!*\
  !*** ./core/modules/wishlist/store/getters.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getters = {
    isOnWishlist: function (state) { return function (product) {
        return state.items.some(function (p) { return p.sku === product.sku; });
    }; },
    isWishlistLoaded: function (state) { return state.loaded; },
    getWishlistItemsCount: function (state) { return state.items.length; }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/modules/wishlist/store/index.ts":
/*!**********************************************!*\
  !*** ./core/modules/wishlist/store/index.ts ***!
  \**********************************************/
/*! exports provided: wishlistStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "wishlistStore", function() { return wishlistStore; });
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions */ "./core/modules/wishlist/store/actions.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutations */ "./core/modules/wishlist/store/mutations.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getters */ "./core/modules/wishlist/store/getters.ts");



var wishlistStore = {
    namespaced: true,
    state: {
        loaded: false,
        items: []
    },
    actions: _actions__WEBPACK_IMPORTED_MODULE_0__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_1__["default"],
    getters: _getters__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./core/modules/wishlist/store/mutation-types.ts":
/*!*******************************************************!*\
  !*** ./core/modules/wishlist/store/mutation-types.ts ***!
  \*******************************************************/
/*! exports provided: SN_WISHLIST, WISH_ADD_ITEM, WISH_DEL_ITEM, WISH_DEL_ALL_ITEMS, WISH_LOAD_WISH, SET_WISHLIST_LOADED */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_WISHLIST", function() { return SN_WISHLIST; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WISH_ADD_ITEM", function() { return WISH_ADD_ITEM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WISH_DEL_ITEM", function() { return WISH_DEL_ITEM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WISH_DEL_ALL_ITEMS", function() { return WISH_DEL_ALL_ITEMS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WISH_LOAD_WISH", function() { return WISH_LOAD_WISH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SET_WISHLIST_LOADED", function() { return SET_WISHLIST_LOADED; });
var SN_WISHLIST = 'wishlist';
var WISH_ADD_ITEM = SN_WISHLIST + '/ADD';
var WISH_DEL_ITEM = SN_WISHLIST + '/DEL';
var WISH_DEL_ALL_ITEMS = SN_WISHLIST + '/DEL_ALL';
var WISH_LOAD_WISH = SN_WISHLIST + '/LOAD';
var SET_WISHLIST_LOADED = SN_WISHLIST + "/SET_WISHLIST_LOADED";


/***/ }),

/***/ "./core/modules/wishlist/store/mutations.ts":
/*!**************************************************!*\
  !*** ./core/modules/wishlist/store/mutations.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/wishlist/store/mutation-types.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var _a;

var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_ADD_ITEM"]] = function (state, _a) {
        var product = _a.product;
        var record = state.items.find(function (p) { return p.sku === product.sku; });
        if (!record) {
            state.items.push(__assign(__assign({}, product), { qty: 1 }));
        }
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_DEL_ITEM"]] = function (state, _a) {
        var product = _a.product;
        state.items = state.items.filter(function (p) { return p.sku !== product.sku; });
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_LOAD_WISH"]] = function (state, storedItems) {
        if (storedItems === void 0) { storedItems = []; }
        state.items = storedItems || [];
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_DEL_ALL_ITEMS"]] = function (state) {
        state.items = [];
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_WISHLIST_LOADED"]] = function (state, isLoaded) {
        if (isLoaded === void 0) { isLoaded = true; }
        state.loaded = isLoaded;
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./core/modules/wishlist/store/whishListPersistPlugin.ts":
/*!***************************************************************!*\
  !*** ./core/modules/wishlist/store/whishListPersistPlugin.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/modules/wishlist/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");


var mutationToWatch = [_mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_ADD_ITEM"], _mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_DEL_ITEM"], _mutation_types__WEBPACK_IMPORTED_MODULE_0__["WISH_DEL_ALL_ITEMS"]]
    .map(function (m) { return "wishlist/" + m; });
var whishListPersistPlugin = function (mutation, state) {
    var whishListStorage = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_1__["StorageManager"].get('wishlist');
    if (mutationToWatch.includes(mutation.type)) {
        whishListStorage.setItem('current-wishlist', state.wishlist.items);
    }
};
/* harmony default export */ __webpack_exports__["default"] = (whishListPersistPlugin);


/***/ }),

/***/ "./core/scripts/resolvers/resolveGraphQL.js":
/*!**************************************************!*\
  !*** ./core/scripts/resolvers/resolveGraphQL.js ***!
  \**************************************************/
/*! exports provided: getApolloProvider, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getApolloProvider", function() { return getApolloProvider; });
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }






var getApolloProvider = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
    var ApolloModule, VueApollo, HttpLinkModule, HttpLink, uri, host, port, httpLink, ApolloClientModule, ApolloClient, inMemoryCacheModule, InMemoryCache, apolloClient, loading, apolloProvider;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!(config__WEBPACK_IMPORTED_MODULE_0__["server"].api === 'graphql')) {
              _context.next = 26;
              break;
            }

            _context.next = 3;
            return __webpack_require__.e(/*! import() | vsf-graphql */ "vendors~vsf-graphql").then(__webpack_require__.bind(null, /*! vue-apollo */ "./node_modules/vue-apollo/dist/vue-apollo.esm.js"));

          case 3:
            ApolloModule = _context.sent;
            VueApollo = ApolloModule["default"];
            Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["once"])('__VUE_EXTEND_GQL__', function () {
              vue__WEBPACK_IMPORTED_MODULE_1__["default"].use(VueApollo);
            });
            _context.next = 8;
            return __webpack_require__.e(/*! import() | vsf-graphql */ "vendors~vsf-graphql").then(__webpack_require__.bind(null, /*! apollo-link-http */ "./node_modules/apollo-link-http/lib/bundle.esm.js"));

          case 8:
            HttpLinkModule = _context.sent;
            HttpLink = HttpLinkModule.HttpLink;

            if (_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_3__["isServer"] && (config__WEBPACK_IMPORTED_MODULE_0__["graphql"].host_ssr || config__WEBPACK_IMPORTED_MODULE_0__["graphql"].port_ssr)) {
              host = config__WEBPACK_IMPORTED_MODULE_0__["graphql"].host_ssr || config__WEBPACK_IMPORTED_MODULE_0__["graphql"].host;
              port = config__WEBPACK_IMPORTED_MODULE_0__["graphql"].port_ssr || config__WEBPACK_IMPORTED_MODULE_0__["graphql"].port;
              uri = host.indexOf('://') >= 0 ? host : config__WEBPACK_IMPORTED_MODULE_0__["server"].protocol + '://' + host + ':' + port + '/graphql';
            } else {
              uri = config__WEBPACK_IMPORTED_MODULE_0__["graphql"].host.indexOf('://') >= 0 ? config__WEBPACK_IMPORTED_MODULE_0__["graphql"].host : config__WEBPACK_IMPORTED_MODULE_0__["server"].protocol + '://' + config__WEBPACK_IMPORTED_MODULE_0__["graphql"].host + ':' + config__WEBPACK_IMPORTED_MODULE_0__["graphql"].port + '/graphql';
            }

            httpLink = new HttpLink({
              uri: uri
            });
            _context.next = 14;
            return __webpack_require__.e(/*! import() | vsf-graphql */ "vendors~vsf-graphql").then(__webpack_require__.bind(null, /*! apollo-client */ "./node_modules/apollo-client/bundle.esm.js"));

          case 14:
            ApolloClientModule = _context.sent;
            ApolloClient = ApolloClientModule["default"];
            _context.next = 18;
            return __webpack_require__.e(/*! import() | vsf-graphql */ "vendors~vsf-graphql").then(__webpack_require__.bind(null, /*! apollo-cache-inmemory */ "./node_modules/apollo-cache-inmemory/lib/bundle.esm.js"));

          case 18:
            inMemoryCacheModule = _context.sent;
            InMemoryCache = inMemoryCacheModule.InMemoryCache;
            apolloClient = new ApolloClient({
              link: httpLink,
              cache: new InMemoryCache(),
              connectToDevTools: true
            });
            loading = 0;
            apolloProvider = new VueApollo({
              clients: {
                a: apolloClient
              },
              defaultClient: apolloClient,
              defaultOptions: {// $loadingKey: 'loading',
              },
              watchLoading: function watchLoading(state, mod) {
                loading += mod;
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].log('Global loading', loading, mod)();
              },
              errorHandler: function errorHandler(error) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].log('Global error handler')();
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].error(error)();
              }
            });
            return _context.abrupt("return", apolloProvider);

          case 26:
            return _context.abrupt("return", null);

          case 27:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));

  return function getApolloProvider() {
    return _ref.apply(this, arguments);
  };
}();
/* harmony default export */ __webpack_exports__["default"] = ({
  getApolloProvider: getApolloProvider
});

/***/ }),

/***/ "./core/service-worker/registration.js":
/*!*********************************************!*\
  !*** ./core/service-worker/registration.js ***!
  \*********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var register_service_worker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! register-service-worker */ "./node_modules/register-service-worker/index.js");
/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config */ "./core/build/config.json");
var config__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! config */ "./core/build/config.json", 1);
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");




if ( false || config__WEBPACK_IMPORTED_MODULE_1__["server"].devServiceWorker) {
  Object(register_service_worker__WEBPACK_IMPORTED_MODULE_0__["register"])("/service-worker.js", {
    ready: function ready() {
      _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].log('App is being served from cache by a service worker.');
    },
    cached: function cached() {
      _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].log('Content has been cached for offline use.')();
    },
    updated: function updated(registration) {
      _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].log('New content is available, please refresh.')();
    },
    offline: function offline() {
      _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].log('No internet connection found. App is running in offline mode.');
    },
    error: function error(_error) {
      _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].error('Error during service worker registration:', _error)();
    }
  });
}

/***/ }),

/***/ "./core/store/actions.ts":
/*!*******************************!*\
  !*** ./core/store/actions.ts ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/store/mutation-types.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

var actions = {
    resetUserInvalidateLock: function (_a) {
        var commit = _a.commit;
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_b) {
                commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_TOKEN_INVALIDATE_LOCK_CHANGED"], 0);
                return [2 /*return*/];
            });
        });
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./core/store/getters.ts":
/*!*******************************!*\
  !*** ./core/store/getters.ts ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getters = {
    getCurrentStoreView: function (state) { return state.storeView; }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./core/store/index.ts":
/*!*****************************!*\
  !*** ./core/store/index.ts ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vuex */ "./node_modules/vuex/dist/vuex.esm.js");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions */ "./core/store/actions.ts");
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getters */ "./core/store/getters.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mutations */ "./core/store/mutations.ts");






Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_2__["once"])('__VUE_EXTEND_VUEX__', function () {
    vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vuex__WEBPACK_IMPORTED_MODULE_1__["default"]);
});
var state = {
    version: '',
    __DEMO_MODE__: false,
    config: {},
    storeView: {},
    twoStageCachingDelta1: 0,
    twoStageCachingDelta2: 0,
    twoStageCachingDisabled: false,
    userTokenInvalidated: null,
    userTokenInvalidateAttemptsCount: 0,
    userTokenInvalidateLock: 0
};
var rootStore = new vuex__WEBPACK_IMPORTED_MODULE_1__["default"].Store({
    // TODO: refactor it to return just the constructor to avoid event-bus and i18n shenanigans; challenge: the singleton management OR add i18n and eventBus here to rootStore instance?  modules: {
    state: state,
    actions: _actions__WEBPACK_IMPORTED_MODULE_3__["default"],
    getters: _getters__WEBPACK_IMPORTED_MODULE_4__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_5__["default"]
});
/* harmony default export */ __webpack_exports__["default"] = (rootStore);


/***/ }),

/***/ "./core/store/mutation-types.ts":
/*!**************************************!*\
  !*** ./core/store/mutation-types.ts ***!
  \**************************************/
/*! exports provided: SN_ROOT, USER_TOKEN_INVALIDATE_LOCK_CHANGED */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_ROOT", function() { return SN_ROOT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "USER_TOKEN_INVALIDATE_LOCK_CHANGED", function() { return USER_TOKEN_INVALIDATE_LOCK_CHANGED; });
var SN_ROOT = 'root';
var USER_TOKEN_INVALIDATE_LOCK_CHANGED = SN_ROOT + '/USER_TOKEN_INVALIDATE_LOCK_CHANGED';


/***/ }),

/***/ "./core/store/mutations.ts":
/*!*********************************!*\
  !*** ./core/store/mutations.ts ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./core/store/mutation-types.ts");
var _a;

var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["USER_TOKEN_INVALIDATE_LOCK_CHANGED"]] = function (state, payload) {
        state.userTokenInvalidateLock = payload;
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=script&lang=js&":
/*!*****************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
//
//
//
//
//
//
//
//
//
//
//
//
//
/* harmony default export */ __webpack_exports__["default"] = ({
  name: 'PaymentCashOnDelivery',
  data: function data() {
    return {};
  }
});

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=script&lang=js&":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/themes/default/App.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vuex */ "./node_modules/vuex/dist/vuex.esm.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

//
//
//
//
//
//
//
//


var DefaultLayout = function DefaultLayout() {
  return Promise.all(/*! import() | vsf-layout-default */[__webpack_require__.e("vendors~vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-home~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-home~vsf-layout-default~vsf-product"), __webpack_require__.e("vsf-layout-default~vsf-layout-minimal"), __webpack_require__.e("vsf-layout-default")]).then(__webpack_require__.bind(null, /*! ./layouts/Default */ "./src/themes/default/layouts/Default.vue"));
};

var EmptyLayout = function EmptyLayout() {
  return __webpack_require__.e(/*! import() | vsf-layout-empty */ "vsf-layout-empty").then(__webpack_require__.bind(null, /*! ./layouts/Empty */ "./src/themes/default/layouts/Empty.vue"));
};

var MinimalLayout = function MinimalLayout() {
  return Promise.all(/*! import() | vsf-layout-minimal */[__webpack_require__.e("vsf-layout-default~vsf-layout-minimal"), __webpack_require__.e("vsf-layout-minimal")]).then(__webpack_require__.bind(null, /*! ./layouts/Minimal */ "./src/themes/default/layouts/Minimal.vue"));
};

/* harmony default export */ __webpack_exports__["default"] = ({
  data: function data() {
    return {
      ordersData: []
    };
  },
  computed: _objectSpread(_objectSpread({}, Object(vuex__WEBPACK_IMPORTED_MODULE_0__["mapState"])({
    overlayActive: function overlayActive(state) {
      return state.ui.overlay;
    }
  })), {}, {
    layout: function layout() {
      return "".concat(this.$route.meta.layout || "default", "-layout");
    }
  }),
  components: {
    DefaultLayout: DefaultLayout,
    EmptyLayout: EmptyLayout,
    MinimalLayout: MinimalLayout
  }
});

/***/ }),

/***/ "./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=style&index=0&lang=scss&":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??postcss!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib??vue-loader-options!./src/themes/default/App.vue?vue&type=style&index=0&lang=scss& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(false);
// imports


// module
exports.push([module.i, "* {\n  font-family: \"Muli\", sans-serif;\n}\nbody {\n  overflow-y: auto !important;\n  font-family: \"Muli\", sans-serif;\n  font-weight: 300;\n  font-style: normal;\n}\nbutton {\n  outline: none !important;\n}\na {\n  outline: none;\n}\na:hover {\n  border: none;\n  color: #4f4f4f;\n}\na:hover::after {\n    height: 0px !important;\n}\n.material-icons {\n  font-family: \"Material Icons\" !important;\n}\n.modal .modal-dialog-aside {\n  width: 350px;\n  max-width: 80%;\n  height: 100%;\n  margin: 0;\n  -webkit-transform: translate(0);\n      -ms-transform: translate(0);\n          transform: translate(0);\n  -webkit-transition: -webkit-transform 0.2s;\n  transition: -webkit-transform 0.2s;\n  -o-transition: transform 0.2s;\n  transition: transform 0.2s;\n  transition: transform 0.2s, -webkit-transform 0.2s;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n  background-color: #f5f5f5;\n}\n::-webkit-scrollbar {\n  width: 10px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 10px;\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  background-color: #e0e0e0;\n}\n.modal .modal-dialog-aside .modal-content {\n  height: inherit;\n  border: 0;\n  border-radius: 0;\n}\n.modal .modal-dialog-aside .modal-content .modal-body {\n  overflow-y: auto;\n}\n.modal.fixed-left .modal-dialog-aside {\n  margin-left: auto;\n  -webkit-transform: translateX(100%);\n      -ms-transform: translateX(100%);\n          transform: translateX(100%);\n}\n.modal.fixed-right .modal-dialog-aside {\n  margin-right: auto;\n  -webkit-transform: translateX(-100%);\n      -ms-transform: translateX(-100%);\n          transform: translateX(-100%);\n}\n.modal.show .modal-dialog-aside {\n  -webkit-transform: translateX(0);\n      -ms-transform: translateX(0);\n          transform: translateX(0);\n}\n.btn-add-to-cart {\n  background-color: #f29e0d;\n  color: #fff;\n  font-weight: 700;\n  font-style: normal;\n  text-transform: uppercase;\n  letter-spacing: 0.03125em;\n  -moz-appearance: none;\n  -webkit-appearance: none;\n  font-size: 14px;\n  line-height: normal;\n  letter-spacing: 0.5px;\n  padding: 11px 6px;\n  position: relative;\n  -webkit-transition: 0.3s all;\n  -o-transition: 0.3s all;\n  transition: 0.3s all;\n  text-decoration: none;\n  outline: none;\n  text-align: center;\n  border-radius: 0;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-align: center;\n      align-items: center;\n  height: inherit;\n  border: 1px solid transparent;\n  overflow: hidden;\n}\n.btn-add-to-cart:hover {\n  background-color: #c27e0a !important;\n  text-decoration: none !important;\n  outline: none !important;\n  color: #fff;\n}\n", ""]);

// exports


/***/ }),

/***/ "./node_modules/dayjs/locale lazy recursive en$":
/*!*************************************************************!*\
  !*** ./node_modules/dayjs/locale lazy en$ namespace object ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en": [
		"./node_modules/dayjs/locale/en.js",
		"dayjs-locales-en"
	]
};
function webpackAsyncContext(req) {
	if(!__webpack_require__.o(map, req)) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}

	var ids = map[req], id = ids[0];
	return __webpack_require__.e(ids[1]).then(function() {
		return __webpack_require__.t(id, 7);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./node_modules/dayjs/locale lazy recursive en$";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=template&id=f0c48530&":
/*!*******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=template&id=f0c48530& ***!
  \*******************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _vm._m(0)
}
var staticRenderFns = [
  function() {
    var _vm = this
    var _h = _vm.$createElement
    var _c = _vm._self._c || _h
    return _c(
      "div",
      { staticClass: "mb15 mt20 payment-cash-on-delivery-info-container" },
      [
        _c("h4", { staticClass: "mt0" }, [
          _vm._v("\n    Payment Information\n  ")
        ]),
        _vm._v(" "),
        _c("div", { staticClass: "bg-cl-secondary px20 py20" }, [
          _c("p", [
            _vm._v(
              "\n      You are going to pay for this order upon delivery.\n    "
            )
          ])
        ])
      ]
    )
  }
]
render._withStripped = true



/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=template&id=aba5b9f2&":
/*!*************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/themes/default/App.vue?vue&type=template&id=aba5b9f2& ***!
  \*************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c(
    "div",
    { attrs: { id: "app" } },
    [_c(_vm.layout, { tag: "component" }, [_c("router-view")], 1)],
    1
  )
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ "./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=style&index=0&lang=scss&":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-style-loader!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??postcss!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib??vue-loader-options!./src/themes/default/App.vue?vue&type=style&index=0&lang=scss& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../../node_modules/css-loader!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss& */ "./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=style&index=0&lang=scss&");
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = __webpack_require__(/*! ../../../node_modules/vue-style-loader/lib/addStylesClient.js */ "./node_modules/vue-style-loader/lib/addStylesClient.js").default
var update = add("9b24982c", content, false, {});
// Hot Module Replacement
if(true) {
 // When the styles change, update the <style> tags
 if(!content.locals) {
   module.hot.accept(/*! !../../../node_modules/css-loader!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss& */ "./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=style&index=0&lang=scss&", function() {
     var newContent = __webpack_require__(/*! !../../../node_modules/css-loader!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss& */ "./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=style&index=0&lang=scss&");
     if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
     update(newContent);
   });
 }
 // When the module is disposed, remove the <style> tags
 module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ "./src/modules/client.ts":
/*!*******************************!*\
  !*** ./src/modules/client.ts ***!
  \*******************************/
/*! exports provided: registerClientModules, registerModules */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerClientModules", function() { return registerClientModules; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerModules", function() { return registerModules; });
/* harmony import */ var _vue_storefront_core_modules_catalog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog */ "./core/modules/catalog/index.ts");
/* harmony import */ var _vue_storefront_core_modules_catalog_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog-next */ "./core/modules/catalog-next/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/modules/cart */ "./core/modules/cart/index.ts");
/* harmony import */ var _vue_storefront_core_modules_checkout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/modules/checkout */ "./core/modules/checkout/index.ts");
/* harmony import */ var _vue_storefront_core_modules_compare__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/modules/compare */ "./core/modules/compare/index.ts");
/* harmony import */ var _vue_storefront_core_modules_wishlist__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/modules/wishlist */ "./core/modules/wishlist/index.ts");
/* harmony import */ var _vue_storefront_core_modules_notification__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vue-storefront/core/modules/notification */ "./core/modules/notification/index.ts");
/* harmony import */ var _vue_storefront_core_modules_url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vue-storefront/core/modules/url */ "./core/modules/url/index.ts");
/* harmony import */ var _vue_storefront_core_modules_breadcrumbs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vue-storefront/core/modules/breadcrumbs */ "./core/modules/breadcrumbs/index.ts");
/* harmony import */ var _vue_storefront_core_modules_user__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @vue-storefront/core/modules/user */ "./core/modules/user/index.ts");
/* harmony import */ var _vue_storefront_core_modules_cms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vue-storefront/core/modules/cms */ "./core/modules/cms/index.ts");
/* harmony import */ var _payment_backend_methods__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./payment-backend-methods */ "./src/modules/payment-backend-methods/index.ts");
/* harmony import */ var _payment_cash_on_delivery__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./payment-cash-on-delivery */ "./src/modules/payment-cash-on-delivery/index.ts");
/* harmony import */ var _vue_storefront_core_modules_newsletter__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @vue-storefront/core/modules/newsletter */ "./core/modules/newsletter/index.ts");
/* harmony import */ var _vue_storefront_core_modules_initial_resources__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @vue-storefront/core/modules/initial-resources */ "./core/modules/initial-resources/index.ts");
/* harmony import */ var _vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @vue-storefront/core/lib/modules */ "./core/lib/modules.ts");











// import { GoogleTagManagerModule } from './google-tag-manager';
// import { AmpRendererModule } from './amp-renderer';




// import { DeviceModule } from './device/index';

// TODO:distributed across proper pages BEFORE 1.11
function registerClientModules() {
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_url__WEBPACK_IMPORTED_MODULE_7__["UrlModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_catalog__WEBPACK_IMPORTED_MODULE_0__["CatalogModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_checkout__WEBPACK_IMPORTED_MODULE_3__["CheckoutModule"]); // To Checkout
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_cart__WEBPACK_IMPORTED_MODULE_2__["CartModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_payment_backend_methods__WEBPACK_IMPORTED_MODULE_11__["PaymentBackendMethodsModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_payment_cash_on_delivery__WEBPACK_IMPORTED_MODULE_12__["PaymentCashOnDeliveryModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_wishlist__WEBPACK_IMPORTED_MODULE_5__["WishlistModule"]); // Trigger on wishlist icon click
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_notification__WEBPACK_IMPORTED_MODULE_6__["NotificationModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_user__WEBPACK_IMPORTED_MODULE_9__["UserModule"]); // Trigger on user icon click
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_catalog_next__WEBPACK_IMPORTED_MODULE_1__["CatalogNextModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_compare__WEBPACK_IMPORTED_MODULE_4__["CompareModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_breadcrumbs__WEBPACK_IMPORTED_MODULE_8__["BreadcrumbsModule"]);
    // registerModule(GoogleTagManagerModule)
    // registerModule(AmpRendererModule)
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_cms__WEBPACK_IMPORTED_MODULE_10__["CmsModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_newsletter__WEBPACK_IMPORTED_MODULE_13__["NewsletterModule"]);
    Object(_vue_storefront_core_lib_modules__WEBPACK_IMPORTED_MODULE_15__["registerModule"])(_vue_storefront_core_modules_initial_resources__WEBPACK_IMPORTED_MODULE_14__["InitialResourcesModule"]);
    // registerModule(DeviceModule)
}
// Deprecated API, will be removed in 2.0
var registerModules = [
// Example
];


/***/ }),

/***/ "./src/modules/payment-backend-methods/index.ts":
/*!******************************************************!*\
  !*** ./src/modules/payment-backend-methods/index.ts ***!
  \******************************************************/
/*! exports provided: PaymentBackendMethodsModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PaymentBackendMethodsModule", function() { return PaymentBackendMethodsModule; });
/* harmony import */ var _store_mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store/mutation-types */ "./src/modules/payment-backend-methods/store/mutation-types.ts");
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");
var _a;



var PaymentBackendMethodsStore = {
    namespaced: true,
    state: {
        methods: null
    },
    mutations: (_a = {},
        _a[_store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_BACKEND_PAYMENT_METHODS"]] = function (state, paymentMethods) {
            state.methods = paymentMethods;
        },
        _a)
};
var PaymentBackendMethodsModule = function (_a) {
    var store = _a.store;
    store.registerModule('payment-backend-methods', PaymentBackendMethodsStore);
    var correctPaymentMethod = false;
    // Place the order. Payload is empty as we don't have any specific info to add for this payment method '{}'
    var placeOrder = function () {
        if (correctPaymentMethod) {
            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_2__["default"].$emit('checkout-do-placeOrder', {});
        }
    };
    if (!_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_1__["isServer"]) {
        // Update the methods
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_2__["default"].$on('set-unique-payment-methods', function (methods) {
            store.commit('payment-backend-methods/' + _store_mutation_types__WEBPACK_IMPORTED_MODULE_0__["SET_BACKEND_PAYMENT_METHODS"], methods);
        });
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_2__["default"].$on('checkout-before-placeOrder', placeOrder);
        // Mount the info component when required
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_2__["default"].$on('checkout-payment-method-changed', function (paymentMethodCode) {
            var methods = store.state['payment-backend-methods'].methods;
            if (methods !== null && methods.find(function (item) { return (item.code === paymentMethodCode && item.is_server_method === true); })) {
                correctPaymentMethod = true;
            }
            else {
                correctPaymentMethod = false;
            }
        });
    }
};


/***/ }),

/***/ "./src/modules/payment-backend-methods/store/mutation-types.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/payment-backend-methods/store/mutation-types.ts ***!
  \*********************************************************************/
/*! exports provided: SET_BACKEND_PAYMENT_METHODS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SET_BACKEND_PAYMENT_METHODS", function() { return SET_BACKEND_PAYMENT_METHODS; });
var SET_BACKEND_PAYMENT_METHODS = 'SET_BACKEND_PAYMENT_METHODS';


/***/ }),

/***/ "./src/modules/payment-cash-on-delivery/components/Info.vue":
/*!******************************************************************!*\
  !*** ./src/modules/payment-cash-on-delivery/components/Info.vue ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Info_vue_vue_type_template_id_f0c48530___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Info.vue?vue&type=template&id=f0c48530& */ "./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=template&id=f0c48530&");
/* harmony import */ var _Info_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Info.vue?vue&type=script&lang=js& */ "./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport *//* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");





/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__["default"])(
  _Info_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _Info_vue_vue_type_template_id_f0c48530___WEBPACK_IMPORTED_MODULE_0__["render"],
  _Info_vue_vue_type_template_id_f0c48530___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (true) {
  var api = __webpack_require__(/*! ./node_modules/vue-hot-reload-api/dist/index.js */ "./node_modules/vue-hot-reload-api/dist/index.js")
  api.install(__webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js"))
  if (api.compatible) {
    module.hot.accept()
    if (!api.isRecorded('f0c48530')) {
      api.createRecord('f0c48530', component.options)
    } else {
      api.reload('f0c48530', component.options)
    }
    module.hot.accept(/*! ./Info.vue?vue&type=template&id=f0c48530& */ "./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=template&id=f0c48530&", function(__WEBPACK_OUTDATED_DEPENDENCIES__) { /* harmony import */ _Info_vue_vue_type_template_id_f0c48530___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Info.vue?vue&type=template&id=f0c48530& */ "./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=template&id=f0c48530&");
(function () {
      api.rerender('f0c48530', {
        render: _Info_vue_vue_type_template_id_f0c48530___WEBPACK_IMPORTED_MODULE_0__["render"],
        staticRenderFns: _Info_vue_vue_type_template_id_f0c48530___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]
      })
    })(__WEBPACK_OUTDATED_DEPENDENCIES__); }.bind(this))
  }
}
component.options.__file = "src/modules/payment-cash-on-delivery/components/Info.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=script&lang=js&":
/*!*******************************************************************************************!*\
  !*** ./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_Info_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/vue-loader/lib??vue-loader-options!./Info.vue?vue&type=script&lang=js& */ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_Info_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=template&id=f0c48530&":
/*!*************************************************************************************************!*\
  !*** ./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=template&id=f0c48530& ***!
  \*************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_Info_vue_vue_type_template_id_f0c48530___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib??vue-loader-options!./Info.vue?vue&type=template&id=f0c48530& */ "./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/modules/payment-cash-on-delivery/components/Info.vue?vue&type=template&id=f0c48530&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_Info_vue_vue_type_template_id_f0c48530___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_Info_vue_vue_type_template_id_f0c48530___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/modules/payment-cash-on-delivery/index.ts":
/*!*******************************************************!*\
  !*** ./src/modules/payment-cash-on-delivery/index.ts ***!
  \*******************************************************/
/*! exports provided: PaymentCashOnDeliveryModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PaymentCashOnDeliveryModule", function() { return PaymentCashOnDeliveryModule; });
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _components_Info_vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/Info.vue */ "./src/modules/payment-cash-on-delivery/components/Info.vue");
/* harmony import */ var _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vue-storefront/core/compatibility/plugins/event-bus */ "./core/compatibility/plugins/event-bus/index.js");




var PaymentCashOnDeliveryModule = function (_a) {
    var store = _a.store;
    // Place the order. Payload is empty as we don't have any specific info to add for this payment method '{}'
    var correctPaymentMethod = false;
    var placeOrder = function () {
        if (correctPaymentMethod) {
            _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$emit('checkout-do-placeOrder', {});
        }
    };
    // Update the methods
    var paymentMethodConfig = {
        'title': 'Cash on delivery',
        'code': 'cashondelivery',
        'cost': 0,
        'costInclTax': 0,
        'default': true,
        'offline': true,
        'is_server_method': false
    };
    store.dispatch('checkout/addPaymentMethod', paymentMethodConfig);
    if (!_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_0__["isServer"]) {
        // Update the methods
        var paymentMethodConfig_1 = {
            'title': 'Cash on delivery',
            'code': 'cashondelivery',
            'cost': 0,
            'cost_incl_tax': 0,
            'default': true,
            'offline': true,
            'is_server_method': false
        };
        store.dispatch('checkout/addPaymentMethod', paymentMethodConfig_1);
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$on('checkout-before-placeOrder', placeOrder);
        // Mount the info component when required.
        _vue_storefront_core_compatibility_plugins_event_bus__WEBPACK_IMPORTED_MODULE_3__["default"].$on('checkout-payment-method-changed', function (paymentMethodCode) {
            var methods = store.state['payment-backend-methods'].methods;
            if (methods) {
                var method = methods.find(function (item) { return (item.code === paymentMethodCode); });
                if (paymentMethodCode === 'cashondelivery' && ((typeof method !== 'undefined' && !method.is_server_method) || typeof method === 'undefined') /* otherwise it could be a `payment-backend-methods` module */) {
                    correctPaymentMethod = true;
                    // Dynamically inject a component into the order review section (optional)
                    var Component = vue__WEBPACK_IMPORTED_MODULE_1__["default"].extend(_components_Info_vue__WEBPACK_IMPORTED_MODULE_2__["default"]);
                    var componentInstance = (new Component());
                    componentInstance.$mount('#checkout-order-review-additional');
                }
                else {
                    correctPaymentMethod = false;
                }
            }
        });
    }
};


/***/ }),

/***/ "./src/search/adapter lazy recursive ^\\.\\/.*\\/searchAdapter$":
/*!**************************************************************************!*\
  !*** ./src/search/adapter lazy ^\.\/.*\/searchAdapter$ namespace object ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./graphql/searchAdapter": [
		"./src/search/adapter/graphql/searchAdapter.ts",
		"vsf-search-adapter-graphql-searchAdapter"
	]
};
function webpackAsyncContext(req) {
	if(!__webpack_require__.o(map, req)) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}

	var ids = map[req], id = ids[0];
	return __webpack_require__.e(ids[1]).then(function() {
		return __webpack_require__(id);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./src/search/adapter lazy recursive ^\\.\\/.*\\/searchAdapter$";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./src/themes/default/App.vue":
/*!************************************!*\
  !*** ./src/themes/default/App.vue ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _App_vue_vue_type_template_id_aba5b9f2___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./App.vue?vue&type=template&id=aba5b9f2& */ "./src/themes/default/App.vue?vue&type=template&id=aba5b9f2&");
/* harmony import */ var _App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./App.vue?vue&type=script&lang=js& */ "./src/themes/default/App.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport *//* harmony import */ var _App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./App.vue?vue&type=style&index=0&lang=scss& */ "./src/themes/default/App.vue?vue&type=style&index=0&lang=scss&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");






/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _App_vue_vue_type_template_id_aba5b9f2___WEBPACK_IMPORTED_MODULE_0__["render"],
  _App_vue_vue_type_template_id_aba5b9f2___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (true) {
  var api = __webpack_require__(/*! ./node_modules/vue-hot-reload-api/dist/index.js */ "./node_modules/vue-hot-reload-api/dist/index.js")
  api.install(__webpack_require__(/*! vue */ "./src/themes/default/node_modules/vue/dist/vue.runtime.esm.js"))
  if (api.compatible) {
    module.hot.accept()
    if (!api.isRecorded('aba5b9f2')) {
      api.createRecord('aba5b9f2', component.options)
    } else {
      api.reload('aba5b9f2', component.options)
    }
    module.hot.accept(/*! ./App.vue?vue&type=template&id=aba5b9f2& */ "./src/themes/default/App.vue?vue&type=template&id=aba5b9f2&", function(__WEBPACK_OUTDATED_DEPENDENCIES__) { /* harmony import */ _App_vue_vue_type_template_id_aba5b9f2___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./App.vue?vue&type=template&id=aba5b9f2& */ "./src/themes/default/App.vue?vue&type=template&id=aba5b9f2&");
(function () {
      api.rerender('aba5b9f2', {
        render: _App_vue_vue_type_template_id_aba5b9f2___WEBPACK_IMPORTED_MODULE_0__["render"],
        staticRenderFns: _App_vue_vue_type_template_id_aba5b9f2___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]
      })
    })(__WEBPACK_OUTDATED_DEPENDENCIES__); }.bind(this))
  }
}
component.options.__file = "src/themes/default/App.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./src/themes/default/App.vue?vue&type=script&lang=js&":
/*!*************************************************************!*\
  !*** ./src/themes/default/App.vue?vue&type=script&lang=js& ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/babel-loader/lib!../../../node_modules/vue-loader/lib??vue-loader-options!./App.vue?vue&type=script&lang=js& */ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./src/themes/default/App.vue?vue&type=style&index=0&lang=scss&":
/*!**********************************************************************!*\
  !*** ./src/themes/default/App.vue?vue&type=style&index=0&lang=scss& ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_postcss_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-style-loader!../../../node_modules/css-loader!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss& */ "./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=style&index=0&lang=scss&");
/* harmony import */ var _node_modules_vue_style_loader_index_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_postcss_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_postcss_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_postcss_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_postcss_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_style_loader_index_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_postcss_node_modules_sass_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./src/themes/default/App.vue?vue&type=template&id=aba5b9f2&":
/*!*******************************************************************!*\
  !*** ./src/themes/default/App.vue?vue&type=template&id=aba5b9f2& ***!
  \*******************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_template_id_aba5b9f2___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib??vue-loader-options!./App.vue?vue&type=template&id=aba5b9f2& */ "./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/themes/default/App.vue?vue&type=template&id=aba5b9f2&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_template_id_aba5b9f2___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_template_id_aba5b9f2___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./src/themes/default/index.js":
/*!*************************************!*\
  !*** ./src/themes/default/index.js ***!
  \*************************************/
/*! exports provided: themeEntry, initTheme */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "themeEntry", function() { return themeEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initTheme", function() { return initTheme; });
/* harmony import */ var _vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/multistore */ "./core/lib/multistore.ts");
/* harmony import */ var _App_vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./App.vue */ "./src/themes/default/App.vue");
/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./router */ "./src/themes/default/router/index.js");
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! vue */ "./src/themes/default/node_modules/vue/dist/vue.runtime.esm.js");
/* harmony import */ var _vue_storefront_core_lib_passive_listeners__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vue-storefront/core/lib/passive-listeners */ "./core/lib/passive-listeners.js");
/* harmony import */ var _vue_storefront_core_lib_passive_listeners__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_vue_storefront_core_lib_passive_listeners__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vue-storefront/core/helpers */ "./core/helpers/index.ts");
/* harmony import */ var _store_cart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./store/cart */ "./src/themes/default/store/cart/index.ts");
/* harmony import */ var vue_progressbar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! vue-progressbar */ "./node_modules/vue-progressbar/dist/vue-progressbar.js");
/* harmony import */ var vue_progressbar__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(vue_progressbar__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var theme_store_claims__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! theme/store/claims */ "./src/themes/default/store/claims.ts");
/* harmony import */ var theme_store_homepage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! theme/store/homepage */ "./src/themes/default/store/homepage.ts");
/* harmony import */ var theme_store_ui__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! theme/store/ui */ "./src/themes/default/store/ui.ts");
/* harmony import */ var theme_store_promoted_offers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! theme/store/promoted-offers */ "./src/themes/default/store/promoted-offers.ts");
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var bootstrap_dist_css_bootstrap_css__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! bootstrap/dist/css/bootstrap.css */ "./node_modules/bootstrap/dist/css/bootstrap.css");
/* harmony import */ var bootstrap_dist_css_bootstrap_css__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(bootstrap_dist_css_bootstrap_css__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var bootstrap_vue_dist_bootstrap_vue_css__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! bootstrap-vue/dist/bootstrap-vue.css */ "./node_modules/bootstrap-vue/dist/bootstrap-vue.css");
/* harmony import */ var bootstrap_vue_dist_bootstrap_vue_css__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(bootstrap_vue_dist_bootstrap_vue_css__WEBPACK_IMPORTED_MODULE_15__);
















Object(_vue_storefront_core_helpers__WEBPACK_IMPORTED_MODULE_5__["once"])('__VUE_EXTEND_DROPPOINT_VPB__', function () {
  vue__WEBPACK_IMPORTED_MODULE_3__["default"].use(vue_progressbar__WEBPACK_IMPORTED_MODULE_7___default.a);
});
var themeEntry = _App_vue__WEBPACK_IMPORTED_MODULE_1__["default"];

function initTheme(app, router, store, config, ssrContext) {
  store.registerModule('themeCart', _store_cart__WEBPACK_IMPORTED_MODULE_6__["module"]); // Register theme routes for the current store. In a single store setup this will add routes exactly as they are in the router definition file '[theme]/router/index.js'
  // In a multistore setup, it depends on the config setting 'appendStoreCode' for the current store
  // - true = the store code will be added to the front of all routes, e.g. name: 'de-checkout', path: '/de/checkout'
  // - false = the store code will not be added. In this case you need to define custom routes for each of your stores
  // You can also define custom routes to use a different component, for example for German storeView checkout
  // To do so, exclude the desired storeView from the config.storeViews.mapStoreUrlsFor, set appendStoreCode = false, and map all the urls by your own like:
  // { name: 'de-checkout', path: '/checkout', component: CheckoutCustomized }
  // The 4th parameter is the route priority - a higher number will ensure the theme routes override any module routes. The default is 0.

  Object(_vue_storefront_core_lib_multistore__WEBPACK_IMPORTED_MODULE_0__["setupMultistoreRoutes"])(config, router, _router__WEBPACK_IMPORTED_MODULE_2__["default"], 10);
  _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_12__["StorageManager"].init('claims');
  store.registerModule('claims', theme_store_claims__WEBPACK_IMPORTED_MODULE_8__["claimsStore"]);
  store.registerModule('homepage', theme_store_homepage__WEBPACK_IMPORTED_MODULE_9__["homepageStore"]);
  store.registerModule('ui', theme_store_ui__WEBPACK_IMPORTED_MODULE_10__["uiStore"]);
  store.registerModule('promoted', theme_store_promoted_offers__WEBPACK_IMPORTED_MODULE_11__["promotedStore"]);
}



/***/ }),

/***/ "./src/themes/default/resource lazy recursive ^\\.\\/.*\\.json$":
/*!**************************************************************************!*\
  !*** ./src/themes/default/resource lazy ^\.\/.*\.json$ namespace object ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./banners/de_main-image.json": [
		"./src/themes/default/resource/banners/de_main-image.json",
		"vsf-head-img-banners-de_main-image-json"
	],
	"./banners/de_promoted_offers.json": [
		"./src/themes/default/resource/banners/de_promoted_offers.json",
		"vsf-head-img-banners-de_promoted_offers-json"
	],
	"./banners/it_main-image.json": [
		"./src/themes/default/resource/banners/it_main-image.json",
		"vsf-head-img-banners-it_main-image-json"
	],
	"./banners/it_promoted_offers.json": [
		"./src/themes/default/resource/banners/it_promoted_offers.json",
		"vsf-head-img-banners-it_promoted_offers-json"
	],
	"./main-image.json": [
		"./src/themes/default/resource/main-image.json",
		"vsf-head-img-main-image-json"
	],
	"./promoted_offers.json": [
		"./src/themes/default/resource/promoted_offers.json",
		"vsf-head-img-promoted_offers-json"
	],
	"./slider.json": [
		"./src/themes/default/resource/slider.json",
		"vsf-head-img-slider-json"
	]
};
function webpackAsyncContext(req) {
	if(!__webpack_require__.o(map, req)) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}

	var ids = map[req], id = ids[0];
	return __webpack_require__.e(ids[1]).then(function() {
		return __webpack_require__.t(id, 3);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./src/themes/default/resource lazy recursive ^\\.\\/.*\\.json$";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./src/themes/default/router/index.js":
/*!********************************************!*\
  !*** ./src/themes/default/router/index.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var Home = function Home() {
  return Promise.all(/*! import() | vsf-home */[__webpack_require__.e("vendors~vsf-category~vsf-home~vsf-not-found~vsf-product"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-compare~vsf-home~vsf-my-account~vsf-not-found~vsf-product~vsf-reset-password~vsf-se~7be3d2b6"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-home~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-home~vsf-layout-default~vsf-product"), __webpack_require__.e("vsf-home~vsf-product"), __webpack_require__.e("vsf-home")]).then(__webpack_require__.bind(null, /*! theme/pages/Home.vue */ "./src/themes/default/pages/Home.vue"));
};

var PageNotFound = function PageNotFound() {
  return Promise.all(/*! import() | vsf-not-found */[__webpack_require__.e("vendors~vsf-category~vsf-home~vsf-not-found~vsf-product"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-compare~vsf-home~vsf-my-account~vsf-not-found~vsf-product~vsf-reset-password~vsf-se~7be3d2b6"), __webpack_require__.e("vsf-not-found")]).then(__webpack_require__.bind(null, /*! theme/pages/PageNotFound.vue */ "./src/themes/default/pages/PageNotFound.vue"));
};

var ErrorPage = function ErrorPage() {
  return __webpack_require__.e(/*! import() | vsf-error */ "vsf-error").then(__webpack_require__.bind(null, /*! theme/pages/Error.vue */ "./src/themes/default/pages/Error.vue"));
};

var Product = function Product() {
  return Promise.all(/*! import() | vsf-product */[__webpack_require__.e("vendors~vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vendors~vsf-category~vsf-home~vsf-not-found~vsf-product"), __webpack_require__.e("vendors~vsf-product"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-compare~vsf-home~vsf-my-account~vsf-not-found~vsf-product~vsf-reset-password~vsf-se~7be3d2b6"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-home~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-microcart~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-home~vsf-layout-default~vsf-product"), __webpack_require__.e("vsf-microcart~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-home~vsf-product"), __webpack_require__.e("vsf-category~vsf-product"), __webpack_require__.e("vsf-product")]).then(__webpack_require__.bind(null, /*! theme/pages/Product.vue */ "./src/themes/default/pages/Product.vue"));
};

var Category = function Category() {
  return Promise.all(/*! import() | vsf-category */[__webpack_require__.e("vendors~vsf-category~vsf-home~vsf-not-found~vsf-product"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-compare~vsf-home~vsf-my-account~vsf-not-found~vsf-product~vsf-reset-password~vsf-se~7be3d2b6"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-home~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-microcart~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-product"), __webpack_require__.e("vsf-category")]).then(__webpack_require__.bind(null, /*! theme/pages/Category.vue */ "./src/themes/default/pages/Category.vue"));
};

var CmsPage = function CmsPage() {
  return __webpack_require__.e(/*! import() | vsf-cms */ "vsf-cms").then(__webpack_require__.bind(null, /*! theme/pages/CmsPage.vue */ "./src/themes/default/pages/CmsPage.vue"));
};

var Checkout = function Checkout() {
  return Promise.all(/*! import() | vsf-checkout */[__webpack_require__.e("vendors~vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vendors~vsf-checkout"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-home~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-home~vsf-layout-default~vsf-product"), __webpack_require__.e("vsf-checkout~vsf-my-account"), __webpack_require__.e("vsf-checkout~vsf-microcart"), __webpack_require__.e("vsf-checkout")]).then(__webpack_require__.bind(null, /*! theme/pages/Checkout.vue */ "./src/themes/default/pages/Checkout.vue"));
};

var Compare = function Compare() {
  return Promise.all(/*! import() | vsf-compare */[__webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-compare~vsf-home~vsf-my-account~vsf-not-found~vsf-product~vsf-reset-password~vsf-se~7be3d2b6"), __webpack_require__.e("vsf-compare")]).then(__webpack_require__.bind(null, /*! theme/pages/Compare.vue */ "./src/themes/default/pages/Compare.vue"));
};

var MyAccount = function MyAccount() {
  return Promise.all(/*! import() | vsf-my-account */[__webpack_require__.e("vendors~vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-compare~vsf-home~vsf-my-account~vsf-not-found~vsf-product~vsf-reset-password~vsf-se~7be3d2b6"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-home~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-my-account"), __webpack_require__.e("vsf-my-account")]).then(__webpack_require__.bind(null, /*! theme/pages/MyAccount.vue */ "./src/themes/default/pages/MyAccount.vue"));
};

var Static = function Static() {
  return __webpack_require__.e(/*! import() | vsf-static */ "vsf-static").then(__webpack_require__.bind(null, /*! theme/pages/Static.vue */ "./src/themes/default/pages/Static.vue"));
};

var ResetPassword = function ResetPassword() {
  return Promise.all(/*! import() | vsf-reset-password */[__webpack_require__.e("vendors~vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-compare~vsf-home~vsf-my-account~vsf-not-found~vsf-product~vsf-reset-password~vsf-se~7be3d2b6"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-home~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-microcart~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-microcart~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-microcart~vsf-reset-password"), __webpack_require__.e("vsf-reset-password")]).then(__webpack_require__.bind(null, /*! theme/pages/ResetPassword.vue */ "./src/themes/default/pages/ResetPassword.vue"));
};

var Cart = function Cart() {
  return Promise.all(/*! import() | vsf-reset-password */[__webpack_require__.e("vendors~vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-compare~vsf-home~vsf-my-account~vsf-not-found~vsf-product~vsf-reset-password~vsf-se~7be3d2b6"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-home~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-microcart~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-microcart~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-microcart~vsf-reset-password"), __webpack_require__.e("vsf-reset-password")]).then(__webpack_require__.bind(null, /*! theme/pages/Cart.vue */ "./src/themes/default/pages/Cart.vue"));
};

var Search = function Search() {
  return Promise.all(/*! import() | vsf-reset-password */[__webpack_require__.e("vendors~vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-compare~vsf-home~vsf-microcart~vsf-my-account~vsf-not-found~vsf-produc~926be9b0"), __webpack_require__.e("vsf-category~vsf-compare~vsf-home~vsf-my-account~vsf-not-found~vsf-product~vsf-reset-password~vsf-se~7be3d2b6"), __webpack_require__.e("vsf-category~vsf-checkout~vsf-home~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-checkout~vsf-layout-default~vsf-my-account~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-category~vsf-microcart~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-microcart~vsf-product~vsf-reset-password"), __webpack_require__.e("vsf-microcart~vsf-reset-password"), __webpack_require__.e("vsf-reset-password")]).then(__webpack_require__.bind(null, /*! theme/pages/Search.vue */ "./src/themes/default/pages/Search.vue"));
};

var routes = [{
  name: 'home',
  path: '/',
  component: Home,
  alias: '/pwa.html'
}, {
  name: 'checkout',
  path: '/checkout',
  component: Checkout
}, {
  name: 'legal',
  path: '/legal',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Legal Notice'
  },
  meta: {
    title: 'Legal Notice',
    description: 'Legal Notice - example of description usage'
  }
}, {
  name: 'privacy',
  path: '/privacy',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Privacy'
  }
}, {
  name: 'magazine',
  path: '/magazine',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Magazine'
  }
}, {
  name: 'sale',
  path: '/sale',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Sale'
  }
}, {
  name: 'order-tracking',
  path: '/order-tracking',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Track my Order'
  }
}, {
  name: 'my-account',
  path: '/my-account',
  component: MyAccount
}, {
  name: 'my-shipping-details',
  path: '/my-account/shipping-details',
  component: MyAccount,
  props: {
    activeBlock: 'MyShippingDetails'
  }
}, {
  name: 'my-newsletter',
  path: '/my-account/newsletter',
  component: MyAccount,
  props: {
    activeBlock: 'MyNewsletter'
  }
}, {
  name: 'my-orders',
  path: '/my-account/orders',
  component: MyAccount,
  props: {
    activeBlock: 'MyOrders'
  }
}, {
  name: 'my-order',
  path: '/my-account/orders/:orderId',
  component: MyAccount,
  props: {
    activeBlock: 'MyOrder'
  }
}, {
  name: 'my-recently-viewed',
  path: '/my-account/recently-viewed',
  component: MyAccount,
  props: {
    activeBlock: 'MyRecentlyViewed'
  }
}, {
  name: 'about-us',
  path: '/about-us',
  component: Static,
  props: {
    page: 'lorem',
    title: 'About us'
  }
}, {
  name: 'customer-service',
  path: '/customer-service',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Customer service'
  }
}, {
  name: 'store-locator',
  path: '/store-locator',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Store locator'
  }
}, {
  name: 'size-guide',
  path: '/size-guide',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Size guide'
  }
}, {
  name: 'gift-card',
  path: '/gift-card',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Gift card'
  }
}, {
  name: 'delivery',
  path: '/delivery',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Delivery'
  }
}, {
  name: 'returns',
  path: '/returns',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Returns policy'
  }
}, {
  name: 'order-from-catalog',
  path: '/order-from-catalog',
  component: Static,
  props: {
    page: 'lorem',
    title: 'Order from catalog'
  }
}, {
  name: 'contact',
  path: '/contact',
  component: Static,
  props: {
    page: 'contact',
    title: 'Contact'
  }
}, {
  name: 'compare',
  path: '/compare',
  component: Compare,
  props: {
    title: 'Compare Products'
  }
}, {
  name: 'error',
  path: '/error',
  component: ErrorPage,
  meta: {
    layout: 'minimal'
  }
}, {
  name: 'virtual-product',
  path: '/p/:parentSku/:slug',
  component: Product
}, // :sku param can be marked as optional with ":sku?" (https://github.com/vuejs/vue-router/blob/dev/examples/route-matching/app.js#L16), but it requires a lot of work to adjust the rest of the site
{
  name: 'bundle-product',
  path: '/p/:parentSku/:slug',
  component: Product
}, // :sku param can be marked as optional with ":sku?" (https://github.com/vuejs/vue-router/blob/dev/examples/route-matching/app.js#L16), but it requires a lot of work to adjust the rest of the site
{
  name: 'simple-product',
  path: '/p/:parentSku/:slug',
  component: Product
}, // :sku param can be marked as optional with ":sku?" (https://github.com/vuejs/vue-router/blob/dev/examples/route-matching/app.js#L16), but it requires a lot of work to adjust the rest of the site
{
  name: 'downloadable-product',
  path: '/p/:parentSku/:slug',
  component: Product
}, // :sku param can be marked as optional with ":sku?" (https://github.com/vuejs/vue-router/blob/dev/examples/route-matching/app.js#L16), but it requires a lot of work to adjust the rest of the site
{
  name: 'grouped-product',
  path: '/p/:parentSku/:slug',
  component: Product
}, // :sku param can be marked as optional with ":sku?" (https://github.com/vuejs/vue-router/blob/dev/examples/route-matching/app.js#L16), but it requires a lot of work to adjust the rest of the site
{
  name: 'configurable-product',
  path: '/p/:parentSku/:slug/:childSku',
  component: Product
}, // :sku param can be marked as optional with ":sku?" (https://github.com/vuejs/vue-router/blob/dev/examples/route-matching/app.js#L16), but it requires a lot of work to adjust the rest of the site
{
  name: 'product',
  path: '/p/:parentSku/:slug/:childSku',
  component: Product
}, // :sku param can be marked as optional with ":sku?" (https://github.com/vuejs/vue-router/blob/dev/examples/route-matching/app.js#L16), but it requires a lot of work to adjust the rest of the site
{
  name: 'category',
  path: '/c/:slug',
  component: Category
}, {
  name: 'cms-page',
  path: '/i/:slug',
  component: CmsPage
}, {
  name: 'create-password',
  path: '/create-password',
  component: ResetPassword
}, {
  name: 'page-not-found',
  path: '*',
  component: PageNotFound
}, {
  name: 'cart',
  path: '/cart',
  component: Cart
}, {
  name: 'search',
  path: '/search',
  component: Search
}];
/* harmony default export */ __webpack_exports__["default"] = (routes);

/***/ }),

/***/ "./src/themes/default/store/cart/actions.ts":
/*!**************************************************!*\
  !*** ./src/themes/default/store/cart/actions.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./src/themes/default/store/cart/mutation-types.ts");
/* harmony import */ var _helpers_getCurrentConfigurationFromTotals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers/getCurrentConfigurationFromTotals */ "./src/themes/default/store/cart/helpers/getCurrentConfigurationFromTotals.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


var actions = {
    configureProduct: function (context, _a) {
        var product = _a.product;
        return __awaiter(this, void 0, void 0, function () {
            var configuration, parentProduct;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!(product.type_id === 'simple')) return [3 /*break*/, 2];
                        configuration = Object(_helpers_getCurrentConfigurationFromTotals__WEBPACK_IMPORTED_MODULE_1__["default"])(product);
                        return [4 /*yield*/, context.dispatch('product/findConfigurableParent', { product: product, configuration: configuration }, { root: true })];
                    case 1:
                        parentProduct = _b.sent();
                        return [2 /*return*/, context.dispatch('cart/updateItem', { product: parentProduct }, { root: true })];
                    case 2: return [2 /*return*/, Promise.resolve()];
                }
            });
        });
    },
    openEditMode: function (context, _a) {
        var product = _a.product, selectedOptions = _a.selectedOptions;
        context.commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_OPEN_EDIT_MODE"], { productId: product.id, qty: product.qty, selectedOptions: selectedOptions });
    },
    editModeSetFilters: function (_a, _b) {
        var commit = _a.commit;
        var filterOptions = _b.filterOptions;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_EDIT_MODE_SET_FILTERS"], { filterOptions: filterOptions });
    },
    editModeSetQty: function (_a, _b) {
        var commit = _a.commit;
        var qty = _b.qty;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_EDIT_QTY"], { qty: qty });
    },
    closeEditMode: function (_a) {
        var commit = _a.commit;
        commit(_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_CLOSE_EDIT_MODE"]);
    }
};
/* harmony default export */ __webpack_exports__["default"] = (actions);


/***/ }),

/***/ "./src/themes/default/store/cart/getters.ts":
/*!**************************************************!*\
  !*** ./src/themes/default/store/cart/getters.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getters = {
    isEditMode: function (state) {
        return state.editMode !== null;
    },
    getEditingProductId: function (state, getters) {
        return getters.isEditMode && state.editMode.productId;
    },
    getSelectedOptions: function (state, getters) {
        return getters.isEditMode && state.editMode.selectedOptions;
    },
    getEditingQty: function (state, getters) {
        return getters.isEditMode && state.editMode.qty;
    }
};
/* harmony default export */ __webpack_exports__["default"] = (getters);


/***/ }),

/***/ "./src/themes/default/store/cart/helpers/getCurrentConfigurationFromTotals.ts":
/*!************************************************************************************!*\
  !*** ./src/themes/default/store/cart/helpers/getCurrentConfigurationFromTotals.ts ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getCurrentConfigurationFromTotals = function (product) {
    var options = product.totals.options;
    var colorLabel = options.find(function (opt) { return opt.label === 'Color'; }).value;
    var sizeLabel = options.find(function (opt) { return opt.label === 'Size'; }).value;
    return {
        size: { id: product.size, attribute_code: 'size', label: sizeLabel },
        color: { id: product.color, attribute_code: 'color', label: colorLabel }
    };
};
/* harmony default export */ __webpack_exports__["default"] = (getCurrentConfigurationFromTotals);


/***/ }),

/***/ "./src/themes/default/store/cart/index.ts":
/*!************************************************!*\
  !*** ./src/themes/default/store/cart/index.ts ***!
  \************************************************/
/*! exports provided: module */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "module", function() { return module; });
/* harmony import */ var _getters__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getters */ "./src/themes/default/store/cart/getters.ts");
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions */ "./src/themes/default/store/cart/actions.ts");
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mutations */ "./src/themes/default/store/cart/mutations.ts");



var module = {
    namespaced: true,
    state: {
        editMode: null
    },
    getters: _getters__WEBPACK_IMPORTED_MODULE_0__["default"],
    actions: _actions__WEBPACK_IMPORTED_MODULE_1__["default"],
    mutations: _mutations__WEBPACK_IMPORTED_MODULE_2__["default"]
};


/***/ }),

/***/ "./src/themes/default/store/cart/mutation-types.ts":
/*!*********************************************************!*\
  !*** ./src/themes/default/store/cart/mutation-types.ts ***!
  \*********************************************************/
/*! exports provided: SN_CART, CART_OPEN_EDIT_MODE, CART_EDIT_MODE_SET_FILTERS, CART_EDIT_QTY, CART_CLOSE_EDIT_MODE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SN_CART", function() { return SN_CART; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_OPEN_EDIT_MODE", function() { return CART_OPEN_EDIT_MODE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_EDIT_MODE_SET_FILTERS", function() { return CART_EDIT_MODE_SET_FILTERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_EDIT_QTY", function() { return CART_EDIT_QTY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CART_CLOSE_EDIT_MODE", function() { return CART_CLOSE_EDIT_MODE; });
var SN_CART = 'cart';
var CART_OPEN_EDIT_MODE = SN_CART + '/CART_OPEN_EDIT_MODE';
var CART_EDIT_MODE_SET_FILTERS = SN_CART + '/CART_EDIT_MODE_SET_FILTERS';
var CART_EDIT_QTY = SN_CART + '/CART_EDIT_QTY';
var CART_CLOSE_EDIT_MODE = SN_CART + '/CART_CLOSE_EDIT_MODE';


/***/ }),

/***/ "./src/themes/default/store/cart/mutations.ts":
/*!****************************************************!*\
  !*** ./src/themes/default/store/cart/mutations.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _mutation_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mutation-types */ "./src/themes/default/store/cart/mutation-types.ts");
var _a;

var mutations = (_a = {},
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_OPEN_EDIT_MODE"]] = function (state, _a) {
        var productId = _a.productId, selectedOptions = _a.selectedOptions, qty = _a.qty;
        state.editMode = { productId: productId, selectedOptions: selectedOptions, qty: qty };
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_EDIT_MODE_SET_FILTERS"]] = function (state, _a) {
        var filterOptions = _a.filterOptions;
        state.editMode.selectedOptions[filterOptions.type] = filterOptions;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_EDIT_QTY"]] = function (state, _a) {
        var qty = _a.qty;
        state.editMode.qty = qty;
    },
    _a[_mutation_types__WEBPACK_IMPORTED_MODULE_0__["CART_CLOSE_EDIT_MODE"]] = function (state) {
        state.editMode = null;
    },
    _a);
/* harmony default export */ __webpack_exports__["default"] = (mutations);


/***/ }),

/***/ "./src/themes/default/store/claims.ts":
/*!********************************************!*\
  !*** ./src/themes/default/store/claims.ts ***!
  \********************************************/
/*! exports provided: claimsStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "claimsStore", function() { return claimsStore; });
/* harmony import */ var _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/storage-manager */ "./core/lib/storage-manager.ts");
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");


var claimsStore = {
    namespaced: true,
    actions: {
        set: function (context, _a) {
            var claimCode = _a.claimCode, value = _a.value, description = _a.description;
            var claimCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_0__["StorageManager"].get('claims');
            claimCollection.setItem(claimCode, {
                code: claimCode,
                created_at: new Date(),
                value: value,
                description: description
            }).catch(function (reason) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(reason); // it doesn't work on SSR
            });
        },
        unset: function (context, _a) {
            var claimCode = _a.claimCode;
            var claimCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_0__["StorageManager"].get('claims');
            claimCollection.removeItem(claimCode).catch(function (reason) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(reason); // it doesn't work on SSR
            });
        },
        check: function (context, _a) {
            var claimCode = _a.claimCode;
            var claimCollection = _vue_storefront_core_lib_storage_manager__WEBPACK_IMPORTED_MODULE_0__["StorageManager"].get('claims');
            return claimCollection.getItem(claimCode).catch(function (reason) {
                _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_1__["Logger"].error(reason); // it doesn't work on SSR
            });
        }
    }
};


/***/ }),

/***/ "./src/themes/default/store/homepage.ts":
/*!**********************************************!*\
  !*** ./src/themes/default/store/homepage.ts ***!
  \**********************************************/
/*! exports provided: homepageStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "homepageStore", function() { return homepageStore; });
/* harmony import */ var _vue_storefront_core_modules_catalog_queries_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/modules/catalog/queries/common */ "./core/modules/catalog/queries/common.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

var homepageStore = {
    namespaced: true,
    state: {
        new_collection: [],
        bestsellers: []
    },
    actions: {
        fetchNewCollection: function (_a) {
            var commit = _a.commit, dispatch = _a.dispatch;
            return __awaiter(this, void 0, void 0, function () {
                var newProductsQuery, items;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            newProductsQuery = Object(_vue_storefront_core_modules_catalog_queries_common__WEBPACK_IMPORTED_MODULE_0__["prepareQuery"])({ queryConfig: 'newProducts' });
                            return [4 /*yield*/, dispatch('product/findProducts', {
                                    query: newProductsQuery,
                                    size: 8,
                                    sort: 'created_at:desc',
                                    options: {
                                        populateRequestCacheTags: true,
                                        prefetchGroupProducts: false
                                    }
                                }, { root: true })];
                        case 1:
                            items = (_b.sent()).items;
                            commit('SET_NEW_COLLECTION', items);
                            return [2 /*return*/];
                    }
                });
            });
        },
        loadBestsellers: function (_a) {
            var commit = _a.commit, dispatch = _a.dispatch;
            return __awaiter(this, void 0, void 0, function () {
                var items;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0: return [4 /*yield*/, dispatch('product/findProducts', {
                                query: Object(_vue_storefront_core_modules_catalog_queries_common__WEBPACK_IMPORTED_MODULE_0__["prepareQuery"])({ queryConfig: 'bestSellers' }),
                                size: 8,
                                sort: 'created_at:desc',
                                options: {
                                    populateRequestCacheTags: true,
                                    prefetchGroupProducts: false
                                }
                            }, { root: true })];
                        case 1:
                            items = (_b.sent()).items;
                            commit('SET_BESTSELLERS', items);
                            return [2 /*return*/];
                    }
                });
            });
        }
    },
    mutations: {
        SET_NEW_COLLECTION: function (state, products) {
            state.new_collection = products || [];
        },
        SET_BESTSELLERS: function (state, bestsellers) {
            state.bestsellers = bestsellers;
        }
    },
    getters: {
        getEverythingNewCollection: function (state) {
            return state.new_collection;
        },
        getBestsellers: function (state) {
            return state.bestsellers;
        }
    }
};


/***/ }),

/***/ "./src/themes/default/store/promoted-offers.ts":
/*!*****************************************************!*\
  !*** ./src/themes/default/store/promoted-offers.ts ***!
  \*****************************************************/
/*! exports provided: promotedStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "promotedStore", function() { return promotedStore; });
/* harmony import */ var _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue-storefront/core/lib/logger */ "./core/lib/logger.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

var promotedStore = {
    namespaced: true,
    state: {
        banners: {
            mainBanners: [],
            smallBanners: [],
            productBanners: []
        },
        headImage: null
    },
    getters: {
        getPromotedOffers: function (state) {
            return state.banners;
        },
        getHeadImage: function (state) { return state.headImage; }
    },
    actions: {
        updatePromotedOffers: function (_a, data) {
            var commit = _a.commit, rootState = _a.rootState;
            return __awaiter(this, void 0, void 0, function () {
                var promotedBannersResource, promotedOffersModule, err_1;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            promotedBannersResource = rootState.storeView && rootState.storeView.storeCode ? "banners/" + rootState.storeView.storeCode + "_promoted_offers" : "promoted_offers";
                            _b.label = 1;
                        case 1:
                            _b.trys.push([1, 3, , 4]);
                            return [4 /*yield*/, __webpack_require__("./src/themes/default/resource lazy recursive ^\\.\\/.*\\.json$")("./" + promotedBannersResource + ".json")];
                        case 2:
                            promotedOffersModule = _b.sent();
                            commit('updatePromotedOffers', promotedOffersModule);
                            return [3 /*break*/, 4];
                        case 3:
                            err_1 = _b.sent();
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].debug('Unable to load promotedOffers' + err_1)();
                            return [3 /*break*/, 4];
                        case 4: return [2 /*return*/];
                    }
                });
            });
        },
        updateHeadImage: function (_a, data) {
            var commit = _a.commit, rootState = _a.rootState;
            return __awaiter(this, void 0, void 0, function () {
                var mainImageResource, imageModule, err_2;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            mainImageResource = rootState.storeView && rootState.storeView.storeCode ? "banners/" + rootState.storeView.storeCode + "_main-image" : "main-image";
                            _b.label = 1;
                        case 1:
                            _b.trys.push([1, 3, , 4]);
                            return [4 /*yield*/, __webpack_require__("./src/themes/default/resource lazy recursive ^\\.\\/.*\\.json$")("./" + mainImageResource + ".json")];
                        case 2:
                            imageModule = _b.sent();
                            commit('SET_HEAD_IMAGE', imageModule.image);
                            return [3 /*break*/, 4];
                        case 3:
                            err_2 = _b.sent();
                            _vue_storefront_core_lib_logger__WEBPACK_IMPORTED_MODULE_0__["Logger"].debug('Unable to load headImage' + err_2)();
                            return [3 /*break*/, 4];
                        case 4: return [2 /*return*/];
                    }
                });
            });
        }
    },
    mutations: {
        updatePromotedOffers: function (state, data) {
            state.banners = data;
        },
        SET_HEAD_IMAGE: function (state, headImage) {
            state.headImage = headImage;
        }
    }
};


/***/ }),

/***/ "./src/themes/default/store/ui.ts":
/*!****************************************!*\
  !*** ./src/themes/default/store/ui.ts ***!
  \****************************************/
/*! exports provided: uiStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uiStore", function() { return uiStore; });
var uiStore = {
    namespaced: true,
    state: {
        sidebar: false,
        microcart: false,
        wishlist: false,
        searchpanel: false,
        newsletterPopup: false,
        overlay: false,
        loader: false,
        authElem: 'login',
        checkoutMode: false,
        openMyAccount: false,
        submenu: {
            depth: false,
            path: []
        }
    },
    mutations: {
        setCheckoutMode: function (state, action) {
            state.checkoutMode = action === true;
        },
        setMicrocart: function (state, action) {
            state.microcart = action === true;
            state.overlay = action === true;
        },
        setSidebar: function (state, action) {
            state.sidebar = action === true;
            state.overlay = action === true;
        },
        setSubmenu: function (state, _a) {
            var id = _a.id, depth = _a.depth;
            if (id) {
                state.submenu.path.push(id);
            }
            else if (state.submenu.path.length) {
                setTimeout(function () {
                    state.submenu.path.pop();
                }, 300);
            }
            state.submenu.depth = state.submenu.depth > 0 && depth;
        },
        setSearchpanel: function (state, action) {
            state.searchpanel = action === true;
            state.overlay = action === true;
        },
        setWishlist: function (state, action) {
            state.wishlist = action === true;
            state.overlay = action === true;
        },
        setOverlay: function (state, action) {
            state.overlay = action === true;
        },
        setLoader: function (state, action) {
            state.loader = action === true;
        },
        setAuthElem: function (state, action) {
            state.authElem = action;
        }
    },
    actions: {
        toggleMicrocart: function (_a) {
            var commit = _a.commit, state = _a.state;
            commit('setMicrocart', !state.microcart);
        },
        toggleWishlist: function (_a) {
            var commit = _a.commit, state = _a.state;
            commit('setWishlist', !state.wishlist);
        },
        closeMicrocart: function (_a) {
            var commit = _a.commit, state = _a.state;
            if (state.microcart)
                commit('setMicrocart', false);
        },
        closeWishlist: function (_a) {
            var commit = _a.commit, state = _a.state;
            if (state.wishlist)
                commit('setWishlist', false);
        }
    }
};


/***/ }),

/***/ 0:
/*!**********************************************************************************!*\
  !*** multi webpack-hot-middleware/client @babel/polyfill ./core/client-entry.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! webpack-hot-middleware/client */"./node_modules/webpack-hot-middleware/client.js");
__webpack_require__(/*! @babel/polyfill */"./node_modules/@babel/polyfill/lib/index.js");
module.exports = __webpack_require__(/*! ./core/client-entry.ts */"./core/client-entry.ts");


/***/ })

},[[0,"manifest","vendor"]]]);
//# sourceMappingURL=app.js.map